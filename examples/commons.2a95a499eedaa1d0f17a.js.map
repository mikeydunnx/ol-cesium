{"version":3,"sources":["webpack:///./node_modules/ol/xml.js","webpack:///./node_modules/ol/extent.js","webpack:///./node_modules/ol/proj/epsg3857.js","webpack:///./node_modules/ol/proj/epsg4326.js","webpack:///./node_modules/ol/proj/projections.js","webpack:///./node_modules/ol/proj.js","webpack:///./node_modules/ol/util.js","webpack:///./node_modules/ol/format/xsd.js","webpack:///./node_modules/ol/geom/GeometryType.js","webpack:///./node_modules/ol/array.js","webpack:///./node_modules/ol/events/EventType.js","webpack:///./node_modules/ol/events.js","webpack:///./node_modules/ol/render/canvas/LabelCache.js","webpack:///./node_modules/ol/render/canvas.js","webpack:///./node_modules/ol/transform.js","webpack:///./node_modules/ol/math.js","webpack:///./node_modules/ol/asserts.js","webpack:///./node_modules/ol/TileState.js","webpack:///./node_modules/ol/render/canvas/Instruction.js","webpack:///./node_modules/ol/obj.js","webpack:///./node_modules/ol/layer/BaseTile.js","webpack:///./node_modules/ol/layer/Tile.js","webpack:///./src/olcs/util.js","webpack:///./node_modules/ol/geom/GeometryLayout.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/ol/centerconstraint.js","webpack:///./node_modules/ol/resolutionconstraint.js","webpack:///./node_modules/ol/View.js","webpack:///./node_modules/ol/ViewProperty.js","webpack:///./src/olcs/core/OLImageryProvider.js","webpack:///./src/olcs/core.js","webpack:///./node_modules/ol/source/OSM.js","webpack:///./node_modules/ol/MapEvent.js","webpack:///./node_modules/ol/MapBrowserEvent.js","webpack:///./node_modules/ol/MapBrowserPointerEvent.js","webpack:///./node_modules/ol/pointer/EventType.js","webpack:///./node_modules/ol/MapBrowserEventHandler.js","webpack:///./node_modules/ol/MapProperty.js","webpack:///./node_modules/ol/structs/PriorityQueue.js","webpack:///./node_modules/ol/TileQueue.js","webpack:///./node_modules/ol/PluggableMap.js","webpack:///./node_modules/ol/render/canvas/Immediate.js","webpack:///./node_modules/ol/renderer/Map.js","webpack:///./node_modules/ol/render.js","webpack:///./node_modules/ol/renderer/Composite.js","webpack:///./node_modules/ol/Map.js","webpack:///./src/olcs/AutoRenderLoop.js","webpack:///./src/olcs/Camera.js","webpack:///./src/olcs/AbstractSynchronizer.js","webpack:///./node_modules/ol/source/Cluster.js","webpack:///./src/olcs/RasterSynchronizer.js","webpack:///./node_modules/ol/layer/VectorTileRenderType.js","webpack:///./node_modules/ol/renderer/canvas/VectorTileLayer.js","webpack:///./node_modules/ol/layer/VectorTile.js","webpack:///./src/olcs/core/VectorLayerCounterpart.js","webpack:///./src/olcs/FeatureConverter.js","webpack:///./src/olcs/VectorSynchronizer.js","webpack:///./src/olcs/SynchronizedOverlay.js","webpack:///./src/olcs/OverlaySynchronizer.js","webpack:///./src/olcs/OLCesium.js","webpack:///./node_modules/ol/style/Style.js","webpack:///./node_modules/ol/style/Stroke.js","webpack:///./node_modules/ol/dom.js","webpack:///./node_modules/ol/render/canvas/BuilderType.js","webpack:///./node_modules/ol/functions.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/style/Fill.js","webpack:///./node_modules/ol/Feature.js","webpack:///./node_modules/ol/MapBrowserEventType.js","webpack:///./node_modules/ol/geom/Point.js","webpack:///./node_modules/ol/ViewHint.js","webpack:///./node_modules/ol/layer/Property.js","webpack:///./node_modules/ol/control/Control.js","webpack:///./node_modules/ol/control/Attribution.js","webpack:///./node_modules/ol/control/Rotate.js","webpack:///./node_modules/ol/control/Zoom.js","webpack:///./node_modules/ol/control.js","webpack:///./node_modules/ol/featureloader.js","webpack:///./node_modules/ol/loadingstrategy.js","webpack:///./node_modules/ol/source/Vector.js","webpack:///./node_modules/ol/source/VectorEventType.js","webpack:///./node_modules/ol/structs/RBush.js","webpack:///./node_modules/ol/format/Feature.js","webpack:///./node_modules/ol/geom/LinearRing.js","webpack:///./node_modules/ol/geom/Polygon.js","webpack:///./node_modules/ol/source/State.js","webpack:///./node_modules/ol/css.js","webpack:///./node_modules/ol/style/IconOrigin.js","webpack:///./node_modules/ol/events/Event.js","webpack:///./node_modules/ol/geom/SimpleGeometry.js","webpack:///./node_modules/ol/proj/Units.js","webpack:///./node_modules/ol/tilecoord.js","webpack:///./node_modules/ol/size.js","webpack:///./node_modules/ol/extent/Relationship.js","webpack:///./node_modules/ol/easing.js","webpack:///./node_modules/ol/renderer/canvas/VectorLayer.js","webpack:///./node_modules/ol/layer/Vector.js","webpack:///./node_modules/ol/interaction/Property.js","webpack:///./node_modules/ol/interaction/Interaction.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol/geom/flat/transform.js","webpack:///./node_modules/ol/coordinate.js","webpack:///./node_modules/ol/reproj/common.js","webpack:///./node_modules/ol/CollectionEventType.js","webpack:///./node_modules/ol/has.js","webpack:///./node_modules/ol/style/IconAnchorUnits.js","webpack:///./node_modules/ol/geom/flat/deflate.js","webpack:///./node_modules/ol/geom/flat/inflate.js","webpack:///./node_modules/ol/Collection.js","webpack:///./node_modules/ol/layer/Layer.js","webpack:///./node_modules/ol/geom/flat/closest.js","webpack:///./node_modules/ol/geom/LineString.js","webpack:///./node_modules/ol/tilegrid.js","webpack:///./node_modules/ol/style/IconImage.js","webpack:///./node_modules/ol/style/Icon.js","webpack:///./node_modules/ol/colorlike.js","webpack:///./node_modules/ol/string.js","webpack:///./node_modules/ol/tileurlfunction.js","webpack:///./node_modules/ol/events/Target.js","webpack:///./node_modules/ol/geom/flat/simplify.js","webpack:///./node_modules/ol/Tile.js","webpack:///./node_modules/ol/ImageTile.js","webpack:///./node_modules/ol/reproj/Tile.js","webpack:///./node_modules/ol/source/TileEventType.js","webpack:///./node_modules/ol/source/UrlTile.js","webpack:///./node_modules/ol/source/TileImage.js","webpack:///./node_modules/ol/format/FormatType.js","webpack:///./node_modules/ol/geom/flat/contains.js","webpack:///./node_modules/ol/style/Text.js","webpack:///./node_modules/ol/renderer/vector.js","webpack:///./src/olcs/math.js","webpack:///./node_modules/ol/layer/Group.js","webpack:///./node_modules/ol/render/EventType.js","webpack:///./node_modules/ol/style/RegularShape.js","webpack:///./node_modules/ol/style/Circle.js","webpack:///./node_modules/ol/proj/transforms.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/color.js","webpack:///./node_modules/ol/render/canvas/Builder.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/reproj.js","webpack:///./node_modules/ol/rotationconstraint.js","webpack:///./node_modules/ol/layer/TileProperty.js","webpack:///./node_modules/ol/source/common.js","webpack:///./node_modules/ol/source/WMSServerType.js","webpack:///./node_modules/ol/geom/MultiLineString.js","webpack:///./node_modules/ol/layer/BaseImage.js","webpack:///./node_modules/ol/renderer/canvas/ImageLayer.js","webpack:///./node_modules/ol/layer/Image.js","webpack:///./node_modules/ol/uri.js","webpack:///./node_modules/ol/proj/Projection.js","webpack:///./node_modules/ol/Image.js","webpack:///./node_modules/ol/geom/flat/intersectsextent.js","webpack:///./node_modules/ol/geom/MultiPoint.js","webpack:///./node_modules/ol/interaction/DoubleClickZoom.js","webpack:///./node_modules/ol/Kinetic.js","webpack:///./node_modules/ol/events/condition.js","webpack:///./node_modules/ol/interaction/Pointer.js","webpack:///./node_modules/ol/interaction/DragPan.js","webpack:///./node_modules/ol/interaction/DragRotate.js","webpack:///./node_modules/ol/render/Box.js","webpack:///./node_modules/ol/interaction/DragBox.js","webpack:///./node_modules/ol/interaction/DragZoom.js","webpack:///./node_modules/ol/events/KeyCode.js","webpack:///./node_modules/ol/interaction/KeyboardPan.js","webpack:///./node_modules/ol/interaction/KeyboardZoom.js","webpack:///./node_modules/ol/interaction/MouseWheelZoom.js","webpack:///./node_modules/ol/interaction/PinchRotate.js","webpack:///./node_modules/ol/interaction/PinchZoom.js","webpack:///./node_modules/ol/interaction.js","webpack:///./node_modules/ol/geom/MultiPolygon.js","webpack:///./node_modules/ol/geom/flat/center.js","webpack:///./node_modules/ol/MapEventType.js","webpack:///./node_modules/ol/reproj/Image.js","webpack:///./node_modules/ol/source/Image.js","webpack:///./node_modules/ol/geom/flat/reverse.js","webpack:///./node_modules/ol/geom/flat/orient.js","webpack:///./node_modules/ol/tilegrid/common.js","webpack:///./node_modules/ol/geom/Geometry.js","webpack:///./node_modules/ol/format/GeoJSON.js","webpack:///./node_modules/ol/extent/Corner.js","webpack:///./node_modules/ol/TileRange.js","webpack:///./node_modules/ol/geom/flat/straightchunk.js","webpack:///./node_modules/ol/render/canvas/TextBuilder.js","webpack:///./node_modules/ol/source/Source.js","webpack:///./node_modules/ol/source/ImageWMS.js","webpack:///./node_modules/ol/geom/flat/area.js","webpack:///./node_modules/ol/renderer/Layer.js","webpack:///./node_modules/ol/renderer/canvas/Layer.js","webpack:///./node_modules/ol/style/IconImageCache.js","webpack:///./node_modules/ol/geom/GeometryCollection.js","webpack:///./node_modules/ol/geom/flat/interpolate.js","webpack:///./node_modules/ol/source/TileJSON.js","webpack:///./node_modules/ol/geom/flat/textpath.js","webpack:///./node_modules/ol/render/canvas/Executor.js","webpack:///./node_modules/ol/render/canvas/ExecutorGroup.js","webpack:///./node_modules/ol/Overlay.js","webpack:///./node_modules/ol/OverlayPositioning.js","webpack:///./node_modules/ol/sphere.js","webpack:///./node_modules/ol/tilegrid/TileGrid.js","webpack:///./node_modules/ol/geom/Circle.js","webpack:///./node_modules/ol/interaction/DragAndDrop.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/TileCache.js","webpack:///./node_modules/ol/structs/LRUCache.js","webpack:///./node_modules/ol/renderer/canvas/TileLayer.js","webpack:///./node_modules/ol/render/Event.js","webpack:///./node_modules/ol/layer/Base.js","webpack:///./node_modules/ol/reproj/Triangulation.js","webpack:///./node_modules/ol/ImageBase.js","webpack:///./node_modules/ol/source/TileWMS.js","webpack:///./node_modules/ol/source/ImageStatic.js","webpack:///./node_modules/rbush/rbush.js","webpack:///./node_modules/ol/geom/flat/interiorpoint.js","webpack:///./node_modules/ol/geom/flat/segments.js","webpack:///./node_modules/ol/style/Image.js","webpack:///./node_modules/ol/style/TextPlacement.js","webpack:///./node_modules/ol/render/VectorContext.js","webpack:///./node_modules/ol/geom/flat/length.js","webpack:///./node_modules/ol/layer/BaseVector.js","webpack:///./node_modules/ol/net.js","webpack:///./node_modules/ol/source/XYZ.js","webpack:///./node_modules/ol/format/JSONFeature.js","webpack:///./node_modules/ol/format/XMLFeature.js","webpack:///./node_modules/ol/tilegrid/WMTS.js","webpack:///./node_modules/ol/render/canvas/ImageBuilder.js","webpack:///./node_modules/ol/render/canvas/LineStringBuilder.js","webpack:///./node_modules/ol/render/canvas/PolygonBuilder.js","webpack:///./node_modules/ol/render/canvas/BuilderGroup.js","webpack:///./node_modules/ol/source/Tile.js","webpack:///./node_modules/proj4/dist/proj4-src.js","webpack:///./node_modules/ol/source/BingMaps.js","webpack:///./node_modules/ol/proj/proj4.js","webpack:///./node_modules/ol/source/Stamen.js","webpack:///./node_modules/ol/format/GPX.js","webpack:///./node_modules/ol/format/KML.js","webpack:///./node_modules/ol/format/TopoJSON.js","webpack:///./node_modules/ol/source/WMTS.js","webpack:///./node_modules/ol/source/WMTSRequestEncoding.js","webpack:///./node_modules/ol/format/TextFeature.js","webpack:///./node_modules/ol/format/IGC.js","webpack:///./node_modules/@openlayers/pepjs/dist/pep.js"],"names":["DOCUMENT","document","implementation","createDocument","XML_SCHEMA_INSTANCE_URI","createElementNS","namespaceURI","qualifiedName","getAllTextContent","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","push","String","nodeValue","replace","n","firstChild","nextSibling","join","isDocument","object","parse","xml","DOMParser","parseFromString","makeArrayExtender","valueReader","opt_this","objectStack","value","call","undefined","this","array","length","extend","makeArrayPusher","makeReplacer","makeObjectPropertySetter","opt_property","localName","makeChildAppender","nodeWriter","appendChild","makeArraySerializer","serializersNS","nodeFactory","serializers","makeSimpleNodeFactory","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","orderedKeys","sequence","Array","i","makeStructureNS","namespaceURIs","structure","opt_structureNS","ii","structureNS","parseNode","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pushParseAndPop","pop","values","opt_keys","pushSerializeAndPop","boundingExtent","coordinates","extent","createEmpty","extendCoordinate","buffer","opt_extent","clone","slice","closestSquaredDistanceXY","x","y","dx","dy","containsCoordinate","coordinate","containsXY","containsExtent","extent1","extent2","coordinateRelationship","minX","minY","maxX","maxY","relationship","Relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","extendCoordinates","createOrUpdateFromFlatCoordinates","flatCoordinates","offset","end","stride","extendFlatCoordinates","equals","extendXY","Math","min","max","forEachCorner","callback","val","getBottomLeft","getBottomRight","getTopRight","getTopLeft","getArea","area","isEmpty","getWidth","getHeight","getCenter","getCorner","corner","Corner","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","assert","getForViewAndSize","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","getIntersection","intersection","intersects","returnOrUpdate","scaleFromCenter","deltaX","deltaY","intersectsSegment","start","startRel","endRel","startX","startY","endX","endY","slope","applyTransform","transformFn","xs","ys","apply","_boundingExtentXYs","extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","prototype","create","RADIUS","HALF_SIZE","PI","EXTENT","WORLD_EXTENT","EPSG3857Projection","_super","code","units","Units","METERS","global","worldExtent","getPointResolution","point","cosh","Projection","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","log","tan","toEPSG4326","atan","exp","METERS_PER_UNIT","EPSG4326Projection","opt_axisOrientation","DEGREES","axisOrientation","metersPerUnit","cache","cloneTransform","identityTransform","addProjection","projection","addProj","getCode","addTransformFunc","get","projectionLike","opt_units","pointResolution","getter","getPointResolutionFunc","getUnits","getMetersPerUnit","toEPSG4326_1","getTransformFromProjections","vertices","getDistance","addEquivalentProjections","projections","forEach","addProjections","source","destination","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","j","addCoordinateTransforms","forward","inverse","sourceProj","destProj","fromLonLat","opt_projection","transform","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","getTransformFunc","getTransform","transformExtent","projections2","forwardTransform","inverseTransform","userProjection","getUserProjection","toUserCoordinate","fromUserCoordinate","destProjection","toUserExtent","fromUserExtent","EPSG3857_PROJECTIONS","EPSG4326_PROJECTIONS","abstract","Error","uidCounter_","getUid","obj","ol_uid","VERSION","readBoolean","m","s","exec","readDateTime","dateTime","Date","isNaN","readDecimal","parseFloat","readNonNegativeInteger","parseInt","readString","trim","writeBooleanTextNode","bool","writeStringTextNode","writeCDATASection","string","createCDATASection","writeDateTimeTextNode","date","getUTCFullYear","padNumber","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","writeDecimalTextNode","decimal","toPrecision","writeNonNegativeIntegerTextNode","nonNegativeInteger","toString","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","a","includes","arr","indexOf","linearFindNearest","target","direction","reverseSubArray","begin","tmp","data","extension","isArray","find","func","arr1","arr2","len1","findIndex","index","every","el","idx","isSorted","opt_func","opt_strict","compare","currentVal","res","CHANGE","ERROR","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","KEYDOWN","KEYPRESS","LOAD","RESIZE","WHEEL","listen","type","listener","opt_once","bind","originalListener_1","removeEventListener","arguments","eventsKey","addEventListener","listenOnce","unlistenByKey","key","clear","LabelCache","opt_highWaterMark","_this","consumers","consumer","canvas","consumerId","prune","outer","canExpireCache","peekLastKey","width","height","release","LRUCache","measureFont","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkedFonts","measureContext","textHeights","checkFont","interval","referenceWidth","retries","checked","referenceFonts","len","text","isAvailable","fontStyle","fontWeight","fontFamily","context","getMeasureContext","available","referenceFont","font","measureText","check","done","split","getCount","clearInterval","fontSpec","getFontParameters","families","family","style","weight","setInterval","createCanvasContext2D","div","heights","measureTextHeight","createElement","innerHTML","margin","padding","position","left","body","offsetHeight","removeChild","measureTextWidth","measureAndCacheTextWidth","measureTextWidths","lines","widths","numLines","currentWidth","rotateAtOffset","offsetX","offsetY","translate","rotate","resetTransform","createTransform","drawImage","opacity","image","originX","originY","w","h","scale","alpha","globalAlpha","setTransform","tmp_","reset","set","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","c","e","f","setFromArray","makeScale","compose","dx1","dy1","sx","sy","angle","dx2","dy2","makeInverse","mat","det","clamp","squaredSegmentDistance","t","squaredDistance","solveLinearSystem","maxRow","maxEl","abs","r","absValue","coef","k","l","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","lerp","assertion","errorCode","AssertionError","IDLE","LOADING","LOADED","EMPTY","ABORT","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","fillInstruction","strokeInstruction","beginPathInstruction","closePathInstruction","assign","var_sources","TypeError","property","getValues","BaseTileLayer","opt_options","options","baseOptions","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","getPreload","TileProperty","PRELOAD","getUseInterimTilesOnError","USE_INTERIM_TILES_ON_ERROR","Layer","TileLayer","createRenderer","CanvasTileLayerRenderer","exports","olcsListen","observable","on","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","setAttribute","imageRenderingValue","getSourceProjection","getProjection","olcs_uid","stableSort","compareFnc","sort","removeNode","parentNode","removeChildren","lastChild","isGroundPolylinePrimitiveSupported","scene","Cesium","GroundPolylinePrimitive","isSupported","XY","XYZ","XYM","XYZM","createExtent","onlyCenter","smooth","opt_isMoving","viewWidth","viewHeight","ratio","none","getViewportClampedResolution","maxExtent","viewportSize","xResolution","yResolution","getSmoothClampedResolution","maxResolution","minResolution","result","createMinMaxResolution","opt_smooth","opt_maxExtent","cappedMaxRes","DEFAULT_MIN_ZOOM","View","hints_","animations_","updateAnimationKey_","projection_","targetCenter_","targetResolution_","targetRotation_","applyOptions_","resolutionConstraintInfo","resolutionConstraint","minZoom","maxZoom","zoomFactor","multiWorld","smoothResolutionConstraint","projExtent","getExtent","constrainOnlyCenter","isGlobal","resolutions","constrainResolution","capped","z","floor","createSnapToResolutions","defaultMaxResolution","DEFAULT_TILE_SIZE","pow","defaultMinResolution","power","opt_minResolution","minZoomLevel","ceil","cappedZoomLevel","zoomLevel","newResolution","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","minZoom_","centerConstraint","smoothExtentConstraint","centerNone","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","createSnapToZero","rotationNone","createSnapToN","disable","createRotationConstraint","constraints_","setRotation","setCenterInternal","setResolution","zoom","setZoom","resolveConstraints","setProperties","options_","getUpdatedOptions_","newOptions","getResolution","getZoom","getCenterInternal","getRotation","animate","var_args","isDef","getAnimating","args","anchor","animateInternal","animationCount","state","animationCallback","now","series","animation","complete","duration","easing","inAndOut","sourceCenter","targetCenter","sourceResolution","targetResolution","getResolutionForZoom","sourceRotation","delta","targetRotation","isNoopAnimation","setHint","ViewHint","ANIMATING","updateAnimations_","getInteracting","INTERACTING","cancelAnimations","cancelAnimationFrame","more","seriesComplete","jj","elapsed","fraction","progress","getSizeFromViewport_","constrainedResolution","calculateCenterZoom","applyTargetState_","constrainedRotation","calculateCenterRotate","filter","Boolean","requestAnimationFrame","currentCenter","rotateCoordinate","addCoordinate","currentResolution","opt_rotation","selector","element","querySelector","metrics","getComputedStyle","ViewProperty","getConstraints","getHints","opt_hints","calculateExtent","opt_size","calculateExtentInternal","getMaxResolution","getMinResolution","getMaxZoom","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","setConstrainResolution","enabled","getResolutions","getResolutionForExtent","getResolutionForExtentInternal","getResolutionForValueFunction","opt_power","getValueForResolutionFunction","getState","nearest","baseLevel","fit","geometryOrExtent","geometry","getSimplifiedGeometry","polygonFromExtent","getType","GeometryType","fitInternal","coords","getFlatCoordinates","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","getStride","rotX","rotY","getConstrainedResolution","centerRotX","centerRotY","VOID","getConstrainedCenter","centerOn","centerOnInternal","centerX","centerY","adjustCenter","deltaCoordinates","setCenter","adjustCenterInternal","adjustResolution","opt_anchor","adjustResolutionInternal","isMoving","adjustZoom","adjustRotation","adjustRotationInternal","newRotation","hint","changed","opt_doNotCancelAnims","opt_forceMoving","newCenter","opt_duration","opt_resolutionDirection","easeOut","beginInteraction","endInteraction","endInteractionInternal","opt_targetResolution","getConstrainedZoom","targetZoom","opt_direction","targetRes","BaseObject","returnValue","setTimeout","coordinatesEqual","tileCoord","olUseNewCoordinates","TileSource","wrapX","getTileCoordForTileUrlFunction","OLImageryProvider","olMap","opt_fallbackProj","source_","fallbackProj_","ready_","tilingScheme_","rectangle_","map_","proxy","proxy_","DefaultProxy","errorEvent_","Event","emptyCanvas_","handleSourceChanged_","frameState","olcsUtil","GeographicTilingScheme","WebMercatorTilingScheme","rectangle","getTileCredits","level","getView","getSize","viewState","attributionsFunction","getAttributions","attributions","map","html","Credit","requestImage","tileUrlFunction","getTileUrlFunction","z_","y_","url","getURL","ImageryProvider","loadImage","defineProperties","tg","getTileGrid","getTileSize","camera","frustum","distance","Cartesian3","magnitude","subtract","pixelSize","Cartesian2","getPixelDimensions","clientWidth","clientHeight","amount","computePixelSizeAtCoordinate","Transforms","eastNorthUpToFixedFrame","bottomLeft","Matrix4","multiplyByPoint","topRight","Ellipsoid","WGS84","cartesianArrayToCartographicArray","translation","ZERO","ol4326CoordinateToCesiumCartesian","rawMatrix","quaternion","Quaternion","fromAxisAngle","UNIT_Z","rotationMatrix","fromTranslationQuaternionRotationScale","axis","defaultValue","linearEasing","lastProgress","oldTransform","window","step","timestamp","stepAngle","lookAtTransform","heading","bottomCenter","angleToZenith","computeAngleToZenith","right","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","add","fromTranslation","rotateAroundAxis","pixel","ray","getPickRay","globe","pick","pickEllipsoid","bottom","pickOnTerrainOrEllipsoid","Ray","ellipsoid","IntersectionTests","rayEllipsoid","getPoint","normal","geocentricSurfaceNormal","angleBetween","signedAngleBetween","convertLongitudeRange","fovy2","fovy","matrix","first","second","normalize","cross","cosine","dot","sine","sign","atan2","pivot","fy","bottomFovRay","negate","ext","Rectangle","fromDegrees","olLayer","viewProj","olLayerTile","olLayerImage","provider","getSource","olSourceImageWMS","getUrl","getImageLoadFunction","defaultImageLoadFunction","sourceProps","olSourceTileWMS","params","getParams","olSourceTileImage","isCesiumProjection","olcsCoreOLImageryProvider","olSourceImageStatic","SingleTileImageryProvider","getImageExtent","layerOptions","extentToRectangle","ImageryLayer","olLayerWithParents","csLayer","visible","layer","concat","parents","layerOpacity","getOpacity","layerVisible","getVisible","show","coo","toCartesian","cartesians","proj4326","proj","properties","getProperties","olColor","Color","byteToFloat","fromCssColorString","CanvasPattern","CanvasGradient","ctx","getContext","fillStyle","fillRect","ImageMaterialProperty","subdomains","re","match","charCode","startCharCode","charCodeAt","stopCharCode","fromCharCode","Promise","resolve","reject","pickBottomPoint","currentHeading","setHeadingUsingBottomCenter","view","normalizeView","is3857","is4326","ATTRIBUTION","OSM","crossOrigin","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","attributionsCollapsible","MapEvent","opt_frameState","MapBrowserEvent","browserEvent","opt_dragging","originalEvent","pixel_","coordinate_","dragging","defineProperty","getEventPixel","enumerable","configurable","getCoordinateFromPixel","preventDefault","stopPropagation","MapBrowserPointerEvent","pointerEvent","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","dragging_","dragListenerKeys_","moveTolerance_","DEVICE_PIXEL_RATIO","down_","getViewport","activePointers_","trackedTouches_","element_","pointerdownListenerKey_","PointerEventType","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","newEvent","MapBrowserEventType","dispatchEvent","clearTimeout","SINGLECLICK","updateActivePointers_","event","pointerId","keys","handlePointerUp_","propagationStopped","isMouseActionButton_","button","handlePointerMove_","isMoving_","POINTERDRAG","clientX","clientY","disposeInternal","EventTarget","LAYERGROUP","SIZE","TARGET","VIEW","PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","count","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","TileQueue","tilePriorityFunction","tileChangeCallback","getKey","boundHandleTileChange_","handleTileChange","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","EventType","getTilesLoading","tile","hifi","TileState","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","load","PluggableMap","optionsInternal","keyboardEventTarget","getElementById","controls","interactions","overlays","layerGroup","layers","getLayers","LayerGroup","MapProperty","Collection","getArray","createOptionsInternal","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","pixelRatio_","pixelRatio","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","className","overflow","msTouchAction","touchAction","overlayContainer_","zIndex","overlayContainerStopEvent_","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyHandlerKeys_","labelCache_","labelCacheListenerKey_","overlays_","overlayIdIndex_","renderer_","handleResize_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","getChangeEventType","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","control","setMap","CollectionEventType","ADD","REMOVE","interaction","addOverlayInternal_","id","getId","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","addOverlay","overlay","getOverlays","dispose","setTarget","forEachFeatureAtPixel","getCoordinateFromPixelInternal","hitTolerance","layerFilter","TRUE","checkWrapped","forEachFeatureAtCoordinate","getFeaturesAtPixel","features","feature","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","getEventCoordinateInternal","viewportPosition","getBoundingClientRect","eventPosition","changedTouches","top","getTarget","getTargetElement","pixelToCoordinateTransform","getOverlayById","getLoading","layerStatesArray","getLayerStatesArray","loading","getPixelFromCoordinate","viewCoordinate","getPixelFromCoordinateInternal","coordinateToPixelTransform","getRenderer","getOverlayContainer","getOverlayContainerStopEvent","tileSourceKey","tileCenter","tileResolution","wantedTiles","sqrt","opt_type","mapBrowserEvent","HTMLElement","parentElement","interactionsArray","getActive","handleEvent","handlePostRender","tileQueue","hints","viewHints","lowOnFrameBudget","IMAGE_DECODE","time","hasListener","RenderEventType","RENDERCOMPLETE","dispatchRenderEvent","postRenderFunctions","render","targetElement","updateSize","handleViewPropertyChanged_","ObjectEventType","PROPERTYCHANGE","isRendered","renderSync","redrawText","layerStates","hasRenderer","handleFontsChanged","removeControl","remove","removeInteraction","removeLayer","removeOverlay","previousFrameState","hasArea","declutterItems","layerIndex","usedTiles","renderFrame","MapEventType","MOVESTART","MOVEEND","POSTRENDER","setLayerGroup","setSize","setView","computedStyle","offsetWidth","CanvasImmediateRenderer","viewRotation","opt_squaredTolerance","opt_userTransform","context_","extent_","transform_","viewRotation_","squaredTolerance_","userTransform_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","image_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","text_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","pixelCoordinates_","tmpLocalTransform_","drawImages_","pixelCoordinates","transform2D","localTransform","composeTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","moveTo","lineTo","closePath","drawRings_","ends","drawCircle","transformGeom2D","radius","beginPath","arc","fill","stroke","setStyle","setFillStrokeStyle","getFill","getStroke","setImageStyle","getImage","setTextStyle","getText","drawGeometry","drawPoint","drawLineString","drawPolygon","drawMultiPoint","drawMultiLineString","drawMultiPolygon","drawGeometryCollection","drawFeature","getGeometryFunction","geometries","getGeometriesArray","simplifyTransformed","flatMidpoint","getFlatMidpoint","geometryExtent","getEnds","flatMidpoints","getFlatMidpoints","getOrientedFlatCoordinates","flatInteriorPoint","getFlatInteriorPoint","endss","getEndss","flatInteriorPoints","getFlatInteriorPoints","fillState","contextFillState","strokeState","contextStrokeState","lineCap","setLineDash","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","strokeStyle","textState","contextTextState","textAlign","textBaseline","fillStyleColor","getColor","asColorLike","strokeStyleColor","strokeStyleLineCap","getLineCap","strokeStyleLineDash","getLineDash","strokeStyleLineDashOffset","getLineDashOffset","strokeStyleLineJoin","getLineJoin","strokeStyleWidth","strokeStyleMiterLimit","getMiterLimit","imageStyle","imageAnchor","getAnchor","imageImage","imageOrigin","getOrigin","imageSize","getRotateWithView","getScale","textStyle","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","textScale","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","VectorContext","expireIconCache","iconImageCache","expire","MapRenderer","declutterTree_","calculateMatrices2D","thisArg","thisArg2","managed","translatedCoordinate","offsets","canWrapX","projectionExtent","worldWidth","declutteredFeatures","numLayers","all","entry","tmpCoord","layerState","inView","layerRenderer","getWrapX","callback_1","getMap","declutterTree","items","item","zIndexItems","renderDeclutter","renderDeclutterItems","scheduleExpireIconCache","Disposable","CompositeMapRenderer","labelCacheKey_","CLASS_UNSELECTABLE","container","insertBefore","children_","renderedVisible_","event_1","RenderEvent","PRECOMPOSE","hasOverlay","previousElement","sourceState","SourceState","READY","UNDEFINED","childElementCount","lastElementChild","replaceChildren","POSTCOMPOSE","display","getDataAtPixel","Map","defaultControls","defaultInteractions","AutoRenderLoop","ol3d","scene_","getCesiumScene","canvas_","_boundNotifyRepaintRequired","notifyRepaintRequired","repaintEventNames_","enable","requestRenderMode","maximumRenderTimeChange","repaintKey","getOlMap","un","restartRenderLoop","requestRender","Camera","cam_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","lastCameraViewMatrix_","viewUpdateInProgress_","setView_","dim","olObservableUnByKey","toLonLat","handleViewEvent_","readFromView","setHeading","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","updateView","setPosition","ll","carto","Cartographic","getAltitude","cartographicToCartesian","getPosition","cartesianToCartographic","longitude","latitude","setAltitude","altitude","orientation","pitch","PI_OVER_TWO","roll","moveBackward","checkCameraChange","calcDistanceForResolution","olcsCore","pickCenterPoint","bestTarget","positionCartographic","bestTargetCartographic","calcResolutionForDistance","pos","targetNormal","targetToCamera","up","tiltAngle","acos","opt_dontSync","old","current","viewMatrix","equalsEpsilon","AbstractSynchronizer","olLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","splice","olLayerId","cesiumObjects","olLayerGroup","listenForGroupChanges_","createSingleLayerCounterparts","newOlLayerWithParents","layerId","layerWithParents","onLayerChange","cesiumObjs","addCesiumObjects_","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","uid","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","group","removeLayer_","uuid","listenKeyArray","contentKeys","listenAddRemove","collection","objKey","removeAllCesiumObjects","destroy","RasterSynchronizer","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","removeAll","convertLayerToCesiumImageries","tileLayerToImageryLayer","olLayerItem","updateCesiumLayerProperties","zIndices","queue","getZIndex","sublayers","unshift","layer1","layer2","raiseToTop","olcsAbstractSynchronizer","Cluster","geometryFunction","getGeometry","refresh","loadFeatures","cluster","addFeatures","mapDistance","getFeatures","clustered","getCoordinates","neighbors","getFeaturesInExtent","neighbor","createCluster","centroid","scaleCoordinate","Feature","Point","VectorSource","IMAGE","HYBRID","IMAGE_REPLAYS","ReplayType","TEXT","VECTOR_REPLAYS","DEFAULT","CanvasVectorTileLayerRenderer","boundHandleStyleImageChange_","handleStyleImageChange_","overlayContext_","overlayContextUid_","overlayPixelTransform_","inverseOverlayPixelTransform_","dirty_","renderedLayerRevision_","renderTileImageQueue_","tileListenerKeys_","tmpTransform_","useContainer","overlayContext","containerReused","overlayContext_1","transformOrigin","prepareTile","tileUid","updateExecutorGroup_","tileImageNeedsRender_","getTile","wantedResolution","listenerKey","renderTileImage_","isDrawableTile","hasContext","getLayer","getTileImage","prepareFrame","layerRevision","getRevision","renderedTiles","revision","renderOrder","getRenderOrder","builderState","getReplayState","dirty","renderedResolution","renderedRevision","renderedRenderOrder","renderedZ","sourceZ","sourceTileGrid","tileExtent","getTileGridForProjection","getTileCoordExtent","wrappedTileCoord","sourceTiles","getSourceTiles","layerUid","executorGroups","_loop_1","tt","sourceTile","sourceTileCoord","sourceTileExtent","sharedExtent","bufferedExtent","getRenderBuffer","this_1","tmpExtent","builderGroup","CanvasBuilderGroup","getDeclutter","squaredTolerance","getSquaredRenderTolerance","styles","styleFunction","getStyleFunction","renderFeature","executorGroupInstructions","finish","replayExtent","renderingReplayGroup","CanvasExecutorGroup","getOverlaps","declutter","tileGrid","_loop_2","tileContainsCoordinate","executorGroup","renderIfReadyAndVisible","renderQueuedTileImages_","renderMode","getRenderMode","VectorTileRenderType","declutterReplays","replayTypes","round","canvasTransform","transformToString","clearRect","tiles","clips","clipZs","worldOffset","getRenderTransform","clipped","hasExecutors","currentZ","currentClip","getClipCoords","save","clip","execute","restore","replayDeclutter","replayState","renderedTileResolution","renderedTileRevision","renderedTileZ","renderPixelRatio","getTilePixelSize","renderScale","scaleTransform","pixelScale","translateTransform","renderPixel","getImageData","err","name","Uint8Array","VectorTileLayer","renderMode_","BaseVectorLayer","VectorLayerCounterpart","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","featureToCesiumMap","getRootPrimitive","FeatureConverter","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","defaultBillboardEyeOffset_","evt","cancellers","canceller","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","color","opt_lineWidth","flat","renderState","depthTest","instances","instance","GeometryInstance","attributes","ColorGeometryInstanceAttribute","fromColor","createInstance","getHeightReference","HeightReference","CLAMP_TO_GROUND","ctor","GroundPrimitive","geometryInstances","Primitive","dataUri","getValue","toDataURL","appearance","MaterialAppearance","material","Material","fabric","uniforms","PerInstanceColorAppearance","extractColorFromOlStyle","outline","fillColor","strokeColor","convertColorToCesium","extractLineWidthFromOlStyle","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","p1","p2","addTextStyle","label","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","eyeOffset","bb","olCircleGeometryToCesium","olGeometryCloneTo4326","getRadius","outlinePrimitive","CircleGeometry","circlePolygon","olCreateCircularPolygon","positions","ol4326CoordinateArrayToCsCartesians","getLinearRing","GroundPolylineGeometry","PolylineMaterialAppearance","olStyleToCesium","classificationType","ClassificationType","TERRAIN","readyPromise","then","_primitive","createStackedGroundCorridors","CircleOutlineGeometry","extrudedHeight","previousDistance","geometryOptions","vertexFormat","VertexFormat","POSITION_ONLY","linePositions","CorridorGeometry","distanceDisplayCondition","DistanceDisplayConditionGeometryInstanceAttribute","olLineStringGeometryToCesium","heightReference","primitiveOptions","PolylineGeometry","olPolygonGeometryToCesium","maxHeight","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","polylineGeometry","PolygonOutlineGeometry","altitudeMode","NONE","RELATIVE_TO_GROUND","createBillboardFromImage","opt_newBillboardCallback","olStyleIcon","reallyCreateBillboard","HTMLCanvasElement","Image","HTMLImageElement","pixelOffset","src","naturalHeight","naturalWidth","isImageLoaded","cancelled","fuid","isDestroyed","olPointGeometryToCesium","modelPrimitive","olcsModelFunction","olcsModel","cesiumOptions","model","Model","fromGltf","debugModelMatrix","DebugModelMatrixPrimitive","modelMatrix","olMultiGeometryToCesium","subgeos","accumulate","functor","getPoints","getLineStrings","getPolygons","labels","LabelCollection","extentCenter","olGeomSimpleGeometry","getFirstCoordinate","horizontalOrigin","labelStyle","LabelStyle","outlineWidth","OUTLINE","FILL_AND_OUTLINE","HorizontalOrigin","CENTER","verticalOrigin","VerticalOrigin","TOP","BOTTOM","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getGeometryFromFeature","opt_geom","geom3d","olGeomGeometry","geomFuncRes","olFeatureToCesium","geom","newBillboardAddedCallback","featureBb","getGeometries","prims","bbs","result2","olVectorLayerToCesium","olView","featurePrimitiveMap","olSourceCluster","olcsCoreVectorLayerCounterpart","layerStyle","prim","convert","VectorSynchronizer","opt_converter","converter","olcsFeatureConverter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","olLayerVector","olLayerVectorTile","csPrimitives","onAddFeature","onRemoveFeature","Billboard","SynchronizedOverlay","parent","getOptions","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","attributeObserver_","listenerKeys_","setPropertyFromEvent","setPropertyFromEvent_","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","childNodes","getScene","postRender","updatePixelPosition","stopEvent","insertFirst","handlePositionChanged","cloneNode","MouseEvent","nodes","getElement","clonedNode","globeHeight","tilesLoaded","cartesian","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","computeVisibility","setVisible","pixelCartesian","cartesianToCanvasCoordinates","mapSize","updateRenderedPosition","olOverlay","OverlaySynchronizer","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","cesiumOverlay","olcsSynchronizedOverlay","overlayId","removedOverlay","csOverlay","OLCesium","autoRenderLoop_","time_","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","seOverlayContainer","isOverMap_","stopOpenLayersEventsPropagation","overlayEvents","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","CameraEventType","LEFT_DRAG","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","camera_","olcsCamera","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","olcsRasterSynchronizer","olcsVectorSynchronizer","olcsOverlaySynchronizer","lastFrameTime_","renderId_","targetFrameRate_","Number","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","render_","onAnimationFrame_","frameTime","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","PENDING","enableTilt","bs","FAILED","EntityView","mapProjection","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getOlView","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","visibility","throwOnUnitializedMap_","rootGroup","classList","warmUp","timeout","csCamera","setBlockCesiumRendering","block","enableAutoRenderLoop","olcsAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","defaultDataSource","entities","IDENTITY","to4326Transform","CallbackProperty","coo4326","TRANSPARENT","Style","geometry_","geometryFunction_","defaultGeometryFunction","setGeometry","fill_","renderer","stroke_","zIndex_","setRenderer","setFill","setImage","setStroke","setText","setZIndex","toFunction","styles_1","defaultStyles","createDefaultStyle","Fill","Stroke","CircleStyle","color_","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","setColor","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","opt_width","opt_height","outerWidth","marginLeft","marginRight","outerHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","replaceChild","children","oldChildren","oldChild","newChild","FALSE","memoizeOne","fn","lastResult","lastArgs","lastThis","called","nextArgs","arrayEquals","ObjectEvent","oldValue","opt_values","values_","getKeys","notify","eventType","opt_silent","unset","Observable","changeEventTypeCache","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","handleGeometryChanged_","setGeometryName","getGeometryName","getStyle","handleGeometryChange_","createStyleFunction","setId","opt_layout","setCoordinates","layout","closestPointXY","closestPoint","minSquaredDistance","squaredDx","computeExtent","intersectsExtent","setLayout","deflateCoordinate","SimpleGeometry","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","MAX_ZOOM","MIN_ZOOM","SOURCE","Control","target_","listenerKeys","mapEvent","updateElement_","Attribution","ulElement_","collapsed_","collapsed","overrideCollapsible_","collapsible","collapsible_","tipLabel","collapseLabel","collapseLabel_","textContent","label_","activeLabel","title","handleClick_","cssClasses","CLASS_CONTROL","CLASS_COLLAPSED","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","attributionGetter","getAttributionsCollapsible","setCollapsible","handleToggle_","toggle","getCollapsible","setCollapsed","getCollapsed","rotation_","autoHide_","contains","CLASS_HIDDEN","Rotate","callResetNorth_","resetNorth","duration_","autoHide","resetNorth_","Zoom","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","currentZoom","newZoom","defaults","zoomOptions","rotateOptions","attribution","attributionOptions","withCredentials","xhr","format","success","failure","XMLHttpRequest","open","FormatType","ARRAY_BUFFER","responseType","onload","status","JSON","responseText","XML","responseXML","response","readFeatures","featureProjection","readProjection","onerror","send","loadFeaturesXhr","dataProjection","RBush","opt_maxEntries","rbush_","RBush_","items_","insert","extents","bbox","getAll","getInExtent","search","forEach_","forEachInExtent","toJSON","rbush","VectorSourceEvent","opt_feature","loader_","format_","overlaps_","overlaps","url_","loader","strategy_","strategy","allStrategy","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","VectorEventType","handleFeatureChange_","valid","newFeatures","geometryFeatures","length_1","length_2","length_3","modifyingCollection","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","NaN","previousMinSquaredDistance","minDistance","getFeatureById","getFeatureByUid","getFormat","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","extentToLoad","removeLoadedExtent","removed","setLoader","setUrl","Source","FeatureFormat","defaultFeatureProjection","getReadOptions","TILE_PIXELS","setWorldExtent","adaptOptions","readFeature","readGeometry","writeFeature","writeFeatures","writeGeometry","transformGeometryWithOptions","write","transformed","equivalentProjection","decimals","power_1","LinearRing","maxDelta_","maxDeltaRevision_","setFlatCoordinates","maxSquaredDelta","assignClosestPoint","linearRingArea","inflateCoordinates","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","douglasPeucker","GeometryLayout","deflateCoordinates","Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","arrayMaxSquaredDelta","assignClosestArrayPoint","linearRingsContainsXY","linearRingsArea","opt_right","orientLinearRings","inflateCoordinatesArray","flatCenter","getInteriorPointOfArray","getInteriorPoint","getLinearRingCount","linearRings","linearRingsAreOriented","simplifiedEnds","quantizeArray","intersectsLinearRingArray","deflateCoordinatesArray","circular","opt_n","opt_sphereRadius","sphereOffset","fromExtent","CLASS_SELECTABLE","BaseEvent","getLastCoordinate","getLayout","simplifiedGeometryRevision","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometry","getStrideForLayout","nesting","getLayoutForStride","opt_sy","Geometry","simpleGeometry","opt_dest","FEET","PIXELS","USFEET","opt_tileCoord","getKeyZXY","fromKey","hash","withinExtentAndZ","tileRange","getTileRangeForExtentAndZ","getFullTileRange","num","toSize","easeIn","linear","CanvasVectorLayerRenderer","vectorLayer","renderedRevision_","renderedResolution_","renderedExtent_","renderedRenderOrder_","replayGroup_","replayGroupChanged","pixelTransform","inversePixelTransform","replayGroup","preRender","vectorSource","layerExtent","snapToPixel","world","transform_1","transform_2","viewHints_1","layer_1","features_1","animating","interacting","updateWhileAnimating","getUpdateWhileAnimating","updateWhileInteracting","getUpdateWhileInteracting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","defaultRenderOrder","gutter","userTransform","getRenderTolerance","userExtent","features_2","replayGroupInstructions","ExecutorGroup","opt_transform","CanvasLayerRenderer","VectorLayer","Interaction","setActive","InteractionProperty","active","pan","zoomByDelta","revision_","once","unByKey","dest","anchorX","anchorY","degreesToStringHDMS","hemispheres","degrees","opt_fractionDigits","normalizedDegrees","dflPrecision","precision","deg","sec","charAt","coordinate1","coordinate2","toStringHDMS","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","ua","navigator","userAgent","toLowerCase","FIREFOX","WEBKIT","MAC","decode","FRACTION","coordinatess","deflateMultiCoordinatesArray","coordinatesss","opt_endss","opt_coordinates","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","Property","CollectionEvent","opt_element","opt_index","opt_array","unique_","unique","array_","assertUnique_","updateLength_","getLength","insertAt","elem","removeAt","prev","setAt","opt_except","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","LayerProperty","handleSourcePropertyChange_","setSource","getLayersArray","opt_states","states","getLayerState","getSourceState","handleSourceChange_","BaseLayer","assignClosest","offset1","offset2","squaredDelta","multiArrayMaxSquaredDelta","maxDelta","isRing","opt_tmpPoint","tmpPoint","assignClosestMultiArrayPoint","LineString","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAtM","opt_extrapolate","extrapolate","lineStringCoordinateAtM","getCoordinateAt","interpolatePoint","lineStringLength","intersectsLineString","getForProjection","getDefaultTileGrid","opt_maxZoom","opt_tileSize","opt_corner","resolutionsFromExtent","TileGrid","origin","tileSize","createForExtent","extentFromProjection","createForProjection","setDefaultTileGrid","getTileCoordCenter","worldsAway","getTileCoordForCoordAndZ","createXYZ","xyzOptions","gridOptions","DEFAULT_MAX_ZOOM","half","IconImage","imageState","hitDetectionImage_","unlisten_","imageState_","size_","src_","tainted_","isTainted_","ImageState","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","getImageState","getHitDetectionImage","getSrc","listenImage","imgData","g","putImageData","Icon","rotateWithView","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","asArray","iconImage_","iconImage","getIconImage","offset_","offsetOrigin_","offsetOrigin","origin_","setAnchor","getImageSize","getHitDetectionImageSize","iconImageSize","listenImageChange","unlistenImageChange","ImageStyle","number","opt_precision","numberString","toFixed","compareVersions","v1","v2","s1","s2","n1","n2","createFromTemplate","template","zRegEx","xRegEx","yRegEx","dashYRegEx","range","createFromTemplates","templates","tileUrlFunctions","createFromTileUrlFunctions","tileCoordHash","nullTileUrlFunction","expandUrl","urls","stop_1","Target","opt_target","pendingRemovals_","dispatching_","listeners_","listeners","propagate","pendingRemovals","getListeners","simplifiedOffset","markers","stack","last","maxSquaredDistance","squaredDistance_1","douglasPeuckerArray","snap","tolerance","quantize","quantizeMultiArray","simplifiedEndss","Tile","interimTile","transition_","transition","transitionStarts_","getInterimTile","refreshInterimChain","getTileCoord","setState","getAlpha","inTransition","endTransition","getBlankImage","ImageTile","tileLoadFunction_","ReprojTile","targetProj","targetTileGrid","getTileFunction","opt_errorThreshold","opt_renderEdges","renderEdges_","gutter_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","targetExtent","maxTargetExtent","maxSourceExtent","limitedTargetExtent","sourceProjExtent","calculateSourceResolution","isFinite","errorThresholdInPixels","triangulation_","Triangulation","getTriangles","getZForResolution","sourceExtent","calculateSourceExtent","sourceRange","srcX","srcY","unlistenSources_","reproject_","sources","renderReprojected","leftToLoad_1","sourceListenKey_1","UrlTile","tilePixelRatio","zDirection","generateTileUrlFunction_","setUrls","tileLoadingKeys_","getTileLoadFunction","getUrls","tileState","TileEventType","TileSourceEvent","setTileLoadFunction","tileCache","setTileUrlFunction","pruneExceptNewestZ","setKey","useTile","tileCoordKey","containsKey","TileImage","defaultTileLoadFunction","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","renderReprojectionEdges_","expireCache","usedTileCache","getTileCacheForProjection","getGutterForProjection","getGutter","getOpaque","thisProj","projKey","TileCache","highWaterMark","createTile_","urlTileCoord","tileUrl","tileOptions","newTile","getTilePixelRatio","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","imageTile","linearRingContainsExtent","linearRingContainsXY","wn","linearRingssContainsXY","DEFAULT_FILL_COLOR","Text","font_","rotateWithView_","scale_","textAlign_","textBaseline_","maxAngle_","maxAngle","placement_","placement","TextPlacement","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundFill","backgroundStroke_","backgroundStroke","padding_","getPlacement","getMaxAngle","getOverflow","getBackgroundFill","getBackgroundStroke","getPadding","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setRotateWithView","setScale","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","imageReplay","getBuilder","BuilderType","addDeclutter","textReplay","drawText","lineStringReplay","polygonReplay","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","renderGeometry","replay","drawCustom","renderFeatureInternal","LAYERS","layersListenerKeys_","handleLayersChanged_","setLayers","handleLayerChange_","handleLayersAdd_","handleLayersRemove_","layersArray","collectionEvent","ownLayerState","PRERENDER","RegularShape","hitDetectionCanvas_","points_","points","radius_","radius1","radius2_","radius2","angle_","imageSize_","hitDetectionImageSize_","getRadius2","getAngle","setOpacity","strokeWidth","renderOptions","draw_","createHitDetectionCanvas_","angle0","radiusC","drawHitDetectionCanvas_","setRadius","transforms","disposed_","HEX_COLOR_RE_","NAMED_COLOR_RE_","asString","fromString","rgb","fromNamed","hasAlpha","substr","fromStringInternal_","CanvasBuilder","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","tmpCoordinate_","hitDetectionInstructions","applyPixelRatio","dashArray","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastXCoord","lastYCoord","nextCoord","skipped","drawCustomCoordinates_","builderEnds","builderEnd","beginGeometry","builderEndss","builderBegin","myEnds","CanvasInstruction","endGeometry","reverseHitDetectionInstructions","reverse","instruction","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","enlargeClipPoint","centroidX","centroidY","dX","dY","triangulation","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","triangle","u0","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","p0","theta","opt_tolerance","DEFAULT_WMS_VERSION","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","MultiLineString","lineStrings","lineString","appendLineString","opt_interpolate","interpolate","lineStringsCoordinateAtM","getLineString","midpoints","midpoint","intersectsLineStringArray","BaseImageLayer","CanvasImageLayerRenderer","imageLayer","viewResolution","imageSource","renderedExtent","imageExtent","imageResolution","imagePixelRatio","getPixelRatio","viewCenter","clipUnrotated","tempTransform_","dw","dh","previousAlpha","ImageLayer","appendParams","uri","keyParams","encodeURIComponent","qs","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","getWorldExtent","getAxisOrientation","setGlobal","setExtent","setGetPointResolution","ImageWrapper","imageLoadFunction","imageLoadFunction_","ImageBase","loadHandler","errorHandler","promise","listening_1","catch","error","message","coordinatesExtent","point1","point2","intersectsLinearRing","intersectsLinearRingMultiArray","MultiPoint","appendPoint","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","initialVelocity_","lastIndex","firstIndex","shiftKey","delta_","DoubleClickZoom","altShiftKeysOnly","altKey","metaKey","ctrlKey","focus","activeElement","always","mouseActionButton","noModifierKeys","shiftKeyOnly","targetNotEditable","tagName","mouseOnly","pointerType","primaryAction","isPrimary","pointerEvents","PointerInteraction","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","trackedPointers_","targetPointers","updateTrackedPointers_","handledUp","handled","isPointerDraggingEvent","defaultCondition","DragPan","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition_","condition","noKinetic_","centroidFromPointers","centerpx","DragRotate","lastAngle_","RenderBox","startPixel_","endPixel_","startPixel","endPixel","setPixels","createOrUpdateGeometry","DragBoxEventType","DragBoxEvent","DragBox","box_","minArea_","minArea","onBoxEnd_","onBoxEnd","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","out_","mapExtent","boxPixelExtent","factor","DragZoom","out","UP","DOWN","keyCode","KeyCode","mapUnitsDelta","pixelDelta_","KeyboardPan","defaultCondition_","pixelDelta","KeyboardZoom","Mode","MouseWheelZoom","totalDelta_","lastDelta_","timeout_","useAnchor_","useAnchor","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","endInteraction_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","timeLeft","handleWheelZoom_","setMouseAnchor","PinchRotate","pointerOptions","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","onFocusOnly","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","MultiPolygon","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","polygons","polygon","appendPolygon","newEndss","linearRingssArea","orientLinearRingsArray","flatCenters","linearRingssCenter","getInteriorPointsOfMultiArray","getInteriorPoints","linearRingssAreOriented","getPolygon","prevEnds","lastEnds","ReprojImage","getImageFunction","sourceImage","sourcePixelRatio","targetProj_","maxSourceExtent_","targetExtent_","sourceImage_","sourcePixelRatio_","sourceListenerKey_","unlistenSource_","ImageSourceEventType","ImageSourceEvent","ImageSource","reprojectedImage_","reprojectedRevision_","findNearestResolution","getImageInternal","handleImageChange","linearRingIsClockwise","edge","isClockwise","reverseCoordinates","tmpTransform","extentRevision_","simplifyTransformedInternal","coord","getClosestPoint","opt_closestPoint","simplify","inCoordinates","outCoordinates","pixelExtent","projectedExtent","GeoJSON","geometryName","extractGeometryName_","extractGeometryName","readFeatureFromObject","geoJSONFeature","readFeaturesFromObject","geoJSONFeatures","readGeometryFromObject","readProjectionFromObject","crs","writeFeatureObject","writeFeaturesObject","objects","writeGeometryObject","JSONFeature","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","GeometryCollection","readGeometryCollectionGeometry","geoJSON","writePointGeometry","writeLineStringGeometry","rightHanded","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","writeGeometryCollectionGeometry","TileRange","containsTileRange","matchingChunk","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","TEXT_ALIGN","CanvasTextBuilder","declutterGroups_","labels_","fillStates","strokeStates","textStates","textKey_","fillKey_","strokeKey_","geometryType","LINE","flatOffset","flatEnd","o","oo","declutterGroup","drawChars_","geometryWidths","interiorPoints","saveTextStates_","pixelRatio_1","strokeKey","textKey","fillKey","baseline","declutterGroups","attributions_","adaptAttributions","attributionsCollapsible_","state_","wrapX_","setAttributions","attributionLike","GETFEATUREINFO_IMAGE_SIZE","ImageWMS","params_","v13_","updateV13_","serverType_","serverType","hidpi_","hidpi","ratio_","getFeatureInfoUrl","projectionObj","sourceProjectionObj","baseParams","getRequestUrl_","getLegendUrl","mpu","viewExtent","requestWidth","requestHeight","requestExtent","WMSServerType","dpi","setImageLoadFunction","updateParams","version","twiceArea","linearRingss","LayerRenderer","boundHandleImageChange_","handleImageChange_","layer_","loadedTileCallback","createLoadedTileFinder","forEachLoadedTile","layerClassName","getClassName","halfWidth","halfHeight","topLeft","bottomRight","inverted","dispatchRenderEvent_","IconImageCache","cache_","cacheSize_","maxCacheSize_","maxCacheSize","shared","opt_geometries","geometries_","changeEventsKeys_","listenGeometriesChange_","unlistenGeometriesChange_","geometryCollection","setGeometries","cloneGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","clonedGeometries","pointX","pointY","cumulativeLengths","lo","hi","m0","TileJSON","tileJSON_","tileSize_","jsonp","requestJSONP","handleTileJSONResponse","handleTileJSONError","client","onXHRLoad_","onXHRError_","tileJSON","getTileJSON","epsg4326Projection","attributionExtent_1","drawTextOnPath","startM","previousAngle","numChars","segmentM","segmentLength","angleChanged","char","charLength","charM","segmentPos","p3","p4","Executor","alignFill_","coordinateCache_","renderedTransform_","widths_","getTextImage","align","lineHeight","renderWidth","leftRight","replayTextBackground_","setStrokeStyle_","replayImage_","fillStroke","boxW","boxH","boxX","boxY","strokePadding","declutterArgs","origin_1","repeatSize","groupCount","box","collides","declutterData","currentAlpha","drawTextImageWithPointPlacement_","execute_","featureCallback","opt_hitExtent","transformSetFromArray","dd","prevX","prevY","roundX","roundY","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","batchSize","labelWithAnchor","widthIndex","declutterGroupIndex","measurePixelRatio","pixelRatioScale","cachedWidths","pathLength","textLength","parts","cc","chars","part","executeHitDetection","opt_featureCallback","ORDER","allInstructions","opt_renderBuffer","maxExtent_","resolution_","renderBuffer_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","flatClipCoords","executors","instructionByZindex","builderType","candidates","contextSize","hitExtent","mask","circleArrayCache","arraySize","fillCircleArrayRowToMiddle","getCircleArray","imageData","i_1","j_1","result_1","executor","zs","zIndexKey","opt_builderTypes","opt_declutterReplays","replays","builderTypes","0","zz","executorData","currentExecutor","BOTTOM_CENTER","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_CENTER","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","mapPostrenderListenerKey","handleOffsetChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","OverlayPositioning","getOffset","getPositioning","panIntoView","mapRect","getRect","overlayRect","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","pageXOffset","pageYOffset","top_1","DEFAULT_RADIUS","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","bearing","lon1","dByR","lat","asin","lon","tmpTileCoord","origins","origins_","tileSizes_","tileSizes","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","forEachTileCoord","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","createOrUpdateTileRange","getTileCoordChildTileRange","getTileRangeExtent","getTileCoordForXYAndZ_","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","createOrUpdateTileCoord","getTileCoordResolution","fullTileRanges","Circle","setCenterAndRadius","getRadiusSquared_","circleExtent","DragAndDropEventType","DragAndDropEvent","file","opt_features","DragAndDrop","formatConstructors_","formatConstructors","dropListenKeys_","handleResult_","tryReadFeatures_","registerListeners_","dropArea","handleDrop","handleStop","unregisterListeners_","files","dataTransfer","reader","FileReader","readAsText","dropEffect","peekLast","peekFirstKey","count_","entries_","oldest_","newest_","value_","key_","newer","older","tileLayer","extentChanged","newTiles_","tmpTileRange_","tileSource","sourceRevision","canvasExtent","tilesToDrawByZ","findLoadedTiles","tmpTileRange","childTileRange","covered","canvasScale","currentTilePixelSize","currentScale","dx_1","dy_1","originTileCoord","originTileExtent","tileGutter","tilesToDraw","floatX","nextX","floatY","nextY","drawTileImage","updateUsedTiles","manageTilePyramid","updateCacheSize_","scheduleExpireCache","tileAlpha","alphaChanged","postRenderFunction","opt_tileCallback","opt_inversePixelTransform","opt_context","className_","opt_managed","setMaxResolution","setMinResolution","zindex","MAX_SUBDIVISION","errorThreshold","sourceProj_","transformInvCache","transformInv","transformInv_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","leftBound_1","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","centerSrc","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","TileWMS","transparent","tmpExtent_","getKeyForParams_","tmpSize","bufferSize","scaleSize","Static","imageExtent_","imageWidth","imageHeight","targetWidth","module","quickselect","quickselectStep","sd","newLeft","newRight","swap","defaultCompare","maxEntries","_maxEntries","_minEntries","findItem","equalsFn","calcBBox","toBBox","distBBox","destNode","createNode","child","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","multiSelect","_all","nodesToSearch","childBBox","_build","_splitRoot","tmpNode","_insert","goingUp","path","indexes","_condense","compareMinX","compareMinY","fromJSON","N","M","N2","N1","right2","right3","_chooseSubtree","minEnlargement","targetNode","enlargement","isNode","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","minOverlap","bbox1","bbox2","overlap","_allDistMargin","leftBBox","rightBBox","i$1","child$1","siblings","factory","flatCentersOffset","intersections","rr","maxSegmentLength","ret","opacity_","circleGeometry","geometryCollectionGeometry","lineStringGeometry","multiLineStringGeometry","multiPointGeometry","multiPolygonGeometry","pointGeometry","polygonGeometry","opt_declutterGroup","opt_declutterGroups","renderBuffer","declutter_","updateWhileAnimating_","updateWhileInteracting_","setRenderOrder","toStyleFunction","opt_errback","opt_callbackParam","script","cleanup","async","timer","getElementsByTagName","getObject","stringify","XMLFeature","xmlSerializer_","XMLSerializer","doc","readFeatureFromDocument","readFeatureFromNode","readFeaturesFromDocument","readFeaturesFromNode","ELEMENT_NODE","readGeometryFromDocument","readGeometryFromNode","readProjectionFromDocument","readProjectionFromNode","writeFeatureNode","serializeToString","writeFeaturesNode","writeGeometryNode","WMTSTileGrid","matrixIds_","matrixIds","getMatrixId","getMatrixIds","createFromCapabilitiesMatrixSet","matrixSet","opt_matrixLimits","matrixLimits","switchOriginXY","elt","elt_ml","tileWidth","tileHeight","CanvasImageBuilder","anchorX_","anchorY_","height_","originX_","originY_","drawCoordinates_","myBegin","hitDetectionImage","CanvasLineStringBuilder","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","CanvasPolygonBuilder","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","BATCH_CONSTRUCTORS","PolygonBuilder","Builder","ImageBuilder","LineStringBuilder","TextBuilder","BuilderGroup","tolerance_","buildersByZIndex_","builderInstructions","zKey","builders","builderKey","builderInstruction","Constructor","opaque_","tilePixelRatio_","canUseScreen","screen","availWidth","availHeight","loaded","PJD_3PARAM","PJD_7PARAM","PJD_WGS84","PJD_NODATUM","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","exports$1","ft","to_meter","ignoredChar","testkey","lkey","parseProj","defData","paramName","paramVal","paramOutname","self","paramObj","v","reduce","datum","rf","lat_0","lat0","lat_1","lat_2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","NEUTRAL","whitespace","latin","keyword","endThings","digets","Parser","place","currentObject","mapit","thing","newObj","sExpr","shift","readCharicter","test","neutral","quoted","afterquote","word","afterItem","newObjects","D2R$1","d2r","wkt","lisp","projName","local","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","sphere","ellps","TOWGS84","outName","inName","cleanWKT","defs","that","def","EPSG","ESRI","IAU2000","GOOGLE","globals","codeWords","codes","testObj","testDef","some","testWKT","auth","checkMercator","maybeProjStr","checkProjStr","testProj","msfnz","eccent","sinphi","cosphi","con","adjust_lon","tsfnz","phi","com","phi2z","ts","dphi","eccnth","identity","pt","projs","init","es","names","projStore","exports$2","ellipseName","exports$3","srsCode","json","ourProj","datumDef","ellipse","datumName","sphere_","ecc","ep2","datumObj","datum_type","checkParams","wgs84","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","datum_transform","compareDatums","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geodeticToGeocentric","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","geocentricToGeodetic","adjust_axis","denorm","xin","yin","zin","toPoint","checkSanity","checkCoord","checkNotWGS","transformer","from","to","transformedArray","checkProj","oProj","proj4$1","fromProj","toProj","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","mgrs","forward$1","UTMtoLL","toUpperCase","toPoint$1","accuracy","utm","column","row","colOrigin","rowOrigin","colInt","rowInt","rollover","easting","northing","zoneNumber","setParm","setColumn","setRow","seasting","snorthing","zoneLetter","get100kSetForZone","encode","T","C","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","LetterDesignator","UTMEasting","UTMNorthing","LLtoUTM","radToDeg","rad","T1","C1","R1","D","LongOrigin","mu","phi1Rad","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","fromMGRS","mgrsStr","toMGRS","C08","pj_enfn","en","pj_mlfn","sphi","cphi","pj_inv_mlfn","arg","tmerc","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","tan_phi","ds","temp","sinh","hypot","asinhy","log1py","gatg","pp","B","cos_2B","h1","h2","clens","arg_r","hr","hr1","hr2","clens_cmplx","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","cosh_arg_i","hi1","etmerc","cgb","cbg","utg","gtu","np","Qn","Zb","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","adjust_zone","dependsOn","srat","esinp","MAX_ITER$1","gauss","rc","phic0","ratexp","K","sterea","sinc0","cosc0","R2","sinc","cosc","cosl","rho","stere","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","somerc","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","omerc","no_off","no_rot","bl","fl","gl","t0","dl","t1","t2","hl","jl","pl","dlon12","dlon10","gamma0","uc","us","vs","ql","sl","tl","vl","ul","qp","sp","tp","vp","lcc","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","krovak","s45","s90","fi0","alfa","uq","n0","s0","ro0","ad","gfi","u","deltav","eps","ro","czech","fi1","ok","mlfn","e0","e3","e0fn","e1fn","e2fn","e3fn","gN","adjust_lat","imlfn","cass","lam","nl","asq","cl","ml1","phi1","nl1","rl1","tl1","dsq","qsfnz","P00","P01","P02","P10","P11","P20","laea","mode","S_POLE","N_POLE","EQUIT","OBLIQ","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","q","sinb","cosb","phi0","cCe","sCe","beta","cosz","sinz","asinz","aea","sin_po","cos_po","qs1","qs2","t3","qs0","ns0","phi1z","eccnts","gnom","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","cea","eqc","dlat","MAX_ITER$2","poly","tanphi","mln","mlnp","ma","nzmg","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","mill","MAX_ITER$3","sinu","C_y","C_x","moll","delta_theta","eqdc","ml2","vandg","sinth","costh","gsq","msq","xx","yy","xys","c3","m1","th1","aeqd","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s3","s4","cosAz","Ee","F","ortho","FACE_ENUM","FRONT","BACK","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","proj4","qsc","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","robin","f_df","max_err","iters","upd","newton_rapshon","defaultDatum","Proj","BingMaps","culture_","culture","maxZoom_","apiKey_","imagerySet_","imagerySet","handleImageryMetadataResponse","getApiKey","getImagerySet","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","zoomMin","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","digits","quadKey","imageryProviders","imageryProvider","intersecting","coverageAreas","coverageArea","epsg4326Extent","extent_1","register","projCodes","code1","proj1","code2","proj2","ATTRIBUTIONS","OSM_ATTRIBUTION","LayerConfig","ProviderConfig","Stamen","providerConfig","layerConfig","NAMESPACE_URIS","FEATURE_READER","readRte","readTrk","readWpt","GPX_PARSERS","LINK_PARSERS","GPX_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","multiLineString","TRK_SEQUENCE","TRK_SERIALIZERS","writeWptType","GPX","readExtensions_","readExtensions","handleReadExtensions_","extensionsNode","featureReader","gpx","setAttributeNS","GPX_NODE_FACTORY","RTE_PARSERS","parseLink","parseExtensions","RTEPT_PARSERS","rteValues","layoutOptions","TRK_PARSERS","TRKSEG_PARSERS","TRKPT_PARSERS","trkValues","WPT_PARSERS","LINK_SEQUENCE","LINK_SERIALIZERS","writeLink","RTEPT_TYPE_SEQUENCE","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","getAttribute","hasZ","hasM","applyLayoutOptions","href","link","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","DEFAULT_IMAGE_SCALE_MULTIPLIER","GX_NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","PLACEMARK_PARSERS","extendedDataParser","regionParser","readMultiGeometry","readLineString","readLinearRing","readPoint","readPolygon","readStyle","styleMapValue","readStyleMapValue","placemarkObject","readURI","GX_MULTITRACK_GEOMETRY_PARSERS","readGxTrack","NETWORK_LINK_PARSERS","REGION_PARSERS","LAT_LON_ALT_BOX_PARSERS","regionObject","LOD_PARSERS","lodObject","KML_SEQUENCE","KML_SERIALIZERS","DOCUMENT_SERIALIZERS","DOCUMENT_NODE_FACTORY","writePlacemark","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","DEFAULT_STYLE_ARRAY","KML","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","readDocumentOrFolder_","readPlacemark_","readSharedStyle_","readSharedStyleMap_","styleUrl","sharedStyles","nameStyle","drawName","createNameStyleFunction","foundStyle","findStyle","styleValue","createFeatureStyleFunction","styleUri","baseURI","location","URL","fs","readName","readNameFromDocument","readNameFromNode","name_1","name_2","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","readRegion","regions","readRegionFromDocument","readRegionFromNode","kml","xmlnsUri","textOffset","imageScale","foundText","readColor","hexColor","readFlatCoordinates","readScale","STYLE_MAP_PARSERS","pairObject","PAIR_PARSERS","ICON_STYLE_PARSERS","iconObject","ICON_PARSERS","xunits","yunits","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_TRACK_PARSERS","whens","when","gxTrackObject","GEOMETRY_FLAT_COORDINATES_PARSERS","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","MULTI_GEOMETRY_PARSERS","multiGeometry","homogeneous","setCommonGeometryProperties","FLAT_LINEAR_RINGS_PARSERS","flatLinearRing","INNER_BOUNDARY_IS_PARSERS","OUTER_BOUNDARY_IS_PARSERS","flatLinearRings","STYLE_PARSERS","styleObject","IconObject","drawIcon","hotSpot","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","DATA_PARSERS","EXTENDED_DATA_PARSERS","featureObject","displayName","SCHEMA_DATA_PARSERS","writeColorTextNode","rgba","abgr","hex","EXTENDEDDATA_NODE_SERIALIZERS","pair","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","PLACEMARK_SERIALIZERS","namesAndValues","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","outerRing","POLY_STYLE_SERIALIZERS","COLOR_NODE_FACTORY","iconProperties","TopoJSON","layerName_","layerName","layers_","topoJSONTopology","arcs","transformArc","transformArcs","topoJSONFeatures","objectName","readFeaturesFromGeometryCollection","readFeatureFromGeometry","GEOMETRY_READERS","transformVertex","concatenateArcs","polyArray","ringCoords","indices","geometryReader","vertex","KVP","REST","WMTS","requestEncoding","WMTSRequestEncoding","version_","dimensions_","dimensions","matrixSet_","requestEncoding_","getKeyForDimensions_","createFromWMTSTemplate","getDimensions","getMatrixSet","getRequestEncoding","getVersion","updateDimensions","localContext_1","TextFeature","readFeatureFromText","readFeaturesFromText","readGeometryFromText","readProjectionFromText","writeFeatureText","writeFeaturesText","writeGeometryText","IGCZ","BAROMETRIC","GPS","B_RECORD_RE","H_RECORD_RE","HFDTE_RECORD_RE","NEWLINE_RE","IGC","altitudeMode_","year","month","day","lastDateTime","line","hour","minute","UTC","MOUSE_PROPS","MOUSE_DEFAULTS","PointerEvent","inType","inDict","createEvent","initEvent","bubbles","cancelable","buttons","pressure","tiltX","tiltY","twist","tangentialPressure","hwTimestamp","detail","PointerMap","SparseArrayMap","delete","has","CLONE_PROPS","CLONE_DEFAULTS","BOUNDARY_EVENTS","HAS_SVG_INSTANCE","SVGElementInstance","dispatcher","pointermap","eventMap","captureInfo","eventSources","eventSourceList","registerSource","newEvents","events","unregister","contained","ex","down","inEvent","fireEvent","move","enter","leave","over","cancel","leaveOut","enterOver","eventHandler","_handledByPE","addEvent","unlisten","removeEvent","eventName","boundHandler","makeEvent","relatedTarget","_target","cloneEvent","eventCopy","correspondingUseElement","capture","propagateDown","targets","setCapture","inPointerId","inTarget","skipDispatch","releaseCapture","implicitRelease","asyncDispatchEvent","targeting","shadow","inEl","shadowRoot","webkitShadowRoot","canTarget","elementFromPoint","targetingShadow","olderShadow","os","olderShadowRoot","se","allShadows","shadows","searchRoot","inRoot","st","sr","ssr","owner","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","findTarget","toArray","MO","WebKitMutationObserver","OBSERVER_INIT","attributeOldValue","attributeFilter","Installer","binder","addCallback","removeCallback","changedCallback","mutationWatcher","rule","watchSubtree","enableOnSubtree","readyState","installOnLoad","installNewSubtree","findElements","addElement","querySelectorAll","removeElement","elementChanged","concatLists","accum","list","isElement","flattenMutationTree","inNodes","tree","mutations","mutationHandler","addedNodes","removedNodes","attrib2css","hasNativePE","MSPointerEvent","hasShadowRoot","ShadowDOMPolyfill","head","createShadowRoot","BUTTON_TO_BUTTONS","HAS_BUTTONS","INSTALLER","mouseEvents","POINTER_ID","POINTER_TYPE","lastTouches","isEventSimulatedFromTouch","lts","prepareEvent","pd","webkitForce","WEBKIT_FORCE_AT_MOUSE_DOWN","prepareButtonsForMove","which","mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout","deactivateMouse","pointermap$1","touchEvents","elementAdded","touchActionToScrollType","_scrollType","elementRemoved","evts","oldSt","scrollTypes","firstTouch","isPrimaryTouch","inTouch","identifier","setPrimaryTouch","firstXY","scrolling","removePrimaryPointer","inPointer","typeToButtons","touchToPointer","cte","currentTouchEvent","radiusX","webkitRadiusX","radiusY","webkitRadiusY","force","altitudeAngle","azimuthAngle","touchType","processTouches","inFunction","shouldScroll","currentTarget","dya","dxa","findTouch","inTL","inId","vacuumTouches","touches","cancelOut","touchstart","dedupSynthMouse","overDown","outTarget","touchforcechange","touchmove","touchcancel","moveOverOut","pointer","outEvent","touchend","upOut","cleanUpPointer","lt","pointermap$2","HAS_BITMAP_TYPE","MSPOINTER_TYPE_MOUSE","msEvents","POINTER_TYPES","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSLostPointerCapture","MSGotPointerCapture","assertActive","assertConnected","ownerDocument","inActiveButtonState","msPointerEnabled","msSetPointerCapture","msReleasePointerCapture","shadowSelector","applyAttributeStyles","msMaxTouchPoints","ontouchstart","applyPolyfill","Element","setPointerCapture","targetFinding"],"mappings":"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","file":"commons.2a95a499eedaa1d0f17a.js","sourcesContent":["/**\n * @module ol/xml\n */\nimport { extend } from './array.js';\n/**\n * When using {@link module:ol/xml~makeChildAppender} or\n * {@link module:ol/xml~makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Node} node\n */\n/**\n * @typedef {function(Element, Array<*>): void} Parser\n */\n/**\n * @typedef {function(Element, *, Array<*>): void} Serializer\n */\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link module:ol/xml~createElementNS}\n * @const\n * @type {Document}\n */\nexport var DOCUMENT = document.implementation.createDocument('', '', null);\n/**\n * @type {string}\n */\nexport var XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n    return DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n}\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n    return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n    if (node.nodeType == Node.CDATA_SECTION_NODE ||\n        node.nodeType == Node.TEXT_NODE) {\n        if (normalizeWhitespace) {\n            accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n        }\n        else {\n            accumulator.push(node.nodeValue);\n        }\n    }\n    else {\n        var n = void 0;\n        for (n = node.firstChild; n; n = n.nextSibling) {\n            getAllTextContent_(n, normalizeWhitespace, accumulator);\n        }\n    }\n    return accumulator;\n}\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n    return 'documentElement' in object;\n}\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n    return node.getAttributeNS(namespaceURI, name) || '';\n}\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n    return new DOMParser().parseFromString(xml, 'application/xml');\n}\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n    return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n            extend(array, value);\n        }\n    });\n}\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n    return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n            array.push(value);\n        }\n    });\n}\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n    return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            objectStack[objectStack.length - 1] = value;\n        }\n    });\n}\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n    return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n            var property = opt_property !== undefined ? opt_property : node.localName;\n            var array = void 0;\n            if (property in object) {\n                array = object[property];\n            }\n            else {\n                array = object[property] = [];\n            }\n            array.push(value);\n        }\n    });\n}\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n    return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n        var value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n        if (value !== undefined) {\n            var object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n            var property = opt_property !== undefined ? opt_property : node.localName;\n            object[property] = value;\n        }\n    });\n}\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>): void} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n    return function (node, value, objectStack) {\n        nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n        var parent = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n        var parentNode = parent.node;\n        parentNode.appendChild(node);\n    };\n}\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml~serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>): void} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n    var serializersNS, nodeFactory;\n    return function (node, value, objectStack) {\n        if (serializersNS === undefined) {\n            serializersNS = {};\n            var serializers = {};\n            serializers[node.localName] = nodeWriter;\n            serializersNS[node.namespaceURI] = serializers;\n            nodeFactory = makeSimpleNodeFactory(node.localName);\n        }\n        serialize(serializersNS, nodeFactory, value, objectStack);\n    };\n}\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml~serialize} or {@link module:ol/xml~pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n    var fixedNodeName = opt_nodeName;\n    return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function (value, objectStack, opt_nodeName) {\n        var context = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n        var node = context.node;\n        var nodeName = fixedNodeName;\n        if (nodeName === undefined) {\n            nodeName = opt_nodeName;\n        }\n        var namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n        return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    });\n}\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport var OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n/**\n * Create an array of `values` to be used with {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object<string, *>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<*>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n */\nexport function makeSequence(object, orderedKeys) {\n    var length = orderedKeys.length;\n    var sequence = new Array(length);\n    for (var i = 0; i < length; ++i) {\n        sequence[i] = object[orderedKeys[i]];\n    }\n    return sequence;\n}\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n    /**\n     * @type {Object<string, T>}\n     */\n    var structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n    var i, ii;\n    for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n        structureNS[namespaceURIs[i]] = structure;\n    }\n    return structureNS;\n}\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n    var n;\n    for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n        var parsers = parsersNS[n.namespaceURI];\n        if (parsers !== undefined) {\n            var parser = parsers[n.localName];\n            if (parser !== undefined) {\n                parser.call(opt_this, n, objectStack);\n            }\n        }\n    }\n}\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n    objectStack.push(object);\n    parseNode(parsersNS, node, objectStack, opt_this);\n    return /** @type {T} */ (objectStack.pop());\n}\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n    var length = (opt_keys !== undefined ? opt_keys : values).length;\n    var value, node;\n    for (var i = 0; i < length; ++i) {\n        value = values[i];\n        if (value !== undefined) {\n            node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack, opt_keys !== undefined ? opt_keys[i] : undefined);\n            if (node !== undefined) {\n                serializersNS[node.namespaceURI][node.localName]\n                    .call(opt_this, node, value, objectStack);\n            }\n        }\n    }\n}\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n    objectStack.push(object);\n    serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n    return /** @type {O|undefined} */ (objectStack.pop());\n}\n//# sourceMappingURL=xml.js.map","/**\n * @module ol/extent\n */\nimport { assert } from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n    var extent = createEmpty();\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n    var minX = Math.min.apply(null, xs);\n    var minY = Math.min.apply(null, ys);\n    var maxX = Math.max.apply(null, xs);\n    var maxY = Math.max.apply(null, ys);\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0] - value;\n        opt_extent[1] = extent[1] - value;\n        opt_extent[2] = extent[2] + value;\n        opt_extent[3] = extent[3] + value;\n        return opt_extent;\n    }\n    else {\n        return [\n            extent[0] - value,\n            extent[1] - value,\n            extent[2] + value,\n            extent[3] + value\n        ];\n    }\n}\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent.slice();\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n    var dx, dy;\n    if (x < extent[0]) {\n        dx = extent[0] - x;\n    }\n    else if (extent[2] < x) {\n        dx = x - extent[2];\n    }\n    else {\n        dx = 0;\n    }\n    if (y < extent[1]) {\n        dy = extent[1] - y;\n    }\n    else if (extent[3] < y) {\n        dy = y - extent[3];\n    }\n    else {\n        dy = 0;\n    }\n    return dx * dx + dy * dy;\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n    return containsXY(extent, coordinate[0], coordinate[1]);\n}\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n    return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n        extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var relationship = Relationship.UNKNOWN;\n    if (x < minX) {\n        relationship = relationship | Relationship.LEFT;\n    }\n    else if (x > maxX) {\n        relationship = relationship | Relationship.RIGHT;\n    }\n    if (y < minY) {\n        relationship = relationship | Relationship.BELOW;\n    }\n    else if (y > maxY) {\n        relationship = relationship | Relationship.ABOVE;\n    }\n    if (relationship === Relationship.UNKNOWN) {\n        relationship = Relationship.INTERSECTING;\n    }\n    return relationship;\n}\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n    return [Infinity, Infinity, -Infinity, -Infinity];\n}\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = minX;\n        opt_extent[1] = minY;\n        opt_extent[2] = maxX;\n        opt_extent[3] = maxY;\n        return opt_extent;\n    }\n    else {\n        return [minX, minY, maxX, maxY];\n    }\n}\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n    return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    return createOrUpdate(x, y, x, y, opt_extent);\n}\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendCoordinates(extent, coordinates);\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendRings(extent, rings);\n}\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n    return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n        extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n    if (extent2[0] < extent1[0]) {\n        extent1[0] = extent2[0];\n    }\n    if (extent2[2] > extent1[2]) {\n        extent1[2] = extent2[2];\n    }\n    if (extent2[1] < extent1[1]) {\n        extent1[1] = extent2[1];\n    }\n    if (extent2[3] > extent1[3]) {\n        extent1[3] = extent2[3];\n    }\n    return extent1;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n    if (coordinate[0] < extent[0]) {\n        extent[0] = coordinate[0];\n    }\n    if (coordinate[0] > extent[2]) {\n        extent[2] = coordinate[0];\n    }\n    if (coordinate[1] < extent[1]) {\n        extent[1] = coordinate[1];\n    }\n    if (coordinate[1] > extent[3]) {\n        extent[3] = coordinate[1];\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n    for (; offset < end; offset += stride) {\n        extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n    for (var i = 0, ii = rings.length; i < ii; ++i) {\n        extendCoordinates(extent, rings[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n    extent[0] = Math.min(extent[0], x);\n    extent[1] = Math.min(extent[1], y);\n    extent[2] = Math.max(extent[2], x);\n    extent[3] = Math.max(extent[3], y);\n}\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n    var val;\n    val = callback(getBottomLeft(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getBottomRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopLeft(extent));\n    if (val) {\n        return val;\n    }\n    return false;\n}\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n    var area = 0;\n    if (!isEmpty(extent)) {\n        area = getWidth(extent) * getHeight(extent);\n    }\n    return area;\n}\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n    return [extent[0], extent[1]];\n}\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n    return [extent[2], extent[1]];\n}\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n    return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n    var coordinate;\n    if (corner === Corner.BOTTOM_LEFT) {\n        coordinate = getBottomLeft(extent);\n    }\n    else if (corner === Corner.BOTTOM_RIGHT) {\n        coordinate = getBottomRight(extent);\n    }\n    else if (corner === Corner.TOP_LEFT) {\n        coordinate = getTopLeft(extent);\n    }\n    else if (corner === Corner.TOP_RIGHT) {\n        coordinate = getTopRight(extent);\n    }\n    else {\n        assert(false, 13); // Invalid corner\n    }\n    return coordinate;\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n    var minX = Math.min(extent1[0], extent2[0]);\n    var minY = Math.min(extent1[1], extent2[1]);\n    var maxX = Math.max(extent1[2], extent2[2]);\n    var maxY = Math.max(extent1[3], extent2[3]);\n    return (maxX - minX) * (maxY - minY);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n    var dx = resolution * size[0] / 2;\n    var dy = resolution * size[1] / 2;\n    var cosRotation = Math.cos(rotation);\n    var sinRotation = Math.sin(rotation);\n    var xCos = dx * cosRotation;\n    var xSin = dx * sinRotation;\n    var yCos = dy * cosRotation;\n    var ySin = dy * sinRotation;\n    var x = center[0];\n    var y = center[1];\n    var x0 = x - xCos + ySin;\n    var x1 = x - xCos - ySin;\n    var x2 = x + xCos - ySin;\n    var x3 = x + xCos + ySin;\n    var y0 = y - xSin - yCos;\n    var y1 = y - xSin + yCos;\n    var y2 = y + xSin + yCos;\n    var y3 = y + xSin - yCos;\n    return createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n}\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n    return extent[3] - extent[1];\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n    var intersection = getIntersection(extent1, extent2);\n    return getArea(intersection);\n}\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n    var intersection = opt_extent ? opt_extent : createEmpty();\n    if (intersects(extent1, extent2)) {\n        if (extent1[0] > extent2[0]) {\n            intersection[0] = extent1[0];\n        }\n        else {\n            intersection[0] = extent2[0];\n        }\n        if (extent1[1] > extent2[1]) {\n            intersection[1] = extent1[1];\n        }\n        else {\n            intersection[1] = extent2[1];\n        }\n        if (extent1[2] < extent2[2]) {\n            intersection[2] = extent1[2];\n        }\n        else {\n            intersection[2] = extent2[2];\n        }\n        if (extent1[3] < extent2[3]) {\n            intersection[3] = extent1[3];\n        }\n        else {\n            intersection[3] = extent2[3];\n        }\n    }\n    else {\n        createOrUpdateEmpty(intersection);\n    }\n    return intersection;\n}\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n    return getWidth(extent) + getHeight(extent);\n}\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n    return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n    return [extent[0], extent[3]];\n}\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n    return [extent[2], extent[3]];\n}\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n    return extent[2] - extent[0];\n}\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n    return extent1[0] <= extent2[2] &&\n        extent1[2] >= extent2[0] &&\n        extent1[1] <= extent2[3] &&\n        extent1[3] >= extent2[1];\n}\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n    return extent[2] < extent[0] || extent[3] < extent[1];\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent;\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n    var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n    var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n    extent[0] -= deltaX;\n    extent[2] += deltaX;\n    extent[1] -= deltaY;\n    extent[3] += deltaY;\n}\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n    var intersects = false;\n    var startRel = coordinateRelationship(extent, start);\n    var endRel = coordinateRelationship(extent, end);\n    if (startRel === Relationship.INTERSECTING ||\n        endRel === Relationship.INTERSECTING) {\n        intersects = true;\n    }\n    else {\n        var minX = extent[0];\n        var minY = extent[1];\n        var maxX = extent[2];\n        var maxY = extent[3];\n        var startX = start[0];\n        var startY = start[1];\n        var endX = end[0];\n        var endY = end[1];\n        var slope = (endY - startY) / (endX - startX);\n        var x = void 0, y = void 0;\n        if (!!(endRel & Relationship.ABOVE) &&\n            !(startRel & Relationship.ABOVE)) {\n            // potentially intersects top\n            x = endX - ((endY - maxY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.RIGHT) &&\n            !(startRel & Relationship.RIGHT)) {\n            // potentially intersects right\n            y = endY - ((endX - maxX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n        if (!intersects && !!(endRel & Relationship.BELOW) &&\n            !(startRel & Relationship.BELOW)) {\n            // potentially intersects bottom\n            x = endX - ((endY - minY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.LEFT) &&\n            !(startRel & Relationship.LEFT)) {\n            // potentially intersects left\n            y = endY - ((endX - minX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n    }\n    return intersects;\n}\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n    var coordinates = [\n        extent[0], extent[1],\n        extent[0], extent[3],\n        extent[2], extent[1],\n        extent[2], extent[3]\n    ];\n    transformFn(coordinates, coordinates, 2);\n    var xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n    var ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n    return _boundingExtentXYs(xs, ys, opt_extent);\n}\n//# sourceMappingURL=extent.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/proj/epsg3857\n */\nimport { cosh } from '../math.js';\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n/**\n * @const\n * @type {number}\n */\nexport var HALF_SIZE = Math.PI * RADIUS;\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [\n    -HALF_SIZE, -HALF_SIZE,\n    HALF_SIZE, HALF_SIZE\n];\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var WORLD_EXTENT = [-180, -85, 180, 85];\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nvar EPSG3857Projection = /** @class */ (function (_super) {\n    __extends(EPSG3857Projection, _super);\n    /**\n     * @param {string} code Code.\n     */\n    function EPSG3857Projection(code) {\n        return _super.call(this, {\n            code: code,\n            units: Units.METERS,\n            extent: EXTENT,\n            global: true,\n            worldExtent: WORLD_EXTENT,\n            getPointResolution: function (resolution, point) {\n                return resolution / cosh(point[1] / RADIUS);\n            }\n        }) || this;\n    }\n    return EPSG3857Projection;\n}(Projection));\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n    new EPSG3857Projection('EPSG:3857'),\n    new EPSG3857Projection('EPSG:102100'),\n    new EPSG3857Projection('EPSG:102113'),\n    new EPSG3857Projection('EPSG:900913'),\n    new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n    new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n    new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n    var length = input.length;\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var output = opt_output;\n    if (output === undefined) {\n        if (dimension > 2) {\n            // preserve values beyond second dimension\n            output = input.slice();\n        }\n        else {\n            output = new Array(length);\n        }\n    }\n    var halfSize = HALF_SIZE;\n    for (var i = 0; i < length; i += dimension) {\n        output[i] = halfSize * input[i] / 180;\n        var y = RADIUS *\n            Math.log(Math.tan(Math.PI * (+input[i + 1] + 90) / 360));\n        if (y > halfSize) {\n            y = halfSize;\n        }\n        else if (y < -halfSize) {\n            y = -halfSize;\n        }\n        output[i + 1] = y;\n    }\n    return output;\n}\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n    var length = input.length;\n    var dimension = opt_dimension > 1 ? opt_dimension : 2;\n    var output = opt_output;\n    if (output === undefined) {\n        if (dimension > 2) {\n            // preserve values beyond second dimension\n            output = input.slice();\n        }\n        else {\n            output = new Array(length);\n        }\n    }\n    for (var i = 0; i < length; i += dimension) {\n        output[i] = 180 * input[i] / HALF_SIZE;\n        output[i + 1] = 360 * Math.atan(Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n    }\n    return output;\n}\n//# sourceMappingURL=epsg3857.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [-180, -90, 180, 90];\n/**\n * @const\n * @type {number}\n */\nexport var METERS_PER_UNIT = Math.PI * RADIUS / 180;\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nvar EPSG4326Projection = /** @class */ (function (_super) {\n    __extends(EPSG4326Projection, _super);\n    /**\n     * @param {string} code Code.\n     * @param {string=} opt_axisOrientation Axis orientation.\n     */\n    function EPSG4326Projection(code, opt_axisOrientation) {\n        return _super.call(this, {\n            code: code,\n            units: Units.DEGREES,\n            extent: EXTENT,\n            axisOrientation: opt_axisOrientation,\n            global: true,\n            metersPerUnit: METERS_PER_UNIT,\n            worldExtent: EXTENT\n        }) || this;\n    }\n    return EPSG4326Projection;\n}(Projection));\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n    new EPSG4326Projection('CRS:84'),\n    new EPSG4326Projection('EPSG:4326', 'neu'),\n    new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n    new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n    new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n    new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n    new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n    new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n//# sourceMappingURL=epsg4326.js.map","/**\n * @module ol/proj/projections\n */\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nvar cache = {};\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n    cache = {};\n}\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n    return cache[code] || null;\n}\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n    cache[code] = projection;\n}\n//# sourceMappingURL=projections.js.map","/**\n * @module ol/proj\n */\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport { getDistance } from './sphere.js';\nimport { applyTransform } from './extent.js';\nimport { modulo } from './math.js';\nimport { toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS } from './proj/epsg3857.js';\nimport { PROJECTIONS as EPSG4326_PROJECTIONS } from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, { METERS_PER_UNIT } from './proj/Units.js';\nimport { add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc } from './proj/transforms.js';\nimport { add as addProj, clear as clearProj, get as getProj } from './proj/projections.js';\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\nexport { METERS_PER_UNIT };\nexport { Projection };\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n    var output;\n    if (opt_output !== undefined) {\n        for (var i = 0, ii = input.length; i < ii; ++i) {\n            opt_output[i] = input[i];\n        }\n        output = opt_output;\n    }\n    else {\n        output = input.slice();\n    }\n    return output;\n}\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n    if (opt_output !== undefined && input !== opt_output) {\n        for (var i = 0, ii = input.length; i < ii; ++i) {\n            opt_output[i] = input[i];\n        }\n        input = opt_output;\n    }\n    return input;\n}\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n    addProj(projection.getCode(), projection);\n    addTransformFunc(projection, projection, cloneTransform);\n}\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n    projections.forEach(addProjection);\n}\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n    return typeof projectionLike === 'string' ?\n        getProj(/** @type {string} */ (projectionLike)) :\n        ( /** @type {Projection} */(projectionLike) || null);\n}\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n    projection = get(projection);\n    var pointResolution;\n    var getter = projection.getPointResolutionFunc();\n    if (getter) {\n        pointResolution = getter(resolution, point);\n        if (opt_units && opt_units !== projection.getUnits()) {\n            var metersPerUnit = projection.getMetersPerUnit();\n            if (metersPerUnit) {\n                pointResolution = pointResolution * metersPerUnit / METERS_PER_UNIT[opt_units];\n            }\n        }\n    }\n    else {\n        var units = projection.getUnits();\n        if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n            pointResolution = resolution;\n        }\n        else {\n            // Estimate point resolution by transforming the center pixel to EPSG:4326,\n            // measuring its width and height on the normal sphere, and taking the\n            // average of the width and height.\n            var toEPSG4326_1 = getTransformFromProjections(projection, get('EPSG:4326'));\n            var vertices = [\n                point[0] - resolution / 2, point[1],\n                point[0] + resolution / 2, point[1],\n                point[0], point[1] - resolution / 2,\n                point[0], point[1] + resolution / 2\n            ];\n            vertices = toEPSG4326_1(vertices, vertices, 2);\n            var width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n            var height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n            pointResolution = (width + height) / 2;\n            var metersPerUnit = opt_units ?\n                METERS_PER_UNIT[opt_units] :\n                projection.getMetersPerUnit();\n            if (metersPerUnit !== undefined) {\n                pointResolution /= metersPerUnit;\n            }\n        }\n    }\n    return pointResolution;\n}\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n    addProjections(projections);\n    projections.forEach(function (source) {\n        projections.forEach(function (destination) {\n            if (source !== destination) {\n                addTransformFunc(source, destination, cloneTransform);\n            }\n        });\n    });\n}\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n    projections1.forEach(function (projection1) {\n        projections2.forEach(function (projection2) {\n            addTransformFunc(projection1, projection2, forwardTransform);\n            addTransformFunc(projection2, projection1, inverseTransform);\n        });\n    });\n}\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n    clearProj();\n    clearTransformFuncs();\n}\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n    if (!projection) {\n        return get(defaultCode);\n    }\n    else if (typeof projection === 'string') {\n        return get(projection);\n    }\n    else {\n        return (\n        /** @type {Projection} */ (projection));\n    }\n}\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n    return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array<number>} Output.\n     */\n    function (input, opt_output, opt_dimension) {\n        var length = input.length;\n        var dimension = opt_dimension !== undefined ? opt_dimension : 2;\n        var output = opt_output !== undefined ? opt_output : new Array(length);\n        for (var i = 0; i < length; i += dimension) {\n            var point = coordTransform([input[i], input[i + 1]]);\n            output[i] = point[0];\n            output[i + 1] = point[1];\n            for (var j = dimension - 1; j >= 2; --j) {\n                output[i + j] = input[i + j];\n            }\n        }\n        return output;\n    });\n}\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n    var sourceProj = get(source);\n    var destProj = get(destination);\n    addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n    addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n    return transform(coordinate, 'EPSG:4326', opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n    var lonLat = transform(coordinate, opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n    var lon = lonLat[0];\n    if (lon < -180 || lon > 180) {\n        lonLat[0] = modulo(lon + 180, 360) - 180;\n    }\n    return lonLat;\n}\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n    if (projection1 === projection2) {\n        return true;\n    }\n    var equalUnits = projection1.getUnits() === projection2.getUnits();\n    if (projection1.getCode() === projection2.getCode()) {\n        return equalUnits;\n    }\n    else {\n        var transformFunc = getTransformFromProjections(projection1, projection2);\n        return transformFunc === cloneTransform && equalUnits;\n    }\n}\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n    var sourceCode = sourceProjection.getCode();\n    var destinationCode = destinationProjection.getCode();\n    var transformFunc = getTransformFunc(sourceCode, destinationCode);\n    if (!transformFunc) {\n        transformFunc = identityTransform;\n    }\n    return transformFunc;\n}\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n    var sourceProjection = get(source);\n    var destinationProjection = get(destination);\n    return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n    var transformFunc = getTransform(source, destination);\n    return transformFunc(coordinate, undefined, coordinate.length);\n}\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n    var transformFunc = getTransform(source, destination);\n    return applyTransform(extent, transformFunc);\n}\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n    var transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n    return transformFunc(point);\n}\n/**\n * @type {Projection}\n */\nvar userProjection = null;\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @param {ProjectionLike} projection The user projection.\n */\nexport function setUserProjection(projection) {\n    userProjection = get(projection);\n}\n/**\n * Clear the user projection if set.  Note that this method is not yet a part of\n * the stable API.  Support for user projections is not yet complete and should\n * be considered experimental.\n */\nexport function clearUserProjection() {\n    userProjection = null;\n}\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @returns {Projection} The user projection (or null if not set).\n */\nexport function getUserProjection() {\n    return userProjection;\n}\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.  Note that this\n * method is not yet a part of the stable API.  Support for user projections is\n * not yet complete and should be considered experimental.\n */\nexport function useGeographic() {\n    setUserProjection('EPSG:4326');\n}\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @returns {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n    if (!userProjection) {\n        return coordinate;\n    }\n    return transform(coordinate, sourceProjection, userProjection);\n}\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @returns {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n    if (!userProjection) {\n        return coordinate;\n    }\n    return transform(coordinate, userProjection, destProjection);\n}\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @returns {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n    if (!userProjection) {\n        return extent;\n    }\n    return transformExtent(extent, sourceProjection, userProjection);\n}\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @returns {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n    if (!userProjection) {\n        return extent;\n    }\n    return transformExtent(extent, userProjection, destProjection);\n}\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n    // Add transformations that don't alter coordinates to convert within set of\n    // projections with equal meaning.\n    addEquivalentProjections(EPSG3857_PROJECTIONS);\n    addEquivalentProjections(EPSG4326_PROJECTIONS);\n    // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n    // coordinates and back.\n    addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\naddCommon();\n//# sourceMappingURL=proj.js.map","/**\n * @module ol/util\n */\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n    return /** @type {?} */ ((function () {\n        throw new Error('Unimplemented abstract method.');\n    })());\n}\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nvar uidCounter_ = 0;\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n    return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport var VERSION = '6.0.1';\n//# sourceMappingURL=util.js.map","/**\n * @module ol/format/xsd\n */\nimport { getAllTextContent, DOCUMENT } from '../xml.js';\nimport { padNumber } from '../string.js';\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n    var s = getAllTextContent(node, false);\n    return readBooleanString(s);\n}\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n    var m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n    if (m) {\n        return m[1] !== undefined || false;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n    var s = getAllTextContent(node, false);\n    var dateTime = Date.parse(s);\n    return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n    var s = getAllTextContent(node, false);\n    return readDecimalString(s);\n}\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n    // FIXME check spec\n    var m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n    if (m) {\n        return parseFloat(m[1]);\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeInteger(node) {\n    var s = getAllTextContent(node, false);\n    return readNonNegativeIntegerString(s);\n}\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n    var m = /^\\s*(\\d+)\\s*$/.exec(string);\n    if (m) {\n        return parseInt(m[1], 10);\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n    return getAllTextContent(node, false).trim();\n}\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n    writeStringTextNode(node, (bool) ? '1' : '0');\n}\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n    node.appendChild(DOCUMENT.createCDATASection(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n    var date = new Date(dateTime * 1000);\n    var string = date.getUTCFullYear() + '-' +\n        padNumber(date.getUTCMonth() + 1, 2) + '-' +\n        padNumber(date.getUTCDate(), 2) + 'T' +\n        padNumber(date.getUTCHours(), 2) + ':' +\n        padNumber(date.getUTCMinutes(), 2) + ':' +\n        padNumber(date.getUTCSeconds(), 2) + 'Z';\n    node.appendChild(DOCUMENT.createTextNode(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n    var string = decimal.toPrecision();\n    node.appendChild(DOCUMENT.createTextNode(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n    var string = nonNegativeInteger.toString();\n    node.appendChild(DOCUMENT.createTextNode(string));\n}\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n    node.appendChild(DOCUMENT.createTextNode(string));\n}\n//# sourceMappingURL=xsd.js.map","/**\n * @module ol/geom/GeometryType\n */\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    LINEAR_RING: 'LinearRing',\n    POLYGON: 'Polygon',\n    MULTI_POINT: 'MultiPoint',\n    MULTI_LINE_STRING: 'MultiLineString',\n    MULTI_POLYGON: 'MultiPolygon',\n    GEOMETRY_COLLECTION: 'GeometryCollection',\n    CIRCLE: 'Circle'\n};\n//# sourceMappingURL=GeometryType.js.map","/**\n * @module ol/array\n */\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n    var mid, cmp;\n    var comparator = opt_comparator || numberSafeCompareFunction;\n    var low = 0;\n    var high = haystack.length;\n    var found = false;\n    while (low < high) {\n        /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n         * to double (which gives the wrong results). */\n        mid = low + (high - low >> 1);\n        cmp = +comparator(haystack[mid], needle);\n        if (cmp < 0.0) { /* Too low. */\n            low = mid + 1;\n        }\n        else { /* Key found or too high */\n            high = mid;\n            found = !cmp;\n        }\n    }\n    /* Key not found. */\n    return found ? low : ~low;\n}\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n}\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n    return arr.indexOf(obj) >= 0;\n}\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n    var n = arr.length;\n    if (arr[0] <= target) {\n        return 0;\n    }\n    else if (target <= arr[n - 1]) {\n        return n - 1;\n    }\n    else {\n        var i = void 0;\n        if (direction > 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] < target) {\n                    return i - 1;\n                }\n            }\n        }\n        else if (direction < 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] <= target) {\n                    return i;\n                }\n            }\n        }\n        else {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] == target) {\n                    return i;\n                }\n                else if (arr[i] < target) {\n                    if (arr[i - 1] - target < target - arr[i]) {\n                        return i - 1;\n                    }\n                    else {\n                        return i;\n                    }\n                }\n            }\n        }\n        return n - 1;\n    }\n}\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n    while (begin < end) {\n        var tmp = arr[begin];\n        arr[begin] = arr[end];\n        arr[end] = tmp;\n        ++begin;\n        --end;\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n    var extension = Array.isArray(data) ? data : [data];\n    var length = extension.length;\n    for (var i = 0; i < length; i++) {\n        arr[arr.length] = extension[i];\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n    var i = arr.indexOf(obj);\n    var found = i > -1;\n    if (found) {\n        arr.splice(i, 1);\n    }\n    return found;\n}\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n    var length = arr.length >>> 0;\n    var value;\n    for (var i = 0; i < length; i++) {\n        value = arr[i];\n        if (func(value, i, arr)) {\n            return value;\n        }\n    }\n    return null;\n}\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n    var len1 = arr1.length;\n    if (len1 !== arr2.length) {\n        return false;\n    }\n    for (var i = 0; i < len1; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n    var length = arr.length;\n    var tmp = Array(arr.length);\n    var i;\n    for (i = 0; i < length; i++) {\n        tmp[i] = { index: i, value: arr[i] };\n    }\n    tmp.sort(function (a, b) {\n        return compareFnc(a.value, b.value) || a.index - b.index;\n    });\n    for (i = 0; i < arr.length; i++) {\n        arr[i] = tmp[i].value;\n    }\n}\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n    var index;\n    var found = !arr.every(function (el, idx) {\n        index = idx;\n        return !func(el, idx, arr);\n    });\n    return found ? index : -1;\n}\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n    var compare = opt_func || numberSafeCompareFunction;\n    return arr.every(function (currentVal, index) {\n        if (index === 0) {\n            return true;\n        }\n        var res = compare(arr[index - 1], currentVal);\n        return !(res > 0 || opt_strict && res === 0);\n    });\n}\n//# sourceMappingURL=array.js.map","/**\n * @module ol/events/EventType\n */\n/**\n * @enum {string}\n * @const\n */\nexport default {\n    /**\n     * Generic change event. Triggered when the revision counter is increased.\n     * @event module:ol/events/Event~BaseEvent#change\n     * @api\n     */\n    CHANGE: 'change',\n    /**\n     * Generic error event. Triggered when an error occurs.\n     * @event module:ol/events/Event~BaseEvent#error\n     * @api\n     */\n    ERROR: 'error',\n    CLEAR: 'clear',\n    CONTEXTMENU: 'contextmenu',\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    DRAGENTER: 'dragenter',\n    DRAGOVER: 'dragover',\n    DROP: 'drop',\n    KEYDOWN: 'keydown',\n    KEYPRESS: 'keypress',\n    LOAD: 'load',\n    RESIZE: 'resize',\n    WHEEL: 'wheel'\n};\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/events\n */\nimport { clear } from './obj.js';\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener\n * @property {import(\"./events/Target.js\").EventTargetLike} target\n * @property {string} type\n * @api\n */\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n    if (opt_this && opt_this !== target) {\n        listener = listener.bind(opt_this);\n    }\n    if (opt_once) {\n        var originalListener_1 = listener;\n        listener = function () {\n            target.removeEventListener(type, listener);\n            originalListener_1.apply(this, arguments);\n        };\n    }\n    var eventsKey = {\n        target: target,\n        type: type,\n        listener: listener\n    };\n    target.addEventListener(type, listener);\n    return eventsKey;\n}\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n    return listen(target, type, listener, opt_this, true);\n}\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n    if (key && key.target) {\n        key.target.removeEventListener(key.type, key.listener);\n        clear(key);\n    }\n}\n//# sourceMappingURL=events.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getUid } from '../../util.js';\nimport LRUCache from '../../structs/LRUCache.js';\n/**\n * @module ol/render/canvas/LabelCache\n */\n/**\n * @classdesc\n * Cache of pre-rendered labels.\n */\nvar LabelCache = /** @class */ (function (_super) {\n    __extends(LabelCache, _super);\n    /**\n     * @inheritDoc\n     */\n    function LabelCache(opt_highWaterMark) {\n        var _this = _super.call(this, opt_highWaterMark) || this;\n        _this.consumers = {};\n        return _this;\n    }\n    LabelCache.prototype.clear = function () {\n        this.consumers = {};\n        _super.prototype.clear.call(this);\n    };\n    /**\n     * @override\n     * @param {string} key Label key.\n     * @param {import(\"./Executor.js\").default} consumer Label consumer.\n     * @return {HTMLCanvasElement} Label.\n     */\n    LabelCache.prototype.get = function (key, consumer) {\n        var canvas = _super.prototype.get.call(this, key);\n        var consumerId = getUid(consumer);\n        if (!(consumerId in this.consumers)) {\n            this.consumers[consumerId] = {};\n        }\n        this.consumers[consumerId][key] = true;\n        return canvas;\n    };\n    LabelCache.prototype.prune = function () {\n        outer: while (this.canExpireCache()) {\n            var key = this.peekLastKey();\n            for (var consumerId in this.consumers) {\n                if (key in this.consumers[consumerId]) {\n                    break outer;\n                }\n            }\n            var canvas = this.pop();\n            canvas.width = canvas.height = 0;\n            for (var consumerId in this.consumers) {\n                delete this.consumers[consumerId][key];\n            }\n        }\n    };\n    /**\n     * @param {import(\"./Executor.js\").default} consumer Label consumer.\n     */\n    LabelCache.prototype.release = function (consumer) {\n        delete this.consumers[getUid(consumer)];\n    };\n    return LabelCache;\n}(LRUCache));\nexport default LabelCache;\n//# sourceMappingURL=LabelCache.js.map","/**\n * @module ol/render/canvas\n */\nimport { getFontParameters } from '../css.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { clear } from '../obj.js';\nimport { create as createTransform } from '../transform.js';\nimport LabelCache from './canvas/LabelCache.js';\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {CanvasLineCap} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {CanvasLineJoin} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {CanvasLineCap} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {CanvasLineJoin} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n/**\n * Declutter groups for support of multi geometries.\n * @typedef {Array<DeclutterGroup>} DeclutterGroups\n */\n/**\n * @const\n * @type {string}\n */\nexport var defaultFont = '10px sans-serif';\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultFillStyle = '#000';\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport var defaultLineCap = 'round';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultLineDash = [];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineDashOffset = 0;\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport var defaultLineJoin = 'round';\n/**\n * @const\n * @type {number}\n */\nexport var defaultMiterLimit = 10;\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultStrokeStyle = '#000';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextAlign = 'center';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextBaseline = 'middle';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultPadding = [0, 0, 0, 0];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineWidth = 1;\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {LabelCache}\n * @api\n */\nexport var labelCache = new LabelCache();\n/**\n * @type {!Object<string, number>}\n */\nexport var checkedFonts = {};\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar measureContext = null;\n/**\n * @type {string}\n */\nvar measureFont;\n/**\n * @type {!Object<string, number>}\n */\nexport var textHeights = {};\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport var checkFont = (function () {\n    var retries = 100;\n    var checked = checkedFonts;\n    var size = '32px ';\n    var referenceFonts = ['monospace', 'serif'];\n    var len = referenceFonts.length;\n    var text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n    var interval, referenceWidth;\n    /**\n     * @param {string} fontStyle Css font-style\n     * @param {string} fontWeight Css font-weight\n     * @param {*} fontFamily Css font-family\n     * @return {boolean} Font with style and weight is available\n     */\n    function isAvailable(fontStyle, fontWeight, fontFamily) {\n        var context = getMeasureContext();\n        var available = true;\n        for (var i = 0; i < len; ++i) {\n            var referenceFont = referenceFonts[i];\n            context.font = fontStyle + ' ' + fontWeight + ' ' + size + referenceFont;\n            referenceWidth = context.measureText(text).width;\n            if (fontFamily != referenceFont) {\n                context.font = fontStyle + ' ' + fontWeight + ' ' + size + fontFamily + ',' + referenceFont;\n                var width = context.measureText(text).width;\n                // If width and referenceWidth are the same, then the fallback was used\n                // instead of the font we wanted, so the font is not available.\n                available = available && width != referenceWidth;\n            }\n        }\n        if (available) {\n            return true;\n        }\n        return false;\n    }\n    function check() {\n        var done = true;\n        for (var font in checked) {\n            if (checked[font] < retries) {\n                if (isAvailable.apply(this, font.split('\\n'))) {\n                    checked[font] = retries;\n                    clear(textHeights);\n                    // Make sure that loaded fonts are picked up by Safari\n                    measureContext = null;\n                    measureFont = undefined;\n                    if (labelCache.getCount()) {\n                        labelCache.clear();\n                    }\n                }\n                else {\n                    ++checked[font];\n                    done = false;\n                }\n            }\n        }\n        if (done) {\n            clearInterval(interval);\n            interval = undefined;\n        }\n    }\n    return function (fontSpec) {\n        var font = getFontParameters(fontSpec);\n        if (!font) {\n            return;\n        }\n        var families = font.families;\n        for (var i = 0, ii = families.length; i < ii; ++i) {\n            var family = families[i];\n            var key = font.style + '\\n' + font.weight + '\\n' + family;\n            if (!(key in checked)) {\n                checked[key] = retries;\n                if (!isAvailable(font.style, font.weight, family)) {\n                    checked[key] = 0;\n                    if (interval === undefined) {\n                        interval = setInterval(check, 32);\n                    }\n                }\n            }\n        }\n    };\n})();\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n    if (!measureContext) {\n        measureContext = createCanvasContext2D(1, 1);\n    }\n    return measureContext;\n}\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport var measureTextHeight = (function () {\n    /**\n     * @type {HTMLDivElement}\n     */\n    var div;\n    var heights = textHeights;\n    return function (font) {\n        var height = heights[font];\n        if (height == undefined) {\n            if (!div) {\n                div = document.createElement('div');\n                div.innerHTML = 'M';\n                div.style.margin = div.style.padding = '0 !important';\n                div.style.position = 'absolute !important';\n                div.style.left = '-99999px !important';\n            }\n            div.style.font = font;\n            document.body.appendChild(div);\n            height = heights[font] = div.offsetHeight;\n            document.body.removeChild(div);\n        }\n        return height;\n    };\n})();\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n    var measureContext = getMeasureContext();\n    if (font != measureFont) {\n        measureContext.font = measureFont = font;\n    }\n    return measureContext.measureText(text).width;\n}\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @returns {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n    if (text in cache) {\n        return cache[text];\n    }\n    var width = cache[text] = measureTextWidth(font, text);\n    return width;\n}\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n    var numLines = lines.length;\n    var width = 0;\n    for (var i = 0; i < numLines; ++i) {\n        var currentWidth = measureTextWidth(font, lines[i]);\n        width = Math.max(width, currentWidth);\n        widths.push(currentWidth);\n    }\n    return width;\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n    if (rotation !== 0) {\n        context.translate(offsetX, offsetY);\n        context.rotate(rotation);\n        context.translate(-offsetX, -offsetY);\n    }\n}\nexport var resetTransform = createTransform();\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale) {\n    var alpha;\n    if (opacity != 1) {\n        alpha = context.globalAlpha;\n        context.globalAlpha = alpha * opacity;\n    }\n    if (transform) {\n        context.setTransform.apply(context, transform);\n    }\n    context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n    if (opacity != 1) {\n        context.globalAlpha = alpha;\n    }\n    if (transform) {\n        context.setTransform.apply(context, resetTransform);\n    }\n}\n//# sourceMappingURL=canvas.js.map","/**\n * @module ol/transform\n */\nimport { assert } from './asserts.js';\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n */\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n/**\n * @private\n * @type {Transform}\n */\nvar tmp_ = new Array(6);\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n    return set(transform, 1, 0, 0, 1, 0, 0);\n}\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n    var a1 = transform1[0];\n    var b1 = transform1[1];\n    var c1 = transform1[2];\n    var d1 = transform1[3];\n    var e1 = transform1[4];\n    var f1 = transform1[5];\n    var a2 = transform2[0];\n    var b2 = transform2[1];\n    var c2 = transform2[2];\n    var d2 = transform2[3];\n    var e2 = transform2[4];\n    var f2 = transform2[5];\n    transform1[0] = a1 * a2 + c1 * b2;\n    transform1[1] = b1 * a2 + d1 * b2;\n    transform1[2] = a1 * c2 + c1 * d2;\n    transform1[3] = b1 * c2 + d1 * d2;\n    transform1[4] = a1 * e2 + c1 * f2 + e1;\n    transform1[5] = b1 * e2 + d1 * f2 + f1;\n    return transform1;\n}\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n    transform[0] = a;\n    transform[1] = b;\n    transform[2] = c;\n    transform[3] = d;\n    transform[4] = e;\n    transform[5] = f;\n    return transform;\n}\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n    transform1[0] = transform2[0];\n    transform1[1] = transform2[1];\n    transform1[2] = transform2[2];\n    transform1[3] = transform2[3];\n    transform1[4] = transform2[4];\n    transform1[5] = transform2[5];\n    return transform1;\n}\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n    return coordinate;\n}\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n    return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n    return set(target, x, 0, 0, y, 0, 0);\n}\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n    return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    transform[0] = sx * cos;\n    transform[1] = sy * sin;\n    transform[2] = -sx * sin;\n    transform[3] = sy * cos;\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n    return transform;\n}\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n    return makeInverse(source, source);\n}\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n    var det = determinant(source);\n    assert(det !== 0, 32); // Transformation matrix cannot be inverted\n    var a = source[0];\n    var b = source[1];\n    var c = source[2];\n    var d = source[3];\n    var e = source[4];\n    var f = source[5];\n    target[0] = d / det;\n    target[1] = -b / det;\n    target[2] = -c / det;\n    target[3] = a / det;\n    target[4] = (c * f - d * e) / det;\n    target[5] = -(a * f - b * e) / det;\n    return target;\n}\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2];\n}\n/**\n * A string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n    return 'matrix(' + mat.join(', ') + ')';\n}\n//# sourceMappingURL=transform.js.map","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it\n        cosh = Math.cosh;\n    }\n    else {\n        //  else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n}());\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return angleInRadians * 180 / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return angleInDegrees * Math.PI / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n//# sourceMappingURL=math.js.map","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n    if (!assertion) {\n        throw new AssertionError(errorCode);\n    }\n}\n//# sourceMappingURL=asserts.js.map","/**\n * @module ol/TileState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    /**\n     * Indicates that tile loading failed\n     * @type {number}\n     */\n    ERROR: 3,\n    EMPTY: 4,\n    ABORT: 5\n};\n//# sourceMappingURL=TileState.js.map","/**\n * @module ol/render/canvas/Instruction\n */\n/**\n * @enum {number}\n */\nvar Instruction = {\n    BEGIN_GEOMETRY: 0,\n    BEGIN_PATH: 1,\n    CIRCLE: 2,\n    CLOSE_PATH: 3,\n    CUSTOM: 4,\n    DRAW_CHARS: 5,\n    DRAW_IMAGE: 6,\n    END_GEOMETRY: 7,\n    FILL: 8,\n    MOVE_TO_LINE_TO: 9,\n    SET_FILL_STYLE: 10,\n    SET_STROKE_STYLE: 11,\n    STROKE: 12\n};\n/**\n * @type {Array<Instruction>}\n */\nexport var fillInstruction = [Instruction.FILL];\n/**\n * @type {Array<Instruction>}\n */\nexport var strokeInstruction = [Instruction.STROKE];\n/**\n * @type {Array<Instruction>}\n */\nexport var beginPathInstruction = [Instruction.BEGIN_PATH];\n/**\n * @type {Array<Instruction>}\n */\nexport var closePathInstruction = [Instruction.CLOSE_PATH];\nexport default Instruction;\n//# sourceMappingURL=Instruction.js.map","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = (typeof Object.assign === 'function') ? Object.assign : function (target, var_sources) {\n    if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    var output = Object(target);\n    for (var i = 1, ii = arguments.length; i < ii; ++i) {\n        var source = arguments[i];\n        if (source !== undefined && source !== null) {\n            for (var key in source) {\n                if (source.hasOwnProperty(key)) {\n                    output[key] = source[key];\n                }\n            }\n        }\n    }\n    return output;\n};\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = (typeof Object.values === 'function') ? Object.values : function (object) {\n    var values = [];\n    for (var property in object) {\n        values.push(object[property]);\n    }\n    return values;\n};\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseTile\n */\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport { assign } from '../obj.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../source/Tile.js\").default} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {Layer<import(\"../source/Tile.js\").default>}\n * @api\n */\nvar BaseTileLayer = /** @class */ (function (_super) {\n    __extends(BaseTileLayer, _super);\n    /**\n     * @param {Options=} opt_options Tile layer options.\n     */\n    function BaseTileLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.preload;\n        delete baseOptions.useInterimTilesOnError;\n        _this = _super.call(this, baseOptions) || this;\n        _this.setPreload(options.preload !== undefined ? options.preload : 0);\n        _this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n            options.useInterimTilesOnError : true);\n        return _this;\n    }\n    /**\n    * Return the level as number to which we will preload tiles up to.\n    * @return {number} The level to preload tiles up to.\n    * @observable\n    * @api\n    */\n    BaseTileLayer.prototype.getPreload = function () {\n        return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n    };\n    /**\n    * Set the level as number to which we will preload tiles up to.\n    * @param {number} preload The level to preload tiles up to.\n    * @observable\n    * @api\n    */\n    BaseTileLayer.prototype.setPreload = function (preload) {\n        this.set(TileProperty.PRELOAD, preload);\n    };\n    /**\n    * Whether we use interim tiles on error.\n    * @return {boolean} Use interim tiles on error.\n    * @observable\n    * @api\n    */\n    BaseTileLayer.prototype.getUseInterimTilesOnError = function () {\n        return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n    };\n    /**\n    * Set whether we use interim tiles on error.\n    * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n    * @observable\n    * @api\n    */\n    BaseTileLayer.prototype.setUseInterimTilesOnError = function (useInterimTilesOnError) {\n        this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n    };\n    return BaseTileLayer;\n}(Layer));\nexport default BaseTileLayer;\n//# sourceMappingURL=BaseTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Tile\n */\nimport BaseTileLayer from './BaseTile.js';\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nvar TileLayer = /** @class */ (function (_super) {\n    __extends(TileLayer, _super);\n    /**\n     * @param {import(\"./BaseTile.js\").Options=} opt_options Tile layer options.\n     */\n    function TileLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    TileLayer.prototype.createRenderer = function () {\n        return new CanvasTileLayerRenderer(this);\n    };\n    return TileLayer;\n}(BaseTileLayer));\nexport default TileLayer;\n//# sourceMappingURL=Tile.js.map","/**\n * @module olcs.util\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\n/**\n * Return the projection of the source that Cesium should use.\n *\n * @param {ol.source.Source} source Source.\n * @returns {ol.proj.Projection} The projection of the source.\n */\nexports.getSourceProjection = function(source) {\n  return /** @type {ol.proj.Projection} */ (source.get('olcs.projection'))\n    || source.getProjection();\n};\n\n/**\n * @param {ol.Observable} observable\n * @param {string} type\n * @param {Function} listener\n * @return {!ol.events.EventsKey}\n */\nexport function olcsListen(observable, type, listener) {\n  // See https://github.com/openlayers/openlayers/pull/8481\n  // ol.events.listen is internal so we use `on` instead.\n  // And since `on` as a convoluted API (can return an EventsKey or an array of them)\n  // we use a cast here.\n  return /** @type {!ol.events.EventsKey} */ (observable.on(type, listener));\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.olcs_uid || (obj.olcs_uid = ++uidCounter_);\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  for (let i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort((a, b) => compareFnc(a.value, b.value) || a.index - b.index);\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * @param {Cesium.Scene} scene The scene.\n */\nexport function isGroundPolylinePrimitiveSupported(scene) {\n  const obj = Cesium.GroundPolylinePrimitive;\n  return obj && obj.isSupported(scene);\n}\n\nexport default exports;\n","/**\n * @module ol/geom/GeometryLayout\n */\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n    XY: 'XY',\n    XYZ: 'XYZ',\n    XYM: 'XYM',\n    XYZM: 'XYZM'\n};\n//# sourceMappingURL=GeometryLayout.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4\n};\n//# sourceMappingURL=ImageState.js.map","/**\n * @module ol/centerconstraint\n */\nimport { clamp } from './math.js';\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n    return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function (center, resolution, size, opt_isMoving) {\n        if (center) {\n            var viewWidth = onlyCenter ? 0 : size[0] * resolution;\n            var viewHeight = onlyCenter ? 0 : size[1] * resolution;\n            var minX = extent[0] + viewWidth / 2;\n            var maxX = extent[2] - viewWidth / 2;\n            var minY = extent[1] + viewHeight / 2;\n            var maxY = extent[3] - viewHeight / 2;\n            // note: when zooming out of bounds, min and max values for x and y may\n            // end up inverted (min > max); this has to be accounted for\n            if (minX > maxX) {\n                minX = maxX = (maxX + minX) / 2;\n            }\n            if (minY > maxY) {\n                minY = maxY = (maxY + minY) / 2;\n            }\n            var x = clamp(center[0], minX, maxX);\n            var y = clamp(center[1], minY, maxY);\n            var ratio = 30 * resolution;\n            // during an interaction, allow some overscroll\n            if (opt_isMoving && smooth) {\n                x += -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n                    ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n                y += -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n                    ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n            }\n            return [x, y];\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate=} center Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n    return center;\n}\n//# sourceMappingURL=centerconstraint.js.map","/**\n * @module ol/resolutionconstraint\n */\nimport { linearFindNearest } from './array.js';\nimport { getHeight, getWidth } from './extent.js';\nimport { clamp } from './math.js';\n/**\n * @typedef {function((number|undefined), number, import(\"./size.js\").Size, boolean=): (number|undefined)} Type\n */\n/**\n * Returns a modified resolution taking into acocunt the viewport size and maximum\n * allowed extent.\n * @param {number} resolution Resolution\n * @param {import(\"./extent.js\").Extent=} maxExtent Maximum allowed extent.\n * @param {import(\"./size.js\").Size} viewportSize Viewport size.\n * @return {number} Capped resolution.\n */\nfunction getViewportClampedResolution(resolution, maxExtent, viewportSize) {\n    var xResolution = getWidth(maxExtent) / viewportSize[0];\n    var yResolution = getHeight(maxExtent) / viewportSize[1];\n    return Math.min(resolution, Math.min(xResolution, yResolution));\n}\n/**\n * Returns a modified resolution to be between maxResolution and minResolution while\n * still allowing the value to be slightly out of bounds.\n * Note: the computation is based on the logarithm function (ln):\n *  - at 1, ln(x) is 0\n *  - above 1, ln(x) keeps increasing but at a much slower pace than x\n * The final result is clamped to prevent getting too far away from bounds.\n * @param {number} resolution Resolution.\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @return {number} Smoothed resolution.\n */\nfunction getSmoothClampedResolution(resolution, maxResolution, minResolution) {\n    var result = Math.min(resolution, maxResolution);\n    var ratio = 50;\n    result *= Math.log(1 + ratio * Math.max(0, resolution / maxResolution - 1)) / ratio + 1;\n    if (minResolution) {\n        result = Math.max(result, minResolution);\n        result /= Math.log(1 + ratio * Math.max(0, minResolution / resolution - 1)) / ratio + 1;\n    }\n    return clamp(result, minResolution / 2, maxResolution * 2);\n}\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @param {boolean=} opt_smooth If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent=} opt_maxExtent Maximum allowed extent.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions, opt_smooth, opt_maxExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var maxResolution = resolutions[0];\n            var minResolution = resolutions[resolutions.length - 1];\n            var cappedMaxRes = opt_maxExtent ?\n                getViewportClampedResolution(maxResolution, opt_maxExtent, size) :\n                maxResolution;\n            // during interacting or animating, allow intermediary values\n            if (opt_isMoving) {\n                var smooth = opt_smooth !== undefined ? opt_smooth : true;\n                if (!smooth) {\n                    return clamp(resolution, minResolution, cappedMaxRes);\n                }\n                return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n            }\n            var capped = Math.min(cappedMaxRes, resolution);\n            var z = Math.floor(linearFindNearest(resolutions, capped, direction));\n            if (resolutions[z] > cappedMaxRes && z < resolutions.length - 1) {\n                return resolutions[z + 1];\n            }\n            return resolutions[z];\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_minResolution Minimum resolution.\n * @param {boolean=} opt_smooth If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent=} opt_maxExtent Maximum allowed extent.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_minResolution, opt_smooth, opt_maxExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var cappedMaxRes = opt_maxExtent ?\n                getViewportClampedResolution(maxResolution, opt_maxExtent, size) :\n                maxResolution;\n            var minResolution = opt_minResolution !== undefined ? opt_minResolution : 0;\n            // during interacting or animating, allow intermediary values\n            if (opt_isMoving) {\n                var smooth = opt_smooth !== undefined ? opt_smooth : true;\n                if (!smooth) {\n                    return clamp(resolution, minResolution, cappedMaxRes);\n                }\n                return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n            }\n            var tolerance = 1e-9;\n            var minZoomLevel = Math.ceil(Math.log(maxResolution / cappedMaxRes) / Math.log(power) - tolerance);\n            var offset = -direction * (0.5 - tolerance) + 0.5;\n            var capped = Math.min(cappedMaxRes, resolution);\n            var cappedZoomLevel = Math.floor(Math.log(maxResolution / capped) / Math.log(power) + offset);\n            var zoomLevel = Math.max(minZoomLevel, cappedZoomLevel);\n            var newResolution = maxResolution / Math.pow(power, zoomLevel);\n            return clamp(newResolution, minResolution, cappedMaxRes);\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @param {boolean=} opt_smooth If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent=} opt_maxExtent Maximum allowed extent.\n * @return {Type} Zoom function.\n */\nexport function createMinMaxResolution(maxResolution, minResolution, opt_smooth, opt_maxExtent) {\n    return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, opt_isMoving) {\n        if (resolution !== undefined) {\n            var cappedMaxRes = opt_maxExtent ?\n                getViewportClampedResolution(maxResolution, opt_maxExtent, size) :\n                maxResolution;\n            var smooth = opt_smooth !== undefined ? opt_smooth : true;\n            if (!smooth || !opt_isMoving) {\n                return clamp(resolution, minResolution, cappedMaxRes);\n            }\n            return getSmoothClampedResolution(resolution, cappedMaxRes, minResolution);\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n//# sourceMappingURL=resolutionconstraint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/View\n */\nimport { DEFAULT_TILE_SIZE } from './tilegrid/common.js';\nimport { getUid } from './util.js';\nimport { VOID } from './functions.js';\nimport { createExtent, none as centerNone } from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport { createSnapToResolutions, createSnapToPower } from './resolutionconstraint.js';\nimport { createSnapToZero, createSnapToN, none as rotationNone, disable } from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport { linearFindNearest } from './array.js';\nimport { assert } from './asserts.js';\nimport { add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual } from './coordinate.js';\nimport { inAndOut } from './easing.js';\nimport { getForViewAndSize, getCenter, getHeight, getWidth, isEmpty } from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport { fromExtent as polygonFromExtent } from './geom/Polygon.js';\nimport { clamp, modulo } from './math.js';\nimport { assign } from './obj.js';\nimport { createProjection, METERS_PER_UNIT, toUserCoordinate, toUserExtent, fromUserCoordinate, fromUserExtent, getUserProjection } from './proj.js';\nimport Units from './proj/Units.js';\nimport { equals } from './coordinate.js';\nimport { easeOut } from './easing.js';\nimport { createMinMaxResolution } from './resolutionconstraint.js';\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter]\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [targetRotation]\n * @property {import(\"./coordinate.js\").Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center\n * @property {import(\"./resolutionconstraint.js\").Type} resolution\n * @property {import(\"./rotationconstraint.js\").Type} rotation\n */\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [nearest=false] If the view `constrainResolution` option is `true`,\n * get the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. If a user projection is not set, the coordinate system for the center is\n * specified with the `projection` option. Layer sources will not be fetched if this\n * is not set, but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * view, in other words, nothing outside of this extent can be visible on the map.\n * @property {boolean} [constrainOnlyCenter=false] If true, the extent\n * constraint will only apply to the view center and not the whole extent.\n * @property {boolean} [smoothExtentConstraint=true] If true, the extent\n * constraint will be applied smoothly, i.e. allow the view to go slightly outside\n * of the given `extent`.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {boolean} [multiWorld=false] If `false` the view is constrained so\n * only one world is visible, and you cannot pan off the edge.  If `true` the map\n * may show multiple worlds at low zoom levels.  Only used if the `projection` is\n * global.  Note that if `extent` is also provided it is given precedence.\n * @property {boolean} [constrainResolution=false] If true, the view will always\n * animate to the closest zoom level after an interaction; false means\n * intermediary zoom levels are allowed.\n * @property {boolean} [smoothResolutionConstraint=true] If true, the resolution\n * min/max values will be applied smoothly, i. e. allow the view to exceed slightly\n * the given resolution or zoom bounds.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view.\n * @property {number} [zoomFactor=2] The zoom factor used to compute the\n * corresponding resolution.\n */\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remain fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center\n * @property {import(\"./proj/Projection.js\").default} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nvar DEFAULT_MIN_ZOOM = 0;\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * A View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The view states\n *\n * A View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * The `zoom` state is actually not saved on the view: all computations\n * internally use the `resolution` state. Still, the `setZoom` and `getZoom`\n * methods are available, as well as `getResolutionForZoom` and\n * `getZoomForResolution` to switch from one system to the other.\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view, but any constraint defined in the constructor will\n * be applied along the way.\n *\n * A View object can have a *resolution constraint*, a *rotation constraint*\n * and a *center constraint*.\n *\n * The *resolution constraint* typically restricts min/max values and\n * snaps to specific resolutions. It is determined by the following\n * options: `resolutions`, `maxResolution`, `maxZoom` and `zoomFactor`.\n * If `resolutions` is set, the other three options are ignored. See\n * documentation for each option for more information. By default, the view\n * only has a min/max restriction and allow intermediary zoom levels when\n * pinch-zooming for example.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default rotation is allowed and its value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the view center is not constrained at all.\n *\n * ### Changing the view state\n *\n * It is important to note that `setZoom`, `setResolution`, `setCenter` and\n * `setRotation` are subject to the above mentioned constraints. As such, it\n * may sometimes not be possible to know in advance the resulting state of the\n * View. For example, calling `setResolution(10)` does not guarantee that\n * `getResolution()` will return `10`.\n *\n * A consequence of this is that, when applying a delta on the view state, one\n * should use `adjustCenter`, `adjustRotation`, `adjustZoom` and `adjustResolution`\n * rather than the corresponding setters. This will let view do its internal\n * computations. Besides, the `adjust*` methods also take an `opt_anchor`\n * argument which allows specifying an origin for the transformation.\n *\n * ### Interacting with the view\n *\n * View constraints are usually only applied when the view is *at rest*, meaning that\n * no interaction or animation is ongoing. As such, if the user puts the view in a\n * state that is not equivalent to a constrained one (e.g. rotating the view when\n * the snap angle is 0), an animation will be triggered at the interaction end to\n * put back the view to a stable state;\n *\n * @api\n */\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    /**\n     * @param {ViewOptions=} opt_options View options.\n     */\n    function View(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = assign({}, opt_options);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.hints_ = [0, 0];\n        /**\n         * @private\n         * @type {Array<Array<Animation>>}\n         */\n        _this.animations_ = [];\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.updateAnimationKey_;\n        /**\n         * @private\n         * @const\n         * @type {import(\"./proj/Projection.js\").default}\n         */\n        _this.projection_ = createProjection(options.projection, 'EPSG:3857');\n        /**\n         * @private\n         * @type {import(\"./coordinate.js\").Coordinate|undefined}\n         */\n        _this.targetCenter_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.targetResolution_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.targetRotation_;\n        if (options.center) {\n            options.center = fromUserCoordinate(options.center, _this.projection_);\n        }\n        if (options.extent) {\n            options.extent = fromUserExtent(options.extent, _this.projection_);\n        }\n        _this.applyOptions_(options);\n        return _this;\n    }\n    /**\n     * Set up the view with the given options.\n     * @param {ViewOptions} options View options.\n     */\n    View.prototype.applyOptions_ = function (options) {\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = {};\n        var resolutionConstraintInfo = createResolutionConstraint(options);\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minResolution_ = resolutionConstraintInfo.minResolution;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n        /**\n         * @private\n         * @type {Array<number>|undefined}\n         */\n        this.resolutions_ = options.resolutions;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minZoom_ = resolutionConstraintInfo.minZoom;\n        var centerConstraint = createCenterConstraint(options);\n        var resolutionConstraint = resolutionConstraintInfo.constraint;\n        var rotationConstraint = createRotationConstraint(options);\n        /**\n         * @private\n         * @type {Constraints}\n         */\n        this.constraints_ = {\n            center: centerConstraint,\n            resolution: resolutionConstraint,\n            rotation: rotationConstraint\n        };\n        this.setRotation(options.rotation !== undefined ? options.rotation : 0);\n        this.setCenterInternal(options.center !== undefined ? options.center : null);\n        if (options.resolution !== undefined) {\n            this.setResolution(options.resolution);\n        }\n        else if (options.zoom !== undefined) {\n            this.setZoom(options.zoom);\n        }\n        this.resolveConstraints(0);\n        this.setProperties(properties);\n        /**\n         * @private\n         * @type {ViewOptions}\n         */\n        this.options_ = options;\n    };\n    /**\n     * Get an updated version of the view options used to construct the view.  The\n     * current resolution (or zoom), center, and rotation are applied to any stored\n     * options.  The provided options can be used to apply new min/max zoom or\n     * resolution limits.\n     * @param {ViewOptions} newOptions New options to be applied.\n     * @return {ViewOptions} New options updated with the current view state.\n     */\n    View.prototype.getUpdatedOptions_ = function (newOptions) {\n        var options = assign({}, this.options_);\n        // preserve resolution (or zoom)\n        if (options.resolution !== undefined) {\n            options.resolution = this.getResolution();\n        }\n        else {\n            options.zoom = this.getZoom();\n        }\n        // preserve center\n        options.center = this.getCenterInternal();\n        // preserve rotation\n        options.rotation = this.getRotation();\n        return assign({}, options, newOptions);\n    };\n    /**\n     * Animate the view.  The view's center, zoom (or resolution), and rotation\n     * can be animated for smooth transitions between view states.  For example,\n     * to animate the view to a new zoom level:\n     *\n     *     view.animate({zoom: view.getZoom() + 1});\n     *\n     * By default, the animation lasts one second and uses in-and-out easing.  You\n     * can customize this behavior by including `duration` (in milliseconds) and\n     * `easing` options (see {@link module:ol/easing}).\n     *\n     * To chain together multiple animations, call the method with multiple\n     * animation objects.  For example, to first zoom and then pan:\n     *\n     *     view.animate({zoom: 10}, {center: [0, 0]});\n     *\n     * If you provide a function as the last argument to the animate method, it\n     * will get called at the end of an animation series.  The callback will be\n     * called with `true` if the animation series completed on its own or `false`\n     * if it was cancelled.\n     *\n     * Animations are cancelled by user interactions (e.g. dragging the map) or by\n     * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n     * (or another method that calls one of these).\n     *\n     * @param {...(AnimationOptions|function(boolean): void)} var_args Animation\n     *     options.  Multiple animations can be run in series by passing multiple\n     *     options objects.  To run multiple animations in parallel, call the method\n     *     multiple times.  An optional callback can be provided as a final\n     *     argument.  The callback will be called with a boolean indicating whether\n     *     the animation completed without being cancelled.\n     * @api\n     */\n    View.prototype.animate = function (var_args) {\n        if (this.isDef() && !this.getAnimating()) {\n            this.resolveConstraints(0);\n        }\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i) {\n            var options = arguments[i];\n            if (options.center) {\n                options = assign({}, options);\n                options.center = fromUserCoordinate(options.center, this.getProjection());\n            }\n            if (options.anchor) {\n                options = assign({}, options);\n                options.anchor = fromUserCoordinate(options.anchor, this.getProjection());\n            }\n            args[i] = options;\n        }\n        this.animateInternal.apply(this, args);\n    };\n    /**\n     * @param {...(AnimationOptions|function(boolean): void)} var_args Animation options.\n     */\n    View.prototype.animateInternal = function (var_args) {\n        var animationCount = arguments.length;\n        var callback;\n        if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n            callback = arguments[animationCount - 1];\n            --animationCount;\n        }\n        if (!this.isDef()) {\n            // if view properties are not yet set, shortcut to the final state\n            var state = arguments[animationCount - 1];\n            if (state.center) {\n                this.setCenterInternal(state.center);\n            }\n            if (state.zoom !== undefined) {\n                this.setZoom(state.zoom);\n            }\n            if (state.rotation !== undefined) {\n                this.setRotation(state.rotation);\n            }\n            if (callback) {\n                animationCallback(callback, true);\n            }\n            return;\n        }\n        var start = Date.now();\n        var center = this.targetCenter_.slice();\n        var resolution = this.targetResolution_;\n        var rotation = this.targetRotation_;\n        var series = [];\n        for (var i = 0; i < animationCount; ++i) {\n            var options = /** @type {AnimationOptions} */ (arguments[i]);\n            var animation = {\n                start: start,\n                complete: false,\n                anchor: options.anchor,\n                duration: options.duration !== undefined ? options.duration : 1000,\n                easing: options.easing || inAndOut,\n                callback: callback\n            };\n            if (options.center) {\n                animation.sourceCenter = center;\n                animation.targetCenter = options.center.slice();\n                center = animation.targetCenter;\n            }\n            if (options.zoom !== undefined) {\n                animation.sourceResolution = resolution;\n                animation.targetResolution = this.getResolutionForZoom(options.zoom);\n                resolution = animation.targetResolution;\n            }\n            else if (options.resolution) {\n                animation.sourceResolution = resolution;\n                animation.targetResolution = options.resolution;\n                resolution = animation.targetResolution;\n            }\n            if (options.rotation !== undefined) {\n                animation.sourceRotation = rotation;\n                var delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n                animation.targetRotation = rotation + delta;\n                rotation = animation.targetRotation;\n            }\n            // check if animation is a no-op\n            if (isNoopAnimation(animation)) {\n                animation.complete = true;\n                // we still push it onto the series for callback handling\n            }\n            else {\n                start += animation.duration;\n            }\n            series.push(animation);\n        }\n        this.animations_.push(series);\n        this.setHint(ViewHint.ANIMATING, 1);\n        this.updateAnimations_();\n    };\n    /**\n     * Determine if the view is being animated.\n     * @return {boolean} The view is being animated.\n     * @api\n     */\n    View.prototype.getAnimating = function () {\n        return this.hints_[ViewHint.ANIMATING] > 0;\n    };\n    /**\n     * Determine if the user is interacting with the view, such as panning or zooming.\n     * @return {boolean} The view is being interacted with.\n     * @api\n     */\n    View.prototype.getInteracting = function () {\n        return this.hints_[ViewHint.INTERACTING] > 0;\n    };\n    /**\n     * Cancel any ongoing animations.\n     * @api\n     */\n    View.prototype.cancelAnimations = function () {\n        this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n        for (var i = 0, ii = this.animations_.length; i < ii; ++i) {\n            var series = this.animations_[i];\n            if (series[0].callback) {\n                animationCallback(series[0].callback, false);\n            }\n        }\n        this.animations_.length = 0;\n    };\n    /**\n     * Update all animations.\n     */\n    View.prototype.updateAnimations_ = function () {\n        if (this.updateAnimationKey_ !== undefined) {\n            cancelAnimationFrame(this.updateAnimationKey_);\n            this.updateAnimationKey_ = undefined;\n        }\n        if (!this.getAnimating()) {\n            return;\n        }\n        var now = Date.now();\n        var more = false;\n        for (var i = this.animations_.length - 1; i >= 0; --i) {\n            var series = this.animations_[i];\n            var seriesComplete = true;\n            for (var j = 0, jj = series.length; j < jj; ++j) {\n                var animation = series[j];\n                if (animation.complete) {\n                    continue;\n                }\n                var elapsed = now - animation.start;\n                var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n                if (fraction >= 1) {\n                    animation.complete = true;\n                    fraction = 1;\n                }\n                else {\n                    seriesComplete = false;\n                }\n                var progress = animation.easing(fraction);\n                if (animation.sourceCenter) {\n                    var x0 = animation.sourceCenter[0];\n                    var y0 = animation.sourceCenter[1];\n                    var x1 = animation.targetCenter[0];\n                    var y1 = animation.targetCenter[1];\n                    var x = x0 + progress * (x1 - x0);\n                    var y = y0 + progress * (y1 - y0);\n                    this.targetCenter_ = [x, y];\n                }\n                if (animation.sourceResolution && animation.targetResolution) {\n                    var resolution = progress === 1 ?\n                        animation.targetResolution :\n                        animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n                    if (animation.anchor) {\n                        var size = this.getSizeFromViewport_(this.getRotation());\n                        var constrainedResolution = this.constraints_.resolution(resolution, 0, size, true);\n                        this.targetCenter_ = this.calculateCenterZoom(constrainedResolution, animation.anchor);\n                    }\n                    this.targetResolution_ = resolution;\n                    this.applyTargetState_(true);\n                }\n                if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n                    var rotation = progress === 1 ?\n                        modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n                        animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n                    if (animation.anchor) {\n                        var constrainedRotation = this.constraints_.rotation(rotation, true);\n                        this.targetCenter_ = this.calculateCenterRotate(constrainedRotation, animation.anchor);\n                    }\n                    this.targetRotation_ = rotation;\n                }\n                this.applyTargetState_(true);\n                more = true;\n                if (!animation.complete) {\n                    break;\n                }\n            }\n            if (seriesComplete) {\n                this.animations_[i] = null;\n                this.setHint(ViewHint.ANIMATING, -1);\n                var callback = series[0].callback;\n                if (callback) {\n                    animationCallback(callback, true);\n                }\n            }\n        }\n        // prune completed series\n        this.animations_ = this.animations_.filter(Boolean);\n        if (more && this.updateAnimationKey_ === undefined) {\n            this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_.bind(this));\n        }\n    };\n    /**\n     * @param {number} rotation Target rotation.\n     * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n     */\n    View.prototype.calculateCenterRotate = function (rotation, anchor) {\n        var center;\n        var currentCenter = this.getCenterInternal();\n        if (currentCenter !== undefined) {\n            center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n            rotateCoordinate(center, rotation - this.getRotation());\n            addCoordinate(center, anchor);\n        }\n        return center;\n    };\n    /**\n     * @param {number} resolution Target resolution.\n     * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n     */\n    View.prototype.calculateCenterZoom = function (resolution, anchor) {\n        var center;\n        var currentCenter = this.getCenterInternal();\n        var currentResolution = this.getResolution();\n        if (currentCenter !== undefined && currentResolution !== undefined) {\n            var x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n            var y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n            center = [x, y];\n        }\n        return center;\n    };\n    /**\n     * @private\n     * @param {number=} opt_rotation Take into account the rotation of the viewport when giving the size\n     * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n     */\n    View.prototype.getSizeFromViewport_ = function (opt_rotation) {\n        var size = [100, 100];\n        var selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n        var element = document.querySelector(selector);\n        if (element) {\n            var metrics = getComputedStyle(element);\n            size[0] = parseInt(metrics.width, 10);\n            size[1] = parseInt(metrics.height, 10);\n        }\n        if (opt_rotation) {\n            var w = size[0];\n            var h = size[1];\n            size[0] = Math.abs(w * Math.cos(opt_rotation)) + Math.abs(h * Math.sin(opt_rotation));\n            size[1] = Math.abs(w * Math.sin(opt_rotation)) + Math.abs(h * Math.cos(opt_rotation));\n        }\n        return size;\n    };\n    /**\n     * Get the view center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.getCenter = function () {\n        var center = this.getCenterInternal();\n        if (!center) {\n            return center;\n        }\n        return toUserCoordinate(center, this.getProjection());\n    };\n    /**\n     * Get the view center without transforming to user projection.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n     */\n    View.prototype.getCenterInternal = function () {\n        return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER));\n    };\n    /**\n     * @return {Constraints} Constraints.\n     */\n    View.prototype.getConstraints = function () {\n        return this.constraints_;\n    };\n    /**\n     * @param {Array<number>=} opt_hints Destination array.\n     * @return {Array<number>} Hint.\n     */\n    View.prototype.getHints = function (opt_hints) {\n        if (opt_hints !== undefined) {\n            opt_hints[0] = this.hints_[0];\n            opt_hints[1] = this.hints_[1];\n            return opt_hints;\n        }\n        else {\n            return this.hints_.slice();\n        }\n    };\n    /**\n     * Calculate the extent for the current view state and the passed size.\n     * The size is the pixel dimensions of the box into which the calculated extent\n     * should fit. In most cases you want to get the extent of the entire map,\n     * that is `map.getSize()`.\n     * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n     * first map that uses this view will be used.\n     * @return {import(\"./extent.js\").Extent} Extent.\n     * @api\n     */\n    View.prototype.calculateExtent = function (opt_size) {\n        var extent = this.calculateExtentInternal(opt_size);\n        return toUserExtent(extent, this.getProjection());\n    };\n    /**\n     * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n     * first map that uses this view will be used.\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    View.prototype.calculateExtentInternal = function (opt_size) {\n        var size = opt_size || this.getSizeFromViewport_();\n        var center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n        assert(center, 1); // The view center is not defined\n        var resolution = /** @type {!number} */ (this.getResolution());\n        assert(resolution !== undefined, 2); // The view resolution is not defined\n        var rotation = /** @type {!number} */ (this.getRotation());\n        assert(rotation !== undefined, 3); // The view rotation is not defined\n        return getForViewAndSize(center, resolution, rotation, size);\n    };\n    /**\n     * Get the maximum resolution of the view.\n     * @return {number} The maximum resolution of the view.\n     * @api\n     */\n    View.prototype.getMaxResolution = function () {\n        return this.maxResolution_;\n    };\n    /**\n     * Get the minimum resolution of the view.\n     * @return {number} The minimum resolution of the view.\n     * @api\n     */\n    View.prototype.getMinResolution = function () {\n        return this.minResolution_;\n    };\n    /**\n     * Get the maximum zoom level for the view.\n     * @return {number} The maximum zoom level.\n     * @api\n     */\n    View.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n    };\n    /**\n     * Set a new maximum zoom level for the view.\n     * @param {number} zoom The maximum zoom level.\n     * @api\n     */\n    View.prototype.setMaxZoom = function (zoom) {\n        this.applyOptions_(this.getUpdatedOptions_({ maxZoom: zoom }));\n    };\n    /**\n     * Get the minimum zoom level for the view.\n     * @return {number} The minimum zoom level.\n     * @api\n     */\n    View.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n    };\n    /**\n     * Set a new minimum zoom level for the view.\n     * @param {number} zoom The minimum zoom level.\n     * @api\n     */\n    View.prototype.setMinZoom = function (zoom) {\n        this.applyOptions_(this.getUpdatedOptions_({ minZoom: zoom }));\n    };\n    /**\n     * Set whether the view shoud allow intermediary zoom levels.\n     * @param {boolean} enabled Whether the resolution is constrained.\n     * @api\n     */\n    View.prototype.setConstrainResolution = function (enabled) {\n        this.applyOptions_(this.getUpdatedOptions_({ constrainResolution: enabled }));\n    };\n    /**\n     * Get the view projection.\n     * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n     * @api\n     */\n    View.prototype.getProjection = function () {\n        return this.projection_;\n    };\n    /**\n     * Get the view resolution.\n     * @return {number|undefined} The resolution of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.getResolution = function () {\n        return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n    };\n    /**\n     * Get the resolutions for the view. This returns the array of resolutions\n     * passed to the constructor of the View, or undefined if none were given.\n     * @return {Array<number>|undefined} The resolutions of the view.\n     * @api\n     */\n    View.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * Get the resolution for a provided extent (in map units) and size (in pixels).\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n     * @return {number} The resolution at which the provided extent will render at\n     *     the given size.\n     * @api\n     */\n    View.prototype.getResolutionForExtent = function (extent, opt_size) {\n        return this.getResolutionForExtentInternal(fromUserExtent(extent, this.getProjection()), opt_size);\n    };\n    /**\n     * Get the resolution for a provided extent (in map units) and size (in pixels).\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n     * @return {number} The resolution at which the provided extent will render at\n     *     the given size.\n     */\n    View.prototype.getResolutionForExtentInternal = function (extent, opt_size) {\n        var size = opt_size || this.getSizeFromViewport_();\n        var xResolution = getWidth(extent) / size[0];\n        var yResolution = getHeight(extent) / size[1];\n        return Math.max(xResolution, yResolution);\n    };\n    /**\n     * Return a function that returns a value between 0 and 1 for a\n     * resolution. Exponential scaling is assumed.\n     * @param {number=} opt_power Power.\n     * @return {function(number): number} Resolution for value function.\n     */\n    View.prototype.getResolutionForValueFunction = function (opt_power) {\n        var power = opt_power || 2;\n        var maxResolution = this.maxResolution_;\n        var minResolution = this.minResolution_;\n        var max = Math.log(maxResolution / minResolution) / Math.log(power);\n        return (\n        /**\n         * @param {number} value Value.\n         * @return {number} Resolution.\n         */\n        function (value) {\n            var resolution = maxResolution / Math.pow(power, value * max);\n            return resolution;\n        });\n    };\n    /**\n     * Get the view rotation.\n     * @return {number} The rotation of the view in radians.\n     * @observable\n     * @api\n     */\n    View.prototype.getRotation = function () {\n        return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n    };\n    /**\n     * Return a function that returns a resolution for a value between\n     * 0 and 1. Exponential scaling is assumed.\n     * @param {number=} opt_power Power.\n     * @return {function(number): number} Value for resolution function.\n     */\n    View.prototype.getValueForResolutionFunction = function (opt_power) {\n        var power = opt_power || 2;\n        var maxResolution = this.maxResolution_;\n        var minResolution = this.minResolution_;\n        var max = Math.log(maxResolution / minResolution) / Math.log(power);\n        return (\n        /**\n         * @param {number} resolution Resolution.\n         * @return {number} Value.\n         */\n        function (resolution) {\n            var value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n            return value;\n        });\n    };\n    /**\n     * @return {State} View state.\n     */\n    View.prototype.getState = function () {\n        var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenterInternal());\n        var projection = this.getProjection();\n        var resolution = /** @type {number} */ (this.getResolution());\n        var rotation = this.getRotation();\n        return {\n            center: center.slice(0),\n            projection: projection !== undefined ? projection : null,\n            resolution: resolution,\n            rotation: rotation,\n            zoom: this.getZoom()\n        };\n    };\n    /**\n     * Get the current zoom level. This method may return non-integer zoom levels\n     * if the view does not constrain the resolution, or if an interaction or\n     * animation is underway.\n     * @return {number|undefined} Zoom.\n     * @api\n     */\n    View.prototype.getZoom = function () {\n        var zoom;\n        var resolution = this.getResolution();\n        if (resolution !== undefined) {\n            zoom = this.getZoomForResolution(resolution);\n        }\n        return zoom;\n    };\n    /**\n     * Get the zoom level for a resolution.\n     * @param {number} resolution The resolution.\n     * @return {number|undefined} The zoom level for the provided resolution.\n     * @api\n     */\n    View.prototype.getZoomForResolution = function (resolution) {\n        var offset = this.minZoom_ || 0;\n        var max, zoomFactor;\n        if (this.resolutions_) {\n            var nearest = linearFindNearest(this.resolutions_, resolution, 1);\n            offset = nearest;\n            max = this.resolutions_[nearest];\n            if (nearest == this.resolutions_.length - 1) {\n                zoomFactor = 2;\n            }\n            else {\n                zoomFactor = max / this.resolutions_[nearest + 1];\n            }\n        }\n        else {\n            max = this.maxResolution_;\n            zoomFactor = this.zoomFactor_;\n        }\n        return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n    };\n    /**\n     * Get the resolution for a zoom level.\n     * @param {number} zoom Zoom level.\n     * @return {number} The view resolution for the provided zoom level.\n     * @api\n     */\n    View.prototype.getResolutionForZoom = function (zoom) {\n        if (this.resolutions_) {\n            if (this.resolutions_.length <= 1) {\n                return 0;\n            }\n            var baseLevel = clamp(Math.floor(zoom), 0, this.resolutions_.length - 2);\n            var zoomFactor = this.resolutions_[baseLevel] / this.resolutions_[baseLevel + 1];\n            return this.resolutions_[baseLevel] / Math.pow(zoomFactor, clamp(zoom - baseLevel, 0, 1));\n        }\n        else {\n            return this.maxResolution_ / Math.pow(this.zoomFactor_, zoom - this.minZoom_);\n        }\n    };\n    /**\n     * Fit the given geometry or extent based on the given map size and border.\n     * The size is pixel dimensions of the box to fit the extent into.\n     * In most cases you will want to use the map size, that is `map.getSize()`.\n     * Takes care of the map angle.\n     * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n     *     extent to fit the view to.\n     * @param {FitOptions=} opt_options Options.\n     * @api\n     */\n    View.prototype.fit = function (geometryOrExtent, opt_options) {\n        var options = assign({ size: this.getSizeFromViewport_() }, opt_options || {});\n        /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n        var geometry;\n        assert(Array.isArray(geometryOrExtent) || typeof /** @type {?} */ (geometryOrExtent).getSimplifiedGeometry === 'function', 24); // Invalid extent or geometry provided as `geometry`\n        if (Array.isArray(geometryOrExtent)) {\n            assert(!isEmpty(geometryOrExtent), 25); // Cannot fit empty extent provided as `geometry`\n            var extent = fromUserExtent(geometryOrExtent, this.getProjection());\n            geometry = polygonFromExtent(extent);\n        }\n        else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n            var extent = fromUserExtent(geometryOrExtent.getExtent(), this.getProjection());\n            geometry = polygonFromExtent(extent);\n            geometry.rotate(this.getRotation(), getCenter(extent));\n        }\n        else {\n            var userProjection = getUserProjection();\n            if (userProjection) {\n                geometry = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry.clone().transform(userProjection, this.getProjection()));\n            }\n            else {\n                geometry = geometryOrExtent;\n            }\n        }\n        this.fitInternal(geometry, options);\n    };\n    /**\n     * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n     * @param {FitOptions=} opt_options Options.\n     */\n    View.prototype.fitInternal = function (geometry, opt_options) {\n        var options = opt_options || {};\n        var size = options.size;\n        if (!size) {\n            size = this.getSizeFromViewport_();\n        }\n        var padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n        var nearest = options.nearest !== undefined ? options.nearest : false;\n        var minResolution;\n        if (options.minResolution !== undefined) {\n            minResolution = options.minResolution;\n        }\n        else if (options.maxZoom !== undefined) {\n            minResolution = this.getResolutionForZoom(options.maxZoom);\n        }\n        else {\n            minResolution = 0;\n        }\n        var coords = geometry.getFlatCoordinates();\n        // calculate rotated extent\n        var rotation = this.getRotation();\n        var cosAngle = Math.cos(-rotation);\n        var sinAngle = Math.sin(-rotation);\n        var minRotX = +Infinity;\n        var minRotY = +Infinity;\n        var maxRotX = -Infinity;\n        var maxRotY = -Infinity;\n        var stride = geometry.getStride();\n        for (var i = 0, ii = coords.length; i < ii; i += stride) {\n            var rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n            var rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n            minRotX = Math.min(minRotX, rotX);\n            minRotY = Math.min(minRotY, rotY);\n            maxRotX = Math.max(maxRotX, rotX);\n            maxRotY = Math.max(maxRotY, rotY);\n        }\n        // calculate resolution\n        var resolution = this.getResolutionForExtentInternal([minRotX, minRotY, maxRotX, maxRotY], [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n        resolution = isNaN(resolution) ? minResolution :\n            Math.max(resolution, minResolution);\n        resolution = this.getConstrainedResolution(resolution, nearest ? 0 : 1);\n        // calculate center\n        sinAngle = -sinAngle; // go back to original rotation\n        var centerRotX = (minRotX + maxRotX) / 2;\n        var centerRotY = (minRotY + maxRotY) / 2;\n        centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n        centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n        var centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n        var centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n        var center = [centerX, centerY];\n        var callback = options.callback ? options.callback : VOID;\n        if (options.duration !== undefined) {\n            this.animateInternal({\n                resolution: resolution,\n                center: this.getConstrainedCenter(center, resolution),\n                duration: options.duration,\n                easing: options.easing\n            }, callback);\n        }\n        else {\n            this.targetResolution_ = resolution;\n            this.targetCenter_ = center;\n            this.applyTargetState_(false, true);\n            animationCallback(callback, true);\n        }\n    };\n    /**\n     * Center on coordinate and view position.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"./size.js\").Size} size Box pixel size.\n     * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n     * @api\n     */\n    View.prototype.centerOn = function (coordinate, size, position) {\n        this.centerOnInternal(fromUserCoordinate(coordinate, this.getProjection()), size, position);\n    };\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"./size.js\").Size} size Box pixel size.\n     * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n     */\n    View.prototype.centerOnInternal = function (coordinate, size, position) {\n        // calculate rotated position\n        var rotation = this.getRotation();\n        var cosAngle = Math.cos(-rotation);\n        var sinAngle = Math.sin(-rotation);\n        var rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n        var rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n        var resolution = this.getResolution();\n        rotX += (size[0] / 2 - position[0]) * resolution;\n        rotY += (position[1] - size[1] / 2) * resolution;\n        // go back to original angle\n        sinAngle = -sinAngle; // go back to original rotation\n        var centerX = rotX * cosAngle - rotY * sinAngle;\n        var centerY = rotY * cosAngle + rotX * sinAngle;\n        this.setCenterInternal([centerX, centerY]);\n    };\n    /**\n     * @return {boolean} Is defined.\n     */\n    View.prototype.isDef = function () {\n        return !!this.getCenterInternal() && this.getResolution() !== undefined;\n    };\n    /**\n     * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n     * @api\n     */\n    View.prototype.adjustCenter = function (deltaCoordinates) {\n        var center = toUserCoordinate(this.targetCenter_, this.getProjection());\n        this.setCenter([center[0] + deltaCoordinates[0], center[1] + deltaCoordinates[1]]);\n    };\n    /**\n     * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n     */\n    View.prototype.adjustCenterInternal = function (deltaCoordinates) {\n        var center = this.targetCenter_;\n        this.setCenterInternal([center[0] + deltaCoordinates[0], center[1] + deltaCoordinates[1]]);\n    };\n    /**\n     * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} ratio The ratio to apply on the view resolution.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n     * @api\n     */\n    View.prototype.adjustResolution = function (ratio, opt_anchor) {\n        var anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n        this.adjustResolutionInternal(ratio, anchor);\n    };\n    /**\n     * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} ratio The ratio to apply on the view resolution.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n     */\n    View.prototype.adjustResolutionInternal = function (ratio, opt_anchor) {\n        var isMoving = this.getAnimating() || this.getInteracting();\n        var size = this.getSizeFromViewport_(this.getRotation());\n        var newResolution = this.constraints_.resolution(this.targetResolution_ * ratio, 0, size, isMoving);\n        if (opt_anchor !== undefined) {\n            this.targetCenter_ = this.calculateCenterZoom(newResolution, opt_anchor);\n        }\n        this.targetResolution_ *= ratio;\n        this.applyTargetState_();\n    };\n    /**\n     * Adds a value to the view zoom level, optionally using an anchor. Any resolution\n     * constraint will apply.\n     * @param {number} delta Relative value to add to the zoom level.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n     * @api\n     */\n    View.prototype.adjustZoom = function (delta, opt_anchor) {\n        this.adjustResolution(Math.pow(this.zoomFactor_, -delta), opt_anchor);\n    };\n    /**\n     * Adds a value to the view rotation, optionally using an anchor. Any rotation\n     * constraint will apply.\n     * @param {number} delta Relative value to add to the zoom rotation, in radians.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n     * @api\n     */\n    View.prototype.adjustRotation = function (delta, opt_anchor) {\n        if (opt_anchor) {\n            opt_anchor = fromUserCoordinate(opt_anchor, this.getProjection());\n        }\n        this.adjustRotationInternal(delta, opt_anchor);\n    };\n    /**\n     * @param {number} delta Relative value to add to the zoom rotation, in radians.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n     */\n    View.prototype.adjustRotationInternal = function (delta, opt_anchor) {\n        var isMoving = this.getAnimating() || this.getInteracting();\n        var newRotation = this.constraints_.rotation(this.targetRotation_ + delta, isMoving);\n        if (opt_anchor !== undefined) {\n            this.targetCenter_ = this.calculateCenterRotate(newRotation, opt_anchor);\n        }\n        this.targetRotation_ += delta;\n        this.applyTargetState_();\n    };\n    /**\n     * Set the center of the current view. Any extent constraint will apply.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.setCenter = function (center) {\n        this.setCenterInternal(fromUserCoordinate(center, this.getProjection()));\n    };\n    /**\n     * Set the center using the view projection (not the user projection).\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n     */\n    View.prototype.setCenterInternal = function (center) {\n        this.targetCenter_ = center;\n        this.applyTargetState_();\n    };\n    /**\n     * @param {ViewHint} hint Hint.\n     * @param {number} delta Delta.\n     * @return {number} New value.\n     */\n    View.prototype.setHint = function (hint, delta) {\n        this.hints_[hint] += delta;\n        this.changed();\n        return this.hints_[hint];\n    };\n    /**\n     * Set the resolution for this view. Any resolution constraint will apply.\n     * @param {number|undefined} resolution The resolution of the view.\n     * @observable\n     * @api\n     */\n    View.prototype.setResolution = function (resolution) {\n        this.targetResolution_ = resolution;\n        this.applyTargetState_();\n    };\n    /**\n     * Set the rotation for this view. Any rotation constraint will apply.\n     * @param {number} rotation The rotation of the view in radians.\n     * @observable\n     * @api\n     */\n    View.prototype.setRotation = function (rotation) {\n        this.targetRotation_ = rotation;\n        this.applyTargetState_();\n    };\n    /**\n     * Zoom to a specific zoom level. Any resolution constrain will apply.\n     * @param {number} zoom Zoom level.\n     * @api\n     */\n    View.prototype.setZoom = function (zoom) {\n        this.setResolution(this.getResolutionForZoom(zoom));\n    };\n    /**\n     * Recompute rotation/resolution/center based on target values.\n     * Note: we have to compute rotation first, then resolution and center considering that\n     * parameters can influence one another in case a view extent constraint is present.\n     * @param {boolean=} opt_doNotCancelAnims Do not cancel animations.\n     * @param {boolean=} opt_forceMoving Apply constraints as if the view is moving.\n     * @private\n     */\n    View.prototype.applyTargetState_ = function (opt_doNotCancelAnims, opt_forceMoving) {\n        var isMoving = this.getAnimating() || this.getInteracting() || opt_forceMoving;\n        // compute rotation\n        var newRotation = this.constraints_.rotation(this.targetRotation_, isMoving);\n        var size = this.getSizeFromViewport_(newRotation);\n        var newResolution = this.constraints_.resolution(this.targetResolution_, 0, size, isMoving);\n        var newCenter = this.constraints_.center(this.targetCenter_, newResolution, size, isMoving);\n        if (this.get(ViewProperty.ROTATION) !== newRotation) {\n            this.set(ViewProperty.ROTATION, newRotation);\n        }\n        if (this.get(ViewProperty.RESOLUTION) !== newResolution) {\n            this.set(ViewProperty.RESOLUTION, newResolution);\n        }\n        if (!this.get(ViewProperty.CENTER) || !equals(this.get(ViewProperty.CENTER), newCenter)) {\n            this.set(ViewProperty.CENTER, newCenter);\n        }\n        if (this.getAnimating() && !opt_doNotCancelAnims) {\n            this.cancelAnimations();\n        }\n    };\n    /**\n     * If any constraints need to be applied, an animation will be triggered.\n     * This is typically done on interaction end.\n     * Note: calling this with a duration of 0 will apply the constrained values straight away,\n     * without animation.\n     * @param {number=} opt_duration The animation duration in ms.\n     * @param {number=} opt_resolutionDirection Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n     */\n    View.prototype.resolveConstraints = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        var duration = opt_duration !== undefined ? opt_duration : 200;\n        var direction = opt_resolutionDirection || 0;\n        var newRotation = this.constraints_.rotation(this.targetRotation_);\n        var size = this.getSizeFromViewport_(newRotation);\n        var newResolution = this.constraints_.resolution(this.targetResolution_, direction, size);\n        var newCenter = this.constraints_.center(this.targetCenter_, newResolution, size);\n        if (duration === 0) {\n            this.targetResolution_ = newResolution;\n            this.targetRotation_ = newRotation;\n            this.targetCenter_ = newCenter;\n            this.applyTargetState_();\n            return;\n        }\n        if (this.getResolution() !== newResolution ||\n            this.getRotation() !== newRotation ||\n            !this.getCenterInternal() ||\n            !equals(this.getCenterInternal(), newCenter)) {\n            if (this.getAnimating()) {\n                this.cancelAnimations();\n            }\n            this.animateInternal({\n                rotation: newRotation,\n                center: newCenter,\n                resolution: newResolution,\n                duration: duration,\n                easing: easeOut,\n                anchor: opt_anchor\n            });\n        }\n    };\n    /**\n     * Notify the View that an interaction has started.\n     * The view state will be resolved to a stable one if needed\n     * (depending on its constraints).\n     * @api\n     */\n    View.prototype.beginInteraction = function () {\n        this.resolveConstraints(0);\n        this.setHint(ViewHint.INTERACTING, 1);\n    };\n    /**\n     * Notify the View that an interaction has ended. The view state will be resolved\n     * to a stable one if needed (depending on its constraints).\n     * @param {number=} opt_duration Animation duration in ms.\n     * @param {number=} opt_resolutionDirection Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n     * @api\n     */\n    View.prototype.endInteraction = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        var anchor = opt_anchor && fromUserCoordinate(opt_anchor, this.getProjection());\n        this.endInteractionInternal(opt_duration, opt_resolutionDirection, anchor);\n    };\n    /**\n     * Notify the View that an interaction has ended. The view state will be resolved\n     * to a stable one if needed (depending on its constraints).\n     * @param {number=} opt_duration Animation duration in ms.\n     * @param {number=} opt_resolutionDirection Which direction to zoom.\n     * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The origin of the transformation.\n     */\n    View.prototype.endInteractionInternal = function (opt_duration, opt_resolutionDirection, opt_anchor) {\n        this.setHint(ViewHint.INTERACTING, -1);\n        this.resolveConstraints(opt_duration, opt_resolutionDirection, opt_anchor);\n    };\n    /**\n     * Get a valid position for the view center according to the current constraints.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} targetCenter Target center position.\n     * @param {number=} opt_targetResolution Target resolution. If not supplied, the current one will be used.\n     * This is useful to guess a valid center position at a different zoom level.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Valid center position.\n     */\n    View.prototype.getConstrainedCenter = function (targetCenter, opt_targetResolution) {\n        var size = this.getSizeFromViewport_(this.getRotation());\n        return this.constraints_.center(targetCenter, opt_targetResolution || this.getResolution(), size);\n    };\n    /**\n     * Get a valid zoom level according to the current view constraints.\n     * @param {number|undefined} targetZoom Target zoom.\n     * @param {number=} [opt_direction=0] Indicate which resolution should be used\n     * by a renderer if the view resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @return {number|undefined} Valid zoom level.\n     */\n    View.prototype.getConstrainedZoom = function (targetZoom, opt_direction) {\n        var targetRes = this.getResolutionForZoom(targetZoom);\n        return this.getZoomForResolution(this.getConstrainedResolution(targetRes, opt_direction));\n    };\n    /**\n     * Get a valid resolution according to the current view constraints.\n     * @param {number|undefined} targetResolution Target resolution.\n     * @param {number=} [opt_direction=0] Indicate which resolution should be used\n     * by a renderer if the view resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @return {number|undefined} Valid resolution.\n     */\n    View.prototype.getConstrainedResolution = function (targetResolution, opt_direction) {\n        var direction = opt_direction || 0;\n        var size = this.getSizeFromViewport_(this.getRotation());\n        return this.constraints_.resolution(targetResolution, direction, size);\n    };\n    return View;\n}(BaseObject));\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n    setTimeout(function () {\n        callback(returnValue);\n    }, 0);\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n    if (options.extent !== undefined) {\n        var smooth = options.smoothExtentConstraint !== undefined ? options.smoothExtentConstraint : true;\n        return createExtent(options.extent, options.constrainOnlyCenter, smooth);\n    }\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    if (options.multiWorld !== true && projection.isGlobal()) {\n        var extent = projection.getExtent().slice();\n        extent[0] = -Infinity;\n        extent[2] = Infinity;\n        return createExtent(extent, false, false);\n    }\n    return centerNone;\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n    var resolutionConstraint;\n    var maxResolution;\n    var minResolution;\n    // TODO: move these to be ol constants\n    // see https://github.com/openlayers/openlayers/issues/2076\n    var defaultMaxZoom = 28;\n    var defaultZoomFactor = 2;\n    var minZoom = options.minZoom !== undefined ?\n        options.minZoom : DEFAULT_MIN_ZOOM;\n    var maxZoom = options.maxZoom !== undefined ?\n        options.maxZoom : defaultMaxZoom;\n    var zoomFactor = options.zoomFactor !== undefined ?\n        options.zoomFactor : defaultZoomFactor;\n    var multiWorld = options.multiWorld !== undefined ?\n        options.multiWorld : false;\n    var smooth = options.smoothResolutionConstraint !== undefined ? options.smoothResolutionConstraint : true;\n    var projection = createProjection(options.projection, 'EPSG:3857');\n    var projExtent = projection.getExtent();\n    var constrainOnlyCenter = options.constrainOnlyCenter;\n    var extent = options.extent;\n    if (!multiWorld && !extent && projection.isGlobal()) {\n        constrainOnlyCenter = false;\n        extent = projExtent;\n    }\n    if (options.resolutions !== undefined) {\n        var resolutions = options.resolutions;\n        maxResolution = resolutions[minZoom];\n        minResolution = resolutions[maxZoom] !== undefined ?\n            resolutions[maxZoom] : resolutions[resolutions.length - 1];\n        if (options.constrainResolution) {\n            resolutionConstraint = createSnapToResolutions(resolutions, smooth, !constrainOnlyCenter && extent);\n        }\n        else {\n            resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth, !constrainOnlyCenter && extent);\n        }\n    }\n    else {\n        // calculate the default min and max resolution\n        var size = !projExtent ?\n            // use an extent that can fit the whole world if need be\n            360 * METERS_PER_UNIT[Units.DEGREES] /\n                projection.getMetersPerUnit() :\n            Math.max(getWidth(projExtent), getHeight(projExtent));\n        var defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(defaultZoomFactor, DEFAULT_MIN_ZOOM);\n        var defaultMinResolution = defaultMaxResolution / Math.pow(defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n        // user provided maxResolution takes precedence\n        maxResolution = options.maxResolution;\n        if (maxResolution !== undefined) {\n            minZoom = 0;\n        }\n        else {\n            maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n        }\n        // user provided minResolution takes precedence\n        minResolution = options.minResolution;\n        if (minResolution === undefined) {\n            if (options.maxZoom !== undefined) {\n                if (options.maxResolution !== undefined) {\n                    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n                }\n                else {\n                    minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n                }\n            }\n            else {\n                minResolution = defaultMinResolution;\n            }\n        }\n        // given discrete zoom levels, minResolution may be different than provided\n        maxZoom = minZoom + Math.floor(Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n        minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n        if (options.constrainResolution) {\n            resolutionConstraint = createSnapToPower(zoomFactor, maxResolution, minResolution, smooth, !constrainOnlyCenter && extent);\n        }\n        else {\n            resolutionConstraint = createMinMaxResolution(maxResolution, minResolution, smooth, !constrainOnlyCenter && extent);\n        }\n    }\n    return { constraint: resolutionConstraint, maxResolution: maxResolution,\n        minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor };\n}\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n    var enableRotation = options.enableRotation !== undefined ?\n        options.enableRotation : true;\n    if (enableRotation) {\n        var constrainRotation = options.constrainRotation;\n        if (constrainRotation === undefined || constrainRotation === true) {\n            return createSnapToZero();\n        }\n        else if (constrainRotation === false) {\n            return rotationNone;\n        }\n        else if (typeof constrainRotation === 'number') {\n            return createSnapToN(constrainRotation);\n        }\n        else {\n            return rotationNone;\n        }\n    }\n    else {\n        return disable;\n    }\n}\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n    if (animation.sourceCenter && animation.targetCenter) {\n        if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n            return false;\n        }\n    }\n    if (animation.sourceResolution !== animation.targetResolution) {\n        return false;\n    }\n    if (animation.sourceRotation !== animation.targetRotation) {\n        return false;\n    }\n    return true;\n}\nexport default View;\n//# sourceMappingURL=View.js.map","/**\n * @module ol/ViewProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    CENTER: 'center',\n    RESOLUTION: 'resolution',\n    ROTATION: 'rotation'\n};\n//# sourceMappingURL=ViewProperty.js.map","/**\n * @module olcs.core.OLImageryProvider\n */\nimport {get as getProjection} from 'ol/proj.js';\nimport olcsUtil from '../util.js';\nimport {Tile as TileSource} from 'ol/source.js';\n\n\nconst olUseNewCoordinates = (function() {\n  const tileSource = new TileSource({\n    projection: 'EPSG:3857',\n    wrapX: true\n  });\n  const tileCoord = tileSource.getTileCoordForTileUrlFunction([6, -31, 22]);\n  return tileCoord && tileCoord[1] === 33 && tileCoord[2] === 22;\n  // See b/test/spec/ol/source/tile.test.js\n  // of e9a30c5cb7e3721d9370025fbe5472c322847b35 in OpenLayers repository\n})();\n\n\nclass OLImageryProvider /* should not extend Cesium.ImageryProvider */ {\n  /**\n   * Special class derived from Cesium.ImageryProvider\n   * that is connected to the given ol.source.TileImage.\n   * @param {!ol.Map} olMap\n   * @param {!ol.source.TileImage} source\n   * @param {ol.proj.Projection=} opt_fallbackProj Projection to assume if the\n   *                                               projection of the source is not defined.\n   * @constructor\n   * @extends {Cesium.ImageryProvider}\n   */\n  constructor(olMap, source, opt_fallbackProj) {\n    // Do not extend or call super constructor from\n    // Cesium.ImageryProvider since this particular function is a\n    // 'non instanciable interface' which throws on instanciation.\n\n    /**\n     * @type {!ol.source.TileImage}\n     * @private\n     */\n    this.source_ = source;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.projection_ = null;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.fallbackProj_ = opt_fallbackProj || null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    /**\n     * @type {?Cesium.TilingScheme}\n     * @private\n     */\n    this.tilingScheme_ = null;\n\n    /**\n     * @type {?Cesium.Rectangle}\n     * @private\n     */\n    this.rectangle_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = olMap;\n\n    const proxy = this.source_.get('olcs.proxy');\n    if (proxy) {\n      if (typeof proxy === 'function') {\n        this.proxy_ = {\n          'getURL': proxy\n        };\n      } else if (typeof proxy === 'string') {\n        this.proxy_ = new Cesium.DefaultProxy(proxy);\n      }\n    }\n\n    this.errorEvent_ = new Cesium.Event();\n\n    this.emptyCanvas_ = document.createElement('canvas');\n    this.emptyCanvas_.width = 1;\n    this.emptyCanvas_.height = 1;\n\n    this.source_.on('change', (e) => {\n      this.handleSourceChanged_();\n    });\n    this.handleSourceChanged_();\n  }\n\n  /**\n   * Checks if the underlying source is ready and cached required data.\n   * @private\n   */\n  handleSourceChanged_(frameState) {\n    if (!this.ready_ && this.source_.getState() == 'ready') {\n      this.projection_ = olcsUtil.getSourceProjection(this.source_) || this.fallbackProj_;\n      if (this.projection_ == getProjection('EPSG:4326')) {\n        this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n      } else if (this.projection_ == getProjection('EPSG:3857')) {\n        this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n      } else {\n        return;\n      }\n      this.rectangle_ = this.tilingScheme_.rectangle;\n\n      this.ready_ = true;\n    }\n  }\n\n  /**\n   * Generates the proper attributions for a given position and zoom\n   * level.\n   * @export\n   * @override\n   */\n  getTileCredits(x, y, level) {\n    const extent = this.map_.getView().calculateExtent(this.map_.getSize());\n    const center = this.map_.getView().getCenter();\n    const zoom = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n\n    const frameState = {\n      viewState: {zoom, center},\n      extent,\n    };\n\n    const attributionsFunction = this.source_.getAttributions();\n    if (!attributionsFunction) {\n      return [];\n    }\n    let attributions = attributionsFunction(frameState);\n    if (!Array.isArray(attributions)) {\n      attributions = [attributions];\n    }\n\n    return attributions.map(html => new Cesium.Credit(html, true));\n  }\n\n  /**\n   * @export\n   * @override\n   */\n  requestImage(x, y, level) {\n    const tileUrlFunction = this.source_.getTileUrlFunction();\n    if (tileUrlFunction && this.projection_) {\n\n      // Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n      const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n\n      let y_ = y;\n      if (!olUseNewCoordinates) {\n        // OpenLayers version 3 to 5 tile coordinates increase from bottom to top\n        y_ = -y - 1;\n      }\n      let url = tileUrlFunction.call(this.source_, [z_, x, y_], 1, this.projection_);\n      if (this.proxy_) {\n        url = this.proxy_.getURL(url);\n      }\n      return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n    } else {\n      // return empty canvas to stop Cesium from retrying later\n      return this.emptyCanvas_;\n    }\n  }\n}\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(OLImageryProvider.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[0] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[1] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\nexport default OLImageryProvider;\n","/**\n * @module olcs.core\n */\nimport {linear as linearEasing} from 'ol/easing.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {get as getProjection, transformExtent} from 'ol/proj.js';\nimport olSourceImageStatic from 'ol/source/ImageStatic.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileImage from 'ol/source/TileImage.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport {defaultImageLoadFunction} from 'ol/source/Image.js';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\nimport olcsUtil from './util.js';\n\n\nconst exports = {};\n\n\n/**\n * @typedef {Object} CesiumUrlDefinition\n * @property {string} url\n * @property {string} subdomains\n */\n\n\n/**\n * Options for rotate around axis core function.\n * @typedef {Object} RotateAroundAxisOption\n * @property {number} [duration]\n * @property {function(number): number} [easing]\n * @property {function(): void} [callback]\n */\n\n\n\n/**\n * @typedef {Object} LayerWithParents\n * @property {import('ol/layer/Base.js').default} layer\n * @property {Array<import('ol/layer/Group.js').default>} parents\n */\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    console.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {ol.Coordinate} coordinates\n * @param {number=} rotation\n * @param {!Cesium.Cartesian3=} translation\n * @param {!Cesium.Cartesian3=} scale\n * @return {!Cesium.Matrix4}\n * @api\n */\nexports.createMatrixAtCoordinates = function(coordinates, rotation = 0, translation = Cesium.Cartesian3.ZERO, scale = new Cesium.Cartesian3(1, 1, 1)) {\n  const position = exports.ol4326CoordinateToCesiumCartesian(coordinates);\n  const rawMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);\n  const quaternion = Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z, -rotation);\n  const rotationMatrix = Cesium.Matrix4.fromTranslationQuaternionRotationScale(translation, quaternion, scale);\n  return Cesium.Matrix4.multiply(rawMatrix, rotationMatrix, new Cesium.Matrix4());\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, linearEasing);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    console.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers and static images\n * @param {!ol.Map} olMap\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olMap, olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === defaultImageLoadFunction) {\n    const sourceProps = {\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.extent': source.get('olcs.extent'),\n      'olcs.projection': source.get('olcs.projection'),\n      'olcs.imagesource': source\n    };\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      params: source.getParams()\n    });\n    source.setProperties(sourceProps);\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new olcsCoreOLImageryProvider(olMap, source, viewProj);\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n\n  } else if (source instanceof olSourceImageStatic) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new Cesium.SingleTileImageryProvider({\n        url: source.getUrl(),\n        rectangle: new Cesium.Rectangle.fromDegrees(\n            source.getImageExtent()[0],\n            source.getImageExtent()[1],\n            source.getImageExtent()[2],\n            source.getImageExtent()[3]\n        )\n      });\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage|ImageStatic are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  console.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  console.assert(projection);\n\n  const proj4326 = getProjection('EPSG:4326');\n  const proj = getProjection(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  } else if (olColor instanceof CanvasPattern || olColor instanceof CanvasGradient) {\n    // Render the CanvasPattern/CanvasGradient into a canvas that will be sent to Cesium as material\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = canvas.height = 256;\n    ctx.fillStyle = olColor;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    return new Cesium.ImageMaterialProperty({\n      image: canvas\n    });\n  }\n  console.assert(false, 'impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\n\n/**\n * Check if the given projection is managed by Cesium (WGS84 or Mercator Spheric)\n *\n * @param {ol.proj.Projection} projection Projection to check.\n * @returns {boolean} Whether it's managed by Cesium.\n */\nexports.isCesiumProjection = function(projection) {\n  const is3857 = projection === getProjection('EPSG:3857');\n  const is4326 = projection === getProjection('EPSG:4326');\n  return is3857 || is4326;\n};\n\n\nexport default exports;\n","/**\n * @module ol/source/OSM\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport XYZ from './XYZ.js';\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nexport var ATTRIBUTION = '&#169; ' +\n    '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n    'contributors.';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {number} [maxZoom=19] Max zoom.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=1.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url='https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'] URL template.\n * Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n * @api\n */\nvar OSM = /** @class */ (function (_super) {\n    __extends(OSM, _super);\n    /**\n     * @param {Options=} [opt_options] Open Street Map options.\n     */\n    function OSM(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var attributions;\n        if (options.attributions !== undefined) {\n            attributions = options.attributions;\n        }\n        else {\n            attributions = [ATTRIBUTION];\n        }\n        var crossOrigin = options.crossOrigin !== undefined ?\n            options.crossOrigin : 'anonymous';\n        var url = options.url !== undefined ?\n            options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n        _this = _super.call(this, {\n            attributions: attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: crossOrigin,\n            opaque: options.opaque !== undefined ? options.opaque : true,\n            maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileLoadFunction: options.tileLoadFunction,\n            url: url,\n            wrapX: options.wrapX,\n            attributionsCollapsible: false\n        }) || this;\n        return _this;\n    }\n    return OSM;\n}(XYZ));\nexport default OSM;\n//# sourceMappingURL=OSM.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nvar MapEvent = /** @class */ (function (_super) {\n    __extends(MapEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n     */\n    function MapEvent(type, map, opt_frameState) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The map where the event occurred.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @api\n         */\n        _this.map = map;\n        /**\n         * The frame state at the time of the event.\n         * @type {?import(\"./PluggableMap.js\").FrameState}\n         * @api\n         */\n        _this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n        return _this;\n    }\n    return MapEvent;\n}(Event));\nexport default MapEvent;\n//# sourceMappingURL=MapEvent.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n */\nvar MapBrowserEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {Event} browserEvent Browser event.\n     * @param {boolean=} opt_dragging Is the map currently being dragged?\n     * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n     */\n    function MapBrowserEvent(type, map, browserEvent, opt_dragging, opt_frameState) {\n        var _this = _super.call(this, type, map, opt_frameState) || this;\n        /**\n         * The original browser event.\n         * @const\n         * @type {Event}\n         * @api\n         */\n        _this.originalEvent = browserEvent;\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {?import(\"./pixel.js\").Pixel}\n         */\n        _this.pixel_ = null;\n        /**\n         * The coordinate in the user projection corresponding to the original browser event.\n         * @type {?import(\"./coordinate.js\").Coordinate}\n         */\n        _this.coordinate_ = null;\n        /**\n         * Indicates if the map is currently being dragged. Only set for\n         * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n         *\n         * @type {boolean}\n         * @api\n         */\n        _this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n        return _this;\n    }\n    Object.defineProperty(MapBrowserEvent.prototype, \"pixel\", {\n        /**\n         * The map pixel relative to the viewport corresponding to the original browser event.\n         * @type {import(\"./pixel.js\").Pixel}\n         * @api\n         */\n        get: function () {\n            if (!this.pixel_) {\n                this.pixel_ = this.map.getEventPixel(this.originalEvent);\n            }\n            return this.pixel_;\n        },\n        set: function (pixel) {\n            this.pixel_ = pixel;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MapBrowserEvent.prototype, \"coordinate\", {\n        /**\n         * The coordinate corresponding to the original browser event.  This will be in the user\n         * projection if one is set.  Otherwise it will be in the view projection.\n         * @type {import(\"./coordinate.js\").Coordinate}\n         * @api\n         */\n        get: function () {\n            if (!this.coordinate_) {\n                this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n            }\n            return this.coordinate_;\n        },\n        set: function (coordinate) {\n            this.coordinate_ = coordinate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Prevents the default browser action.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n     * @override\n     * @api\n     */\n    MapBrowserEvent.prototype.preventDefault = function () {\n        _super.prototype.preventDefault.call(this);\n        this.originalEvent.preventDefault();\n    };\n    /**\n     * Prevents further propagation of the current event.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n     * @override\n     * @api\n     */\n    MapBrowserEvent.prototype.stopPropagation = function () {\n        _super.prototype.stopPropagation.call(this);\n        this.originalEvent.stopPropagation();\n    };\n    return MapBrowserEvent;\n}(MapEvent));\nexport default MapBrowserEvent;\n//# sourceMappingURL=MapBrowserEvent.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/MapBrowserPointerEvent\n */\nimport MapBrowserEvent from './MapBrowserEvent.js';\nvar MapBrowserPointerEvent = /** @class */ (function (_super) {\n    __extends(MapBrowserPointerEvent, _super);\n    /**\n     * @param {string} type Event type.\n     * @param {import(\"./PluggableMap.js\").default} map Map.\n     * @param {PointerEvent} pointerEvent Pointer event.\n     * @param {boolean=} opt_dragging Is the map currently being dragged?\n     * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n     */\n    function MapBrowserPointerEvent(type, map, pointerEvent, opt_dragging, opt_frameState) {\n        var _this = _super.call(this, type, map, pointerEvent, opt_dragging, opt_frameState) || this;\n        /**\n         * @const\n         * @type {PointerEvent}\n         */\n        _this.pointerEvent = pointerEvent;\n        return _this;\n    }\n    return MapBrowserPointerEvent;\n}(MapBrowserEvent));\nexport default MapBrowserPointerEvent;\n//# sourceMappingURL=MapBrowserPointerEvent.js.map","/**\n * @module ol/pointer/EventType\n */\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel'\n};\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/MapBrowserEventHandler\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport '@openlayers/pepjs';\nimport { DEVICE_PIXEL_RATIO } from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport { listen, unlistenByKey } from './events.js';\nimport EventTarget from './events/Target.js';\nimport PointerEventType from './pointer/EventType.js';\nvar MapBrowserEventHandler = /** @class */ (function (_super) {\n    __extends(MapBrowserEventHandler, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n     * @param {number=} moveTolerance The minimal distance the pointer must travel to trigger a move.\n     */\n    function MapBrowserEventHandler(map, moveTolerance) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * This is the element that we will listen to the real events on.\n         * @type {import(\"./PluggableMap.js\").default}\n         * @private\n         */\n        _this.map_ = map;\n        /**\n         * @type {any}\n         * @private\n         */\n        _this.clickTimeoutId_;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_ = false;\n        /**\n         * @type {!Array<import(\"./events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.moveTolerance_ = moveTolerance ?\n            moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n        /**\n         * The most recent \"down\" type event (or null if none have occurred).\n         * Set on pointerdown.\n         * @type {PointerEvent}\n         * @private\n         */\n        _this.down_ = null;\n        var element = _this.map_.getViewport();\n        element.setAttribute('touch-action', 'none');\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.activePointers_ = 0;\n        /**\n         * @type {!Object<number, boolean>}\n         * @private\n         */\n        _this.trackedTouches_ = {};\n        _this.element_ = element;\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.pointerdownListenerKey_ = listen(element, PointerEventType.POINTERDOWN, _this.handlePointerDown_, _this);\n        /**\n         * @type {?import(\"./events.js\").EventsKey}\n         * @private\n         */\n        _this.relayedListenerKey_ = listen(element, PointerEventType.POINTERMOVE, _this.relayEvent_, _this);\n        return _this;\n    }\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.emulateClick_ = function (pointerEvent) {\n        var newEvent = new MapBrowserPointerEvent(MapBrowserEventType.CLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        if (this.clickTimeoutId_ !== undefined) {\n            // double-click\n            clearTimeout(this.clickTimeoutId_);\n            this.clickTimeoutId_ = undefined;\n            newEvent = new MapBrowserPointerEvent(MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n            this.dispatchEvent(newEvent);\n        }\n        else {\n            // click\n            this.clickTimeoutId_ = setTimeout(function () {\n                this.clickTimeoutId_ = undefined;\n                var newEvent = new MapBrowserPointerEvent(MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n                this.dispatchEvent(newEvent);\n            }.bind(this), 250);\n        }\n    };\n    /**\n     * Keeps track on how many pointers are currently active.\n     *\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.updateActivePointers_ = function (pointerEvent) {\n        var event = pointerEvent;\n        if (event.type == MapBrowserEventType.POINTERUP ||\n            event.type == MapBrowserEventType.POINTERCANCEL) {\n            delete this.trackedTouches_[event.pointerId];\n        }\n        else if (event.type == MapBrowserEventType.POINTERDOWN) {\n            this.trackedTouches_[event.pointerId] = true;\n        }\n        this.activePointers_ = Object.keys(this.trackedTouches_).length;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerUp_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserPointerEvent(MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        // We emulate click events on left mouse button click, touch contact, and pen\n        // contact. isMouseActionButton returns true in these cases (evt.button is set\n        // to 0).\n        // See http://www.w3.org/TR/pointerevents/#button-states\n        // We only fire click, singleclick, and doubleclick if nobody has called\n        // event.stopPropagation() or event.preventDefault().\n        if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n            this.emulateClick_(this.down_);\n        }\n        if (this.activePointers_ === 0) {\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n            this.dragging_ = false;\n            this.down_ = null;\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} If the left mouse button was pressed.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMouseActionButton_ = function (pointerEvent) {\n        return pointerEvent.button === 0;\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerDown_ = function (pointerEvent) {\n        this.updateActivePointers_(pointerEvent);\n        var newEvent = new MapBrowserPointerEvent(MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n        this.down_ = pointerEvent;\n        if (this.dragListenerKeys_.length === 0) {\n            this.dragListenerKeys_.push(listen(document, MapBrowserEventType.POINTERMOVE, this.handlePointerMove_, this), listen(document, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this), \n            /* Note that the listener for `pointercancel is set up on\n             * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n             * the `pointerup` and `pointermove` listeners.\n             *\n             * The reason for this is the following: `TouchSource.vacuumTouches_()`\n             * issues `pointercancel` events, when there was no `touchend` for a\n             * `touchstart`. Now, let's say a first `touchstart` is registered on\n             * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n             * But `documentPointerEventHandler_` doesn't know about the first\n             * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n             * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n             * only registered there.\n             */\n            listen(this.element_, MapBrowserEventType.POINTERCANCEL, this.handlePointerUp_, this));\n        }\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.handlePointerMove_ = function (pointerEvent) {\n        // Between pointerdown and pointerup, pointermove events are triggered.\n        // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n        // moved a significant distance.\n        if (this.isMoving_(pointerEvent)) {\n            this.dragging_ = true;\n            var newEvent = new MapBrowserPointerEvent(MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent, this.dragging_);\n            this.dispatchEvent(newEvent);\n        }\n    };\n    /**\n     * Wrap and relay a pointer event.  Note that this requires that the type\n     * string for the MapBrowserPointerEvent matches the PointerEvent type.\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.relayEvent_ = function (pointerEvent) {\n        var dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n        this.dispatchEvent(new MapBrowserPointerEvent(pointerEvent.type, this.map_, pointerEvent, dragging));\n    };\n    /**\n     * @param {PointerEvent} pointerEvent Pointer\n     * event.\n     * @return {boolean} Is moving.\n     * @private\n     */\n    MapBrowserEventHandler.prototype.isMoving_ = function (pointerEvent) {\n        return this.dragging_ ||\n            Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n            Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n    };\n    /**\n     * @inheritDoc\n     */\n    MapBrowserEventHandler.prototype.disposeInternal = function () {\n        if (this.relayedListenerKey_) {\n            unlistenByKey(this.relayedListenerKey_);\n            this.relayedListenerKey_ = null;\n        }\n        if (this.pointerdownListenerKey_) {\n            unlistenByKey(this.pointerdownListenerKey_);\n            this.pointerdownListenerKey_ = null;\n        }\n        this.dragListenerKeys_.forEach(unlistenByKey);\n        this.dragListenerKeys_.length = 0;\n        this.element_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return MapBrowserEventHandler;\n}(EventTarget));\nexport default MapBrowserEventHandler;\n//# sourceMappingURL=MapBrowserEventHandler.js.map","/**\n * @module ol/MapProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    LAYERGROUP: 'layergroup',\n    SIZE: 'size',\n    TARGET: 'target',\n    VIEW: 'view'\n};\n//# sourceMappingURL=MapProperty.js.map","/**\n * @module ol/structs/PriorityQueue\n */\nimport { assert } from '../asserts.js';\nimport { clear } from '../obj.js';\n/**\n * @type {number}\n */\nexport var DROP = Infinity;\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * and http://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nvar PriorityQueue = /** @class */ (function () {\n    /**\n     * @param {function(T): number} priorityFunction Priority function.\n     * @param {function(T): string} keyFunction Key function.\n     */\n    function PriorityQueue(priorityFunction, keyFunction) {\n        /**\n         * @type {function(T): number}\n         * @private\n         */\n        this.priorityFunction_ = priorityFunction;\n        /**\n         * @type {function(T): string}\n         * @private\n         */\n        this.keyFunction_ = keyFunction;\n        /**\n         * @type {Array<T>}\n         * @private\n         */\n        this.elements_ = [];\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.priorities_ = [];\n        /**\n         * @type {!Object<string, boolean>}\n         * @private\n         */\n        this.queuedElements_ = {};\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    PriorityQueue.prototype.clear = function () {\n        this.elements_.length = 0;\n        this.priorities_.length = 0;\n        clear(this.queuedElements_);\n    };\n    /**\n     * Remove and return the highest-priority element. O(log N).\n     * @return {T} Element.\n     */\n    PriorityQueue.prototype.dequeue = function () {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var element = elements[0];\n        if (elements.length == 1) {\n            elements.length = 0;\n            priorities.length = 0;\n        }\n        else {\n            elements[0] = elements.pop();\n            priorities[0] = priorities.pop();\n            this.siftUp_(0);\n        }\n        var elementKey = this.keyFunction_(element);\n        delete this.queuedElements_[elementKey];\n        return element;\n    };\n    /**\n     * Enqueue an element. O(log N).\n     * @param {T} element Element.\n     * @return {boolean} The element was added to the queue.\n     */\n    PriorityQueue.prototype.enqueue = function (element) {\n        assert(!(this.keyFunction_(element) in this.queuedElements_), 31); // Tried to enqueue an `element` that was already added to the queue\n        var priority = this.priorityFunction_(element);\n        if (priority != DROP) {\n            this.elements_.push(element);\n            this.priorities_.push(priority);\n            this.queuedElements_[this.keyFunction_(element)] = true;\n            this.siftDown_(0, this.elements_.length - 1);\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @return {number} Count.\n     */\n    PriorityQueue.prototype.getCount = function () {\n        return this.elements_.length;\n    };\n    /**\n     * Gets the index of the left child of the node at the given index.\n     * @param {number} index The index of the node to get the left child for.\n     * @return {number} The index of the left child.\n     * @private\n     */\n    PriorityQueue.prototype.getLeftChildIndex_ = function (index) {\n        return index * 2 + 1;\n    };\n    /**\n     * Gets the index of the right child of the node at the given index.\n     * @param {number} index The index of the node to get the right child for.\n     * @return {number} The index of the right child.\n     * @private\n     */\n    PriorityQueue.prototype.getRightChildIndex_ = function (index) {\n        return index * 2 + 2;\n    };\n    /**\n     * Gets the index of the parent of the node at the given index.\n     * @param {number} index The index of the node to get the parent for.\n     * @return {number} The index of the parent.\n     * @private\n     */\n    PriorityQueue.prototype.getParentIndex_ = function (index) {\n        return (index - 1) >> 1;\n    };\n    /**\n     * Make this a heap. O(N).\n     * @private\n     */\n    PriorityQueue.prototype.heapify_ = function () {\n        var i;\n        for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n            this.siftUp_(i);\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    PriorityQueue.prototype.isEmpty = function () {\n        return this.elements_.length === 0;\n    };\n    /**\n     * @param {string} key Key.\n     * @return {boolean} Is key queued.\n     */\n    PriorityQueue.prototype.isKeyQueued = function (key) {\n        return key in this.queuedElements_;\n    };\n    /**\n     * @param {T} element Element.\n     * @return {boolean} Is queued.\n     */\n    PriorityQueue.prototype.isQueued = function (element) {\n        return this.isKeyQueued(this.keyFunction_(element));\n    };\n    /**\n     * @param {number} index The index of the node to move down.\n     * @private\n     */\n    PriorityQueue.prototype.siftUp_ = function (index) {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var count = elements.length;\n        var element = elements[index];\n        var priority = priorities[index];\n        var startIndex = index;\n        while (index < (count >> 1)) {\n            var lIndex = this.getLeftChildIndex_(index);\n            var rIndex = this.getRightChildIndex_(index);\n            var smallerChildIndex = rIndex < count &&\n                priorities[rIndex] < priorities[lIndex] ?\n                rIndex : lIndex;\n            elements[index] = elements[smallerChildIndex];\n            priorities[index] = priorities[smallerChildIndex];\n            index = smallerChildIndex;\n        }\n        elements[index] = element;\n        priorities[index] = priority;\n        this.siftDown_(startIndex, index);\n    };\n    /**\n     * @param {number} startIndex The index of the root.\n     * @param {number} index The index of the node to move up.\n     * @private\n     */\n    PriorityQueue.prototype.siftDown_ = function (startIndex, index) {\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var element = elements[index];\n        var priority = priorities[index];\n        while (index > startIndex) {\n            var parentIndex = this.getParentIndex_(index);\n            if (priorities[parentIndex] > priority) {\n                elements[index] = elements[parentIndex];\n                priorities[index] = priorities[parentIndex];\n                index = parentIndex;\n            }\n            else {\n                break;\n            }\n        }\n        elements[index] = element;\n        priorities[index] = priority;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    PriorityQueue.prototype.reprioritize = function () {\n        var priorityFunction = this.priorityFunction_;\n        var elements = this.elements_;\n        var priorities = this.priorities_;\n        var index = 0;\n        var n = elements.length;\n        var element, i, priority;\n        for (i = 0; i < n; ++i) {\n            element = elements[i];\n            priority = priorityFunction(element);\n            if (priority == DROP) {\n                delete this.queuedElements_[this.keyFunction_(element)];\n            }\n            else {\n                priorities[index] = priority;\n                elements[index++] = element;\n            }\n        }\n        elements.length = index;\n        priorities.length = index;\n        this.heapify_();\n    };\n    return PriorityQueue;\n}());\nexport default PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/TileQueue\n */\nimport TileState from './TileState.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\nvar TileQueue = /** @class */ (function (_super) {\n    __extends(TileQueue, _super);\n    /**\n     * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n     * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n     */\n    function TileQueue(tilePriorityFunction, tileChangeCallback) {\n        var _this = _super.call(this, \n        /**\n         * @param {Array} element Element.\n         * @return {number} Priority.\n         */\n        function (element) {\n            return tilePriorityFunction.apply(null, element);\n        }, \n        /**\n         * @param {Array} element Element.\n         * @return {string} Key.\n         */\n        function (element) {\n            return ( /** @type {import(\"./Tile.js\").default} */(element[0]).getKey());\n        }) || this;\n        /** @private */\n        _this.boundHandleTileChange_ = _this.handleTileChange.bind(_this);\n        /**\n         * @private\n         * @type {function(): ?}\n         */\n        _this.tileChangeCallback_ = tileChangeCallback;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.tilesLoading_ = 0;\n        /**\n         * @private\n         * @type {!Object<string,boolean>}\n         */\n        _this.tilesLoadingKeys_ = {};\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    TileQueue.prototype.enqueue = function (element) {\n        var added = _super.prototype.enqueue.call(this, element);\n        if (added) {\n            var tile = element[0];\n            tile.addEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n        }\n        return added;\n    };\n    /**\n     * @return {number} Number of tiles loading.\n     */\n    TileQueue.prototype.getTilesLoading = function () {\n        return this.tilesLoading_;\n    };\n    /**\n     * @param {import(\"./events/Event.js\").default} event Event.\n     * @protected\n     */\n    TileQueue.prototype.handleTileChange = function (event) {\n        var tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n        var state = tile.getState();\n        if (tile.hifi && state === TileState.LOADED || state === TileState.ERROR ||\n            state === TileState.EMPTY || state === TileState.ABORT) {\n            tile.removeEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n            var tileKey = tile.getKey();\n            if (tileKey in this.tilesLoadingKeys_) {\n                delete this.tilesLoadingKeys_[tileKey];\n                --this.tilesLoading_;\n            }\n            this.tileChangeCallback_();\n        }\n    };\n    /**\n     * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n     * @param {number} maxNewLoads Maximum number of new tiles to load.\n     */\n    TileQueue.prototype.loadMoreTiles = function (maxTotalLoading, maxNewLoads) {\n        var newLoads = 0;\n        var abortedTiles = false;\n        var state, tile, tileKey;\n        while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n            this.getCount() > 0) {\n            tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n            tileKey = tile.getKey();\n            state = tile.getState();\n            if (state === TileState.ABORT) {\n                abortedTiles = true;\n            }\n            else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n                this.tilesLoadingKeys_[tileKey] = true;\n                ++this.tilesLoading_;\n                ++newLoads;\n                tile.load();\n            }\n        }\n        if (newLoads === 0 && abortedTiles) {\n            // Do not stop the render loop when all wanted tiles were aborted due to\n            // a small, saturated tile cache.\n            this.tileChangeCallback_();\n        }\n    };\n    return TileQueue;\n}(PriorityQueue));\nexport default TileQueue;\n//# sourceMappingURL=TileQueue.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/PluggableMap\n */\nimport { getUid } from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport RenderEventType from './render/EventType.js';\nimport BaseObject, { getChangeEventType } from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport { assert } from './asserts.js';\nimport { removeNode } from './dom.js';\nimport { listen, unlistenByKey } from './events.js';\nimport EventType from './events/EventType.js';\nimport { clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty } from './extent.js';\nimport { TRUE } from './functions.js';\nimport { DEVICE_PIXEL_RATIO, IMAGE_DECODE } from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport { hasArea } from './size.js';\nimport { DROP } from './structs/PriorityQueue.js';\nimport { create as createTransform, apply as applyTransform } from './transform.js';\nimport { toUserCoordinate, fromUserCoordinate } from './proj.js';\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform\n * @property {null|import(\"./extent.js\").Extent} extent\n * @property {Array<DeclutterItems>} declutterItems\n * @property {number} index\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray\n * @property {number} layerIndex\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform\n * @property {Array<PostRenderFunction>} postRenderFunctions\n * @property {import(\"./size.js\").Size} size\n * @property {TileQueue} tileQueue\n * @property {!Object<string, Object<string, boolean>>} usedTiles\n * @property {Array<number>} viewHints\n * @property {!Object<string, Object<string, boolean>>} wantedTiles\n */\n/**\n * @typedef {Object} DeclutterItems\n * @property {Array<*>} items Declutter items of an executor.\n * @property {number} opacity Layer opacity.\n */\n/**\n * @typedef {function(PluggableMap, ?FrameState): any} PostRenderFunction\n */\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls]\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions]\n * @property {HTMLElement|Document} keyboardEventTarget\n * @property {Collection<import(\"./Overlay.js\").default>} overlays\n * @property {Object<string, *>} values\n */\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nvar PluggableMap = /** @class */ (function (_super) {\n    __extends(PluggableMap, _super);\n    /**\n     * @param {MapOptions} options Map options.\n     */\n    function PluggableMap(options) {\n        var _this = _super.call(this) || this;\n        var optionsInternal = createOptionsInternal(options);\n        /** @private */\n        _this.boundHandleBrowserEvent_ = _this.handleBrowserEvent.bind(_this);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = options.pixelRatio !== undefined ?\n            options.pixelRatio : DEVICE_PIXEL_RATIO;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.postRenderTimeoutHandle_;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.animationDelayKey_;\n        /**\n         * @private\n         */\n        _this.animationDelay_ = function () {\n            this.animationDelayKey_ = undefined;\n            this.renderFrame_(Date.now());\n        }.bind(_this);\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.coordinateToPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"./transform.js\").Transform}\n         */\n        _this.pixelToCoordinateTransform_ = createTransform();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.frameIndex_ = 0;\n        /**\n         * @private\n         * @type {?FrameState}\n         */\n        _this.frameState_ = null;\n        /**\n         * The extent at the previous 'moveend' event.\n         * @private\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.previousExtent_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewPropertyListenerKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.viewChangeListenerKey_ = null;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.layerGroupPropertyListenerKeys_ = null;\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.viewport_ = document.createElement('div');\n        _this.viewport_.className = 'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n        _this.viewport_.style.position = 'relative';\n        _this.viewport_.style.overflow = 'hidden';\n        _this.viewport_.style.width = '100%';\n        _this.viewport_.style.height = '100%';\n        // prevent page zoom on IE >= 10 browsers\n        _this.viewport_.style.msTouchAction = 'none';\n        _this.viewport_.style.touchAction = 'none';\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainer_ = document.createElement('div');\n        _this.overlayContainer_.style.position = 'absolute';\n        _this.overlayContainer_.style.zIndex = '0';\n        _this.overlayContainer_.style.width = '100%';\n        _this.overlayContainer_.style.height = '100%';\n        _this.overlayContainer_.className = 'ol-overlaycontainer';\n        _this.viewport_.appendChild(_this.overlayContainer_);\n        /**\n         * @private\n         * @type {!HTMLElement}\n         */\n        _this.overlayContainerStopEvent_ = document.createElement('div');\n        _this.overlayContainerStopEvent_.style.position = 'absolute';\n        _this.overlayContainerStopEvent_.style.zIndex = '0';\n        _this.overlayContainerStopEvent_.style.width = '100%';\n        _this.overlayContainerStopEvent_.style.height = '100%';\n        _this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n        _this.viewport_.appendChild(_this.overlayContainerStopEvent_);\n        /**\n         * @private\n         * @type {MapBrowserEventHandler}\n         */\n        _this.mapBrowserEventHandler_ = new MapBrowserEventHandler(_this, options.moveTolerance);\n        var handleMapBrowserEvent = _this.handleMapBrowserEvent.bind(_this);\n        for (var key in MapBrowserEventType) {\n            _this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[key], handleMapBrowserEvent);\n        }\n        /**\n         * @private\n         * @type {HTMLElement|Document}\n         */\n        _this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n        /**\n         * @private\n         * @type {?Array<import(\"./events.js\").EventsKey>}\n         */\n        _this.keyHandlerKeys_ = null;\n        var handleBrowserEvent = _this.handleBrowserEvent.bind(_this);\n        _this.viewport_.addEventListener(EventType.CONTEXTMENU, handleBrowserEvent, false);\n        _this.viewport_.addEventListener(EventType.WHEEL, handleBrowserEvent, false);\n        /**\n         * @type {Collection<import(\"./control/Control.js\").default>}\n         * @protected\n         */\n        _this.controls = optionsInternal.controls || new Collection();\n        /**\n         * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n         * @protected\n         */\n        _this.interactions = optionsInternal.interactions || new Collection();\n        /**\n         * @type {import(\"./events/Target.js\").default}\n         */\n        _this.labelCache_ = null;\n        /**\n         * @type {import(\"./events.js\").EventsKey}\n         */\n        _this.labelCacheListenerKey_;\n        /**\n         * @type {Collection<import(\"./Overlay.js\").default>}\n         * @private\n         */\n        _this.overlays_ = optionsInternal.overlays;\n        /**\n         * A lookup of overlays by id.\n         * @private\n         * @type {Object<string, import(\"./Overlay.js\").default>}\n         */\n        _this.overlayIdIndex_ = {};\n        /**\n         * @type {import(\"./renderer/Map.js\").default}\n         * @private\n         */\n        _this.renderer_ = null;\n        /**\n         * @type {function(Event): void|undefined}\n         * @private\n         */\n        _this.handleResize_;\n        /**\n         * @private\n         * @type {!Array<PostRenderFunction>}\n         */\n        _this.postRenderFunctions_ = [];\n        /**\n         * @private\n         * @type {TileQueue}\n         */\n        _this.tileQueue_ = new TileQueue(_this.getTilePriority.bind(_this), _this.handleTileChange_.bind(_this));\n        _this.addEventListener(getChangeEventType(MapProperty.LAYERGROUP), _this.handleLayerGroupChanged_);\n        _this.addEventListener(getChangeEventType(MapProperty.VIEW), _this.handleViewChanged_);\n        _this.addEventListener(getChangeEventType(MapProperty.SIZE), _this.handleSizeChanged_);\n        _this.addEventListener(getChangeEventType(MapProperty.TARGET), _this.handleTargetChanged_);\n        // setProperties will trigger the rendering of the map if the map\n        // is \"defined\" already.\n        _this.setProperties(optionsInternal.values);\n        _this.controls.forEach(\n        /**\n         * @param {import(\"./control/Control.js\").default} control Control.\n         * @this {PluggableMap}\n         */\n        function (control) {\n            control.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.controls.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.interactions.forEach(\n        /**\n         * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n         * @this {PluggableMap}\n         */\n        function (interaction) {\n            interaction.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(this);\n        }.bind(_this));\n        _this.interactions.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            event.element.setMap(null);\n        }.bind(_this));\n        _this.overlays_.forEach(_this.addOverlayInternal_.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            this.addOverlayInternal_(/** @type {import(\"./Overlay.js\").default} */ (event.element));\n        }.bind(_this));\n        _this.overlays_.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n         */\n        function (event) {\n            var overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n            var id = overlay.getId();\n            if (id !== undefined) {\n                delete this.overlayIdIndex_[id.toString()];\n            }\n            event.element.setMap(null);\n        }.bind(_this));\n        return _this;\n    }\n    /**\n     * @abstract\n     * @return {import(\"./renderer/Map.js\").default} The map renderer\n     */\n    PluggableMap.prototype.createRenderer = function () {\n        throw new Error('Use a map type that has a createRenderer method');\n    };\n    /**\n     * Add the given control to the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @api\n     */\n    PluggableMap.prototype.addControl = function (control) {\n        this.getControls().push(control);\n    };\n    /**\n     * Add the given interaction to the map. If you want to add an interaction\n     * at another point of the collection use `getInteraction()` and the methods\n     * available on {@link module:ol/Collection~Collection}. This can be used to\n     * stop the event propagation from the handleEvent function. The interactions\n     * get to handle the events in the reverse order of this collection.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n     * @api\n     */\n    PluggableMap.prototype.addInteraction = function (interaction) {\n        this.getInteractions().push(interaction);\n    };\n    /**\n     * Adds the given layer to the top of this map. If you want to add a layer\n     * elsewhere in the stack, use `getLayers()` and the methods available on\n     * {@link module:ol/Collection~Collection}.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @api\n     */\n    PluggableMap.prototype.addLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        layers.push(layer);\n    };\n    /**\n     * Add the given overlay to the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @api\n     */\n    PluggableMap.prototype.addOverlay = function (overlay) {\n        this.getOverlays().push(overlay);\n    };\n    /**\n     * This deals with map's overlay collection changes.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @private\n     */\n    PluggableMap.prototype.addOverlayInternal_ = function (overlay) {\n        var id = overlay.getId();\n        if (id !== undefined) {\n            this.overlayIdIndex_[id.toString()] = overlay;\n        }\n        overlay.setMap(this);\n    };\n    /**\n     *\n     * @inheritDoc\n     */\n    PluggableMap.prototype.disposeInternal = function () {\n        this.mapBrowserEventHandler_.dispose();\n        this.viewport_.removeEventListener(EventType.CONTEXTMENU, this.boundHandleBrowserEvent_);\n        this.viewport_.removeEventListener(EventType.WHEEL, this.boundHandleBrowserEvent_);\n        if (this.handleResize_ !== undefined) {\n            removeEventListener(EventType.RESIZE, this.handleResize_, false);\n            this.handleResize_ = undefined;\n        }\n        this.setTarget(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Detect features that intersect a pixel on the viewport, and execute a\n     * callback with each intersecting feature. Layers included in the detection can\n     * be configured through the `layerFilter` option in `opt_options`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./Feature.js\").FeatureLike,\n     *     import(\"./layer/Layer.js\").default): T} callback Feature callback. The callback will be\n     *     called with two arguments. The first argument is one\n     *     {@link module:ol/Feature feature} or\n     *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n     *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n     *     unmanaged layers. To stop detection, callback functions can return a\n     *     truthy value.\n     * @param {AtPixelOptions=} opt_options Optional options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     */\n    PluggableMap.prototype.forEachFeatureAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_) {\n            return;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options :\n            /** @type {AtPixelOptions} */ ({});\n        var hitTolerance = opt_options.hitTolerance !== undefined ?\n            opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n        var layerFilter = opt_options.layerFilter !== undefined ?\n            opt_options.layerFilter : TRUE;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.forEachFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, callback, null, layerFilter, null);\n    };\n    /**\n     * Get all features that intersect a pixel on the viewport.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions=} opt_options Optional options.\n     * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n     * an empty array if none were found.\n     * @api\n     */\n    PluggableMap.prototype.getFeaturesAtPixel = function (pixel, opt_options) {\n        var features = [];\n        this.forEachFeatureAtPixel(pixel, function (feature) {\n            features.push(feature);\n        }, opt_options);\n        return features;\n    };\n    /**\n     * Detect layers that have a color value at a pixel on the viewport, and\n     * execute a callback with each matching layer. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     *\n     * Note: this may give false positives unless the map layers have had different `className`\n     * properties assigned to them.\n     *\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n     *     Layer callback. This callback will receive two arguments: first is the\n     *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n     *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n     *     that do not currently support this argument. To stop detection, callback\n     *     functions can return a truthy value.\n     * @param {AtPixelOptions=} opt_options Configuration options.\n     * @return {T|undefined} Callback result, i.e. the return value of last\n     * callback execution, or the first truthy callback return value.\n     * @template S,T\n     * @api\n     */\n    PluggableMap.prototype.forEachLayerAtPixel = function (pixel, callback, opt_options) {\n        if (!this.frameState_) {\n            return;\n        }\n        var options = opt_options || /** @type {AtPixelOptions} */ ({});\n        var hitTolerance = options.hitTolerance !== undefined ?\n            options.hitTolerance * this.frameState_.pixelRatio : 0;\n        var layerFilter = options.layerFilter || TRUE;\n        return this.renderer_.forEachLayerAtPixel(pixel, this.frameState_, hitTolerance, callback, layerFilter);\n    };\n    /**\n     * Detect if features intersect a pixel on the viewport. Layers included in the\n     * detection can be configured through `opt_layerFilter`.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n     * @param {AtPixelOptions=} opt_options Optional options.\n     * @return {boolean} Is there a feature at the given pixel?\n     * @api\n     */\n    PluggableMap.prototype.hasFeatureAtPixel = function (pixel, opt_options) {\n        if (!this.frameState_) {\n            return false;\n        }\n        var coordinate = this.getCoordinateFromPixelInternal(pixel);\n        opt_options = opt_options !== undefined ? opt_options :\n            /** @type {AtPixelOptions} */ ({});\n        var layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n        var hitTolerance = opt_options.hitTolerance !== undefined ?\n            opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n        var checkWrapped = opt_options.checkWrapped !== false;\n        return this.renderer_.hasFeatureAtCoordinate(coordinate, this.frameState_, hitTolerance, checkWrapped, layerFilter, null);\n    };\n    /**\n     * Returns the coordinate in user projection for a browser event.\n     * @param {Event} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    PluggableMap.prototype.getEventCoordinate = function (event) {\n        return this.getCoordinateFromPixel(this.getEventPixel(event));\n    };\n    /**\n     * Returns the coordinate in view projection for a browser event.\n     * @param {Event} event Event.\n     * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n     */\n    PluggableMap.prototype.getEventCoordinateInternal = function (event) {\n        return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n    };\n    /**\n     * Returns the map pixel position for a browser event relative to the viewport.\n     * @param {Event|TouchEvent} event Event.\n     * @return {import(\"./pixel.js\").Pixel} Pixel.\n     * @api\n     */\n    PluggableMap.prototype.getEventPixel = function (event) {\n        var viewportPosition = this.viewport_.getBoundingClientRect();\n        var eventPosition = 'changedTouches' in event ?\n            /** @type {TouchEvent} */ (event).changedTouches[0] :\n            /** @type {MouseEvent} */ (event);\n        return [\n            eventPosition.clientX - viewportPosition.left,\n            eventPosition.clientY - viewportPosition.top\n        ];\n    };\n    /**\n     * Get the target in which this map is rendered.\n     * Note that this returns what is entered as an option or in setTarget:\n     * if that was an element, it returns an element; if a string, it returns that.\n     * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n     *     map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getTarget = function () {\n        return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n    };\n    /**\n     * Get the DOM element into which this map is rendered. In contrast to\n     * `getTarget` this method always return an `Element`, or `null` if the\n     * map has no target.\n     * @return {HTMLElement} The element that the map is rendered in.\n     * @api\n     */\n    PluggableMap.prototype.getTargetElement = function () {\n        var target = this.getTarget();\n        if (target !== undefined) {\n            return typeof target === 'string' ? document.getElementById(target) : target;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * user projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     * @api\n     */\n    PluggableMap.prototype.getCoordinateFromPixel = function (pixel) {\n        return toUserCoordinate(this.getCoordinateFromPixelInternal(pixel), this.getView().getProjection());\n    };\n    /**\n     * Get the coordinate for a given pixel.  This returns a coordinate in the\n     * map view projection.\n     * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n     * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n     */\n    PluggableMap.prototype.getCoordinateFromPixelInternal = function (pixel) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n        }\n    };\n    /**\n     * Get the map controls. Modifying this collection changes the controls\n     * associated with the map.\n     * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n     * @api\n     */\n    PluggableMap.prototype.getControls = function () {\n        return this.controls;\n    };\n    /**\n     * Get the map overlays. Modifying this collection changes the overlays\n     * associated with the map.\n     * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n     * @api\n     */\n    PluggableMap.prototype.getOverlays = function () {\n        return this.overlays_;\n    };\n    /**\n     * Get an overlay by its identifier (the value returned by overlay.getId()).\n     * Note that the index treats string and numeric identifiers as the same. So\n     * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n     * @param {string|number} id Overlay identifier.\n     * @return {import(\"./Overlay.js\").default} Overlay.\n     * @api\n     */\n    PluggableMap.prototype.getOverlayById = function (id) {\n        var overlay = this.overlayIdIndex_[id.toString()];\n        return overlay !== undefined ? overlay : null;\n    };\n    /**\n     * Get the map interactions. Modifying this collection changes the interactions\n     * associated with the map.\n     *\n     * Interactions are used for e.g. pan, zoom and rotate.\n     * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n     * @api\n     */\n    PluggableMap.prototype.getInteractions = function () {\n        return this.interactions;\n    };\n    /**\n     * Get the layergroup associated with this map.\n     * @return {LayerGroup} A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getLayerGroup = function () {\n        return (\n        /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP)));\n    };\n    /**\n     * Get the collection of layers associated with this map.\n     * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n     * @api\n     */\n    PluggableMap.prototype.getLayers = function () {\n        var layers = this.getLayerGroup().getLayers();\n        return layers;\n    };\n    /**\n     * @return {boolean} Layers have sources that are still loading.\n     */\n    PluggableMap.prototype.getLoading = function () {\n        var layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layer = layerStatesArray[i].layer;\n            var source = /** @type {import(\"./layer/Layer.js\").default} */ (layer).getSource();\n            if (source && source.loading) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the user\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.getPixelFromCoordinate = function (coordinate) {\n        var viewCoordinate = fromUserCoordinate(coordinate, this.getView().getProjection());\n        return this.getPixelFromCoordinateInternal(viewCoordinate);\n    };\n    /**\n     * Get the pixel for a coordinate.  This takes a coordinate in the map view\n     * projection and returns the corresponding pixel.\n     * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n     * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n     */\n    PluggableMap.prototype.getPixelFromCoordinateInternal = function (coordinate) {\n        var frameState = this.frameState_;\n        if (!frameState) {\n            return null;\n        }\n        else {\n            return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n        }\n    };\n    /**\n     * Get the map renderer.\n     * @return {import(\"./renderer/Map.js\").default} Renderer\n     */\n    PluggableMap.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Get the size of this map.\n     * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getSize = function () {\n        return (\n        /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE)));\n    };\n    /**\n     * Get the view associated with this map. A view manages properties such as\n     * center and resolution.\n     * @return {View} The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.getView = function () {\n        return (\n        /** @type {View} */ (this.get(MapProperty.VIEW)));\n    };\n    /**\n     * Get the element that serves as the map viewport.\n     * @return {HTMLElement} Viewport.\n     * @api\n     */\n    PluggableMap.prototype.getViewport = function () {\n        return this.viewport_;\n    };\n    /**\n     * Get the element that serves as the container for overlays.  Elements added to\n     * this container will let mousedown and touchstart events through to the map,\n     * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n     * events.\n     * @return {!HTMLElement} The map's overlay container.\n     */\n    PluggableMap.prototype.getOverlayContainer = function () {\n        return this.overlayContainer_;\n    };\n    /**\n     * Get the element that serves as a container for overlays that don't allow\n     * event propagation. Elements added to this container won't let mousedown and\n     * touchstart events through to the map, so clicks and gestures on an overlay\n     * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @return {!HTMLElement} The map's overlay container that stops events.\n     */\n    PluggableMap.prototype.getOverlayContainerStopEvent = function () {\n        return this.overlayContainerStopEvent_;\n    };\n    /**\n     * @param {import(\"./Tile.js\").default} tile Tile.\n     * @param {string} tileSourceKey Tile source key.\n     * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n     * @param {number} tileResolution Tile resolution.\n     * @return {number} Tile priority.\n     */\n    PluggableMap.prototype.getTilePriority = function (tile, tileSourceKey, tileCenter, tileResolution) {\n        // Filter out tiles at higher zoom levels than the current zoom level, or that\n        // are outside the visible extent.\n        var frameState = this.frameState_;\n        if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n            return DROP;\n        }\n        if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n            return DROP;\n        }\n        // Prioritize the highest zoom level tiles closest to the focus.\n        // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n        // Within a zoom level, tiles are prioritized by the distance in pixels between\n        // the center of the tile and the center of the viewport.  The factor of 65536\n        // means that the prioritization should behave as desired for tiles up to\n        // 65536 * Math.log(2) = 45426 pixels from the focus.\n        var center = frameState.viewState.center;\n        var deltaX = tileCenter[0] - center[0];\n        var deltaY = tileCenter[1] - center[1];\n        return 65536 * Math.log(tileResolution) +\n            Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n    };\n    /**\n     * @param {Event} browserEvent Browser event.\n     * @param {string=} opt_type Type.\n     */\n    PluggableMap.prototype.handleBrowserEvent = function (browserEvent, opt_type) {\n        var type = opt_type || browserEvent.type;\n        var mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n        this.handleMapBrowserEvent(mapBrowserEvent);\n    };\n    /**\n     * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n     */\n    PluggableMap.prototype.handleMapBrowserEvent = function (mapBrowserEvent) {\n        if (!this.frameState_) {\n            // With no view defined, we cannot translate pixels into geographical\n            // coordinates so interactions cannot be used.\n            return;\n        }\n        var target = mapBrowserEvent.originalEvent.target;\n        while (target instanceof HTMLElement) {\n            if (target.parentElement === this.overlayContainerStopEvent_) {\n                return;\n            }\n            target = target.parentElement;\n        }\n        mapBrowserEvent.frameState = this.frameState_;\n        var interactionsArray = this.getInteractions().getArray();\n        if (this.dispatchEvent(mapBrowserEvent) !== false) {\n            for (var i = interactionsArray.length - 1; i >= 0; i--) {\n                var interaction = interactionsArray[i];\n                if (!interaction.getActive()) {\n                    continue;\n                }\n                var cont = interaction.handleEvent(mapBrowserEvent);\n                if (!cont) {\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    PluggableMap.prototype.handlePostRender = function () {\n        var frameState = this.frameState_;\n        // Manage the tile queue\n        // Image loads are expensive and a limited resource, so try to use them\n        // efficiently:\n        // * When the view is static we allow a large number of parallel tile loads\n        //   to complete the frame as quickly as possible.\n        // * When animating or interacting, image loads can cause janks, so we reduce\n        //   the maximum number of loads per frame and limit the number of parallel\n        //   tile loads to remain reactive to view changes and to reduce the chance of\n        //   loading tiles that will quickly disappear from view.\n        var tileQueue = this.tileQueue_;\n        if (!tileQueue.isEmpty()) {\n            var maxTotalLoading = this.maxTilesLoading_;\n            var maxNewLoads = maxTotalLoading;\n            if (frameState) {\n                var hints = frameState.viewHints;\n                if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n                    var lowOnFrameBudget = !IMAGE_DECODE && Date.now() - frameState.time > 8;\n                    maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n                    maxNewLoads = lowOnFrameBudget ? 0 : 2;\n                }\n            }\n            if (tileQueue.getTilesLoading() < maxTotalLoading) {\n                tileQueue.reprioritize(); // FIXME only call if view has changed\n                tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n            }\n        }\n        if (frameState && this.hasListener(RenderEventType.RENDERCOMPLETE) && !frameState.animate &&\n            !this.tileQueue_.getTilesLoading() && !this.getLoading()) {\n            this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n        }\n        var postRenderFunctions = this.postRenderFunctions_;\n        for (var i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n            postRenderFunctions[i](this, frameState);\n        }\n        postRenderFunctions.length = 0;\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleSizeChanged_ = function () {\n        if (this.getView()) {\n            this.getView().resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTargetChanged_ = function () {\n        // target may be undefined, null, a string or an Element.\n        // If it's a string we convert it to an Element before proceeding.\n        // If it's not now an Element we remove the viewport from the DOM.\n        // If it's an Element we append the viewport element to it.\n        var targetElement;\n        if (this.getTarget()) {\n            targetElement = this.getTargetElement();\n        }\n        if (this.keyHandlerKeys_) {\n            for (var i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n                unlistenByKey(this.keyHandlerKeys_[i]);\n            }\n            this.keyHandlerKeys_ = null;\n        }\n        if (!targetElement) {\n            if (this.renderer_) {\n                clearTimeout(this.postRenderTimeoutHandle_);\n                this.postRenderFunctions_.length = 0;\n                this.renderer_.dispose();\n                this.renderer_ = null;\n            }\n            if (this.animationDelayKey_) {\n                cancelAnimationFrame(this.animationDelayKey_);\n                this.animationDelayKey_ = undefined;\n            }\n            removeNode(this.viewport_);\n            if (this.handleResize_ !== undefined) {\n                removeEventListener(EventType.RESIZE, this.handleResize_, false);\n                this.handleResize_ = undefined;\n            }\n        }\n        else {\n            targetElement.appendChild(this.viewport_);\n            if (!this.renderer_) {\n                this.renderer_ = this.createRenderer();\n            }\n            var keyboardEventTarget = !this.keyboardEventTarget_ ?\n                targetElement : this.keyboardEventTarget_;\n            this.keyHandlerKeys_ = [\n                listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n                listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n            ];\n            if (!this.handleResize_) {\n                this.handleResize_ = this.updateSize.bind(this);\n                window.addEventListener(EventType.RESIZE, this.handleResize_, false);\n            }\n        }\n        this.updateSize();\n        // updateSize calls setSize, so no need to call this.render\n        // ourselves here.\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleTileChange_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewPropertyChanged_ = function () {\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleViewChanged_ = function () {\n        if (this.viewPropertyListenerKey_) {\n            unlistenByKey(this.viewPropertyListenerKey_);\n            this.viewPropertyListenerKey_ = null;\n        }\n        if (this.viewChangeListenerKey_) {\n            unlistenByKey(this.viewChangeListenerKey_);\n            this.viewChangeListenerKey_ = null;\n        }\n        var view = this.getView();\n        if (view) {\n            this.viewport_.setAttribute('data-view', getUid(view));\n            this.viewPropertyListenerKey_ = listen(view, ObjectEventType.PROPERTYCHANGE, this.handleViewPropertyChanged_, this);\n            this.viewChangeListenerKey_ = listen(view, EventType.CHANGE, this.handleViewPropertyChanged_, this);\n            view.resolveConstraints(0);\n        }\n        this.render();\n    };\n    /**\n     * @private\n     */\n    PluggableMap.prototype.handleLayerGroupChanged_ = function () {\n        if (this.layerGroupPropertyListenerKeys_) {\n            this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n            this.layerGroupPropertyListenerKeys_ = null;\n        }\n        var layerGroup = this.getLayerGroup();\n        if (layerGroup) {\n            this.layerGroupPropertyListenerKeys_ = [\n                listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n                listen(layerGroup, EventType.CHANGE, this.render, this)\n            ];\n        }\n        this.render();\n    };\n    /**\n     * @return {boolean} Is rendered.\n     */\n    PluggableMap.prototype.isRendered = function () {\n        return !!this.frameState_;\n    };\n    /**\n     * Requests an immediate render in a synchronous manner.\n     * @api\n     */\n    PluggableMap.prototype.renderSync = function () {\n        if (this.animationDelayKey_) {\n            cancelAnimationFrame(this.animationDelayKey_);\n        }\n        this.animationDelay_();\n    };\n    /**\n     * Redraws all text after new fonts have loaded\n     */\n    PluggableMap.prototype.redrawText = function () {\n        var layerStates = this.getLayerGroup().getLayerStatesArray();\n        for (var i = 0, ii = layerStates.length; i < ii; ++i) {\n            var layer = layerStates[i].layer;\n            if (layer.hasRenderer()) {\n                layer.getRenderer().handleFontsChanged();\n            }\n        }\n    };\n    /**\n     * Request a map rendering (at the next animation frame).\n     * @api\n     */\n    PluggableMap.prototype.render = function () {\n        if (this.renderer_ && this.animationDelayKey_ === undefined) {\n            this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n        }\n    };\n    /**\n     * Remove the given control from the map.\n     * @param {import(\"./control/Control.js\").default} control Control.\n     * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n     *     if the control was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeControl = function (control) {\n        return this.getControls().remove(control);\n    };\n    /**\n     * Remove the given interaction from the map.\n     * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n     * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n     *     undefined if the interaction was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeInteraction = function (interaction) {\n        return this.getInteractions().remove(interaction);\n    };\n    /**\n     * Removes the given layer from the map.\n     * @param {import(\"./layer/Base.js\").default} layer Layer.\n     * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n     *     layer was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeLayer = function (layer) {\n        var layers = this.getLayerGroup().getLayers();\n        return layers.remove(layer);\n    };\n    /**\n     * Remove the given overlay from the map.\n     * @param {import(\"./Overlay.js\").default} overlay Overlay.\n     * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n     *     if the overlay was not found).\n     * @api\n     */\n    PluggableMap.prototype.removeOverlay = function (overlay) {\n        return this.getOverlays().remove(overlay);\n    };\n    /**\n     * @param {number} time Time.\n     * @private\n     */\n    PluggableMap.prototype.renderFrame_ = function (time) {\n        var size = this.getSize();\n        var view = this.getView();\n        var previousFrameState = this.frameState_;\n        /** @type {?FrameState} */\n        var frameState = null;\n        if (size !== undefined && hasArea(size) && view && view.isDef()) {\n            var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n            var viewState = view.getState();\n            frameState = {\n                animate: false,\n                coordinateToPixelTransform: this.coordinateToPixelTransform_,\n                declutterItems: previousFrameState ? previousFrameState.declutterItems : [],\n                extent: getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, size),\n                index: this.frameIndex_++,\n                layerIndex: 0,\n                layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n                pixelRatio: this.pixelRatio_,\n                pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n                postRenderFunctions: [],\n                size: size,\n                tileQueue: this.tileQueue_,\n                time: time,\n                usedTiles: {},\n                viewState: viewState,\n                viewHints: viewHints,\n                wantedTiles: {}\n            };\n        }\n        this.frameState_ = frameState;\n        this.renderer_.renderFrame(frameState);\n        if (frameState) {\n            if (frameState.animate) {\n                this.render();\n            }\n            Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n            if (previousFrameState) {\n                var moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                        !equals(frameState.extent, this.previousExtent_));\n                if (moveStart) {\n                    this.dispatchEvent(new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n                    this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n                }\n            }\n            var idle = this.previousExtent_ &&\n                !frameState.viewHints[ViewHint.ANIMATING] &&\n                !frameState.viewHints[ViewHint.INTERACTING] &&\n                !equals(frameState.extent, this.previousExtent_);\n            if (idle) {\n                this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n                clone(frameState.extent, this.previousExtent_);\n            }\n        }\n        this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n        this.postRenderTimeoutHandle_ = setTimeout(this.handlePostRender.bind(this), 0);\n    };\n    /**\n     * Sets the layergroup of this map.\n     * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setLayerGroup = function (layerGroup) {\n        this.set(MapProperty.LAYERGROUP, layerGroup);\n    };\n    /**\n     * Set the size of this map.\n     * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setSize = function (size) {\n        this.set(MapProperty.SIZE, size);\n    };\n    /**\n     * Set the target element to render this map into.\n     * @param {HTMLElement|string|undefined} target The Element or id of the Element\n     *     that the map is rendered in.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setTarget = function (target) {\n        this.set(MapProperty.TARGET, target);\n    };\n    /**\n     * Set the view for this map.\n     * @param {View} view The view that controls this map.\n     * @observable\n     * @api\n     */\n    PluggableMap.prototype.setView = function (view) {\n        this.set(MapProperty.VIEW, view);\n    };\n    /**\n     * Force a recalculation of the map viewport size.  This should be called when\n     * third-party code changes the size of the map viewport.\n     * @api\n     */\n    PluggableMap.prototype.updateSize = function () {\n        var targetElement = this.getTargetElement();\n        if (!targetElement) {\n            this.setSize(undefined);\n        }\n        else {\n            var computedStyle = getComputedStyle(targetElement);\n            this.setSize([\n                targetElement.offsetWidth -\n                    parseFloat(computedStyle['borderLeftWidth']) -\n                    parseFloat(computedStyle['paddingLeft']) -\n                    parseFloat(computedStyle['paddingRight']) -\n                    parseFloat(computedStyle['borderRightWidth']),\n                targetElement.offsetHeight -\n                    parseFloat(computedStyle['borderTopWidth']) -\n                    parseFloat(computedStyle['paddingTop']) -\n                    parseFloat(computedStyle['paddingBottom']) -\n                    parseFloat(computedStyle['borderBottomWidth'])\n            ]);\n        }\n    };\n    return PluggableMap;\n}(BaseObject));\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n    /**\n     * @type {HTMLElement|Document}\n     */\n    var keyboardEventTarget = null;\n    if (options.keyboardEventTarget !== undefined) {\n        keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n            document.getElementById(options.keyboardEventTarget) :\n            options.keyboardEventTarget;\n    }\n    /**\n     * @type {Object<string, *>}\n     */\n    var values = {};\n    var layerGroup = options.layers && typeof /** @type {?} */ (options.layers).getLayers === 'function' ?\n        /** @type {LayerGroup} */ (options.layers) : new LayerGroup({ layers: /** @type {Collection} */ (options.layers) });\n    values[MapProperty.LAYERGROUP] = layerGroup;\n    values[MapProperty.TARGET] = options.target;\n    values[MapProperty.VIEW] = options.view !== undefined ?\n        options.view : new View();\n    var controls;\n    if (options.controls !== undefined) {\n        if (Array.isArray(options.controls)) {\n            controls = new Collection(options.controls.slice());\n        }\n        else {\n            assert(typeof /** @type {?} */ (options.controls).getArray === 'function', 47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n            controls = /** @type {Collection} */ (options.controls);\n        }\n    }\n    var interactions;\n    if (options.interactions !== undefined) {\n        if (Array.isArray(options.interactions)) {\n            interactions = new Collection(options.interactions.slice());\n        }\n        else {\n            assert(typeof /** @type {?} */ (options.interactions).getArray === 'function', 48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n            interactions = /** @type {Collection} */ (options.interactions);\n        }\n    }\n    var overlays;\n    if (options.overlays !== undefined) {\n        if (Array.isArray(options.overlays)) {\n            overlays = new Collection(options.overlays.slice());\n        }\n        else {\n            assert(typeof /** @type {?} */ (options.overlays).getArray === 'function', 49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n            overlays = options.overlays;\n        }\n    }\n    else {\n        overlays = new Collection();\n    }\n    return {\n        controls: controls,\n        interactions: interactions,\n        keyboardEventTarget: keyboardEventTarget,\n        overlays: overlays,\n        values: values\n    };\n}\nexport default PluggableMap;\n//# sourceMappingURL=PluggableMap.js.map","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { equals } from '../../array.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { intersects } from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport { transformGeom2D } from '../../geom/SimpleGeometry.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport VectorContext from '../VectorContext.js';\nimport { defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont } from '../canvas.js';\nimport { create as createTransform, compose as composeTransform } from '../../transform.js';\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nvar CanvasImmediateRenderer = /** @class */ (function (_super) {\n    __extends(CanvasImmediateRenderer, _super);\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../extent.js\").Extent} extent Extent.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {number=} opt_squaredTolerance Optional squared tolerance for simplification.\n     * @param {import(\"../../proj.js\").TransformFunction=} opt_userTransform Transform from user to view projection.\n     */\n    function CanvasImmediateRenderer(context, pixelRatio, extent, transform, viewRotation, opt_squaredTolerance, opt_userTransform) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.context_ = context;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.extent_ = extent;\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.transform_ = transform;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.viewRotation_ = viewRotation;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.squaredTolerance_ = opt_squaredTolerance;\n        /**\n         * @private\n         * @type {import(\"../../proj.js\").TransformFunction}\n         */\n        _this.userTransform_ = opt_userTransform;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.contextFillState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.contextStrokeState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").TextState}\n         */\n        _this.contextTextState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.fillState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.strokeState_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.image_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageAnchorX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageAnchorY_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageHeight_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageOpacity_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageOriginX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageOriginY_ = 0;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.imageRotateWithView_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageRotation_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageScale_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.imageWidth_ = 0;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.text_ = '';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetY_ = 0;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.textRotateWithView_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textRotation_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textScale_ = 0;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.textFillState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.textStrokeState_ = null;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").TextState}\n         */\n        _this.textState_ = null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.pixelCoordinates_ = [];\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.tmpLocalTransform_ = createTransform();\n        return _this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.drawImages_ = function (flatCoordinates, offset, end, stride) {\n        if (!this.image_) {\n            return;\n        }\n        var pixelCoordinates = transform2D(flatCoordinates, offset, end, 2, this.transform_, this.pixelCoordinates_);\n        var context = this.context_;\n        var localTransform = this.tmpLocalTransform_;\n        var alpha = context.globalAlpha;\n        if (this.imageOpacity_ != 1) {\n            context.globalAlpha = alpha * this.imageOpacity_;\n        }\n        var rotation = this.imageRotation_;\n        if (this.imageRotateWithView_) {\n            rotation += this.viewRotation_;\n        }\n        for (var i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n            var x = pixelCoordinates[i] - this.imageAnchorX_;\n            var y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n            if (rotation !== 0 || this.imageScale_ != 1) {\n                var centerX = x + this.imageAnchorX_;\n                var centerY = y + this.imageAnchorY_;\n                composeTransform(localTransform, centerX, centerY, this.imageScale_, this.imageScale_, rotation, -centerX, -centerY);\n                context.setTransform.apply(context, localTransform);\n            }\n            context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, x, y, this.imageWidth_, this.imageHeight_);\n        }\n        if (rotation !== 0 || this.imageScale_ != 1) {\n            context.setTransform(1, 0, 0, 1, 0, 0);\n        }\n        if (this.imageOpacity_ != 1) {\n            context.globalAlpha = alpha;\n        }\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.drawText_ = function (flatCoordinates, offset, end, stride) {\n        if (!this.textState_ || this.text_ === '') {\n            return;\n        }\n        if (this.textFillState_) {\n            this.setContextFillState_(this.textFillState_);\n        }\n        if (this.textStrokeState_) {\n            this.setContextStrokeState_(this.textStrokeState_);\n        }\n        this.setContextTextState_(this.textState_);\n        var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n        var context = this.context_;\n        var rotation = this.textRotation_;\n        if (this.textRotateWithView_) {\n            rotation += this.viewRotation_;\n        }\n        for (; offset < end; offset += stride) {\n            var x = pixelCoordinates[offset] + this.textOffsetX_;\n            var y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n            if (rotation !== 0 || this.textScale_ != 1) {\n                var localTransform = composeTransform(this.tmpLocalTransform_, x, y, this.textScale_, this.textScale_, rotation, -x, -y);\n                context.setTransform.apply(context, localTransform);\n            }\n            if (this.textStrokeState_) {\n                context.strokeText(this.text_, x, y);\n            }\n            if (this.textFillState_) {\n                context.fillText(this.text_, x, y);\n            }\n        }\n        if (rotation !== 0 || this.textScale_ != 1) {\n            context.setTransform(1, 0, 0, 1, 0, 0);\n        }\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @param {boolean} close Close.\n     * @private\n     * @return {number} end End.\n     */\n    CanvasImmediateRenderer.prototype.moveToLineTo_ = function (flatCoordinates, offset, end, stride, close) {\n        var context = this.context_;\n        var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n        context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n        var length = pixelCoordinates.length;\n        if (close) {\n            length -= 2;\n        }\n        for (var i = 2; i < length; i += 2) {\n            context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n        }\n        if (close) {\n            context.closePath();\n        }\n        return end;\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} End.\n     */\n    CanvasImmediateRenderer.prototype.drawRings_ = function (flatCoordinates, offset, ends, stride) {\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n        }\n        return offset;\n    };\n    /**\n     * Render a circle geometry into the canvas.  Rendering is immediate and uses\n     * the current fill and stroke styles.\n     *\n     * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n     * @override\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.drawCircle = function (geometry) {\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.fillState_ || this.strokeState_) {\n            if (this.fillState_) {\n                this.setContextFillState_(this.fillState_);\n            }\n            if (this.strokeState_) {\n                this.setContextStrokeState_(this.strokeState_);\n            }\n            var pixelCoordinates = transformGeom2D(geometry, this.transform_, this.pixelCoordinates_);\n            var dx = pixelCoordinates[2] - pixelCoordinates[0];\n            var dy = pixelCoordinates[3] - pixelCoordinates[1];\n            var radius = Math.sqrt(dx * dx + dy * dy);\n            var context = this.context_;\n            context.beginPath();\n            context.arc(pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n            if (this.fillState_) {\n                context.fill();\n            }\n            if (this.strokeState_) {\n                context.stroke();\n            }\n        }\n        if (this.text_ !== '') {\n            this.drawText_(geometry.getCenter(), 0, 2, 2);\n        }\n    };\n    /**\n     * Set the rendering style.  Note that since this is an immediate rendering API,\n     * any `zIndex` on the provided style will be ignored.\n     *\n     * @param {import(\"../../style/Style.js\").default} style The rendering style.\n     * @override\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.setStyle = function (style) {\n        this.setFillStrokeStyle(style.getFill(), style.getStroke());\n        this.setImageStyle(style.getImage());\n        this.setTextStyle(style.getText());\n    };\n    /**\n     * Render a geometry into the canvas.  Call\n     * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n     *\n     * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n     * @override\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.drawGeometry = function (geometry) {\n        var type = geometry.getType();\n        switch (type) {\n            case GeometryType.POINT:\n                this.drawPoint(/** @type {import(\"../../geom/Point.js\").default} */ (geometry));\n                break;\n            case GeometryType.LINE_STRING:\n                this.drawLineString(/** @type {import(\"../../geom/LineString.js\").default} */ (geometry));\n                break;\n            case GeometryType.POLYGON:\n                this.drawPolygon(/** @type {import(\"../../geom/Polygon.js\").default} */ (geometry));\n                break;\n            case GeometryType.MULTI_POINT:\n                this.drawMultiPoint(/** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry));\n                break;\n            case GeometryType.MULTI_LINE_STRING:\n                this.drawMultiLineString(/** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry));\n                break;\n            case GeometryType.MULTI_POLYGON:\n                this.drawMultiPolygon(/** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry));\n                break;\n            case GeometryType.GEOMETRY_COLLECTION:\n                this.drawGeometryCollection(/** @type {import(\"../../geom/GeometryCollection.js\").default} */ (geometry));\n                break;\n            case GeometryType.CIRCLE:\n                this.drawCircle(/** @type {import(\"../../geom/Circle.js\").default} */ (geometry));\n                break;\n            default:\n        }\n    };\n    /**\n     * Render a feature into the canvas.  Note that any `zIndex` on the provided\n     * style will be ignored - features are rendered immediately in the order that\n     * this method is called.  If you need `zIndex` support, you should be using an\n     * {@link module:ol/layer/Vector~VectorLayer} instead.\n     *\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @param {import(\"../../style/Style.js\").default} style Style.\n     * @override\n     * @api\n     */\n    CanvasImmediateRenderer.prototype.drawFeature = function (feature, style) {\n        var geometry = style.getGeometryFunction()(feature);\n        if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        this.setStyle(style);\n        this.drawGeometry(geometry);\n    };\n    /**\n     * Render a GeometryCollection to the canvas.  Rendering is immediate and\n     * uses the current styles appropriate for each geometry in the collection.\n     *\n     * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawGeometryCollection = function (geometry) {\n        var geometries = geometry.getGeometriesArray();\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            this.drawGeometry(geometries[i]);\n        }\n    };\n    /**\n     * Render a Point geometry into the canvas.  Rendering is immediate and uses\n     * the current style.\n     *\n     * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawPoint = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/Point.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        var flatCoordinates = geometry.getFlatCoordinates();\n        var stride = geometry.getStride();\n        if (this.image_) {\n            this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n        if (this.text_ !== '') {\n            this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n    };\n    /**\n     * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n     * uses the current style.\n     *\n     * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawMultiPoint = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        var flatCoordinates = geometry.getFlatCoordinates();\n        var stride = geometry.getStride();\n        if (this.image_) {\n            this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n        if (this.text_ !== '') {\n            this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n        }\n    };\n    /**\n     * Render a LineString into the canvas.  Rendering is immediate and uses\n     * the current style.\n     *\n     * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawLineString = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.strokeState_) {\n            this.setContextStrokeState_(this.strokeState_);\n            var context = this.context_;\n            var flatCoordinates = geometry.getFlatCoordinates();\n            context.beginPath();\n            this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length, geometry.getStride(), false);\n            context.stroke();\n        }\n        if (this.text_ !== '') {\n            var flatMidpoint = geometry.getFlatMidpoint();\n            this.drawText_(flatMidpoint, 0, 2, 2);\n        }\n    };\n    /**\n     * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n     * and uses the current style.\n     *\n     * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawMultiLineString = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        var geometryExtent = geometry.getExtent();\n        if (!intersects(this.extent_, geometryExtent)) {\n            return;\n        }\n        if (this.strokeState_) {\n            this.setContextStrokeState_(this.strokeState_);\n            var context = this.context_;\n            var flatCoordinates = geometry.getFlatCoordinates();\n            var offset = 0;\n            var ends = /** @type {Array<number>} */ (geometry.getEnds());\n            var stride = geometry.getStride();\n            context.beginPath();\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n            }\n            context.stroke();\n        }\n        if (this.text_ !== '') {\n            var flatMidpoints = geometry.getFlatMidpoints();\n            this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n        }\n    };\n    /**\n     * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n     * the current style.\n     *\n     * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawPolygon = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.strokeState_ || this.fillState_) {\n            if (this.fillState_) {\n                this.setContextFillState_(this.fillState_);\n            }\n            if (this.strokeState_) {\n                this.setContextStrokeState_(this.strokeState_);\n            }\n            var context = this.context_;\n            context.beginPath();\n            this.drawRings_(geometry.getOrientedFlatCoordinates(), 0, /** @type {Array<number>} */ (geometry.getEnds()), geometry.getStride());\n            if (this.fillState_) {\n                context.fill();\n            }\n            if (this.strokeState_) {\n                context.stroke();\n            }\n        }\n        if (this.text_ !== '') {\n            var flatInteriorPoint = geometry.getFlatInteriorPoint();\n            this.drawText_(flatInteriorPoint, 0, 2, 2);\n        }\n    };\n    /**\n     * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n     * uses the current style.\n     * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.drawMultiPolygon = function (geometry) {\n        if (this.squaredTolerance_) {\n            geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_));\n        }\n        if (!intersects(this.extent_, geometry.getExtent())) {\n            return;\n        }\n        if (this.strokeState_ || this.fillState_) {\n            if (this.fillState_) {\n                this.setContextFillState_(this.fillState_);\n            }\n            if (this.strokeState_) {\n                this.setContextStrokeState_(this.strokeState_);\n            }\n            var context = this.context_;\n            var flatCoordinates = geometry.getOrientedFlatCoordinates();\n            var offset = 0;\n            var endss = geometry.getEndss();\n            var stride = geometry.getStride();\n            context.beginPath();\n            for (var i = 0, ii = endss.length; i < ii; ++i) {\n                var ends = endss[i];\n                offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n            }\n            if (this.fillState_) {\n                context.fill();\n            }\n            if (this.strokeState_) {\n                context.stroke();\n            }\n        }\n        if (this.text_ !== '') {\n            var flatInteriorPoints = geometry.getFlatInteriorPoints();\n            this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.setContextFillState_ = function (fillState) {\n        var context = this.context_;\n        var contextFillState = this.contextFillState_;\n        if (!contextFillState) {\n            context.fillStyle = fillState.fillStyle;\n            this.contextFillState_ = {\n                fillStyle: fillState.fillStyle\n            };\n        }\n        else {\n            if (contextFillState.fillStyle != fillState.fillStyle) {\n                contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n            }\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.setContextStrokeState_ = function (strokeState) {\n        var context = this.context_;\n        var contextStrokeState = this.contextStrokeState_;\n        if (!contextStrokeState) {\n            context.lineCap = strokeState.lineCap;\n            if (context.setLineDash) {\n                context.setLineDash(strokeState.lineDash);\n                context.lineDashOffset = strokeState.lineDashOffset;\n            }\n            context.lineJoin = strokeState.lineJoin;\n            context.lineWidth = strokeState.lineWidth;\n            context.miterLimit = strokeState.miterLimit;\n            context.strokeStyle = strokeState.strokeStyle;\n            this.contextStrokeState_ = {\n                lineCap: strokeState.lineCap,\n                lineDash: strokeState.lineDash,\n                lineDashOffset: strokeState.lineDashOffset,\n                lineJoin: strokeState.lineJoin,\n                lineWidth: strokeState.lineWidth,\n                miterLimit: strokeState.miterLimit,\n                strokeStyle: strokeState.strokeStyle\n            };\n        }\n        else {\n            if (contextStrokeState.lineCap != strokeState.lineCap) {\n                contextStrokeState.lineCap = context.lineCap = strokeState.lineCap;\n            }\n            if (context.setLineDash) {\n                if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n                    context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n                }\n                if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n                    contextStrokeState.lineDashOffset = context.lineDashOffset =\n                        strokeState.lineDashOffset;\n                }\n            }\n            if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n                contextStrokeState.lineJoin = context.lineJoin = strokeState.lineJoin;\n            }\n            if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n                contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n            }\n            if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n                contextStrokeState.miterLimit = context.miterLimit =\n                    strokeState.miterLimit;\n            }\n            if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n                contextStrokeState.strokeStyle = context.strokeStyle =\n                    strokeState.strokeStyle;\n            }\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").TextState} textState Text state.\n     * @private\n     */\n    CanvasImmediateRenderer.prototype.setContextTextState_ = function (textState) {\n        var context = this.context_;\n        var contextTextState = this.contextTextState_;\n        var textAlign = textState.textAlign ?\n            textState.textAlign : defaultTextAlign;\n        if (!contextTextState) {\n            context.font = textState.font;\n            context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n            context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n            this.contextTextState_ = {\n                font: textState.font,\n                textAlign: textAlign,\n                textBaseline: textState.textBaseline\n            };\n        }\n        else {\n            if (contextTextState.font != textState.font) {\n                contextTextState.font = context.font = textState.font;\n            }\n            if (contextTextState.textAlign != textAlign) {\n                contextTextState.textAlign = context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n            }\n            if (contextTextState.textBaseline != textState.textBaseline) {\n                contextTextState.textBaseline = context.textBaseline =\n                    /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n            }\n        }\n    };\n    /**\n     * Set the fill and stroke style for subsequent draw operations.  To clear\n     * either fill or stroke styles, pass null for the appropriate parameter.\n     *\n     * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n     * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n        if (!fillStyle) {\n            this.fillState_ = null;\n        }\n        else {\n            var fillStyleColor = fillStyle.getColor();\n            this.fillState_ = {\n                fillStyle: asColorLike(fillStyleColor ?\n                    fillStyleColor : defaultFillStyle)\n            };\n        }\n        if (!strokeStyle) {\n            this.strokeState_ = null;\n        }\n        else {\n            var strokeStyleColor = strokeStyle.getColor();\n            var strokeStyleLineCap = strokeStyle.getLineCap();\n            var strokeStyleLineDash = strokeStyle.getLineDash();\n            var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n            var strokeStyleLineJoin = strokeStyle.getLineJoin();\n            var strokeStyleWidth = strokeStyle.getWidth();\n            var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n            this.strokeState_ = {\n                lineCap: strokeStyleLineCap !== undefined ?\n                    strokeStyleLineCap : defaultLineCap,\n                lineDash: strokeStyleLineDash ?\n                    strokeStyleLineDash : defaultLineDash,\n                lineDashOffset: strokeStyleLineDashOffset ?\n                    strokeStyleLineDashOffset : defaultLineDashOffset,\n                lineJoin: strokeStyleLineJoin !== undefined ?\n                    strokeStyleLineJoin : defaultLineJoin,\n                lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n                    strokeStyleWidth : defaultLineWidth),\n                miterLimit: strokeStyleMiterLimit !== undefined ?\n                    strokeStyleMiterLimit : defaultMiterLimit,\n                strokeStyle: asColorLike(strokeStyleColor ?\n                    strokeStyleColor : defaultStrokeStyle)\n            };\n        }\n    };\n    /**\n     * Set the image style for subsequent draw operations.  Pass null to remove\n     * the image style.\n     *\n     * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.setImageStyle = function (imageStyle) {\n        if (!imageStyle) {\n            this.image_ = null;\n        }\n        else {\n            var imageAnchor = imageStyle.getAnchor();\n            // FIXME pixel ratio\n            var imageImage = imageStyle.getImage(1);\n            var imageOrigin = imageStyle.getOrigin();\n            var imageSize = imageStyle.getSize();\n            this.imageAnchorX_ = imageAnchor[0];\n            this.imageAnchorY_ = imageAnchor[1];\n            this.imageHeight_ = imageSize[1];\n            this.image_ = imageImage;\n            this.imageOpacity_ = imageStyle.getOpacity();\n            this.imageOriginX_ = imageOrigin[0];\n            this.imageOriginY_ = imageOrigin[1];\n            this.imageRotateWithView_ = imageStyle.getRotateWithView();\n            this.imageRotation_ = imageStyle.getRotation();\n            this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n            this.imageWidth_ = imageSize[0];\n        }\n    };\n    /**\n     * Set the text style for subsequent draw operations.  Pass null to\n     * remove the text style.\n     *\n     * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n     * @override\n     */\n    CanvasImmediateRenderer.prototype.setTextStyle = function (textStyle) {\n        if (!textStyle) {\n            this.text_ = '';\n        }\n        else {\n            var textFillStyle = textStyle.getFill();\n            if (!textFillStyle) {\n                this.textFillState_ = null;\n            }\n            else {\n                var textFillStyleColor = textFillStyle.getColor();\n                this.textFillState_ = {\n                    fillStyle: asColorLike(textFillStyleColor ?\n                        textFillStyleColor : defaultFillStyle)\n                };\n            }\n            var textStrokeStyle = textStyle.getStroke();\n            if (!textStrokeStyle) {\n                this.textStrokeState_ = null;\n            }\n            else {\n                var textStrokeStyleColor = textStrokeStyle.getColor();\n                var textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n                var textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n                var textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n                var textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n                var textStrokeStyleWidth = textStrokeStyle.getWidth();\n                var textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n                this.textStrokeState_ = {\n                    lineCap: textStrokeStyleLineCap !== undefined ?\n                        textStrokeStyleLineCap : defaultLineCap,\n                    lineDash: textStrokeStyleLineDash ?\n                        textStrokeStyleLineDash : defaultLineDash,\n                    lineDashOffset: textStrokeStyleLineDashOffset ?\n                        textStrokeStyleLineDashOffset : defaultLineDashOffset,\n                    lineJoin: textStrokeStyleLineJoin !== undefined ?\n                        textStrokeStyleLineJoin : defaultLineJoin,\n                    lineWidth: textStrokeStyleWidth !== undefined ?\n                        textStrokeStyleWidth : defaultLineWidth,\n                    miterLimit: textStrokeStyleMiterLimit !== undefined ?\n                        textStrokeStyleMiterLimit : defaultMiterLimit,\n                    strokeStyle: asColorLike(textStrokeStyleColor ?\n                        textStrokeStyleColor : defaultStrokeStyle)\n                };\n            }\n            var textFont = textStyle.getFont();\n            var textOffsetX = textStyle.getOffsetX();\n            var textOffsetY = textStyle.getOffsetY();\n            var textRotateWithView = textStyle.getRotateWithView();\n            var textRotation = textStyle.getRotation();\n            var textScale = textStyle.getScale();\n            var textText = textStyle.getText();\n            var textTextAlign = textStyle.getTextAlign();\n            var textTextBaseline = textStyle.getTextBaseline();\n            this.textState_ = {\n                font: textFont !== undefined ?\n                    textFont : defaultFont,\n                textAlign: textTextAlign !== undefined ?\n                    textTextAlign : defaultTextAlign,\n                textBaseline: textTextBaseline !== undefined ?\n                    textTextBaseline : defaultTextBaseline\n            };\n            this.text_ = textText !== undefined ? textText : '';\n            this.textOffsetX_ =\n                textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n            this.textOffsetY_ =\n                textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n            this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n            this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n            this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n                textScale : 1);\n        }\n    };\n    return CanvasImmediateRenderer;\n}(VectorContext));\nexport default CanvasImmediateRenderer;\n//# sourceMappingURL=Immediate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Map\n */\nimport { abstract } from '../util.js';\nimport Disposable from '../Disposable.js';\nimport { getWidth } from '../extent.js';\nimport { TRUE } from '../functions.js';\nimport { inView } from '../layer/Layer.js';\nimport { shared as iconImageCache } from '../style/IconImageCache.js';\nimport { compose as composeTransform, makeInverse } from '../transform.js';\nimport { renderDeclutterItems } from '../render.js';\n/**\n * @abstract\n */\nvar MapRenderer = /** @class */ (function (_super) {\n    __extends(MapRenderer, _super);\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    function MapRenderer(map) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = map;\n        /**\n         * @private\n         */\n        _this.declutterTree_ = null;\n        return _this;\n    }\n    /**\n     * @abstract\n     * @param {import(\"../render/EventType.js\").default} type Event type.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    MapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n        abstract();\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @protected\n     */\n    MapRenderer.prototype.calculateMatrices2D = function (frameState) {\n        var viewState = frameState.viewState;\n        var coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n        var pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n        composeTransform(coordinateToPixelTransform, frameState.size[0] / 2, frameState.size[1] / 2, 1 / viewState.resolution, -1 / viewState.resolution, -viewState.rotation, -viewState.center[0], -viewState.center[1]);\n        makeInverse(pixelToCoordinateTransform, coordinateToPixelTransform);\n    };\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {boolean} checkWrapped Check for wrapped geometries.\n     * @param {function(this: S, import(\"../Feature.js\").FeatureLike,\n     *     import(\"../layer/Layer.js\").default): T} callback Feature callback.\n     * @param {S} thisArg Value to use as `this` when executing `callback`.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n     * @return {T|undefined} Callback result.\n     * @template S,T,U\n     */\n    MapRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, checkWrapped, callback, thisArg, layerFilter, thisArg2) {\n        var result;\n        var viewState = frameState.viewState;\n        /**\n         * @param {boolean} managed Managed layer.\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @return {?} Callback result.\n         */\n        function forEachFeatureAtCoordinate(managed, feature, layer) {\n            return callback.call(thisArg, feature, managed ? layer : null);\n        }\n        var projection = viewState.projection;\n        var translatedCoordinate = coordinate;\n        var offsets = [[0, 0]];\n        if (projection.canWrapX()) {\n            var projectionExtent = projection.getExtent();\n            var worldWidth = getWidth(projectionExtent);\n            var x = coordinate[0];\n            if (x < projectionExtent[0] || x > projectionExtent[2]) {\n                var worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n                translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n            }\n            if (checkWrapped) {\n                offsets.push([-worldWidth, 0], [worldWidth, 0]);\n            }\n        }\n        var layerStates = frameState.layerStatesArray;\n        var numLayers = layerStates.length;\n        var declutteredFeatures;\n        if (this.declutterTree_) {\n            declutteredFeatures = this.declutterTree_.all().map(function (entry) {\n                return entry.value;\n            });\n        }\n        var tmpCoord = [];\n        for (var i = 0; i < offsets.length; i++) {\n            for (var j = numLayers - 1; j >= 0; --j) {\n                var layerState = layerStates[j];\n                var layer = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer);\n                if (layer.hasRenderer() && inView(layerState, viewState) && layerFilter.call(thisArg2, layer)) {\n                    var layerRenderer = layer.getRenderer();\n                    var source = layer.getSource();\n                    var coordinates = source.getWrapX() ? translatedCoordinate : coordinate;\n                    if (layerRenderer && source) {\n                        var callback_1 = forEachFeatureAtCoordinate.bind(null, layerState.managed);\n                        tmpCoord[0] = coordinates[0] + offsets[i][0];\n                        tmpCoord[1] = coordinates[1] + offsets[i][1];\n                        result = layerRenderer.forEachFeatureAtCoordinate(tmpCoord, frameState, hitTolerance, callback_1, declutteredFeatures);\n                    }\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(this: S, import(\"../layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n     *     callback.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @return {T|undefined} Callback result.\n     * @template S,T,U\n     */\n    MapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n        return abstract();\n    };\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {boolean} checkWrapped Check for wrapped geometries.\n     * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n     *     function, only layers which are visible and for which this function\n     *     returns `true` will be tested for features.  By default, all visible\n     *     layers will be tested.\n     * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n     * @return {boolean} Is there a feature at the given coordinate?\n     * @template U\n     */\n    MapRenderer.prototype.hasFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, checkWrapped, layerFilter, thisArg) {\n        var hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, checkWrapped, TRUE, this, layerFilter, thisArg);\n        return hasFeature !== undefined;\n    };\n    /**\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     */\n    MapRenderer.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Render.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    MapRenderer.prototype.renderFrame = function (frameState) {\n        this.declutterTree_ = renderDeclutterItems(frameState, this.declutterTree_);\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    MapRenderer.prototype.scheduleExpireIconCache = function (frameState) {\n        if (iconImageCache.canExpireCache()) {\n            frameState.postRenderFunctions.push(expireIconCache);\n        }\n    };\n    return MapRenderer;\n}(Disposable));\n/**\n * @param {import(\"../PluggableMap.js\").default} map Map.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n    iconImageCache.expire();\n}\nexport default MapRenderer;\n//# sourceMappingURL=Map.js.map","/**\n * @module ol/render\n */\nimport { DEVICE_PIXEL_RATIO } from './has.js';\nimport { apply as applyTransform, create as createTransform, multiply as multiplyTransform, scale as scaleTransform } from './transform.js';\nimport CanvasImmediateRenderer from './render/canvas/Immediate.js';\nimport { getSquaredTolerance } from './renderer/vector.js';\nimport { getUserProjection, getTransformFromProjections } from './proj.js';\n/**\n * @typedef {Object} State\n * @property {CanvasRenderingContext2D} context Canvas context that the layer is being rendered to.\n * @property {import(\"./Feature.js\").FeatureLike} feature\n * @property {import(\"./geom/SimpleGeometry.js\").default} geometry\n * @property {number} pixelRatio Pixel ratio used by the layer renderer.\n * @property {number} resolution Resolution that the render batch was created and optimized for.\n * This is not the view's resolution that is being rendered.\n * @property {number} rotation Rotation of the rendered layer in radians.\n */\n/**\n * A function to be used when sorting features before rendering.\n * It takes two instances of {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and returns a `{number}`.\n *\n * @typedef {function(import(\"./Feature.js\").FeatureLike, import(\"./Feature.js\").FeatureLike):number} OrderFunction\n */\n/**\n * @typedef {Object} ToContextOptions\n * @property {import(\"./size.js\").Size} [size] Desired size of the canvas in css\n * pixels. When provided, both canvas and css size will be set according to the\n * `pixelRatio`. If not provided, the current canvas and css sizes will not be\n * altered.\n * @property {number} [pixelRatio=window.devicePixelRatio] Pixel ratio (canvas\n * pixel to css pixel ratio) for the canvas.\n */\n/**\n * Binds a Canvas Immediate API to a canvas context, to allow drawing geometries\n * to the context's canvas.\n *\n * The units for geometry coordinates are css pixels relative to the top left\n * corner of the canvas element.\n * ```js\n * import {toContext} from 'ol/render';\n * import Fill from 'ol/style/Fill';\n * import Polygon from 'ol/geom/Polygon';\n *\n * var canvas = document.createElement('canvas');\n * var render = toContext(canvas.getContext('2d'),\n *     { size: [100, 100] });\n * render.setFillStrokeStyle(new Fill({ color: blue }));\n * render.drawPolygon(\n *     new Polygon([[[0, 0], [100, 100], [100, 0], [0, 0]]]));\n * ```\n *\n * @param {CanvasRenderingContext2D} context Canvas context.\n * @param {ToContextOptions=} opt_options Options.\n * @return {CanvasImmediateRenderer} Canvas Immediate.\n * @api\n */\nexport function toContext(context, opt_options) {\n    var canvas = context.canvas;\n    var options = opt_options ? opt_options : {};\n    var pixelRatio = options.pixelRatio || DEVICE_PIXEL_RATIO;\n    var size = options.size;\n    if (size) {\n        canvas.width = size[0] * pixelRatio;\n        canvas.height = size[1] * pixelRatio;\n        canvas.style.width = size[0] + 'px';\n        canvas.style.height = size[1] + 'px';\n    }\n    var extent = [0, 0, canvas.width, canvas.height];\n    var transform = scaleTransform(createTransform(), pixelRatio, pixelRatio);\n    return new CanvasImmediateRenderer(context, pixelRatio, extent, transform, 0);\n}\n/**\n * Gets a vector context for drawing to the event's canvas.\n * @param {import(\"./render/Event.js\").default} event Render event.\n * @returns {CanvasImmediateRenderer} Vector context.\n * @api\n */\nexport function getVectorContext(event) {\n    var frameState = event.frameState;\n    var transform = multiplyTransform(event.inversePixelTransform.slice(), frameState.coordinateToPixelTransform);\n    var squaredTolerance = getSquaredTolerance(frameState.viewState.resolution, frameState.pixelRatio);\n    var userTransform;\n    var userProjection = getUserProjection();\n    if (userProjection) {\n        userTransform = getTransformFromProjections(userProjection, frameState.viewState.projection);\n    }\n    return new CanvasImmediateRenderer(event.context, frameState.pixelRatio, frameState.extent, transform, frameState.viewState.rotation, squaredTolerance, userTransform);\n}\n/**\n * Gets the pixel of the event's canvas context from the map viewport's CSS pixel.\n * @param {import(\"./render/Event.js\").default} event Render event.\n * @param {import(\"./pixel.js\").Pixel} pixel CSS pixel relative to the top-left\n * corner of the map viewport.\n * @returns {import(\"./pixel.js\").Pixel} Pixel on the event's canvas context.\n * @api\n */\nexport function getRenderPixel(event, pixel) {\n    var result = pixel.slice(0);\n    applyTransform(event.inversePixelTransform.slice(), result);\n    return result;\n}\n/**\n * @param {import(\"./PluggableMap.js\").FrameState} frameState Frame state.\n * @param {?} declutterTree Declutter tree.\n * @returns {?} Declutter tree.\n */\nexport function renderDeclutterItems(frameState, declutterTree) {\n    if (declutterTree) {\n        declutterTree.clear();\n    }\n    var items = frameState.declutterItems;\n    for (var z = items.length - 1; z >= 0; --z) {\n        var item = items[z];\n        var zIndexItems = item.items;\n        for (var i = 0, ii = zIndexItems.length; i < ii; i += 3) {\n            declutterTree = zIndexItems[i].renderDeclutter(zIndexItems[i + 1], zIndexItems[i + 2], item.opacity, declutterTree);\n        }\n    }\n    items.length = 0;\n    return declutterTree;\n}\n//# sourceMappingURL=render.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Composite\n */\nimport { CLASS_UNSELECTABLE } from '../css.js';\nimport { inView } from '../layer/Layer.js';\nimport RenderEvent from '../render/Event.js';\nimport RenderEventType from '../render/EventType.js';\nimport MapRenderer from './Map.js';\nimport SourceState from '../source/State.js';\nimport { replaceChildren } from '../dom.js';\nimport { labelCache } from '../render/canvas.js';\nimport EventType from '../events/EventType.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nvar CompositeMapRenderer = /** @class */ (function (_super) {\n    __extends(CompositeMapRenderer, _super);\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    function CompositeMapRenderer(map) {\n        var _this = _super.call(this, map) || this;\n        /**\n         * @type {import(\"../events.js\").EventsKey}\n         */\n        _this.labelCacheKey_ = listen(labelCache, EventType.CLEAR, map.redrawText.bind(map));\n        /**\n         * @private\n         * @type {HTMLDivElement}\n         */\n        _this.element_ = document.createElement('div');\n        var style = _this.element_.style;\n        style.position = 'absolute';\n        style.width = '100%';\n        style.height = '100%';\n        style.zIndex = '0';\n        _this.element_.className = CLASS_UNSELECTABLE + ' ol-layers';\n        var container = map.getViewport();\n        container.insertBefore(_this.element_, container.firstChild || null);\n        /**\n         * @private\n         * @type {Array<HTMLElement>}\n         */\n        _this.children_ = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = true;\n        return _this;\n    }\n    /**\n     * @param {import(\"../render/EventType.js\").default} type Event type.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    CompositeMapRenderer.prototype.dispatchRenderEvent = function (type, frameState) {\n        var map = this.getMap();\n        if (map.hasListener(type)) {\n            var event_1 = new RenderEvent(type, undefined, frameState);\n            map.dispatchEvent(event_1);\n        }\n    };\n    CompositeMapRenderer.prototype.disposeInternal = function () {\n        unlistenByKey(this.labelCacheKey_);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * @inheritDoc\n     */\n    CompositeMapRenderer.prototype.renderFrame = function (frameState) {\n        if (!frameState) {\n            if (this.renderedVisible_) {\n                this.element_.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        this.calculateMatrices2D(frameState);\n        this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n        var layerStatesArray = frameState.layerStatesArray.sort(function (a, b) {\n            return a.zIndex - b.zIndex;\n        });\n        var viewState = frameState.viewState;\n        this.children_.length = 0;\n        var hasOverlay = false;\n        var previousElement = null;\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layerState = layerStatesArray[i];\n            hasOverlay = hasOverlay || layerState.hasOverlay;\n            frameState.layerIndex = i;\n            if (!inView(layerState, viewState) ||\n                (layerState.sourceState != SourceState.READY && layerState.sourceState != SourceState.UNDEFINED)) {\n                continue;\n            }\n            var layer = layerState.layer;\n            var element = layer.render(frameState, previousElement);\n            if (!element) {\n                continue;\n            }\n            var childElementCount = element.childElementCount;\n            if ((element !== previousElement || i == ii - 1) && childElementCount === 2 && !hasOverlay) {\n                element.removeChild(element.lastElementChild);\n            }\n            if (element !== previousElement) {\n                this.children_.push(element);\n                hasOverlay = childElementCount === 2;\n                previousElement = element;\n            }\n        }\n        _super.prototype.renderFrame.call(this, frameState);\n        replaceChildren(this.element_, this.children_);\n        this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n        if (!this.renderedVisible_) {\n            this.element_.style.display = '';\n            this.renderedVisible_ = true;\n        }\n        this.scheduleExpireIconCache(frameState);\n    };\n    /**\n     * @inheritDoc\n     */\n    CompositeMapRenderer.prototype.forEachLayerAtPixel = function (pixel, frameState, hitTolerance, callback, layerFilter) {\n        var viewState = frameState.viewState;\n        var layerStates = frameState.layerStatesArray;\n        var numLayers = layerStates.length;\n        for (var i = numLayers - 1; i >= 0; --i) {\n            var layerState = layerStates[i];\n            var layer = layerState.layer;\n            if (layer.hasRenderer() && inView(layerState, viewState) && layerFilter(layer)) {\n                var layerRenderer = layer.getRenderer();\n                var data = layerRenderer.getDataAtPixel(pixel, frameState, hitTolerance);\n                if (data) {\n                    var result = callback(layer, data);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    return CompositeMapRenderer;\n}(MapRenderer));\nexport default CompositeMapRenderer;\n//# sourceMappingURL=Composite.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Map\n */\nimport PluggableMap from './PluggableMap.js';\nimport { defaults as defaultControls } from './control.js';\nimport { defaults as defaultInteractions } from './interaction.js';\nimport { assign } from './obj.js';\nimport CompositeMapRenderer from './renderer/Composite.js';\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @api\n */\nvar Map = /** @class */ (function (_super) {\n    __extends(Map, _super);\n    /**\n     * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n     */\n    function Map(options) {\n        var _this = this;\n        options = assign({}, options);\n        if (!options.controls) {\n            options.controls = defaultControls();\n        }\n        if (!options.interactions) {\n            options.interactions = defaultInteractions();\n        }\n        _this = _super.call(this, options) || this;\n        return _this;\n    }\n    Map.prototype.createRenderer = function () {\n        return new CompositeMapRenderer(this);\n    };\n    return Map;\n}(PluggableMap));\nexport default Map;\n//# sourceMappingURL=Map.js.map","/**\n * @module olcs.AutoRenderLoop\n */\n\nclass AutoRenderLoop {\n  /**\n   * @constructor\n   * @param {olcs.OLCesium} ol3d\n   */\n  constructor(ol3d) {\n    this.ol3d = ol3d;\n    this.scene_ = ol3d.getCesiumScene();\n    this.canvas_ = this.scene_.canvas;\n    this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n    this.repaintEventNames_ = [\n      'mousemove', 'mousedown', 'mouseup',\n      'touchstart', 'touchend', 'touchmove',\n      'pointerdown', 'pointerup', 'pointermove',\n      'wheel'\n    ];\n\n    this.enable();\n  }\n\n  /**\n   * Enable.\n   */\n  enable() {\n    this.scene_.requestRenderMode = true;\n    this.scene_.maximumRenderTimeChange = 1000;\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    // Listen for changes on the layer group\n    this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n  }\n\n  /**\n   * Disable.\n   */\n  disable() {\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n    this.scene_.requestRenderMode = false;\n  }\n\n  /**\n   * Restart render loop.\n   * Force a restart of the render loop.\n   * @api\n   */\n  restartRenderLoop() {\n    this.notifyRepaintRequired();\n  }\n\n  notifyRepaintRequired() {\n    this.scene_.requestRender();\n  }\n}\n\n\nexport default AutoRenderLoop;\n","/**\n * @module olcs.Camera\n */\n\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport {toRadians, toDegrees} from './math.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsCore from './core.js';\n\nclass Camera {\n  /**\n   * This object takes care of additional 3d-specific properties of the view and\n   * ensures proper synchronization with the underlying raw Cesium.Camera object.\n   * @param {!Cesium.Scene} scene\n   * @param {!ol.Map} map\n   * @api\n   */\n  constructor(scene, map) {\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = scene;\n\n    /**\n     * @type {!Cesium.Camera}\n     * @private\n     */\n    this.cam_ = scene.camera;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {?ol.View}\n     * @private\n     */\n    this.view_ = null;\n\n    /**\n     * @type {?ol.EventsKey}\n     * @private\n     */\n    this.viewListenKey_ = null;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.toLonLat_ = Camera.identityProjection;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.fromLonLat_ = Camera.identityProjection;\n\n    /**\n     * 0 -- topdown, PI/2 -- the horizon\n     * @type {number}\n     * @private\n     */\n    this.tilt_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.distance_ = 0;\n\n    /**\n     * @type {?Cesium.Matrix4}\n     * @private\n     */\n    this.lastCameraViewMatrix_ = null;\n\n    /**\n     * This is used to discard change events on view caused by updateView method.\n     * @type {boolean}\n     * @private\n     */\n    this.viewUpdateInProgress_ = false;\n\n    this.map_.on('change:view', (e) => {\n      this.setView_(this.map_.getView());\n    });\n    this.setView_(this.map_.getView());\n  }\n\n  /**\n   * @param {Array.<number>} input Input coordinate array.\n   * @param {Array.<number>=} opt_output Output array of coordinate values.\n   * @param {number=} opt_dimension Dimension.\n   * @return {Array.<number>} Input coordinate array (same array as input).\n   */\n  static identityProjection(input, opt_output, opt_dimension) {\n    const dim = opt_dimension || input.length;\n    if (opt_output) {\n      for (let i = 0; i < dim; ++i) {\n        opt_output[i] = input[i];\n      }\n    }\n    return input;\n  }\n\n  /**\n   * @param {?ol.View} view New view to use.\n   * @private\n   */\n  setView_(view) {\n    if (this.view_) {\n      olObservableUnByKey(this.viewListenKey_);\n      this.viewListenKey_ = null;\n    }\n\n    this.view_ = view;\n    if (view) {\n      const toLonLat = getTransform(view.getProjection(), 'EPSG:4326');\n      const fromLonLat = getTransform('EPSG:4326', view.getProjection());\n      console.assert(toLonLat && fromLonLat);\n\n      this.toLonLat_ = toLonLat;\n      this.fromLonLat_ = fromLonLat;\n\n      this.viewListenKey_ = view.on('propertychange', e => this.handleViewEvent_(e));\n\n      this.readFromView();\n    } else {\n      this.toLonLat_ = Camera.identityProjection;\n      this.fromLonLat_ = Camera.identityProjection;\n    }\n  }\n\n  /**\n   * @param {?} e\n   * @private\n   */\n  handleViewEvent_(e) {\n    if (!this.viewUpdateInProgress_) {\n      this.readFromView();\n    }\n  }\n\n  /**\n   * @param {number} heading In radians.\n   * @api\n   */\n  setHeading(heading) {\n    if (!this.view_) {\n      return;\n    }\n\n    this.view_.setRotation(heading);\n  }\n\n  /**\n   * @return {number|undefined} Heading in radians.\n   * @api\n   */\n  getHeading() {\n    if (!this.view_) {\n      return undefined;\n    }\n    const rotation = this.view_.getRotation();\n    return rotation || 0;\n  }\n\n  /**\n   * @param {number} tilt In radians.\n   * @api\n   */\n  setTilt(tilt) {\n    this.tilt_ = tilt;\n    this.updateCamera_();\n  }\n\n  /**\n   * @return {number} Tilt in radians.\n   * @api\n   */\n  getTilt() {\n    return this.tilt_;\n  }\n\n  /**\n   * @param {number} distance In meters.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance_ = distance;\n    this.updateCamera_();\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Distance in meters.\n   * @api\n   */\n  getDistance() {\n    return this.distance_;\n  }\n\n  /**\n   * Shortcut for ol.View.setCenter().\n   * @param {!ol.Coordinate} center Same projection as the ol.View.\n   * @api\n   */\n  setCenter(center) {\n    if (!this.view_) {\n      return;\n    }\n    this.view_.setCenter(center);\n  }\n\n  /**\n   * Shortcut for ol.View.getCenter().\n   * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getCenter() {\n    if (!this.view_) {\n      return undefined;\n    }\n    return this.view_.getCenter();\n  }\n\n  /**\n   * Sets the position of the camera.\n   * @param {!ol.Coordinate} position Same projection as the ol.View.\n   * @api\n   */\n  setPosition(position) {\n    if (!this.toLonLat_) {\n      return;\n    }\n    const ll = this.toLonLat_(position);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(\n        toRadians(ll[0]),\n        toRadians(ll[1]),\n        this.getAltitude());\n\n    this.cam_.setView({\n      destination: Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto)\n    });\n    this.updateView();\n  }\n\n  /**\n   * Calculates position under the camera.\n   * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getPosition() {\n    if (!this.fromLonLat_) {\n      return undefined;\n    }\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n    const pos = this.fromLonLat_([\n      toDegrees(carto.longitude),\n      toDegrees(carto.latitude)\n    ]);\n    console.assert(pos);\n    return pos;\n  }\n\n  /**\n   * @param {number} altitude In meters.\n   * @api\n   */\n  setAltitude(altitude) {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n    carto.height = altitude;\n    this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Altitude in meters.\n   * @api\n   */\n  getAltitude() {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n\n    return carto.height;\n  }\n\n  /**\n   * Updates the state of the underlying Cesium.Camera\n   * according to the current values of the properties.\n   * @private\n   */\n  updateCamera_() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (!center) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(toRadians(ll[0]),\n        toRadians(ll[1]));\n    if (this.scene_.globe) {\n      const height = this.scene_.globe.getHeight(carto);\n      carto.height = height || 0;\n    }\n\n    const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    /** @type {Cesium.optionsOrientation} */\n    const orientation = {\n      pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n      heading: -this.view_.getRotation(),\n      roll: undefined\n    };\n    this.cam_.setView({\n      destination,\n      orientation\n    });\n\n    this.cam_.moveBackward(this.distance_);\n\n    this.checkCameraChange(true);\n  }\n\n  /**\n   * Calculates the values of the properties from the current ol.View state.\n   * @api\n   */\n  readFromView() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (center === undefined || center === null) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const resolution = this.view_.getResolution();\n    this.distance_ = this.calcDistanceForResolution(\n        resolution || 0, toRadians(ll[1]));\n\n    this.updateCamera_();\n  }\n\n  /**\n   * Calculates the values of the properties from the current Cesium.Camera state.\n   * Modifies the center, resolution and rotation properties of the view.\n   * @api\n   */\n  updateView() {\n    if (!this.view_ || !this.fromLonLat_) {\n      return;\n    }\n    this.viewUpdateInProgress_ = true;\n\n    // target & distance\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const scene = this.scene_;\n    const target = olcsCore.pickCenterPoint(scene);\n\n    let bestTarget = target;\n    if (!bestTarget) {\n      //TODO: how to handle this properly ?\n      const globe = scene.globe;\n      const carto = this.cam_.positionCartographic.clone();\n      const height = globe.getHeight(carto);\n      carto.height = height || 0;\n      bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n    }\n    this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n    const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n    this.view_.setCenter(this.fromLonLat_([\n      toDegrees(bestTargetCartographic.longitude),\n      toDegrees(bestTargetCartographic.latitude)]));\n\n    // resolution\n    this.view_.setResolution(\n        this.calcResolutionForDistance(this.distance_,\n            bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n    /*\n     * Since we are positioning the target, the values of heading and tilt\n     * need to be calculated _at the target_.\n     */\n    if (target) {\n      const pos = this.cam_.position;\n\n      // normal to the ellipsoid at the target\n      const targetNormal = new Cesium.Cartesian3();\n      ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n      // vector from the target to the camera\n      const targetToCamera = new Cesium.Cartesian3();\n      Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n      Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n      // HEADING\n      const up = this.cam_.up;\n      const right = this.cam_.right;\n      const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n      const heading = Cesium.Cartesian3.angleBetween(right, normal);\n      const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n      const orientation = cross.z;\n\n      this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n      // TILT\n      const tiltAngle = Math.acos(\n          Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n      this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n    } else {\n      // fallback when there is no target\n      this.view_.setRotation(this.cam_.heading);\n      this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n    }\n\n    this.viewUpdateInProgress_ = false;\n  }\n\n  /**\n   * Check if the underlying camera state has changed and ensure synchronization.\n   * @param {boolean=} opt_dontSync Do not synchronize the view.\n   */\n  checkCameraChange(opt_dontSync) {\n    const old = this.lastCameraViewMatrix_;\n    const current = this.cam_.viewMatrix;\n\n    if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n      this.lastCameraViewMatrix_ = current.clone();\n      if (opt_dontSync !== true) {\n        this.updateView();\n      }\n    }\n  }\n\n  /**\n   * calculate the distance between camera and centerpoint based on the resolution and latitude value\n   * @param {number} resolution Number of map units per pixel.\n   * @param {number} latitude Latitude in radians.\n   * @return {number} The calculated distance.\n   * @api\n   */\n  calcDistanceForResolution(resolution, latitude) {\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy; // vertical field of view\n    console.assert(!isNaN(fovy));\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    // number of \"map units\" visible in 2D (vertically)\n    const visibleMapUnits = resolution * canvas.clientHeight;\n\n    // The metersPerUnit does not take latitude into account, but it should\n    // be lower with increasing latitude -- we have to compensate.\n    // In 3D it is not possible to maintain the resolution at more than one point,\n    // so it only makes sense to use the latitude of the \"target\" point.\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n\n    // how many meters should be visible in 3D\n    const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n    // distance required to view the calculated length in meters\n    //\n    //  fovy/2\n    //    |\\\n    //  x | \\\n    //    |--\\\n    // visibleMeters/2\n    const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n    // NOTE: This calculation is not absolutely precise, because metersPerUnit\n    // is a great simplification. It does not take ellipsoid/terrain into account.\n\n    return requiredDistance;\n  }\n\n  /**\n   * calculate the resolution based on a distance(camera to position) and latitude value\n   * @param {number} distance\n   * @param {number} latitude\n   * @return {number} The calculated resolution.\n   * @api\n   */\n  calcResolutionForDistance(distance, latitude) {\n    // See the reverse calculation (calcDistanceForResolution) for details\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy;\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n    const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n    const resolution = visibleMapUnits / canvas.clientHeight;\n\n    return resolution;\n  }\n}\n\n\nexport default Camera;\n","/**\n * @module olcs.AbstractSynchronizer\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {olcsListen, getUid} from './util.js';\n\n\nclass AbstractSynchronizer {\n  /**\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @template T\n   * @abstract\n   * @api\n   */\n  constructor(map, scene) {\n    /**\n     * @type {!ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.View}\n     * @protected\n     */\n    this.view = map.getView();\n\n    /**\n     * @type {!Cesium.Scene}\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * @type {ol.Collection.<ol.layer.Base>}\n     * @protected\n     */\n    this.olLayers = map.getLayerGroup().getLayers();\n\n    /**\n     * @type {ol.layer.Group}\n     */\n    this.mapLayerGroup = map.getLayerGroup();\n\n    /**\n     * Map of OpenLayers layer ids (from getUid) to the Cesium ImageryLayers.\n     * Null value means, that we are unable to create equivalent layers.\n     * @type {Object.<string, ?Array.<T>>}\n     * @protected\n     */\n    this.layerMap = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer layers ids (from getUid).\n     * @type {!Object.<string, Array<ol.EventsKey>>}\n     * @protected\n     */\n    this.olLayerListenKeys = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer groups ids (from getUid).\n     * @type {!Object.<string, !Array.<ol.EventsKey>>}\n     * @private\n     */\n    this.olGroupListenKeys_ = {};\n  }\n\n  /**\n   * Destroy all and perform complete synchronization of the layers.\n   * @api\n   */\n  synchronize() {\n    this.destroyAll();\n    this.addLayers_(this.mapLayerGroup);\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @protected\n   */\n  orderLayers() {\n    // Ordering logics is handled in subclasses.\n  }\n\n  /**\n   * Add a layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  addLayers_(root) {\n    /** @type {Array<import('olsc/core.js').LayerWithParents>} */\n    const fifo = [{\n      layer: root,\n      parents: []\n    }];\n    while (fifo.length > 0) {\n      const olLayerWithParents = fifo.splice(0, 1)[0];\n      const olLayer = olLayerWithParents.layer;\n      const olLayerId = getUid(olLayer).toString();\n      this.olLayerListenKeys[olLayerId] = [];\n      console.assert(!this.layerMap[olLayerId]);\n\n      let cesiumObjects = null;\n      if (olLayer instanceof olLayerGroup) {\n        this.listenForGroupChanges_(olLayer);\n        if (olLayer !== this.mapLayerGroup) {\n          cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        }\n        if (!cesiumObjects) {\n          olLayer.getLayers().forEach((l) => {\n            if (l) {\n              const newOlLayerWithParents = {\n                layer: l,\n                parents: olLayer === this.mapLayerGroup ?\n                  [] :\n                  [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n              };\n              fifo.push(newOlLayerWithParents);\n            }\n          });\n        }\n      } else {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        if (!cesiumObjects) {\n          // keep an eye on the layers that once failed to be added (might work when the layer is updated)\n          // for example when a source is set after the layer is added to the map\n          const layerId = olLayerId;\n          const layerWithParents = olLayerWithParents;\n          const onLayerChange = (e) => {\n            const cesiumObjs = this.createSingleLayerCounterparts(layerWithParents);\n            if (cesiumObjs) {\n              // unsubscribe event listener\n              layerWithParents.layer.un('change', onLayerChange);\n              this.addCesiumObjects_(cesiumObjs, layerId, layerWithParents.layer);\n              this.orderLayers();\n            }\n          };\n          this.olLayerListenKeys[olLayerId].push(olcsListen(layerWithParents.layer, 'change', onLayerChange));\n        }\n      }\n      // add Cesium layers\n      if (cesiumObjects) {\n        this.addCesiumObjects_(cesiumObjects, olLayerId, olLayer);\n      }\n    }\n\n    this.orderLayers();\n  }\n\n  /**\n   * Add Cesium objects.\n   * @param {Array.<T>} cesiumObjects\n   * @param {string} layerId\n   * @param {ol.layer.Base} layer\n   * @private\n   */\n  addCesiumObjects_(cesiumObjects, layerId, layer) {\n    this.layerMap[layerId] = cesiumObjects;\n    this.olLayerListenKeys[layerId].push(olcsListen(layer, 'change:zIndex', () => this.orderLayers()));\n    cesiumObjects.forEach((cesiumObject) => {\n      this.addCesiumObject(cesiumObject);\n    });\n  }\n\n  /**\n   * Remove and destroy a single layer.\n   * @param {ol.layer.Layer} layer\n   * @return {boolean} counterpart destroyed\n   * @private\n   */\n  removeAndDestroySingleLayer_(layer) {\n    const uid = getUid(layer).toString();\n    const counterparts = this.layerMap[uid];\n    if (!!counterparts) {\n      counterparts.forEach((counterpart) => {\n        this.removeSingleCesiumObject(counterpart, false);\n        this.destroyCesiumObject(counterpart);\n      });\n      this.olLayerListenKeys[uid].forEach(olObservableUnByKey);\n      delete this.olLayerListenKeys[uid];\n    }\n    delete this.layerMap[uid];\n    return !!counterparts;\n  }\n\n  /**\n   * Unlisten a single layer group.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  unlistenSingleGroup_(group) {\n    if (group === this.mapLayerGroup) {\n      return;\n    }\n    const uid = getUid(group).toString();\n    const keys = this.olGroupListenKeys_[uid];\n    keys.forEach((key) => {\n      olObservableUnByKey(key);\n    });\n    delete this.olGroupListenKeys_[uid];\n    delete this.layerMap[uid];\n  }\n\n  /**\n   * Remove layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  removeLayer_(root) {\n    if (!!root) {\n      const fifo = [root];\n      while (fifo.length > 0) {\n        const olLayer = fifo.splice(0, 1)[0];\n        const done = this.removeAndDestroySingleLayer_(olLayer);\n        if (olLayer instanceof olLayerGroup) {\n          this.unlistenSingleGroup_(olLayer);\n          if (!done) {\n            // No counterpart for the group itself so removing\n            // each of the child layers.\n            olLayer.getLayers().forEach((l) => {\n              fifo.push(l);\n            });\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Register listeners for single layer group change.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  listenForGroupChanges_(group) {\n    const uuid = getUid(group).toString();\n\n    console.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n    const listenKeyArray = [];\n    this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n    // only the keys that need to be relistened when collection changes\n    let contentKeys = [];\n    const listenAddRemove = (function() {\n      const collection = group.getLayers();\n      if (collection) {\n        contentKeys = [\n          collection.on('add', (event) => {\n            this.addLayers_(event.element);\n          }),\n          collection.on('remove', (event) => {\n            this.removeLayer_(event.element);\n          })\n        ];\n        listenKeyArray.push(...contentKeys);\n      }\n    }).bind(this);\n\n    listenAddRemove();\n\n    listenKeyArray.push(group.on('change:layers', (e) => {\n      contentKeys.forEach((el) => {\n        const i = listenKeyArray.indexOf(el);\n        if (i >= 0) {\n          listenKeyArray.splice(i, 1);\n        }\n        olObservableUnByKey(el);\n      });\n      listenAddRemove();\n    }));\n  }\n\n  /**\n   * Destroys all the created Cesium objects.\n   * @protected\n   */\n  destroyAll() {\n    this.removeAllCesiumObjects(true); // destroy\n    let objKey;\n    for (objKey in this.olGroupListenKeys_) {\n      const keys = this.olGroupListenKeys_[objKey];\n      keys.forEach(olObservableUnByKey);\n    }\n    for (objKey in this.olLayerListenKeys) {\n      this.olLayerListenKeys[objKey].forEach(olObservableUnByKey);\n    }\n    this.olGroupListenKeys_ = {};\n    this.olLayerListenKeys = {};\n    this.layerMap = {};\n  }\n\n  /**\n   * Adds a single Cesium object to the collection.\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  addCesiumObject(object) {}\n\n  /**\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  destroyCesiumObject(object) {}\n\n  /**\n   * Remove single Cesium object from the collection.\n   * @param {!T} object\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeSingleCesiumObject(object, destroy) {}\n\n  /**\n   * Remove all Cesium objects from the collection.\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeAllCesiumObjects(destroy) {}\n\n  /**\n   * @param {import('olsc/core.js').LayerWithParents} olLayerWithParents\n   * @return {?Array.<T>}\n   * @abstract\n   * @protected\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {}\n}\n\n\nexport default AbstractSynchronizer;\n","/**\n * @module ol/source/Cluster\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getUid } from '../util.js';\nimport { assert } from '../asserts.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport { scale as scaleCoordinate, add as addCoordinate } from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport { buffer, createEmpty, createOrUpdateFromCoordinate } from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from './Vector.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {function(Feature):Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {VectorSource} source Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n * @api\n */\nvar Cluster = /** @class */ (function (_super) {\n    __extends(Cluster, _super);\n    /**\n     * @param {Options} options Cluster options.\n     */\n    function Cluster(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            wrapX: options.wrapX\n        }) || this;\n        /**\n         * @type {number|undefined}\n         * @protected\n         */\n        _this.resolution = undefined;\n        /**\n         * @type {number}\n         * @protected\n         */\n        _this.distance = options.distance !== undefined ? options.distance : 20;\n        /**\n         * @type {Array<Feature>}\n         * @protected\n         */\n        _this.features = [];\n        /**\n         * @param {Feature} feature Feature.\n         * @return {Point} Cluster calculation point.\n         * @protected\n         */\n        _this.geometryFunction = options.geometryFunction || function (feature) {\n            var geometry = feature.getGeometry();\n            assert(geometry.getType() == GeometryType.POINT, 10); // The default `geometryFunction` can only handle `Point` geometries\n            return geometry;\n        };\n        /**\n         * @type {VectorSource}\n         * @protected\n         */\n        _this.source = options.source;\n        _this.source.addEventListener(EventType.CHANGE, _this.refresh.bind(_this));\n        return _this;\n    }\n    /**\n     * Get the distance in pixels between clusters.\n     * @return {number} Distance.\n     * @api\n     */\n    Cluster.prototype.getDistance = function () {\n        return this.distance;\n    };\n    /**\n     * Get a reference to the wrapped source.\n     * @return {VectorSource} Source.\n     * @api\n     */\n    Cluster.prototype.getSource = function () {\n        return this.source;\n    };\n    /**\n     * @inheritDoc\n     */\n    Cluster.prototype.loadFeatures = function (extent, resolution, projection) {\n        this.source.loadFeatures(extent, resolution, projection);\n        if (resolution !== this.resolution) {\n            this.clear();\n            this.resolution = resolution;\n            this.cluster();\n            this.addFeatures(this.features);\n        }\n    };\n    /**\n     * Set the distance in pixels between clusters.\n     * @param {number} distance The distance in pixels.\n     * @api\n     */\n    Cluster.prototype.setDistance = function (distance) {\n        this.distance = distance;\n        this.refresh();\n    };\n    /**\n     * handle the source changing\n     * @override\n     */\n    Cluster.prototype.refresh = function () {\n        this.clear();\n        this.cluster();\n        this.addFeatures(this.features);\n    };\n    /**\n     * @protected\n     */\n    Cluster.prototype.cluster = function () {\n        if (this.resolution === undefined) {\n            return;\n        }\n        this.features.length = 0;\n        var extent = createEmpty();\n        var mapDistance = this.distance * this.resolution;\n        var features = this.source.getFeatures();\n        /**\n         * @type {!Object<string, boolean>}\n         */\n        var clustered = {};\n        for (var i = 0, ii = features.length; i < ii; i++) {\n            var feature = features[i];\n            if (!(getUid(feature) in clustered)) {\n                var geometry = this.geometryFunction(feature);\n                if (geometry) {\n                    var coordinates = geometry.getCoordinates();\n                    createOrUpdateFromCoordinate(coordinates, extent);\n                    buffer(extent, mapDistance, extent);\n                    var neighbors = this.source.getFeaturesInExtent(extent);\n                    neighbors = neighbors.filter(function (neighbor) {\n                        var uid = getUid(neighbor);\n                        if (!(uid in clustered)) {\n                            clustered[uid] = true;\n                            return true;\n                        }\n                        else {\n                            return false;\n                        }\n                    });\n                    this.features.push(this.createCluster(neighbors));\n                }\n            }\n        }\n    };\n    /**\n     * @param {Array<Feature>} features Features\n     * @return {Feature} The cluster feature.\n     * @protected\n     */\n    Cluster.prototype.createCluster = function (features) {\n        var centroid = [0, 0];\n        for (var i = features.length - 1; i >= 0; --i) {\n            var geometry = this.geometryFunction(features[i]);\n            if (geometry) {\n                addCoordinate(centroid, geometry.getCoordinates());\n            }\n            else {\n                features.splice(i, 1);\n            }\n        }\n        scaleCoordinate(centroid, 1 / features.length);\n        var cluster = new Feature(new Point(centroid));\n        cluster.set('features', features);\n        return cluster;\n    };\n    return Cluster;\n}(VectorSource));\nexport default Cluster;\n//# sourceMappingURL=Cluster.js.map","/**\n * @module olcs.RasterSynchronizer\n */\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {getUid, stableSort} from './util.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nclass RasterSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * This object takes care of one-directional synchronization of\n   * Openlayers raster layers to the given Cesium globe.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @constructor\n   * @extends {olcsAbstractSynchronizer.<Cesium.ImageryLayer>}\n   * @api\n   */\n  constructor(map, scene) {\n    super(map, scene);\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.cesiumLayers_ = scene.imageryLayers;\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.ourLayers_ = new Cesium.ImageryLayerCollection();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(object) {\n    this.cesiumLayers_.add(object);\n    this.ourLayers_.add(object);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    this.cesiumLayers_.remove(object, destroy);\n    this.ourLayers_.remove(object, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    for (let i = 0; i < this.ourLayers_.length; ++i) {\n      this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n    }\n    this.ourLayers_.removeAll(false);\n  }\n\n  /**\n   * Creates an array of Cesium.ImageryLayer.\n   * May be overriden by child classes to implement custom behavior.\n   * The default implementation handles tiled imageries in EPSG:4326 or\n   * EPSG:3859.\n   * @param {!ol.layer.Base} olLayer\n   * @param {!ol.proj.Projection} viewProj Projection of the view.\n   * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n   * (or supported)\n   * @protected\n   */\n  convertLayerToCesiumImageries(olLayer, viewProj) {\n    const result = olcsCore.tileLayerToImageryLayer(this.map, olLayer, viewProj);\n    return result ? [result] : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    const uid = getUid(olLayer).toString();\n    const viewProj = this.view.getProjection();\n    console.assert(viewProj);\n    const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n    if (cesiumObjects) {\n      const listenKeyArray = [];\n      [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n        listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n          // the compiler does not seem to be able to infer this\n          console.assert(cesiumObjects);\n          for (let i = 0; i < cesiumObjects.length; ++i) {\n            olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n          }\n        }));\n      });\n\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n      }\n\n      // there is no way to modify Cesium layer extent,\n      // we have to recreate when OpenLayers layer extent changes:\n      listenKeyArray.push(olLayer.on('change:extent', (e) => {\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n          this.ourLayers_.remove(cesiumObjects[i], false);\n        }\n        delete this.layerMap[getUid(olLayer)]; // invalidate the map entry\n        this.synchronize();\n      }));\n\n      listenKeyArray.push(olLayer.on('change', (e) => {\n        // when the source changes, re-add the layer to force update\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n          if (position >= 0) {\n            this.cesiumLayers_.remove(cesiumObjects[i], false);\n            this.cesiumLayers_.add(cesiumObjects[i], position);\n          }\n        }\n      }));\n\n      this.olLayerListenKeys[uid].push(...listenKeyArray);\n    }\n\n    return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @override\n   * @protected\n   */\n  orderLayers() {\n    const layers = [];\n    const zIndices = {};\n    const queue = [this.mapLayerGroup];\n\n    while (queue.length > 0) {\n      const olLayer = queue.splice(0, 1)[0];\n      layers.push(olLayer);\n      zIndices[getUid(olLayer)] = olLayer.getZIndex() || 0;\n\n      if (olLayer instanceof olLayerGroup) {\n        const sublayers = olLayer.getLayers();\n        if (sublayers) {\n          // Prepend queue with sublayers in order\n          queue.unshift(...sublayers.getArray());\n        }\n      }\n    }\n\n    stableSort(layers, (layer1, layer2) =>\n      zIndices[getUid(layer1)] - zIndices[getUid(layer2)]\n    );\n\n    layers.forEach((olLayer) => {\n      const olLayerId = getUid(olLayer).toString();\n      const cesiumObjects = this.layerMap[olLayerId];\n      if (cesiumObjects) {\n        cesiumObjects.forEach((cesiumObject) => { this.raiseToTop(cesiumObject); });\n      }\n    });\n  }\n\n  /**\n   * @param {Cesium.ImageryLayer} counterpart\n   */\n  raiseToTop(counterpart) {\n    this.cesiumLayers_.raiseToTop(counterpart);\n  }\n}\n\n\nexport default RasterSynchronizer;\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n * @api\n */\nexport default {\n    IMAGE: 'image',\n    HYBRID: 'hybrid'\n};\n//# sourceMappingURL=VectorTileRenderType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/VectorTileLayer\n */\nimport { getUid } from '../../util.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport { listen, unlistenByKey } from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport { buffer, containsCoordinate, equals, getIntersection, intersects } from '../../extent.js';\nimport VectorTileRenderType from '../../layer/VectorTileRenderType.js';\nimport ReplayType from '../../render/canvas/BuilderType.js';\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport CanvasTileLayerRenderer from './TileLayer.js';\nimport { getSquaredTolerance as getSquaredRenderTolerance, renderFeature } from '../vector.js';\nimport { apply as applyTransform, create as createTransform, reset as resetTransform, scale as scaleTransform, translate as translateTransform, toString as transformToString, makeScale, makeInverse } from '../../transform.js';\nimport CanvasExecutorGroup, { replayDeclutter } from '../../render/canvas/ExecutorGroup.js';\nimport { clear } from '../../obj.js';\n/**\n * @type {!Object<string, Array<import(\"../../render/canvas/BuilderType.js\").default>>}\n */\nvar IMAGE_REPLAYS = {\n    'image': [ReplayType.POLYGON, ReplayType.CIRCLE,\n        ReplayType.LINE_STRING, ReplayType.IMAGE, ReplayType.TEXT],\n    'hybrid': [ReplayType.POLYGON, ReplayType.LINE_STRING]\n};\n/**\n * @type {!Object<string, Array<import(\"../../render/canvas/BuilderType.js\").default>>}\n */\nvar VECTOR_REPLAYS = {\n    'image': [ReplayType.DEFAULT],\n    'hybrid': [ReplayType.IMAGE, ReplayType.TEXT, ReplayType.DEFAULT]\n};\n/**\n * @classdesc\n * Canvas renderer for vector tile layers.\n * @api\n */\nvar CanvasVectorTileLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasVectorTileLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/VectorTile.js\").default} layer VectorTile layer.\n     */\n    function CanvasVectorTileLayerRenderer(layer) {\n        var _this = _super.call(this, layer) || this;\n        /** @private */\n        _this.boundHandleStyleImageChange_ = _this.handleStyleImageChange_.bind(_this);\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.overlayContext_ = null;\n        /**\n         * @type {string}\n         */\n        _this.overlayContextUid_;\n        /**\n         * The transform for rendered pixels to viewport CSS pixels for the overlay canvas.\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.overlayPixelTransform_ = createTransform();\n        /**\n         * The transform for viewport CSS pixels to rendered pixels for the overlay canvas.\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.inverseOverlayPixelTransform_ = createTransform();\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.dirty_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedLayerRevision_;\n        /**\n         * @private\n         * @type {!Object<string, import(\"../../VectorRenderTile.js\").default>}\n         */\n        _this.renderTileImageQueue_ = {};\n        /**\n         * @type {Object<string, import(\"../../events.js\").EventsKey>}\n         */\n        _this.tileListenerKeys_ = {};\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.tmpTransform_ = createTransform();\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.useContainer = function (target, transform, opacity) {\n        var overlayContext;\n        if (target && target.childElementCount === 2) {\n            overlayContext = target.lastElementChild.getContext('2d');\n            if (!overlayContext) {\n                target = null;\n            }\n        }\n        var containerReused = this.containerReused;\n        _super.prototype.useContainer.call(this, target, transform, opacity);\n        if (containerReused) {\n            this.overlayContext_ = overlayContext || null;\n            this.overlayContextUid_ = overlayContext ? getUid(overlayContext) : undefined;\n        }\n        if (!this.overlayContext_) {\n            var overlayContext_1 = createCanvasContext2D();\n            var style = overlayContext_1.canvas.style;\n            style.position = 'absolute';\n            style.transformOrigin = 'top left';\n            this.overlayContext_ = overlayContext_1;\n            this.overlayContextUid_ = getUid(overlayContext_1);\n        }\n        if (this.container.childElementCount === 1) {\n            this.container.appendChild(this.overlayContext_.canvas);\n        }\n    };\n    /**\n     * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../proj/Projection\").default} projection Projection.\n     * @param {boolean} queue Queue tile for rendering.\n     * @return {boolean} Tile needs to be rendered.\n     */\n    CanvasVectorTileLayerRenderer.prototype.prepareTile = function (tile, pixelRatio, projection, queue) {\n        var render = false;\n        var tileUid = getUid(tile);\n        var state = tile.getState();\n        if (((state === TileState.LOADED && tile.hifi) ||\n            state === TileState.ERROR || state === TileState.ABORT) &&\n            tileUid in this.tileListenerKeys_) {\n            unlistenByKey(this.tileListenerKeys_[tileUid]);\n            delete this.tileListenerKeys_[tileUid];\n        }\n        if (state === TileState.LOADED || state === TileState.ERROR) {\n            this.updateExecutorGroup_(tile, pixelRatio, projection);\n            if (this.tileImageNeedsRender_(tile, pixelRatio, projection)) {\n                render = true;\n                if (queue) {\n                    this.renderTileImageQueue_[tileUid] = tile;\n                }\n            }\n        }\n        return render;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.getTile = function (z, x, y, frameState) {\n        var tile = /** @type {import(\"../../VectorRenderTile.js\").default} */ (_super.prototype.getTile.call(this, z, x, y, frameState));\n        var pixelRatio = frameState.pixelRatio;\n        var viewState = frameState.viewState;\n        var resolution = viewState.resolution;\n        var projection = viewState.projection;\n        if (tile.getState() < TileState.LOADED) {\n            tile.wantedResolution = resolution;\n            var tileUid = getUid(tile);\n            if (!(tileUid in this.tileListenerKeys_)) {\n                var listenerKey = listen(tile, EventType.CHANGE, this.prepareTile.bind(this, tile, pixelRatio, projection, true));\n                this.tileListenerKeys_[tileUid] = listenerKey;\n            }\n        }\n        else {\n            var viewHints = frameState.viewHints;\n            var hifi = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n            if (hifi || !tile.wantedResolution) {\n                tile.wantedResolution = resolution;\n            }\n            var render = this.prepareTile(tile, pixelRatio, projection, false);\n            if (render) {\n                this.renderTileImage_(tile, frameState);\n            }\n        }\n        return tile;\n    };\n    /**\n     * @inheritdoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.isDrawableTile = function (tile) {\n        return _super.prototype.isDrawableTile.call(this, tile) && tile.hasContext(this.getLayer());\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.getTileImage = function (tile) {\n        return tile.getImage(this.getLayer());\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        layerState.hasOverlay = true;\n        var layerRevision = this.getLayer().getRevision();\n        if (this.renderedLayerRevision_ != layerRevision) {\n            this.renderedTiles.length = 0;\n        }\n        this.renderedLayerRevision_ = layerRevision;\n        return _super.prototype.prepareFrame.call(this, frameState);\n    };\n    /**\n     * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n     * @private\n     */\n    CanvasVectorTileLayerRenderer.prototype.updateExecutorGroup_ = function (tile, pixelRatio, projection) {\n        var layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n        var revision = layer.getRevision();\n        var renderOrder = layer.getRenderOrder() || null;\n        var resolution = tile.wantedResolution;\n        var builderState = tile.getReplayState(layer);\n        if (!builderState.dirty && builderState.renderedResolution === resolution &&\n            builderState.renderedRevision == revision &&\n            builderState.renderedRenderOrder == renderOrder && builderState.renderedZ === tile.sourceZ) {\n            return;\n        }\n        var source = layer.getSource();\n        var sourceTileGrid = source.getTileGrid();\n        var tileGrid = source.getTileGridForProjection(projection);\n        var tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n        var sourceTiles = source.getSourceTiles(pixelRatio, projection, tile);\n        var layerUid = getUid(layer);\n        var executorGroups = tile.executorGroups[layerUid];\n        if (executorGroups) {\n            for (var i = 0, ii = executorGroups.length; i < ii; ++i) {\n                executorGroups[i].dispose();\n            }\n        }\n        tile.executorGroups[layerUid] = [];\n        var _loop_1 = function (t, tt) {\n            var sourceTile = sourceTiles[t];\n            if (sourceTile.getState() != TileState.LOADED) {\n                return \"continue\";\n            }\n            var sourceTileCoord = sourceTile.tileCoord;\n            var sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n            var sharedExtent = getIntersection(tileExtent, sourceTileExtent);\n            var bufferedExtent = equals(sourceTileExtent, sharedExtent) ? null :\n                buffer(sharedExtent, layer.getRenderBuffer() * resolution, this_1.tmpExtent);\n            builderState.dirty = false;\n            var builderGroup = new CanvasBuilderGroup(0, sharedExtent, resolution, pixelRatio, layer.getDeclutter());\n            var squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n            /**\n             * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n             * @this {CanvasVectorTileLayerRenderer}\n             */\n            var render = function (feature) {\n                var styles;\n                var styleFunction = feature.getStyleFunction() || layer.getStyleFunction();\n                if (styleFunction) {\n                    styles = styleFunction(feature, resolution);\n                }\n                if (styles) {\n                    var dirty = this.renderFeature(feature, squaredTolerance, styles, builderGroup);\n                    this.dirty_ = this.dirty_ || dirty;\n                    builderState.dirty = builderState.dirty || dirty;\n                }\n            };\n            var features = sourceTile.getFeatures();\n            if (renderOrder && renderOrder !== builderState.renderedRenderOrder) {\n                features.sort(renderOrder);\n            }\n            for (var i = 0, ii = features.length; i < ii; ++i) {\n                var feature = features[i];\n                if (!bufferedExtent || intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n                    render.call(this_1, feature);\n                }\n            }\n            var executorGroupInstructions = builderGroup.finish();\n            // no need to clip when the render tile is covered by a single source tile\n            var replayExtent = layer.getDeclutter() && sourceTiles.length === 1 ?\n                null :\n                sharedExtent;\n            var renderingReplayGroup = new CanvasExecutorGroup(replayExtent, resolution, pixelRatio, source.getOverlaps(), executorGroupInstructions, layer.getRenderBuffer());\n            tile.executorGroups[layerUid].push(renderingReplayGroup);\n        };\n        var this_1 = this;\n        for (var t = 0, tt = sourceTiles.length; t < tt; ++t) {\n            _loop_1(t, tt);\n        }\n        builderState.renderedRevision = revision;\n        builderState.renderedZ = tile.sourceZ;\n        builderState.renderedRenderOrder = renderOrder;\n        builderState.renderedResolution = resolution;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n        var resolution = frameState.viewState.resolution;\n        var rotation = frameState.viewState.rotation;\n        hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n        var layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n        var declutter = layer.getDeclutter();\n        var source = layer.getSource();\n        var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n        /** @type {!Object<string, boolean>} */\n        var features = {};\n        var renderedTiles = /** @type {Array<import(\"../../VectorRenderTile.js\").default>} */ (this.renderedTiles);\n        var found;\n        var i, ii;\n        var _loop_2 = function () {\n            var tile = renderedTiles[i];\n            var tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n            var tileContainsCoordinate = containsCoordinate(tileExtent, coordinate);\n            if (!declutter) {\n                // When not decluttering, we only need to consider the tile that contains the given\n                // coordinate, because each feature will be rendered for each tile that contains it.\n                if (!tileContainsCoordinate) {\n                    return \"continue\";\n                }\n            }\n            var executorGroups = tile.executorGroups[getUid(layer)];\n            for (var t = 0, tt = executorGroups.length; t < tt; ++t) {\n                var executorGroup = executorGroups[t];\n                found = found || executorGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, \n                /**\n                 * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n                 * @return {?} Callback result.\n                 */\n                function (feature) {\n                    if (tileContainsCoordinate || (declutteredFeatures && declutteredFeatures.indexOf(feature) !== -1)) {\n                        var key = feature.getId();\n                        if (key === undefined) {\n                            key = getUid(feature);\n                        }\n                        if (!(key in features)) {\n                            features[key] = true;\n                            return callback(feature, layer);\n                        }\n                    }\n                }, layer.getDeclutter() ? declutteredFeatures : null);\n            }\n        };\n        for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n            _loop_2();\n        }\n        return found;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.handleFontsChanged = function () {\n        clear(this.renderTileImageQueue_);\n        var layer = this.getLayer();\n        if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n            layer.changed();\n        }\n    };\n    /**\n     * Handle changes in image style state.\n     * @param {import(\"../../events/Event.js\").default} event Image style change event.\n     * @private\n     */\n    CanvasVectorTileLayerRenderer.prototype.handleStyleImageChange_ = function (event) {\n        this.renderIfReadyAndVisible();\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var viewHints = frameState.viewHints;\n        var hifi = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n        this.renderQueuedTileImages_(hifi, frameState);\n        _super.prototype.renderFrame.call(this, frameState, target);\n        var layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n        var renderMode = layer.getRenderMode();\n        if (renderMode === VectorTileRenderType.IMAGE) {\n            return this.container;\n        }\n        var source = layer.getSource();\n        // Unqueue tiles from the image queue when we don't need any more\n        var usedTiles = frameState.usedTiles[getUid(source)];\n        for (var tileUid in this.renderTileImageQueue_) {\n            if (!usedTiles || !(tileUid in usedTiles)) {\n                delete this.renderTileImageQueue_[tileUid];\n            }\n        }\n        var context = this.overlayContext_;\n        var declutterReplays = layer.getDeclutter() ? {} : null;\n        var replayTypes = VECTOR_REPLAYS[renderMode];\n        var pixelRatio = frameState.pixelRatio;\n        var rotation = frameState.viewState.rotation;\n        var size = frameState.size;\n        // set forward and inverse pixel transforms\n        makeScale(this.overlayPixelTransform_, 1 / pixelRatio, 1 / pixelRatio);\n        makeInverse(this.inverseOverlayPixelTransform_, this.overlayPixelTransform_);\n        // resize and clear\n        var canvas = context.canvas;\n        var width = Math.round(size[0] * pixelRatio);\n        var height = Math.round(size[1] * pixelRatio);\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n            var canvasTransform = transformToString(this.overlayPixelTransform_);\n            if (canvas.style.transform !== canvasTransform) {\n                canvas.style.transform = canvasTransform;\n            }\n        }\n        else if (getUid(context) === this.overlayContextUid_) {\n            context.clearRect(0, 0, width, height);\n        }\n        var tiles = this.renderedTiles;\n        var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n        var clips = [];\n        var clipZs = [];\n        for (var i = tiles.length - 1; i >= 0; --i) {\n            var tile = /** @type {import(\"../../VectorRenderTile.js\").default} */ (tiles[i]);\n            if (tile.getState() == TileState.ABORT) {\n                continue;\n            }\n            var tileCoord = tile.tileCoord;\n            var tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);\n            var worldOffset = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent)[0] - tileExtent[0];\n            var transform = this.getRenderTransform(frameState, width, height, worldOffset);\n            var executorGroups = tile.executorGroups[getUid(layer)];\n            var clipped = false;\n            for (var t = 0, tt = executorGroups.length; t < tt; ++t) {\n                var executorGroup = executorGroups[t];\n                if (!executorGroup.hasExecutors(replayTypes)) {\n                    // sourceTile has no instructions of the types we want to render\n                    continue;\n                }\n                var currentZ = tile.tileCoord[0];\n                var currentClip = void 0;\n                if (!declutterReplays && !clipped) {\n                    currentClip = executorGroup.getClipCoords(transform);\n                    context.save();\n                    // Create a clip mask for regions in this low resolution tile that are\n                    // already filled by a higher resolution tile\n                    for (var j = 0, jj = clips.length; j < jj; ++j) {\n                        var clip = clips[j];\n                        if (currentZ < clipZs[j]) {\n                            context.beginPath();\n                            // counter-clockwise (outer ring) for current tile\n                            context.moveTo(currentClip[0], currentClip[1]);\n                            context.lineTo(currentClip[2], currentClip[3]);\n                            context.lineTo(currentClip[4], currentClip[5]);\n                            context.lineTo(currentClip[6], currentClip[7]);\n                            // clockwise (inner ring) for higher resolution tile\n                            context.moveTo(clip[6], clip[7]);\n                            context.lineTo(clip[4], clip[5]);\n                            context.lineTo(clip[2], clip[3]);\n                            context.lineTo(clip[0], clip[1]);\n                            context.clip();\n                        }\n                    }\n                }\n                executorGroup.execute(context, transform, rotation, hifi, replayTypes, declutterReplays);\n                if (!declutterReplays && !clipped) {\n                    context.restore();\n                    clips.push(currentClip);\n                    clipZs.push(currentZ);\n                    clipped = true;\n                }\n            }\n        }\n        if (declutterReplays) {\n            var layerState = frameState.layerStatesArray[frameState.layerIndex];\n            replayDeclutter(declutterReplays, context, rotation, layerState.opacity, hifi, frameState.declutterItems);\n        }\n        return this.container;\n    };\n    /**\n     * @param {boolean} hifi We have time to render a high fidelity map image.\n     * @param {import('../../PluggableMap.js').FrameState} frameState Frame state.\n     */\n    CanvasVectorTileLayerRenderer.prototype.renderQueuedTileImages_ = function (hifi, frameState) {\n        // When we don't have time to render hifi, only render tiles until we have used up\n        // half of the frame budget of 16 ms\n        for (var uid in this.renderTileImageQueue_) {\n            if (!hifi && Date.now() - frameState.time > 8) {\n                frameState.animate = true;\n                break;\n            }\n            var tile = this.renderTileImageQueue_[uid];\n            delete this.renderTileImageQueue_[uid];\n            this.renderTileImage_(tile, frameState);\n        }\n    };\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n     * @param {import(\"../../render/canvas/BuilderGroup.js\").default} executorGroup Replay group.\n     * @return {boolean} `true` if an image is loading.\n     */\n    CanvasVectorTileLayerRenderer.prototype.renderFeature = function (feature, squaredTolerance, styles, executorGroup) {\n        if (!styles) {\n            return false;\n        }\n        var loading = false;\n        if (Array.isArray(styles)) {\n            for (var i = 0, ii = styles.length; i < ii; ++i) {\n                loading = renderFeature(executorGroup, feature, styles[i], squaredTolerance, this.boundHandleStyleImageChange_) || loading;\n            }\n        }\n        else {\n            loading = renderFeature(executorGroup, feature, styles, squaredTolerance, this.boundHandleStyleImageChange_);\n        }\n        return loading;\n    };\n    /**\n     * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n     * @return {boolean} A new tile image was rendered.\n     * @private\n     */\n    CanvasVectorTileLayerRenderer.prototype.tileImageNeedsRender_ = function (tile, pixelRatio, projection) {\n        var layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n        var replayState = tile.getReplayState(layer);\n        var revision = layer.getRevision();\n        var sourceZ = tile.sourceZ;\n        var resolution = tile.wantedResolution;\n        return replayState.renderedTileResolution !== resolution || replayState.renderedTileRevision !== revision || replayState.renderedTileZ !== sourceZ;\n    };\n    /**\n     * @param {import(\"../../VectorRenderTile.js\").default} tile Tile.\n     * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n     * @private\n     */\n    CanvasVectorTileLayerRenderer.prototype.renderTileImage_ = function (tile, frameState) {\n        var layer = /** @type {import(\"../../layer/VectorTile.js\").default} */ (this.getLayer());\n        var replayState = tile.getReplayState(layer);\n        var revision = layer.getRevision();\n        var executorGroups = tile.executorGroups[getUid(layer)];\n        replayState.renderedTileRevision = revision;\n        replayState.renderedTileZ = tile.sourceZ;\n        var tileCoord = tile.wrappedTileCoord;\n        var z = tileCoord[0];\n        var source = layer.getSource();\n        var pixelRatio = frameState.pixelRatio;\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var tileGrid = source.getTileGridForProjection(projection);\n        var tileResolution = tileGrid.getResolution(tile.tileCoord[0]);\n        var renderPixelRatio = frameState.pixelRatio / tile.wantedResolution * tileResolution;\n        var resolution = tileGrid.getResolution(z);\n        var context = tile.getContext(layer);\n        // Increase tile size when overzooming for low pixel ratio, to avoid blurry tiles\n        pixelRatio = Math.max(pixelRatio, renderPixelRatio / pixelRatio);\n        var size = source.getTilePixelSize(z, pixelRatio, projection);\n        context.canvas.width = size[0];\n        context.canvas.height = size[1];\n        var renderScale = pixelRatio / renderPixelRatio;\n        if (renderScale !== 1) {\n            var canvasTransform = resetTransform(this.tmpTransform_);\n            scaleTransform(canvasTransform, renderScale, renderScale);\n            context.setTransform.apply(context, canvasTransform);\n        }\n        var tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n        var pixelScale = renderPixelRatio / resolution;\n        var transform = resetTransform(this.tmpTransform_);\n        scaleTransform(transform, pixelScale, -pixelScale);\n        translateTransform(transform, -tileExtent[0], -tileExtent[3]);\n        for (var i = 0, ii = executorGroups.length; i < ii; ++i) {\n            var executorGroup = executorGroups[i];\n            executorGroup.execute(context, transform, 0, true, IMAGE_REPLAYS[layer.getRenderMode()]);\n        }\n        replayState.renderedTileResolution = tile.wantedResolution;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorTileLayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        var data = _super.prototype.getDataAtPixel.call(this, pixel, frameState, hitTolerance);\n        if (data) {\n            return data;\n        }\n        var renderPixel = applyTransform(this.inverseOverlayPixelTransform_, pixel.slice());\n        var context = this.overlayContext_;\n        try {\n            data = context.getImageData(Math.round(renderPixel[0]), Math.round(renderPixel[1]), 1, 1).data;\n        }\n        catch (err) {\n            if (err.name === 'SecurityError') {\n                // tainted canvas, we assume there is data at the given pixel (although there might not be)\n                return new Uint8Array();\n            }\n            return data;\n        }\n        if (data[3] === 0) {\n            return null;\n        }\n        return data;\n    };\n    return CanvasVectorTileLayerRenderer;\n}(CanvasTileLayerRenderer));\nexport default CanvasVectorTileLayerRenderer;\n//# sourceMappingURL=VectorTileLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/VectorTile\n */\nimport { assert } from '../asserts.js';\nimport TileProperty from './TileProperty.js';\nimport BaseVectorLayer from './BaseVector.js';\nimport VectorTileRenderType from './VectorTileRenderType.js';\nimport CanvasVectorTileLayerRenderer from '../renderer/canvas/VectorTileLayer.js';\nimport { assign } from '../obj.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {import(\"./VectorTileRenderType.js\").default|string} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but point symbols and texts\n *    are always rotated with the view and pixels are scaled during zoom animations. When `declutter`\n *    is set to `true`, the decluttering is done per tile resulting in labels and point symbols getting\n *    cut off at tile boundaries.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *\n * @property {import(\"../source/VectorTile.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n/**\n * @classdesc\n * Layer for vector tile data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @param {Options=} opt_options Options.\n * @extends {BaseVectorLayer<import(\"../source/VectorTile.js\").default>}\n * @api\n */\nvar VectorTileLayer = /** @class */ (function (_super) {\n    __extends(VectorTileLayer, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function VectorTileLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = /** @type {Object} */ (assign({}, options));\n        delete baseOptions.preload;\n        delete baseOptions.useInterimTilesOnError;\n        _this = _super.call(this, /** @type {import(\"./BaseVector.js\").Options} */ (baseOptions)) || this;\n        var renderMode = options.renderMode || VectorTileRenderType.HYBRID;\n        assert(renderMode == undefined ||\n            renderMode == VectorTileRenderType.IMAGE ||\n            renderMode == VectorTileRenderType.HYBRID, 28); // `renderMode` must be `'image'` or `'hybrid'`\n        /**\n         * @private\n         * @type {VectorTileRenderType}\n         */\n        _this.renderMode_ = renderMode;\n        _this.setPreload(options.preload ? options.preload : 0);\n        _this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n            options.useInterimTilesOnError : true);\n        return _this;\n    }\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    VectorTileLayer.prototype.createRenderer = function () {\n        return new CanvasVectorTileLayerRenderer(this);\n    };\n    /**\n     * @return {VectorTileRenderType} The render mode.\n     */\n    VectorTileLayer.prototype.getRenderMode = function () {\n        return this.renderMode_;\n    };\n    /**\n     * Return the level as number to which we will preload tiles up to.\n     * @return {number} The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.getPreload = function () {\n        return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n    };\n    /**\n     * Whether we use interim tiles on error.\n     * @return {boolean} Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.getUseInterimTilesOnError = function () {\n        return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n    };\n    /**\n     * Set the level as number to which we will preload tiles up to.\n     * @param {number} preload The level to preload tiles up to.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.setPreload = function (preload) {\n        this.set(TileProperty.PRELOAD, preload);\n    };\n    /**\n     * Set whether we use interim tiles on error.\n     * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n     * @observable\n     * @api\n     */\n    VectorTileLayer.prototype.setUseInterimTilesOnError = function (useInterimTilesOnError) {\n        this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n    };\n    return VectorTileLayer;\n}(BaseVectorLayer));\nexport default VectorTileLayer;\n//# sourceMappingURL=VectorTile.js.map","/**\n * @module olcs.core.VectorLayerCounterpart\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\n\n/**\n * Context for feature conversion.\n * @typedef {Object} OlFeatureToCesiumContext\n * @property {!(import('ol/Projection.js').default|string)} projection\n * @property {!Cesium.PrimitiveCollection} primitives\n * @property {Object<number, Array<!Cesium.Primitive|!Cesium.Billboard>>} featureToCesiumMap\n * @property {!Cesium.BillboardCollection} billboards\n */\n\n\nclass VectorLayerCounterpart {\n  /**\n  * Result of the conversion of an OpenLayers layer to Cesium.\n  * @param {!(ol.proj.Projection|string)} layerProjection\n  * @param {!Cesium.Scene} scene\n  */\n  constructor(layerProjection, scene) {\n    const billboards = new Cesium.BillboardCollection({scene});\n    const primitives = new Cesium.PrimitiveCollection();\n\n    /**\n    * @type {!Array.<ol.EventsKey>}\n    */\n    this.olListenKeys = [];\n\n    this.rootCollection_ = new Cesium.PrimitiveCollection();\n    /**\n    * @type {!OlFeatureToCesiumContext}\n    */\n    this.context = {\n      projection: layerProjection,\n      billboards,\n      featureToCesiumMap: {},\n      primitives\n    };\n\n    this.rootCollection_.add(billboards);\n    this.rootCollection_.add(primitives);\n  }\n\n  /**\n  * Unlisten.\n  */\n  destroy() {\n    this.olListenKeys.forEach(olObservableUnByKey);\n    this.olListenKeys.length = 0;\n  }\n\n  /**\n  * @return {!Cesium.Primitive}\n  */\n  getRootPrimitive() {\n    return this.rootCollection_;\n  }\n}\n\n\nexport default VectorLayerCounterpart;\n","/**\n * @module olcs.FeatureConverter\n */\nimport olGeomGeometry from 'ol/geom/Geometry.js';\nimport olStyleIcon from 'ol/style/Icon.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport {circular as olCreateCircularPolygon} from 'ol/geom/Polygon.js';\nimport {boundingExtent, getCenter} from 'ol/extent.js';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry.js';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil, {getUid, isGroundPolylinePrimitiveSupported} from './util.js';\n\n\n/**\n * @typedef {Object} ModelStyle\n * @property {Cesium.Matrix4} [debugModelMatrix]\n * @property {Cesium.ModelFromGltfOptions} cesiumOptions\n */\n\n\nclass FeatureConverter {\n  /**\n   * Concrete base class for converting from OpenLayers3 vectors to Cesium\n   * primitives.\n   * Extending this class is possible provided that the extending class and\n   * the library are compiled together by the closure compiler.\n   * @param {!Cesium.Scene} scene Cesium scene.\n   * @constructor\n   * @api\n   */\n  constructor(scene) {\n\n    /**\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * Bind once to have a unique function for using as a listener\n     * @type {function(ol.source.Vector.Event)}\n     * @private\n     */\n    this.boundOnRemoveOrClearFeatureListener_ = this.onRemoveOrClearFeature_.bind(this);\n\n    /**\n     * @type {Cesium.Cartesian3}\n     * @private\n     */\n    this.defaultBillboardEyeOffset_ = new Cesium.Cartesian3(0, 0, 10);\n  }\n\n  /**\n   * @param {ol.source.Vector.Event} evt\n   * @private\n   */\n  onRemoveOrClearFeature_(evt) {\n    const source = evt.target;\n    console.assert(source instanceof olSourceVector);\n\n    const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n    if (cancellers) {\n      const feature = evt.feature;\n      if (feature) {\n        // remove\n        const id = getUid(feature);\n        const canceller = cancellers[id];\n        if (canceller) {\n          canceller();\n          delete cancellers[id];\n        }\n      } else {\n        // clear\n        for (const key in cancellers) {\n          if (cancellers.hasOwnProperty(key)) {\n            cancellers[key]();\n          }\n        }\n        olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n    }\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n   * @protected\n   */\n  setReferenceForPicking(layer, feature, primitive) {\n    primitive.olLayer = layer;\n    primitive.olFeature = feature;\n  }\n\n  /**\n   * Basics primitive creation using a color attribute.\n   * Note that Cesium has 'interior' and outline geometries.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} geometry\n   * @param {!Cesium.Color} color\n   * @param {number=} opt_lineWidth\n   * @return {Cesium.Primitive}\n   * @protected\n   */\n  createColoredPrimitive(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n    const createInstance = function(geometry, color) {\n      const instance = new Cesium.GeometryInstance({\n        // always update Cesium externs before adding a property\n        geometry\n      });\n      if (color && !(color instanceof Cesium.ImageMaterialProperty)) {\n        instance.attributes = {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        };\n      }\n      return instance;\n    };\n\n    const options = {\n      // always update Cesium externs before adding a property\n      flat: true, // work with all geometries\n      renderState: {\n        depthTest: {\n          enabled: true\n        }\n      }\n    };\n\n    if (opt_lineWidth !== undefined) {\n      if (!options.renderState) {\n        options.renderState = {};\n      }\n      options.renderState.lineWidth = opt_lineWidth;\n    }\n\n    const instances = createInstance(geometry, color);\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let primitive;\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const ctor = instances.geometry.constructor;\n      if (ctor && !ctor['createShadowVolume']) {\n        return null;\n      }\n      primitive = new Cesium.GroundPrimitive({\n        geometryInstances: instances\n      });\n    } else {\n      primitive = new Cesium.Primitive({\n        geometryInstances: instances\n      });\n    }\n\n    if (color instanceof Cesium.ImageMaterialProperty) {\n      const dataUri = color.image.getValue().toDataURL();\n\n      primitive.appearance = new Cesium.MaterialAppearance({\n        flat: true,\n        renderState: {\n          depthTest: {\n            enabled: true\n          }\n        },\n        material: new Cesium.Material({\n          fabric: {\n            type: 'Image',\n            uniforms: {\n              image: dataUri\n            }\n          }\n        })\n      });\n    } else {\n      primitive.appearance = new Cesium.PerInstanceColorAppearance(options);\n    }\n\n    this.setReferenceForPicking(layer, feature, primitive);\n    return primitive;\n  }\n\n  /**\n   * Return the fill or stroke color from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @param {boolean} outline\n   * @return {!Cesium.Color}\n   * @protected\n   */\n  extractColorFromOlStyle(style, outline) {\n    const fillColor = style.getFill() ? style.getFill().getColor() : null;\n    const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n    let olColor = 'black';\n    if (strokeColor && outline) {\n      olColor = strokeColor;\n    } else if (fillColor) {\n      olColor = fillColor;\n    }\n\n    return olcsCore.convertColorToCesium(olColor);\n  }\n\n  /**\n   * Return the width of stroke from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @return {number}\n   * @protected\n   */\n  extractLineWidthFromOlStyle(style) {\n    // Handling of line width WebGL limitations is handled by Cesium.\n    const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n    return width !== undefined ? width : 1;\n  }\n\n  /**\n   * Create a primitive collection out of two Cesium geometries.\n   * Only the OpenLayers style colors will be used.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} fillGeometry\n   * @param {!Cesium.Geometry} outlineGeometry\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n    const fillColor = this.extractColorFromOlStyle(olStyle, false);\n    const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n    const primitives = new Cesium.PrimitiveCollection();\n    if (olStyle.getFill()) {\n      const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n          fillGeometry, fillColor);\n      console.assert(!!p1);\n      primitives.add(p1);\n    }\n\n    if (olStyle.getStroke() && outlineGeometry) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n          outlineGeometry, outlineColor, width);\n      if (p2) {\n        // Some outline geometries are not supported by Cesium in clamp to ground\n        // mode. These primitives are skipped.\n        primitives.add(p2);\n      }\n    }\n\n    return primitives;\n  }\n\n  // Geometry converters\n  /**\n   * Create a Cesium primitive if style has a text component.\n   * Eventually return a PrimitiveCollection including current primitive.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.Primitive} primitive current primitive\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  addTextStyle(layer, feature, geometry, style, primitive) {\n    let primitives;\n    if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n      primitives = new Cesium.PrimitiveCollection();\n      primitives.add(primitive);\n    } else {\n      primitives = primitive;\n    }\n\n    if (!style.getText()) {\n      return primitives;\n    }\n\n    const text = /** @type {!ol.style.Text} */ (style.getText());\n    const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n        text);\n    if (label) {\n      primitives.add(label);\n    }\n    return primitives;\n  }\n\n  /**\n   * Add a billboard to a Cesium.BillboardCollection.\n   * Overriding this wrapper allows manipulating the billboard options.\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @return {!Cesium.Billboard} newly created billboard\n   * @api\n   */\n  csAddBillboard(billboards, bbOptions, layer, feature, geometry, style) {\n    if (!bbOptions.eyeOffset) {\n      bbOptions.eyeOffset = this.defaultBillboardEyeOffset_;\n    }\n    const bb = billboards.add(bbOptions);\n    this.setReferenceForPicking(layer, feature, bb);\n    return bb;\n  }\n\n  /**\n   * Convert an OpenLayers circle geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olCircleGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Circle');\n\n    // ol.Coordinate\n    let center = olGeometry.getCenter();\n    const height = center.length == 3 ? center[2] : 0.0;\n    let point = center.slice();\n    point[0] += olGeometry.getRadius();\n\n    // Cesium\n    center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n    point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n    // Accurate computation of straight distance\n    const radius = Cesium.Cartesian3.distance(center, point);\n\n    const fillGeometry = new Cesium.CircleGeometry({\n      // always update Cesium externs before adding a property\n      center,\n      radius,\n      height\n    });\n\n    let outlinePrimitive, outlineGeometry;\n    if (this.getHeightReference(layer, feature, olGeometry) === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      if (width) {\n        const circlePolygon = olCreateCircularPolygon(olGeometry.getCenter(), radius);\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(circlePolygon.getLinearRing(0).getCoordinates());\n        if (!isGroundPolylinePrimitiveSupported(this.scene)) {\n          const color = this.extractColorFromOlStyle(olStyle, true);\n          outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n        } else {\n          outlinePrimitive = new Cesium.GroundPolylinePrimitive({\n            geometryInstances: new Cesium.GeometryInstance({\n              geometry: new Cesium.GroundPolylineGeometry({positions, width}),\n            }),\n            appearance: new Cesium.PolylineMaterialAppearance({\n              material: this.olStyleToCesium(feature, olStyle, true),\n            }),\n            classificationType: Cesium.ClassificationType.TERRAIN,\n          });\n          outlinePrimitive.readyPromise.then(() => {\n            this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n          });\n        }\n      }\n    } else {\n      outlineGeometry = new Cesium.CircleOutlineGeometry({\n        // always update Cesium externs before adding a property\n        center,\n        radius,\n        extrudedHeight: height,\n        height\n      });\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!number} width The width of the line.\n   * @param {!Cesium.Color} color The color of the line.\n   * @param {!Array<Cesium.Cartesian3>|Array<Array<Cesium.Cartesian3>>} positions The vertices of the line(s).\n   * @return {!Cesium.GroundPrimitive} primitive\n   */\n  createStackedGroundCorridors(layer, feature, width, color, positions) {\n    // Convert positions to an Array if it isn't\n    if (!Array.isArray(positions[0])) {\n      positions = [positions];\n    }\n    width = Math.max(3, width); // A <3px width is too small for ground primitives\n    const geometryInstances = [];\n    let previousDistance = 0;\n    // A stack of ground lines with increasing width (in meters) are created.\n    // Only one of these lines is displayed at any time giving a feeling of continuity.\n    // The values for the distance and width factor are more or less arbitrary.\n    // Applications can override this logics by subclassing the FeatureConverter class.\n    for (const distance of [1000, 4000, 16000, 64000, 254000, 1000000, 10000000]) {\n      width *= 2.14;\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        width,\n        vertexFormat: Cesium.VertexFormat.POSITION_ONLY\n      };\n      for (const linePositions of positions) {\n        geometryOptions.positions = linePositions;\n        geometryInstances.push(new Cesium.GeometryInstance({\n          geometry: new Cesium.CorridorGeometry(geometryOptions),\n          attributes: {\n            color: Cesium.ColorGeometryInstanceAttribute.fromColor(color),\n            distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(previousDistance, distance - 1)\n          }\n        }));\n      }\n      previousDistance = distance;\n    }\n    return new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances\n    });\n  }\n\n  /**\n   * Convert an OpenLayers line string geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olLineStringGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'LineString');\n\n    const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olGeometry.getCoordinates());\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n\n    let outlinePrimitive;\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND && !isGroundPolylinePrimitiveSupported(this.scene)) {\n      const color = this.extractColorFromOlStyle(olStyle, true);\n      outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n    } else {\n      const appearance = new Cesium.PolylineMaterialAppearance({\n        // always update Cesium externs before adding a property\n        material: this.olStyleToCesium(feature, olStyle, true)\n      });\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        positions,\n        width,\n      };\n      const primitiveOptions = {\n        // always update Cesium externs before adding a property\n        appearance\n      };\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const geometry = new Cesium.GroundPolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n        outlinePrimitive.readyPromise.then(() => {\n          this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n        });\n      } else {\n        geometryOptions.vertexFormat = appearance.vertexFormat;\n        const geometry = new Cesium.PolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.Primitive(primitiveOptions);\n      }\n    }\n\n    this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, outlinePrimitive);\n  }\n\n  /**\n   * Convert an OpenLayers polygon geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olPolygonGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Polygon');\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let fillGeometry, outlineGeometry, outlinePrimitive;\n    if ((olGeometry.getCoordinates()[0].length == 5) &&\n        (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n      // Create a rectangle according to the longitude and latitude curves\n      const coordinates = olGeometry.getCoordinates()[0];\n      // Extract the West, South, East, North coordinates\n      const extent = boundingExtent(coordinates);\n      const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n          extent[2], extent[3]);\n\n      // Extract the average height of the vertices\n      let maxHeight = 0.0;\n      if (coordinates[0].length == 3) {\n        for (let c = 0; c < coordinates.length; c++) {\n          maxHeight = Math.max(maxHeight, coordinates[c][2]);\n        }\n      }\n\n      // Render the cartographic rectangle\n      fillGeometry = new Cesium.RectangleGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n\n      outlineGeometry = new Cesium.RectangleOutlineGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n    } else {\n      const rings = olGeometry.getLinearRings();\n      // always update Cesium externs before adding a property\n      const hierarchy = {};\n      const polygonHierarchy = hierarchy;\n      console.assert(rings.length > 0);\n\n      for (let i = 0; i < rings.length; ++i) {\n        const olPos = rings[i].getCoordinates();\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n        console.assert(positions && positions.length > 0);\n        if (i == 0) {\n          hierarchy.positions = positions;\n        } else {\n          if (!hierarchy.holes) {\n            hierarchy.holes = [];\n          }\n          hierarchy.holes.push({\n            positions\n          });\n        }\n      }\n\n      fillGeometry = new Cesium.PolygonGeometry({\n        // always update Cesium externs before adding a property\n        polygonHierarchy,\n        perPositionHeight: true\n      });\n\n      // Since Cesium doesn't yet support Polygon outlines on terrain yet (coming soon...?)\n      // we don't create an outline geometry if clamped, but instead do the polyline method\n      // for each ring. Most of this code should be removeable when Cesium adds\n      // support for Polygon outlines on terrain.\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const width = this.extractLineWidthFromOlStyle(olStyle);\n        if (width > 0) {\n          const positions = [hierarchy.positions];\n          if (hierarchy.holes) {\n            for (let i = 0; i < hierarchy.holes.length; ++i) {\n              positions.push(hierarchy.holes[i].positions);\n            }\n          }\n          if (!isGroundPolylinePrimitiveSupported(this.scene)) {\n            const color = this.extractColorFromOlStyle(olStyle, true);\n            outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n          } else {\n            const appearance = new Cesium.PolylineMaterialAppearance({\n              // always update Cesium externs before adding a property\n              material: this.olStyleToCesium(feature, olStyle, true)\n            });\n            const geometryInstances = [];\n            for (const linePositions of positions) {\n              const polylineGeometry = new Cesium.GroundPolylineGeometry({positions: linePositions, width});\n              geometryInstances.push(new Cesium.GeometryInstance({\n                geometry: polylineGeometry\n              }));\n            }\n            const primitiveOptions = {\n              // always update Cesium externs before adding a property\n              appearance,\n              geometryInstances\n            };\n            outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n            outlinePrimitive.readyPromise.then(() => {\n              this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n            });\n          }\n        }\n      } else {\n        // Actually do the normal polygon thing. This should end the removable\n        // section of code described above.\n        outlineGeometry = new Cesium.PolygonOutlineGeometry({\n          // always update Cesium externs before adding a property\n          polygonHierarchy: hierarchy,\n          perPositionHeight: true\n        });\n      }\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @return {!Cesium.HeightReference}\n   * @api\n   */\n  getHeightReference(layer, feature, geometry) {\n\n    // Read from the geometry\n    let altitudeMode = geometry.get('altitudeMode');\n\n    // Or from the feature\n    if (altitudeMode === undefined) {\n      altitudeMode = feature.get('altitudeMode');\n    }\n\n    // Or from the layer\n    if (altitudeMode === undefined) {\n      altitudeMode = layer.get('altitudeMode');\n    }\n\n    let heightReference = Cesium.HeightReference.NONE;\n    if (altitudeMode === 'clampToGround') {\n      heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n    } else if (altitudeMode === 'relativeToGround') {\n      heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n    }\n\n    return heightReference;\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!ol.style.Image} imageStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when the new billboard is added.\n   * @api\n   */\n  createBillboardFromImage(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      imageStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const scale = imageStyle.getScale();\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale,\n        heightReference,\n        position\n      });\n\n      if (imageStyle instanceof olStyleIcon) {\n        const anchor = imageStyle.getAnchor();\n        if (anchor) {\n          bbOptions.pixelOffset = new Cesium.Cartesian2((image.width / 2 - anchor[0]) * scale, (image.height / 2 - anchor[1]) * scale);\n        }\n      }\n\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature, olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        image.removeEventListener('load', listener);\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      image.addEventListener('load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olPointGeometryToCesium(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    console.assert(olGeometry.getType() == 'Point');\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n    let modelPrimitive = null;\n    const imageStyle = style.getImage();\n    if (imageStyle) {\n      const olcsModelFunction = /** @type {function():olcsx.ModelStyle} */ (olGeometry.get('olcs_model') || feature.get('olcs_model'));\n      if (olcsModelFunction) {\n        const olcsModel = olcsModelFunction();\n        const options = /** @type {Cesium.ModelFromGltfOptions} */ (Object.assign({}, {scene: this.scene}, olcsModel.cesiumOptions));\n        const model = Cesium.Model.fromGltf(options);\n        modelPrimitive = new Cesium.PrimitiveCollection();\n        modelPrimitive.add(model);\n        if (olcsModel.debugModelMatrix) {\n          modelPrimitive.add(new Cesium.DebugModelMatrixPrimitive({\n            modelMatrix: olcsModel.debugModelMatrix\n          }));\n        }\n      } else {\n        this.createBillboardFromImage(layer, feature, olGeometry, projection, style, imageStyle, billboards, opt_newBillboardCallback);\n      }\n    }\n\n    if (style.getText()) {\n      return this.addTextStyle(layer, feature, olGeometry, style, modelPrimitive || new Cesium.Primitive());\n    } else {\n      return modelPrimitive;\n    }\n  }\n\n  /**\n   * Convert an OpenLayers multi-something geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olMultiGeometryToCesium(\n      layer,\n      feature,\n      geometry,\n      projection,\n      olStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    // Do not reproject to 4326 now because it will be done later.\n\n    // FIXME: would be better to combine all child geometries in one primitive\n    // instead we create n primitives for simplicity.\n    const accumulate = function(geometries, functor) {\n      const primitives = new Cesium.PrimitiveCollection();\n      geometries.forEach((geometry) => {\n        primitives.add(functor(layer, feature, geometry, projection, olStyle));\n      });\n      return primitives;\n    };\n\n    let subgeos;\n    switch (geometry.getType()) {\n      case 'MultiPoint':\n        geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n        subgeos = geometry.getPoints();\n        if (olStyle.getText()) {\n          const primitives = new Cesium.PrimitiveCollection();\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            const result = this.olPointGeometryToCesium(layer, feature, geometry,\n                projection, olStyle, billboards, opt_newBillboardCallback);\n            if (result) {\n              primitives.add(result);\n            }\n          });\n          return primitives;\n        } else {\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            this.olPointGeometryToCesium(layer, feature, geometry, projection,\n                olStyle, billboards, opt_newBillboardCallback);\n          });\n          return null;\n        }\n      case 'MultiLineString':\n        geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n        subgeos = geometry.getLineStrings();\n        return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n      case 'MultiPolygon':\n        geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n        subgeos = geometry.getPolygons();\n        return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n      default:\n        console.assert(false, `Unhandled multi geometry type${geometry.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers text style to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Text} style\n   * @return {Cesium.LabelCollection} Cesium primitive\n   * @api\n   */\n  olGeometry4326TextPartToCesium(layer, feature, geometry, style) {\n    const text = style.getText();\n    if (!text) {\n      return null;\n    }\n\n    const labels = new Cesium.LabelCollection({scene: this.scene});\n    // TODO: export and use the text draw position from OpenLayers .\n    // See src/ol/render/vector.js\n    const extentCenter = getCenter(geometry.getExtent());\n    if (geometry instanceof olGeomSimpleGeometry) {\n      const first = geometry.getFirstCoordinate();\n      extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n    }\n    const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n    options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n    options.text = text;\n\n    options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n    const offsetX = style.getOffsetX();\n    const offsetY = style.getOffsetY();\n    if (offsetX != 0 && offsetY != 0) {\n      const offset = new Cesium.Cartesian2(offsetX, offsetY);\n      options.pixelOffset = offset;\n    }\n\n    options.font = style.getFont() || '10px sans-serif'; // OpenLayers default\n\n    let labelStyle = undefined;\n    if (style.getFill()) {\n      options.fillColor = this.extractColorFromOlStyle(style, false);\n      labelStyle = Cesium.LabelStyle.FILL;\n    }\n    if (style.getStroke()) {\n      options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n      options.outlineColor = this.extractColorFromOlStyle(style, true);\n      labelStyle = Cesium.LabelStyle.OUTLINE;\n    }\n    if (style.getFill() && style.getStroke()) {\n      labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n    }\n    options.style = labelStyle;\n\n    let horizontalOrigin;\n    switch (style.getTextAlign()) {\n      case 'left':\n        horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n        break;\n      case 'right':\n        horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n        break;\n      case 'center':\n      default:\n        horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n    }\n    options.horizontalOrigin = horizontalOrigin;\n\n    if (style.getTextBaseline()) {\n      let verticalOrigin;\n      switch (style.getTextBaseline()) {\n        case 'top':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'middle':\n          verticalOrigin = Cesium.VerticalOrigin.CENTER;\n          break;\n        case 'bottom':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        case 'alphabetic':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'hanging':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        default:\n          console.assert(false, `unhandled baseline ${style.getTextBaseline()}`);\n      }\n      options.verticalOrigin = verticalOrigin;\n    }\n\n\n    const l = labels.add(options);\n    this.setReferenceForPicking(layer, feature, l);\n    return labels;\n  }\n\n  /**\n   * Convert an OpenLayers style to a Cesium Material.\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.style.Style} style\n   * @param {boolean} outline\n   * @return {Cesium.Material}\n   * @api\n   */\n  olStyleToCesium(feature, style, outline) {\n    const fill = style.getFill();\n    const stroke = style.getStroke();\n    if ((outline && !stroke) || (!outline && !fill)) {\n      return null; // FIXME use a default style? Developer error?\n    }\n\n    let color = outline ? stroke.getColor() : fill.getColor();\n    color = olcsCore.convertColorToCesium(color);\n\n    if (outline && stroke.getLineDash()) {\n      return Cesium.Material.fromType('Stripe', {\n        // always update Cesium externs before adding a property\n        horizontal: false,\n        repeat: 500, // TODO how to calculate this?\n        evenColor: color,\n        oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n      });\n    } else {\n      return Cesium.Material.fromType('Color', {\n        // always update Cesium externs before adding a property\n        color\n      });\n    }\n\n  }\n\n  /**\n   * Compute OpenLayers plain style.\n   * Evaluates style function, blend arrays, get default style.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature\n   * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n   * @param {number} resolution\n   * @return {Array.<!ol.style.Style>} null if no style is available\n   * @api\n   */\n  computePlainStyle(layer, feature, fallbackStyleFunction, resolution) {\n    /**\n     * @type {ol.FeatureStyleFunction|undefined}\n     */\n    const featureStyleFunction = feature.getStyleFunction();\n\n    /**\n     * @type {ol.style.Style|Array.<ol.style.Style>}\n     */\n    let style = null;\n\n    if (featureStyleFunction) {\n      style = featureStyleFunction(feature, resolution);\n    }\n\n    if (!style && fallbackStyleFunction) {\n      style = fallbackStyleFunction(feature, resolution);\n    }\n\n    if (!style) {\n      // The feature must not be displayed\n      return null;\n    }\n\n    // FIXME combine materials as in cesium-materials-pack?\n    // then this function must return a custom material\n    // More simply, could blend the colors like described in\n    // http://en.wikipedia.org/wiki/Alpha_compositing\n    return Array.isArray(style) ? style : [style];\n  }\n\n  /**\n   * @protected\n   * @param {!ol.Feature} feature\n   * @param {!ol.style.Style} style\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {ol.geom.Geometry|undefined}\n   */\n  getGeometryFromFeature(feature, style, opt_geom) {\n    if (opt_geom) {\n      return opt_geom;\n    }\n\n    const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n    if (geom3d && geom3d instanceof olGeomGeometry) {\n      return geom3d;\n    }\n\n    if (style) {\n      const geomFuncRes = style.getGeometryFunction()(feature);\n      if (geomFuncRes instanceof olGeomGeometry) {\n        return geomFuncRes;\n      }\n    }\n\n    return feature.getGeometry();\n  }\n\n  /**\n   * Convert one OpenLayers feature up to a collection of Cesium primitives.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.style.Style} style\n   * @param {!import('olcs/core/VectorLayerConterpart.js').OlFeatureToCesiumContext} context\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olFeatureToCesium(layer, feature, style, context, opt_geom) {\n    let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n    if (!geom) {\n      // OpenLayers features may not have a geometry\n      // See http://geojson.org/geojson-spec.html#feature-objects\n      return null;\n    }\n\n    const proj = context.projection;\n    const newBillboardAddedCallback = function(bb) {\n      const featureBb = context.featureToCesiumMap[getUid(feature)];\n      if (featureBb instanceof Array) {\n        featureBb.push(bb);\n      }\n      else {\n        context.featureToCesiumMap[getUid(feature)] = [bb];\n      }\n    };\n\n    switch (geom.getType()) {\n      case 'GeometryCollection':\n        const primitives = new Cesium.PrimitiveCollection();\n        const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n        // TODO: use getGeometriesArray() instead\n        collection.getGeometries().forEach((geom) => {\n          if (geom) {\n            const prims = this.olFeatureToCesium(layer, feature, style, context,\n                geom);\n            if (prims) {\n              primitives.add(prims);\n            }\n          }\n        });\n        return primitives;\n      case 'Point':\n        geom = /** @type {!ol.geom.Point} */ (geom);\n        const bbs = context.billboards;\n        const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n            style, bbs, newBillboardAddedCallback);\n        if (!result) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result;\n        }\n      case 'Circle':\n        geom = /** @type {!ol.geom.Circle} */ (geom);\n        return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'LineString':\n        geom = /** @type {!ol.geom.LineString} */ (geom);\n        return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'Polygon':\n        geom = /** @type {!ol.geom.Polygon} */ (geom);\n        return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'MultiPoint':\n      case 'MultiLineString':\n      case 'MultiPolygon':\n        const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n            style, context.billboards, newBillboardAddedCallback);\n        if (!result2) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result2;\n        }\n      case 'LinearRing':\n        throw new Error('LinearRing should only be part of polygon.');\n      default:\n        throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers vector layer to Cesium primitive collection.\n   * For each feature, the associated primitive will be stored in\n   * `featurePrimitiveMap`.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n   * @param {!ol.View} olView\n   * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n   * @return {!olcs.core.VectorLayerCounterpart}\n   * @api\n   */\n  olVectorLayerToCesium(olLayer, olView, featurePrimitiveMap) {\n    const proj = olView.getProjection();\n    const resolution = olView.getResolution();\n\n    if (resolution === undefined || !proj) {\n      console.assert(false, 'View not ready');\n      // an assertion is not enough for closure to assume resolution and proj\n      // are defined\n      throw new Error('View not ready');\n    }\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    console.assert(source instanceof olSourceVector);\n    const features = source.getFeatures();\n    const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n    const context = counterpart.context;\n    for (let i = 0; i < features.length; ++i) {\n      const feature = features[i];\n      if (!feature) {\n        continue;\n      }\n      /**\n       * @type {ol.StyleFunction|undefined}\n       */\n      const layerStyle = olLayer.getStyleFunction();\n      const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n          resolution);\n      if (!styles || !styles.length) {\n        // only 'render' features with a style\n        continue;\n      }\n\n      /**\n       * @type {Cesium.Primitive|null}\n       */\n      let primitives = null;\n      for (let i = 0; i < styles.length; i++) {\n        const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n        if (prims) {\n          if (!primitives) {\n            primitives = prims;\n          } else if (prims) {\n            let i = 0, prim;\n            while ((prim = prims.get(i))) {\n              primitives.add(prim);\n              i++;\n            }\n          }\n        }\n      }\n      if (!primitives) {\n        continue;\n      }\n      featurePrimitiveMap[getUid(feature)] = primitives;\n      counterpart.getRootPrimitive().add(primitives);\n    }\n\n    return counterpart;\n  }\n\n  /**\n   * Convert an OpenLayers feature to Cesium primitive collection.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n   * @param {!ol.View} view\n   * @param {!ol.Feature} feature\n   * @param {!import('olcs/core/VectorLayerConterpart.js').OlFeatureToCesiumContext} context\n   * @return {Cesium.Primitive}\n   * @api\n   */\n  convert(layer, view, feature, context) {\n    const proj = view.getProjection();\n    const resolution = view.getResolution();\n\n    if (resolution == undefined || !proj) {\n      return null;\n    }\n\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = layer.getStyleFunction();\n\n    const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n    if (!styles || !styles.length) {\n      // only 'render' features with a style\n      return null;\n    }\n\n    context.projection = proj;\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n      if (!primitives) {\n        primitives = prims;\n      } else if (prims) {\n        let i = 0, prim;\n        while ((prim = prims.get(i))) {\n          primitives.add(prim);\n          i++;\n        }\n      }\n    }\n    return primitives;\n  }\n}\n\n\nexport default FeatureConverter;\n","/**\n * @module olcs.VectorSynchronizer\n */\nimport olSourceVector from 'ol/source/Vector.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {olcsListen, getUid} from './util.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olLayerVectorTile from 'ol/layer/VectorTile.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nclass VectorSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * Unidirectionally synchronize OpenLayers vector layers to Cesium.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @param {olcs.FeatureConverter=} opt_converter\n   * @extends {olcs.AbstractSynchronizer.<olcs.core.VectorLayerCounterpart>}\n   * @api\n   */\n  constructor(map, scene, opt_converter) {\n    super(map, scene);\n\n    /**\n     * @protected\n     */\n    this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n    /**\n     * @private\n     */\n    this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n    scene.primitives.add(this.csAllPrimitives_);\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(counterpart) {\n    console.assert(counterpart);\n    counterpart.getRootPrimitive()['counterpart'] = counterpart;\n    this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.getRootPrimitive().destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    object.destroy();\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    this.csAllPrimitives_.remove(object.getRootPrimitive());\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    if (destroy) {\n      for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n        this.csAllPrimitives_.get(i)['counterpart'].destroy();\n      }\n    }\n    this.csAllPrimitives_.removeAll();\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * Synchronizes the layer visibility properties\n   * to the given Cesium Primitive.\n   * @param {import('olsc/core.js').LayerWithParents} olLayerWithParents\n   * @param {!Cesium.Primitive} csPrimitive\n   */\n  updateLayerVisibility(olLayerWithParents, csPrimitive) {\n    let visible = true;\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n      const layerVisible = olLayer.getVisible();\n      if (layerVisible !== undefined) {\n        visible &= layerVisible;\n      } else {\n        visible = false;\n      }\n    });\n    csPrimitive.show = visible;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    if (!(olLayer instanceof olLayerVector) || olLayer instanceof olLayerVectorTile) {\n      return null;\n    }\n    console.assert(olLayer instanceof olLayerLayer);\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    if (!source) {\n      return null;\n    }\n\n    console.assert(source instanceof olSourceVector);\n    console.assert(this.view);\n\n    const view = this.view;\n    const featurePrimitiveMap = {};\n    const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n        featurePrimitiveMap);\n    const csPrimitives = counterpart.getRootPrimitive();\n    const olListenKeys = counterpart.olListenKeys;\n\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      olListenKeys.push(olcsListen(olLayerItem, 'change:visible', () => {\n        this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n      }));\n    });\n    this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n    const onAddFeature = (function(feature) {\n      console.assert(\n          (olLayer instanceof olLayerVector) ||\n          (olLayer instanceof olLayerImage)\n      );\n      const context = counterpart.context;\n      const prim = this.converter.convert(olLayer, view, feature, context);\n      if (prim) {\n        featurePrimitiveMap[getUid(feature)] = prim;\n        csPrimitives.add(prim);\n      }\n    }).bind(this);\n\n    const onRemoveFeature = (function(feature) {\n      const id = getUid(feature);\n      const context = counterpart.context;\n      const bbs = context.featureToCesiumMap[id];\n      if (bbs) {\n        delete context.featureToCesiumMap[id];\n        bbs.forEach((bb) => {\n          if (bb instanceof Cesium.Billboard) {\n            context.billboards.remove(bb);\n          }\n        });\n      }\n      const csPrimitive = featurePrimitiveMap[id];\n      delete featurePrimitiveMap[id];\n      if (csPrimitive) {\n        csPrimitives.remove(csPrimitive);\n      }\n    }).bind(this);\n\n    olListenKeys.push(olcsListen(source, 'addfeature', (e) => {\n      console.assert(e.feature);\n      onAddFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'removefeature', (e) => {\n      console.assert(e.feature);\n      onRemoveFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'changefeature', (e) => {\n      const feature = e.feature;\n      console.assert(feature);\n      onRemoveFeature(feature);\n      onAddFeature(feature);\n    }, this));\n\n    return counterpart ? [counterpart] : null;\n  }\n}\n\nexport default VectorSynchronizer;\n","/**\n * @module olcs.SynchronizedOverlay\n */\nimport olOverlay from 'ol/Overlay.js';\nimport {transform} from 'ol/proj.js';\nimport {removeNode, removeChildren} from './util.js';\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\n\n/**\n * Options for SynchronizedOverlay\n * @typedef {Object} SynchronizedOverlayOptions\n * @property {!Cesium.Scene} scene\n * @property {olOverlay} parent\n * @property {!import('olsc/OverlaySynchronizer.js').default} synchronizer\n */\n\n\nclass SynchronizedOverlay extends olOverlay {\n  /**\n   * @param {olcsx.SynchronizedOverlayOptions} options SynchronizedOverlay Options.\n   * @api\n   */\n  constructor(options) {\n    const parent = options.parent;\n    super(parent.getOptions());\n\n    /**\n     * @private\n     * @type {?Function}\n     */\n    this.scenePostRenderListenerRemover_ = null;\n\n    /**\n     * @private\n     * @type {!Cesium.Scene}\n     */\n    this.scene_ = options.scene;\n\n    /**\n     * @private\n     * @type {!olcs.OverlaySynchronizer}\n     */\n    this.synchronizer_ = options.synchronizer;\n\n    /**\n     * @private\n     * @type {!ol.Overlay}\n     */\n    this.parent_ = parent;\n\n    /**\n     * @private\n     * @type {ol.Coordinate|undefined}\n     */\n    this.positionWGS84_ = undefined;\n\n    /**\n     * @private\n     * @type {MutationObserver}\n     */\n    this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n\n    /**\n     * @private\n     * @type {Array.<MutationObserver>}\n     */\n    this.attributeObserver_ = [];\n\n    /**\n     * @private\n     * @type {Array<ol.EventsKey>}\n     */\n    this.listenerKeys_ = [];\n    // synchronize our Overlay with the parent Overlay\n    const setPropertyFromEvent = event => this.setPropertyFromEvent_(event);\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:element', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:offset', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:positioning', setPropertyFromEvent));\n\n    this.setProperties(this.parent_.getProperties());\n\n    this.handleMapChanged();\n    this.handleElementChanged();\n  }\n\n  /**\n   * @param {Node} target\n   * @private\n   */\n  observeTarget_(target) {\n    if (!this.observer_) {\n      // not ready, skip the event (this occurs on construction)\n      return;\n    }\n    this.observer_.disconnect();\n    this.observer_.observe(target, {\n      attributes: false,\n      childList: true,\n      characterData: true,\n      subtree: true\n    });\n    this.attributeObserver_.forEach((observer) => {\n      observer.disconnect();\n    });\n    this.attributeObserver_.length = 0;\n    for (let i = 0; i < target.childNodes.length; i++) {\n      const node = target.childNodes[i];\n      if (node.nodeType === 1) {\n        const observer = new MutationObserver(this.handleElementChanged.bind(this));\n        observer.observe(node, {\n          attributes: true,\n          subtree: true\n        });\n        this.attributeObserver_.push(observer);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {ol.Object.Event} event\n   * @private\n   */\n  setPropertyFromEvent_(event) {\n    if (event.target && event.key) {\n      this.set(event.key, event.target.get(event.key));\n    }\n  }\n\n  /**\n   * Get the scene associated with this overlay.\n   * @see ol.Overlay.prototype.getMap\n   * @return {!Cesium.Scene} The scene that the overlay is part of.\n   * @api\n   */\n  getScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @override\n   */\n  handleMapChanged() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n      removeNode(this.element);\n    }\n    this.scenePostRenderListenerRemover_ = null;\n    const scene = this.getScene();\n    if (scene) {\n      this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  handlePositionChanged() {\n    // transform position to WGS84\n    const position = this.getPosition();\n    if (position) {\n      const sourceProjection = this.parent_.getMap().getView().getProjection();\n      this.positionWGS84_ = transform(position, sourceProjection, 'EPSG:4326');\n    } else {\n      this.positionWGS84_ = undefined;\n    }\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @override\n   */\n  handleElementChanged() {\n    function cloneNode(node, parent) {\n      const clone = node.cloneNode();\n      if (parent) {\n        parent.appendChild(clone);\n      }\n      if (node.nodeType != Node.TEXT_NODE) {\n        clone.addEventListener('click', (event) => {\n          node.dispatchEvent(new MouseEvent('click', event));\n          event.stopPropagation();\n        });\n      }\n      const nodes = node.childNodes;\n      for (let i = 0; i < nodes.length; i++) {\n        if (!nodes[i]) {\n          continue;\n        }\n        cloneNode(nodes[i], clone);\n      }\n      return clone;\n    }\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      if (element.parentNode && element.parentNode.childNodes) {\n        for (const node of element.parentNode.childNodes) {\n          const clonedNode = cloneNode(node, null);\n          this.element.appendChild(clonedNode);\n        }\n      }\n    }\n    if (element.parentNode) {\n      // set new Observer\n      this.observeTarget_(element.parentNode);\n    }\n  }\n\n  /**\n   * @override\n   */\n  updatePixelPosition() {\n    const position = this.positionWGS84_;\n    if (!this.scene_ || !position) {\n      this.setVisible(false);\n      return;\n    }\n    let height = 0;\n    if (position.length === 2) {\n      const globeHeight = this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(position[0], position[1]));\n      if (globeHeight && this.scene_.globe.tilesLoaded) {\n        position[2] = globeHeight;\n      }\n      if (globeHeight) {\n        height = globeHeight;\n      }\n    } else {\n      height = position[2];\n    }\n    const cartesian = Cesium.Cartesian3.fromDegrees(position[0], position[1], height);\n    const camera = this.scene_.camera;\n    const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n    const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n    // check if overlay position is behind the horizon\n    if (!occluder.isPointVisible(cartesian)) {\n      this.setVisible(false);\n      return;\n    }\n    const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n    // check if overlay position is visible from the camera\n    if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n      this.setVisible(false);\n      return;\n    }\n    this.setVisible(true);\n\n    const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n    const pixel = [pixelCartesian.x, pixelCartesian.y];\n    const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * Destroys the overlay, removing all its listeners and elements\n   * @api\n   */\n  destroy() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n    }\n    if (this.observer_) {\n      this.observer_.disconnect();\n    }\n    olObservableUnByKey(this.listenerKeys_);\n    this.listenerKeys_.splice(0);\n    if (this.element.removeNode) {\n      this.element.removeNode(true);\n    } else {\n      this.element.remove();\n    }\n    this.element = null;\n  }\n}\n\nexport default SynchronizedOverlay;\n","/**\n * @module olcs.OverlaySynchronizer\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport {getUid} from './util.js';\n\nclass OverlaySynchronizer {\n  /**\n  * @param {!ol.Map} map\n  * @param {!Cesium.Scene} scene\n  * @constructor\n  * @template T\n  * @api\n  */\n  constructor(map, scene) {\n    /**\n    * @type {!ol.Map}\n    * @protected\n    */\n    this.map = map;\n\n    /**\n    * @type {ol.Collection.<ol.Overlay>}\n    * @private\n    */\n    this.overlays_ = this.map.getOverlays();\n\n    /**\n    * @type {!Cesium.Scene}\n    * @protected\n    */\n    this.scene = scene;\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainerStopEvent_ = document.createElement('DIV');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n    overlayEvents.forEach((event) => {\n      this.overlayContainerStopEvent_.addEventListener(event, evt => evt.stopPropagation());\n    });\n    this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainer_ = document.createElement('DIV');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n    /**\n    * @type {!Object<?,olcs.SynchronizedOverlay>}\n    * @private\n    */\n    this.overlayMap_ = {};\n  }\n\n  /**\n  * Get the element that serves as a container for overlays that don't allow\n  * event propagation. Elements added to this container won't let mousedown and\n  * touchstart events through to the map, so clicks and gestures on an overlay\n  * don't trigger any {@link ol.MapBrowserEvent}.\n  * @return {!Element} The map's overlay container that stops events.\n  */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n  * Get the element that serves as a container for overlays.\n  * @return {!Element} The map's overlay container.\n  */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n  * Destroy all and perform complete synchronization of the overlays.\n  * @api\n  */\n  synchronize() {\n    this.destroyAll();\n    this.addOverlays();\n    this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n    this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  addOverlayFromEvent_(event) {\n    const overlay = /** @type {ol.Overlay} */ (event.element);\n    this.addOverlay(overlay);\n  }\n\n  /**\n  * @api\n  */\n  addOverlays() {\n    this.overlays_.forEach((overlay) => { this.addOverlay(overlay); });\n  }\n\n  /**\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  addOverlay(overlay) {\n    if (!overlay) {\n      return;\n    }\n    const cesiumOverlay = new olcsSynchronizedOverlay({\n      scene: this.scene,\n      synchronizer: this,\n      parent: overlay\n    });\n\n    const overlayId = getUid(overlay).toString();\n    this.overlayMap_[overlayId] = cesiumOverlay;\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  removeOverlayFromEvent_(event) {\n    const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n    this.removeOverlay(removedOverlay);\n  }\n\n  /**\n  * Removes an overlay from the scene\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  removeOverlay(overlay) {\n    const overlayId = getUid(overlay).toString();\n    const csOverlay = this.overlayMap_[overlayId];\n    if (csOverlay) {\n      csOverlay.destroy();\n      delete this.overlayMap_[overlayId];\n    }\n  }\n\n  /**\n  * Destroys all the created Cesium objects.\n  * @protected\n  */\n  destroyAll() {\n    Object.keys(this.overlayMap_).forEach((key) => {\n      const overlay = this.overlayMap_[key];\n      overlay.destroy();\n      delete this.overlayMap_[key];\n    });\n  }\n}\n\n\nexport default OverlaySynchronizer;\n","/**\n * @module olcs.OLCesium\n */\nimport olGeomPoint from 'ol/geom/Point.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\n\n/**\n * @typedef {Object} OLCesiumOptions\n * @property {import('ol/Map.js').default} map The OpenLayers map we want to show on a Cesium scene.\n * @property {Element|string} [target] Target element for the Cesium scene.\n * @property {function(!import('ol/Map.js').default, !Cesium.Scene, !Cesium.DataSourceCollection): Array<import('olcs/AbstractSynchronizer.js').default>}\n *      [createSynchronizers] Callback function which will be called by the {@link olcs.OLCesium}\n *      constructor to create custom synchronizers. Receives an `ol.Map` and a `Cesium.Scene` as arguments,\n *      and needs to return an array of {@link import('olcs/AbstractSynchronizer.js').default}.\n * @property {function(): Cesium.JulianDate} [time] Control the current time used by Cesium.\n * @property {boolean} [stopOpenLayersEventsPropagation] Prevent propagation of mouse/touch events to\n *      OpenLayers when Cesium is active.\n * @property {Cesium.SceneOptions} [sceneOptions] Allows the passing of property value to the\n *      `Cesium.Scene`.\n */\n\n\nclass OLCesium {\n  /**\n   * @param {!OLCesiumOptions} options Options.\n   * @constructor\n   * @api\n   */\n  constructor(options) {\n\n    /**\n     * @type {olcs.AutoRenderLoop}\n     * @private\n     */\n    this.autoRenderLoop_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = options.map;\n\n    /**\n     * @type {!function(): Cesium.JulianDate}\n     * @private\n     */\n    this.time_ = options.time || function() {\n      return Cesium.JulianDate.now();\n    };\n\n    /**\n     * No change of the view projection.\n     * @private\n     */\n    this.to4326Transform_ = getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.resolutionScale_ = 1.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientWidth_ = 0.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientHeight_ = 0.0;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.resolutionScaleChanged_ = true; // force resize\n\n    const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n    /**\n     * @type {!Element}\n     * @private\n     */\n    this.container_ = document.createElement('DIV');\n    const containerAttribute = document.createAttribute('style');\n    containerAttribute.value = `${fillArea}visibility:hidden;`;\n    this.container_.setAttributeNode(containerAttribute);\n\n    let targetElement = options.target || null;\n    if (targetElement) {\n      if (typeof targetElement === 'string') {\n        targetElement = document.getElementById(targetElement);\n      }\n      targetElement.appendChild(this.container_);\n    } else {\n      const seOverlayContainer = this.map_.getViewport().querySelector('.ol-overlaycontainer-stopevent');\n      seOverlayContainer.insertBefore(this.container_, seOverlayContainer.firstChild);\n    }\n\n    /**\n     * Whether the Cesium container is placed over the ol map.\n     * @type {boolean}\n     * @private\n     */\n    this.isOverMap_ = !targetElement;\n\n\n    if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n      const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n      for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n        this.container_.addEventListener(overlayEvents[i], evt => evt.stopPropagation());\n      }\n    }\n\n\n    /**\n     * @type {!HTMLCanvasElement}\n     * @private\n     */\n    this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n    const canvasAttribute = document.createAttribute('style');\n    canvasAttribute.value = fillArea;\n    this.canvas_.setAttributeNode(canvasAttribute);\n\n    if (olcsUtil.supportsImageRenderingPixelated()) {\n      // non standard CSS4\n      this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n    }\n\n    this.canvas_.oncontextmenu = function() { return false; };\n    this.canvas_.onselectstart = function() { return false; };\n\n    this.container_.appendChild(this.canvas_);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.enabled_ = false;\n\n    /**\n     * @type {!Array.<ol.interaction.Interaction>}\n     * @private\n     */\n    this.pausedInteractions_ = [];\n\n    /**\n     * @type {?ol.layer.Group}\n     * @private\n     */\n    this.hiddenRootGroup_ = null;\n\n    const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n      /** @type {Cesium.SceneOptions} */ ({});\n    sceneOptions.canvas = this.canvas_;\n    sceneOptions.scene3DOnly = true;\n\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = new Cesium.Scene(sceneOptions);\n\n    const sscc = this.scene_.screenSpaceCameraController;\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.SHIFT\n    });\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.ALT\n    });\n\n    sscc.enableLook = false;\n\n    this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n    /**\n     * @type {!olcs.Camera}\n     * @private\n     */\n    this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n    /**\n     * @type {!Cesium.Globe}\n     * @private\n     */\n    this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n    this.globe_.baseColor = Cesium.Color.WHITE;\n    this.scene_.globe = this.globe_;\n    this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n    // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n    // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n    const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n      url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n      rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n    });\n    this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n    this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n    this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n      scene: this.scene_,\n      dataSourceCollection: this.dataSourceCollection_\n    });\n\n    const synchronizers = options.createSynchronizers ?\n      options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n        new olcsRasterSynchronizer(this.map_, this.scene_),\n        new olcsVectorSynchronizer(this.map_, this.scene_),\n        new olcsOverlaySynchronizer(this.map_, this.scene_)\n      ];\n\n    // Assures correct canvas size after initialisation\n    this.handleResize_();\n\n    for (let i = synchronizers.length - 1; i >= 0; --i) {\n      synchronizers[i].synchronize();\n    }\n\n    /**\n     * Time of the last rendered frame, as returned by `performance.now()`.\n     * @type {number}\n     * @private\n     */\n    this.lastFrameTime_ = 0;\n\n    /**\n     * The identifier returned by `requestAnimationFrame`.\n     * @type {number|undefined}\n     * @private\n     */\n    this.renderId_ = undefined;\n\n    /**\n     * Target frame rate for the render loop.\n     * @type {number}\n     * @private\n     */\n    this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n    /**\n     * If the Cesium render loop is being blocked.\n     * @type {boolean}\n     * @private\n     */\n    this.blockCesiumRendering_ = false;\n\n    /**\n     * If the warmup routine is active.\n     * @type {boolean}\n     * @private\n     */\n    this.warmingUp_ = false;\n\n    /**\n     * @type {ol.Feature}\n     * @private\n     */\n    this.trackedFeature_ = null;\n\n    /**\n     * @type {Cesium.Entity}\n     * @private\n     */\n    this.trackedEntity_ = null;\n\n    /**\n     * @type {Cesium.EntityView}\n     * @private\n     */\n    this.entityView_ = null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.needTrackedEntityUpdate_ = false;\n\n    /**\n     * @type {!Cesium.BoundingSphere}\n     */\n    this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n    const eventHelper = new Cesium.EventHelper();\n    eventHelper.add(this.scene_.postRender, OLCesium.prototype.updateTrackedEntity_, this);\n\n    // Cesium has a mechanism to prevent the camera to go under the terrain.\n    // Unfortunately, it is only active when all the terrain has been loaded, which:\n    // - does not prevent the camera to sink under terrain anymore;\n    // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n    // The property below enables a workaround found in the Camptocamp Cesium fork.\n    // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n    Cesium.Camera.enableSuspendTerrainAdjustment = false;\n  }\n\n  /**\n   * Render the Cesium scene.\n   * @private\n   */\n  render_() {\n    // if a call to `requestAnimationFrame` is pending, cancel it\n    if (this.renderId_ !== undefined) {\n      cancelAnimationFrame(this.renderId_);\n      this.renderId_ = undefined;\n    }\n\n    // only render if Cesium is enabled/warming and rendering hasn't been blocked\n    if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n      this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n    }\n  }\n\n  /**\n   * Callback for `requestAnimationFrame`.\n   * @param {number} frameTime The frame time, from `performance.now()`.\n   * @private\n   */\n  onAnimationFrame_(frameTime) {\n    this.renderId_ = undefined;\n\n    // check if a frame was rendered within the target frame rate\n    const interval = 1000.0 / this.targetFrameRate_;\n    const delta = frameTime - this.lastFrameTime_;\n    if (delta < interval) {\n      // too soon, don't render yet\n      this.render_();\n      return;\n    }\n\n    // time to render a frame, save the time\n    this.lastFrameTime_ = frameTime;\n\n    const julianDate = this.time_();\n    this.scene_.initializeFrame();\n    this.handleResize_();\n    this.dataSourceDisplay_.update(julianDate);\n\n    // Update tracked entity\n    if (this.entityView_) {\n      const trackedEntity = this.trackedEntity_;\n      const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n      if (trackedState === Cesium.BoundingSphereState.DONE) {\n        this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n        this.entityView_.update(julianDate, this.boundingSphereScratch_);\n      }\n    }\n\n    this.scene_.render(julianDate);\n    this.camera_.checkCameraChange();\n\n    // request the next render call after this one completes to ensure the browser doesn't get backed up\n    this.render_();\n  }\n\n  /**\n   * @private\n   */\n  updateTrackedEntity_() {\n    if (!this.needTrackedEntityUpdate_) {\n      return;\n    }\n\n    const trackedEntity = this.trackedEntity_;\n    const scene = this.scene_;\n\n    const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (state === Cesium.BoundingSphereState.PENDING) {\n      return;\n    }\n\n    scene.screenSpaceCameraController.enableTilt = false;\n\n    const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n    if (bs) {\n      bs.radius = 1;\n    }\n    this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n    this.entityView_.update(this.time_(), bs);\n    this.needTrackedEntityUpdate_ = false;\n  }\n\n  /**\n   * @private\n   */\n  handleResize_() {\n    let width = this.canvas_.clientWidth;\n    let height = this.canvas_.clientHeight;\n\n    if (width === 0 | height === 0) {\n      // The canvas DOM element is not ready yet.\n      return;\n    }\n\n    if (width === this.canvasClientWidth_ &&\n        height === this.canvasClientHeight_ &&\n        !this.resolutionScaleChanged_) {\n      return;\n    }\n\n    let resolutionScale = this.resolutionScale_;\n    if (!olcsUtil.supportsImageRenderingPixelated()) {\n      resolutionScale *= window.devicePixelRatio || 1.0;\n    }\n    this.resolutionScaleChanged_ = false;\n\n    this.canvasClientWidth_ = width;\n    this.canvasClientHeight_ = height;\n\n    width *= resolutionScale;\n    height *= resolutionScale;\n\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n    this.scene_.camera.frustum.aspectRatio = width / height;\n  }\n\n  /**\n   * @return {!olcs.Camera}\n   * @api\n   */\n  getCamera() {\n    return this.camera_;\n  }\n\n  /**\n   * @return {!ol.Map}\n   * @api\n   */\n  getOlMap() {\n    return this.map_;\n  }\n\n  /**\n   * @return {!ol.View}\n   * @api\n   */\n  getOlView() {\n    const view = this.map_.getView();\n    console.assert(view);\n    return view;\n  }\n\n  /**\n   * @return {!Cesium.Scene}\n   * @api\n   */\n  getCesiumScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceCollection}\n   * @api\n   */\n  getDataSources() {\n    return this.dataSourceCollection_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceDisplay}\n   * @api\n   */\n  getDataSourceDisplay() {\n    return this.dataSourceDisplay_;\n  }\n\n  /**\n   * @return {boolean}\n   * @api\n   */\n  getEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * Enables/disables the Cesium.\n   * This modifies the visibility style of the container element.\n   * @param {boolean} enable\n   * @api\n   */\n  setEnabled(enable) {\n    if (this.enabled_ === enable) {\n      return;\n    }\n    this.enabled_ = enable;\n\n    // some Cesium operations are operating with canvas.clientWidth,\n    // so we can't remove it from DOM or even make display:none;\n    this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n    let interactions;\n    if (this.enabled_) {\n      this.throwOnUnitializedMap_();\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        interactions.forEach((el, i, arr) => {\n          this.pausedInteractions_.push(el);\n        });\n        interactions.clear();\n\n        this.map_.addInteraction = interaction => this.pausedInteractions_.push(interaction);\n        this.map_.removeInteraction = interaction =>\n          this.pausedInteractions_ = this.pausedInteractions_.filter(i => i !== interaction);\n\n        const rootGroup = this.map_.getLayerGroup();\n        if (rootGroup.getVisible()) {\n          this.hiddenRootGroup_ = rootGroup;\n          this.hiddenRootGroup_.setVisible(false);\n        }\n\n        this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n      }\n\n      this.camera_.readFromView();\n      this.render_();\n    } else {\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        this.pausedInteractions_.forEach((interaction) => {\n          interactions.push(interaction);\n        });\n        this.pausedInteractions_.length = 0;\n\n        this.map_.addInteraction = interaction => this.map_.getInteractions().push(interaction);\n        this.map_.removeInteraction = interaction => this.map_.getInteractions().remove(interaction);\n\n        this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n        if (this.hiddenRootGroup_) {\n          this.hiddenRootGroup_.setVisible(true);\n          this.hiddenRootGroup_ = null;\n        }\n      }\n\n      this.camera_.updateView();\n    }\n  }\n\n  /**\n   * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n   * @param {number} height Target height of the camera\n   * @param {number} timeout Milliseconds after which the warming will stop\n   * @api\n  */\n  warmUp(height, timeout) {\n    if (this.enabled_) {\n      // already enabled\n      return;\n    }\n    this.throwOnUnitializedMap_();\n    this.camera_.readFromView();\n    const ellipsoid = this.globe_.ellipsoid;\n    const csCamera = this.scene_.camera;\n    const position = ellipsoid.cartesianToCartographic(csCamera.position);\n    if (position.height < height) {\n      position.height = height;\n      csCamera.position = ellipsoid.cartographicToCartesian(position);\n    }\n\n    this.warmingUp_ = true;\n    this.render_();\n\n    setTimeout(() => {\n      this.warmingUp_ = false;\n    }, timeout);\n  }\n\n  /**\n   * Block Cesium rendering to save resources.\n   * @param {boolean} block True to block.\n   * @api\n  */\n  setBlockCesiumRendering(block) {\n    if (this.blockCesiumRendering_ !== block) {\n      this.blockCesiumRendering_ = block;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Render the globe only when necessary in order to save resources.\n   * Experimental.\n   * @api\n   */\n  enableAutoRenderLoop() {\n    if (!this.autoRenderLoop_) {\n      this.autoRenderLoop_ = new olcsAutoRenderLoop(this);\n    }\n  }\n\n  /**\n   * Get the autorender loop.\n   * @return {?olcs.AutoRenderLoop}\n   * @api\n  */\n  getAutoRenderLoop() {\n    return this.autoRenderLoop_;\n  }\n\n  /**\n   * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n   * clientWidth and clientHeight which are the dimension on the screen and\n   * width and height which are the dimensions of the drawing buffer.\n   *\n   * By using a resolution scale lower than 1.0, it is possible to render the\n   * globe in a buffer smaller than the canvas client dimensions and improve\n   * performance, at the cost of quality.\n   *\n   * Pixel ratio should also be taken into account; by default, a device with\n   * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n   * surface.\n   *\n   * @param {number} value\n   * @this {olcs.OLCesium}\n   * @api\n   */\n  setResolutionScale(value) {\n    value = Math.max(0, value);\n    if (value !== this.resolutionScale_) {\n      this.resolutionScale_ = Math.max(0, value);\n      this.resolutionScaleChanged_ = true;\n      if (this.autoRenderLoop_) {\n        this.autoRenderLoop_.restartRenderLoop();\n      }\n    }\n  }\n\n  /**\n   * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n   * to render as quickly as possible.\n   * @param {number} value The frame rate, in frames per second.\n   * @api\n   */\n  setTargetFrameRate(value) {\n    if (this.targetFrameRate_ !== value) {\n      this.targetFrameRate_ = value;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Check if OpenLayers map is not properly initialized.\n   * @private\n   */\n  throwOnUnitializedMap_() {\n    const map = this.map_;\n    const view = map.getView();\n    const center = view.getCenter();\n    if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n      throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n    }\n  }\n\n  /**\n   * @type {ol.Feature}\n   */\n  get trackedFeature() {\n    return this.trackedFeature_;\n  }\n\n  /**\n   * @param {ol.Feature} feature\n   */\n  set trackedFeature(feature) {\n    if (this.trackedFeature_ !== feature) {\n\n      const scene = this.scene_;\n\n      //Stop tracking\n      if (!feature || !feature.getGeometry()) {\n        this.needTrackedEntityUpdate_ = false;\n        scene.screenSpaceCameraController.enableTilt = true;\n\n        if (this.trackedEntity_) {\n          this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n        }\n        this.trackedEntity_ = null;\n        this.trackedFeature_ = null;\n        this.entityView_ = null;\n        scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n        return;\n      }\n\n      this.trackedFeature_ = feature;\n\n      //We can't start tracking immediately, so we set a flag and start tracking\n      //when the bounding sphere is ready (most likely next frame).\n      this.needTrackedEntityUpdate_ = true;\n\n      const to4326Transform = this.to4326Transform_;\n      const toCesiumPosition = function() {\n        const geometry = feature.getGeometry();\n        console.assert(geometry instanceof olGeomPoint);\n        const coo = geometry.getCoordinates();\n        const coo4326 = to4326Transform(coo, undefined, coo.length);\n        return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n      };\n\n      // Create an invisible point entity for tracking.\n      // It is independant from the primitive/geometry created by the vector synchronizer.\n      const options = {\n        'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n        'point': {\n          'pixelSize': 1,\n          'color': Cesium.Color.TRANSPARENT\n        }\n      };\n\n      this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n    }\n  }\n}\n\nexport default OLCesium;\n","/**\n * @module ol/style/Style\n */\nimport { assert } from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>)} StyleFunction\n */\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n *\n * @api\n */\nvar Style = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Style options.\n     */\n    function Style(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n         */\n        this.geometry_ = null;\n        /**\n         * @private\n         * @type {!GeometryFunction}\n         */\n        this.geometryFunction_ = defaultGeometryFunction;\n        if (options.geometry !== undefined) {\n            this.setGeometry(options.geometry);\n        }\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n           * @private\n           * @type {import(\"./Image.js\").default}\n           */\n        this.image_ = options.image !== undefined ? options.image : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"./Text.js\").default}\n         */\n        this.text_ = options.text !== undefined ? options.text : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zIndex_ = options.zIndex;\n    }\n    /**\n     * Clones the style.\n     * @return {Style} The cloned style.\n     * @api\n     */\n    Style.prototype.clone = function () {\n        var geometry = this.getGeometry();\n        if (geometry && typeof geometry === 'object') {\n            geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n        }\n        return new Style({\n            geometry: geometry,\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            image: this.getImage() ? this.getImage().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            text: this.getText() ? this.getText().clone() : undefined,\n            zIndex: this.getZIndex()\n        });\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setRenderer} or the `renderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n     * and `image` options of the style will be ignored.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setRenderer = function (renderer) {\n        this.renderer_ = renderer;\n    };\n    /**\n     * Get the geometry to be rendered.\n     * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     * Feature property or geometry or function that returns the geometry that will\n     * be rendered with this style.\n     * @api\n     */\n    Style.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    /**\n     * Get the function used to generate a geometry for rendering.\n     * @return {!GeometryFunction} Function that is called with a feature\n     * and returns the geometry to render instead of the feature's geometry.\n     * @api\n     */\n    Style.prototype.getGeometryFunction = function () {\n        return this.geometryFunction_;\n    };\n    /**\n     * Get the fill style.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Style.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Style.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Get the image style.\n     * @return {import(\"./Image.js\").default} Image style.\n     * @api\n     */\n    Style.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Set the image style.\n     * @param {import(\"./Image.js\").default} image Image style.\n     * @api\n     */\n    Style.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Get the stroke style.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Style.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Style.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Get the text style.\n     * @return {import(\"./Text.js\").default} Text style.\n     * @api\n     */\n    Style.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Set the text style.\n     * @param {import(\"./Text.js\").default} text Text style.\n     * @api\n     */\n    Style.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Get the z-index for the style.\n     * @return {number|undefined} ZIndex.\n     * @api\n     */\n    Style.prototype.getZIndex = function () {\n        return this.zIndex_;\n    };\n    /**\n     * Set a geometry that is rendered instead of the feature's geometry.\n     *\n     * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n     *     Feature property or geometry or function returning a geometry to render\n     *     for this style.\n     * @api\n     */\n    Style.prototype.setGeometry = function (geometry) {\n        if (typeof geometry === 'function') {\n            this.geometryFunction_ = geometry;\n        }\n        else if (typeof geometry === 'string') {\n            this.geometryFunction_ = function (feature) {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry)));\n            };\n        }\n        else if (!geometry) {\n            this.geometryFunction_ = defaultGeometryFunction;\n        }\n        else if (geometry !== undefined) {\n            this.geometryFunction_ = function () {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (geometry));\n            };\n        }\n        this.geometry_ = geometry;\n    };\n    /**\n     * Set the z-index.\n     *\n     * @param {number|undefined} zIndex ZIndex.\n     * @api\n     */\n    Style.prototype.setZIndex = function (zIndex) {\n        this.zIndex_ = zIndex;\n    };\n    return Style;\n}());\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n    var styleFunction;\n    if (typeof obj === 'function') {\n        styleFunction = obj;\n    }\n    else {\n        /**\n         * @type {Array<Style>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof /** @type {?} */ (obj).getZIndex === 'function', 41); // Expected an `Style` or an array of `Style`\n            var style = /** @type {Style} */ (obj);\n            styles_1 = [style];\n        }\n        styleFunction = function () {\n            return styles_1;\n        };\n    }\n    return styleFunction;\n}\n/**\n * @type {Array<Style>}\n */\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n    // We don't use an immediately-invoked function\n    // and a closure so we don't get an error at script evaluation time in\n    // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n    // canvas.getContext('2d') at construction time, which will cause an.error\n    // in such browsers.)\n    if (!defaultStyles) {\n        var fill = new Fill({\n            color: 'rgba(255,255,255,0.4)'\n        });\n        var stroke = new Stroke({\n            color: '#3399CC',\n            width: 1.25\n        });\n        defaultStyles = [\n            new Style({\n                image: new CircleStyle({\n                    fill: fill,\n                    stroke: stroke,\n                    radius: 5\n                }),\n                fill: fill,\n                stroke: stroke\n            })\n        ];\n    }\n    return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n    /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n    var styles = {};\n    var white = [255, 255, 255, 1];\n    var blue = [0, 153, 255, 1];\n    var width = 3;\n    styles[GeometryType.POLYGON] = [\n        new Style({\n            fill: new Fill({\n                color: [255, 255, 255, 0.5]\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_POLYGON] =\n        styles[GeometryType.POLYGON];\n    styles[GeometryType.LINE_STRING] = [\n        new Style({\n            stroke: new Stroke({\n                color: white,\n                width: width + 2\n            })\n        }),\n        new Style({\n            stroke: new Stroke({\n                color: blue,\n                width: width\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_LINE_STRING] =\n        styles[GeometryType.LINE_STRING];\n    styles[GeometryType.CIRCLE] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n    styles[GeometryType.POINT] = [\n        new Style({\n            image: new CircleStyle({\n                radius: width * 2,\n                fill: new Fill({\n                    color: blue\n                }),\n                stroke: new Stroke({\n                    color: white,\n                    width: width / 2\n                })\n            }),\n            zIndex: Infinity\n        })\n    ];\n    styles[GeometryType.MULTI_POINT] =\n        styles[GeometryType.POINT];\n    styles[GeometryType.GEOMETRY_COLLECTION] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n    return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n    return feature.getGeometry();\n}\nexport default Style;\n//# sourceMappingURL=Style.js.map","/**\n * @module ol/style/Stroke\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `undefined` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Stroke(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n        /**\n         * @private\n         * @type {CanvasLineCap|undefined}\n         */\n        this.lineCap_ = options.lineCap;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.lineDashOffset_ = options.lineDashOffset;\n        /**\n         * @private\n         * @type {CanvasLineJoin|undefined}\n         */\n        this.lineJoin_ = options.lineJoin;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.miterLimit_ = options.miterLimit;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.width_ = options.width;\n    }\n    /**\n     * Clones the style.\n     * @return {Stroke} The cloned style.\n     * @api\n     */\n    Stroke.prototype.clone = function () {\n        var color = this.getColor();\n        return new Stroke({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n            lineCap: this.getLineCap(),\n            lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n            lineDashOffset: this.getLineDashOffset(),\n            lineJoin: this.getLineJoin(),\n            miterLimit: this.getMiterLimit(),\n            width: this.getWidth()\n        });\n    };\n    /**\n     * Get the stroke color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Stroke.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the line cap type for the stroke.\n     * @return {CanvasLineCap|undefined} Line cap.\n     * @api\n     */\n    Stroke.prototype.getLineCap = function () {\n        return this.lineCap_;\n    };\n    /**\n     * Get the line dash style for the stroke.\n     * @return {Array<number>} Line dash.\n     * @api\n     */\n    Stroke.prototype.getLineDash = function () {\n        return this.lineDash_;\n    };\n    /**\n     * Get the line dash offset for the stroke.\n     * @return {number|undefined} Line dash offset.\n     * @api\n     */\n    Stroke.prototype.getLineDashOffset = function () {\n        return this.lineDashOffset_;\n    };\n    /**\n     * Get the line join type for the stroke.\n     * @return {CanvasLineJoin|undefined} Line join.\n     * @api\n     */\n    Stroke.prototype.getLineJoin = function () {\n        return this.lineJoin_;\n    };\n    /**\n     * Get the miter limit for the stroke.\n     * @return {number|undefined} Miter limit.\n     * @api\n     */\n    Stroke.prototype.getMiterLimit = function () {\n        return this.miterLimit_;\n    };\n    /**\n     * Get the stroke width.\n     * @return {number|undefined} Width.\n     * @api\n     */\n    Stroke.prototype.getWidth = function () {\n        return this.width_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Stroke.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    /**\n     * Set the line cap.\n     *\n     * @param {CanvasLineCap|undefined} lineCap Line cap.\n     * @api\n     */\n    Stroke.prototype.setLineCap = function (lineCap) {\n        this.lineCap_ = lineCap;\n    };\n    /**\n     * Set the line dash.\n     *\n     * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n     * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n     * property will have no visual effect in these browsers.\n     *\n     * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n     *\n     * @param {Array<number>} lineDash Line dash.\n     * @api\n     */\n    Stroke.prototype.setLineDash = function (lineDash) {\n        this.lineDash_ = lineDash;\n    };\n    /**\n     * Set the line dash offset.\n     *\n     * @param {number|undefined} lineDashOffset Line dash offset.\n     * @api\n     */\n    Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n        this.lineDashOffset_ = lineDashOffset;\n    };\n    /**\n     * Set the line join.\n     *\n     * @param {CanvasLineJoin|undefined} lineJoin Line join.\n     * @api\n     */\n    Stroke.prototype.setLineJoin = function (lineJoin) {\n        this.lineJoin_ = lineJoin;\n    };\n    /**\n     * Set the miter limit.\n     *\n     * @param {number|undefined} miterLimit Miter limit.\n     * @api\n     */\n    Stroke.prototype.setMiterLimit = function (miterLimit) {\n        this.miterLimit_ = miterLimit;\n    };\n    /**\n     * Set the width.\n     *\n     * @param {number|undefined} width Width.\n     * @api\n     */\n    Stroke.prototype.setWidth = function (width) {\n        this.width_ = width;\n    };\n    return Stroke;\n}());\nexport default Stroke;\n//# sourceMappingURL=Stroke.js.map","/**\n * @module ol/dom\n */\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n    var canvas = document.createElement('canvas');\n    if (opt_width) {\n        canvas.width = opt_width;\n    }\n    if (opt_height) {\n        canvas.height = opt_height;\n    }\n    return canvas.getContext('2d');\n}\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n    var width = element.offsetWidth;\n    var style = getComputedStyle(element);\n    width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n    return width;\n}\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n    var height = element.offsetHeight;\n    var style = getComputedStyle(element);\n    height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n    return height;\n}\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n    var parent = oldNode.parentNode;\n    if (parent) {\n        parent.replaceChild(newNode, oldNode);\n    }\n}\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n}\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n    var oldChildren = node.childNodes;\n    for (var i = 0; true; ++i) {\n        var oldChild = oldChildren[i];\n        var newChild = children[i];\n        // check if our work is done\n        if (!oldChild && !newChild) {\n            break;\n        }\n        // check if children match\n        if (oldChild === newChild) {\n            continue;\n        }\n        // check if a new child needs to be added\n        if (!oldChild) {\n            node.appendChild(newChild);\n            continue;\n        }\n        // check if an old child needs to be removed\n        if (!newChild) {\n            node.removeChild(oldChild);\n            --i;\n            continue;\n        }\n        // reorder\n        node.insertBefore(newChild, oldChild);\n    }\n}\n//# sourceMappingURL=dom.js.map","/**\n * @module ol/render/canvas/BuilderType\n */\n/**\n * @enum {string}\n */\nexport default {\n    CIRCLE: 'Circle',\n    DEFAULT: 'Default',\n    IMAGE: 'Image',\n    LINE_STRING: 'LineString',\n    POLYGON: 'Polygon',\n    TEXT: 'Text'\n};\n//# sourceMappingURL=BuilderType.js.map","/**\n * @module ol/functions\n */\nimport { equals as arrayEquals } from './array.js';\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n    return true;\n}\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n    return false;\n}\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() { }\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n    var called = false;\n    /** @type ReturnType */\n    var lastResult;\n    /** @type Array<any> */\n    var lastArgs;\n    var lastThis;\n    return function () {\n        var nextArgs = Array.prototype.slice.call(arguments);\n        if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n            called = true;\n            lastThis = this;\n            lastArgs = nextArgs;\n            lastResult = fn.apply(this, arguments);\n        }\n        return lastResult;\n    };\n}\n//# sourceMappingURL=functions.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport { getUid } from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport { assign } from './obj.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>=} opt_values An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {!Object<string, *>}\n         */\n        _this.values_ = {};\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return Object.keys(this.values_);\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return assign({}, this.values_);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = getChangeEventType(key);\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean=} opt_silent Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        if (opt_silent) {\n            this.values_[key] = value;\n        }\n        else {\n            var oldValue = this.values_[key];\n            this.values_[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean=} opt_silent Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean=} opt_silent Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\n/**\n * @type {Object<string, string>}\n */\nvar changeEventTypeCache = {};\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n    return changeEventTypeCache.hasOwnProperty(key) ?\n        changeEventTypeCache[key] :\n        (changeEventTypeCache[key] = 'change:' + key);\n}\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","/**\n * @module ol/style/Fill\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Fill(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n    }\n    /**\n     * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n     * @return {Fill} The cloned style.\n     * @api\n     */\n    Fill.prototype.clone = function () {\n        var color = this.getColor();\n        return new Fill({\n            color: Array.isArray(color) ? color.slice() : color || undefined\n        });\n    };\n    /**\n     * Get the fill color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Fill.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Fill.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    return Fill;\n}());\nexport default Fill;\n//# sourceMappingURL=Fill.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, { getChangeEventType } from './Object.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} Geometry\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|Object<string, *>=} opt_geometryOrProperties\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addEventListener(getChangeEventType(_this.geometryName_), _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = new Feature(this.getProperties());\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(geometry.clone());\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return (\n        /** @type {Geometry|undefined} */ (this.get(this.geometryName_)));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature.  This can be a single style object, an array\n     * of styles, or a function that takes a resolution and returns an array of\n     * styles. If it is `null` the feature has no style (a `null` style).\n     * @param {import(\"./style/Style.js\").StyleLike} style Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (style) {\n        this.style_ = style;\n        this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof /** @type {?} */ (obj).getZIndex === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n    /**\n     * A true single click with no dragging and no double click. Note that this\n     * event is delayed by 250 ms to ensure that it is not a double click.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n     * @api\n     */\n    SINGLECLICK: 'singleclick',\n    /**\n     * A click with no dragging. A double click will fire two of this.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n     * @api\n     */\n    CLICK: EventType.CLICK,\n    /**\n     * A true double click, with no dragging.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n     * @api\n     */\n    DBLCLICK: EventType.DBLCLICK,\n    /**\n     * Triggered when a pointer is dragged.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n     * @api\n     */\n    POINTERDRAG: 'pointerdrag',\n    /**\n     * Triggered when a pointer is moved. Note that on touch devices this is\n     * triggered when the map is panned, so is not the same as mousemove.\n     * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n     * @api\n     */\n    POINTERMOVE: 'pointermove',\n    POINTERDOWN: 'pointerdown',\n    POINTERUP: 'pointerup',\n    POINTEROVER: 'pointerover',\n    POINTEROUT: 'pointerout',\n    POINTERENTER: 'pointerenter',\n    POINTERLEAVE: 'pointerleave',\n    POINTERCANCEL: 'pointercancel'\n};\n//# sourceMappingURL=MapBrowserEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Point\n */\nimport { createOrUpdateFromCoordinate, containsXY } from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { deflateCoordinate } from './flat/deflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     */\n    function Point(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        _this.setCoordinates(coordinates, opt_layout);\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Point} Clone.\n     * @override\n     * @api\n     */\n    Point.prototype.clone = function () {\n        var point = new Point(this.flatCoordinates.slice(), this.layout);\n        return point;\n    };\n    /**\n     * @inheritDoc\n     */\n    Point.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        var flatCoordinates = this.flatCoordinates;\n        var squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n        if (squaredDistance < minSquaredDistance) {\n            var stride = this.stride;\n            for (var i = 0; i < stride; ++i) {\n                closestPoint[i] = flatCoordinates[i];\n            }\n            closestPoint.length = stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    };\n    /**\n     * Return the coordinate of the point.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n     * @override\n     * @api\n     */\n    Point.prototype.getCoordinates = function () {\n        return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n    };\n    /**\n     * @inheritDoc\n     */\n    Point.prototype.computeExtent = function (extent) {\n        return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Point.prototype.getType = function () {\n        return GeometryType.POINT;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Point.prototype.intersectsExtent = function (extent) {\n        return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Point.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 0);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinate(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return Point;\n}(SimpleGeometry));\nexport default Point;\n//# sourceMappingURL=Point.js.map","/**\n * @module ol/ViewHint\n */\n/**\n * @enum {number}\n */\nexport default {\n    ANIMATING: 0,\n    INTERACTING: 1\n};\n//# sourceMappingURL=ViewHint.js.map","/**\n * @module ol/layer/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    OPACITY: 'opacity',\n    VISIBLE: 'visible',\n    EXTENT: 'extent',\n    Z_INDEX: 'zIndex',\n    MAX_RESOLUTION: 'maxResolution',\n    MIN_RESOLUTION: 'minResolution',\n    MAX_ZOOM: 'maxZoom',\n    MIN_ZOOM: 'minZoom',\n    SOURCE: 'source'\n};\n//# sourceMappingURL=Property.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Control\n */\nimport { VOID } from '../functions.js';\nimport MapEventType from '../MapEventType.js';\nimport BaseObject from '../Object.js';\nimport { removeNode } from '../dom.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nvar Control = /** @class */ (function (_super) {\n    __extends(Control, _super);\n    /**\n     * @param {Options} options Control options.\n     */\n    function Control(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = options.element ? options.element : null;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.target_ = null;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        /**\n         * @protected\n         * @type {!Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.listenerKeys = [];\n        /**\n         * @type {function(import(\"../MapEvent.js\").default): void}\n         */\n        _this.render = options.render ? options.render : VOID;\n        if (options.target) {\n            _this.setTarget(options.target);\n        }\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    Control.prototype.disposeInternal = function () {\n        removeNode(this.element);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Get the map associated with this control.\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     * @api\n     */\n    Control.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Remove the control from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Control.prototype.setMap = function (map) {\n        if (this.map_) {\n            removeNode(this.element);\n        }\n        for (var i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n            unlistenByKey(this.listenerKeys[i]);\n        }\n        this.listenerKeys.length = 0;\n        this.map_ = map;\n        if (this.map_) {\n            var target = this.target_ ?\n                this.target_ : map.getOverlayContainerStopEvent();\n            target.appendChild(this.element);\n            if (this.render !== VOID) {\n                this.listenerKeys.push(listen(map, MapEventType.POSTRENDER, this.render, this));\n            }\n            map.render();\n        }\n    };\n    /**\n     * This function is used to set a target element for the control. It has no\n     * effect if it is called after the control has been added to the map (i.e.\n     * after `setMap` is called on the control). If no `target` is set in the\n     * options passed to the control constructor and if `setTarget` is not called\n     * then the control is added to the map's overlay container.\n     * @param {HTMLElement|string} target Target.\n     * @api\n     */\n    Control.prototype.setTarget = function (target) {\n        this.target_ = typeof target === 'string' ?\n            document.getElementById(target) :\n            target;\n    };\n    return Control;\n}(BaseObject));\nexport default Control;\n//# sourceMappingURL=Control.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Attribution\n */\nimport { equals } from '../array.js';\nimport Control from './Control.js';\nimport { CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED } from '../css.js';\nimport { removeChildren, replaceNode } from '../dom.js';\nimport EventType from '../events/EventType.js';\nimport { inView } from '../layer/Layer.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [collapseLabel=''] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nvar Attribution = /** @class */ (function (_super) {\n    __extends(Attribution, _super);\n    /**\n     * @param {Options=} opt_options Attribution options.\n     */\n    function Attribution(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render || render,\n            target: options.target\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.ulElement_ = document.createElement('ul');\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overrideCollapsible_ = options.collapsible !== undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.collapsible_ = options.collapsible !== undefined ?\n            options.collapsible : true;\n        if (!_this.collapsible_) {\n            _this.collapsed_ = false;\n        }\n        var className = options.className !== undefined ? options.className : 'ol-attribution';\n        var tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n        var collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n        if (typeof collapseLabel === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.collapseLabel_ = document.createElement('span');\n            _this.collapseLabel_.textContent = collapseLabel;\n        }\n        else {\n            _this.collapseLabel_ = collapseLabel;\n        }\n        var label = options.label !== undefined ? options.label : 'i';\n        if (typeof label === 'string') {\n            /**\n             * @private\n             * @type {HTMLElement}\n             */\n            _this.label_ = document.createElement('span');\n            _this.label_.textContent = label;\n        }\n        else {\n            _this.label_ = label;\n        }\n        var activeLabel = (_this.collapsible_ && !_this.collapsed_) ?\n            _this.collapseLabel_ : _this.label_;\n        var button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.title = tipLabel;\n        button.appendChild(activeLabel);\n        button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n            (_this.collapsed_ && _this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n            (_this.collapsible_ ? '' : ' ol-uncollapsible');\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(_this.ulElement_);\n        element.appendChild(button);\n        /**\n         * A list of currently rendered resolutions.\n         * @type {Array<string>}\n         * @private\n         */\n        _this.renderedAttributions_ = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = true;\n        return _this;\n    }\n    /**\n     * Collect a list of visible attributions and set the collapsible state.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {Array<string>} Attributions.\n     * @private\n     */\n    Attribution.prototype.collectSourceAttributions_ = function (frameState) {\n        /**\n         * Used to determine if an attribution already exists.\n         * @type {!Object<string, boolean>}\n         */\n        var lookup = {};\n        /**\n         * A list of visible attributions.\n         * @type {Array<string>}\n         */\n        var visibleAttributions = [];\n        var layerStatesArray = frameState.layerStatesArray;\n        for (var i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n            var layerState = layerStatesArray[i];\n            if (!inView(layerState, frameState.viewState)) {\n                continue;\n            }\n            var source = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer).getSource();\n            if (!source) {\n                continue;\n            }\n            var attributionGetter = source.getAttributions();\n            if (!attributionGetter) {\n                continue;\n            }\n            var attributions = attributionGetter(frameState);\n            if (!attributions) {\n                continue;\n            }\n            if (!this.overrideCollapsible_ && source.getAttributionsCollapsible() === false) {\n                this.setCollapsible(false);\n            }\n            if (Array.isArray(attributions)) {\n                for (var j = 0, jj = attributions.length; j < jj; ++j) {\n                    if (!(attributions[j] in lookup)) {\n                        visibleAttributions.push(attributions[j]);\n                        lookup[attributions[j]] = true;\n                    }\n                }\n            }\n            else {\n                if (!(attributions in lookup)) {\n                    visibleAttributions.push(attributions);\n                    lookup[attributions] = true;\n                }\n            }\n        }\n        return visibleAttributions;\n    };\n    /**\n     * @private\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n    Attribution.prototype.updateElement_ = function (frameState) {\n        if (!frameState) {\n            if (this.renderedVisible_) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        var attributions = this.collectSourceAttributions_(frameState);\n        var visible = attributions.length > 0;\n        if (this.renderedVisible_ != visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.renderedVisible_ = visible;\n        }\n        if (equals(attributions, this.renderedAttributions_)) {\n            return;\n        }\n        removeChildren(this.ulElement_);\n        // append the attributions\n        for (var i = 0, ii = attributions.length; i < ii; ++i) {\n            var element = document.createElement('li');\n            element.innerHTML = attributions[i];\n            this.ulElement_.appendChild(element);\n        }\n        this.renderedAttributions_ = attributions;\n    };\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Attribution.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        this.handleToggle_();\n    };\n    /**\n     * @private\n     */\n    Attribution.prototype.handleToggle_ = function () {\n        this.element.classList.toggle(CLASS_COLLAPSED);\n        if (this.collapsed_) {\n            replaceNode(this.collapseLabel_, this.label_);\n        }\n        else {\n            replaceNode(this.label_, this.collapseLabel_);\n        }\n        this.collapsed_ = !this.collapsed_;\n    };\n    /**\n     * Return `true` if the attribution is collapsible, `false` otherwise.\n     * @return {boolean} True if the widget is collapsible.\n     * @api\n     */\n    Attribution.prototype.getCollapsible = function () {\n        return this.collapsible_;\n    };\n    /**\n     * Set whether the attribution should be collapsible.\n     * @param {boolean} collapsible True if the widget is collapsible.\n     * @api\n     */\n    Attribution.prototype.setCollapsible = function (collapsible) {\n        if (this.collapsible_ === collapsible) {\n            return;\n        }\n        this.collapsible_ = collapsible;\n        this.element.classList.toggle('ol-uncollapsible');\n        if (!collapsible && this.collapsed_) {\n            this.handleToggle_();\n        }\n    };\n    /**\n     * Collapse or expand the attribution according to the passed parameter. Will\n     * not do anything if the attribution isn't collapsible or if the current\n     * collapsed state is already the one requested.\n     * @param {boolean} collapsed True if the widget is collapsed.\n     * @api\n     */\n    Attribution.prototype.setCollapsed = function (collapsed) {\n        if (!this.collapsible_ || this.collapsed_ === collapsed) {\n            return;\n        }\n        this.handleToggle_();\n    };\n    /**\n     * Return `true` when the attribution is currently collapsed or `false`\n     * otherwise.\n     * @return {boolean} True if the widget is collapsed.\n     * @api\n     */\n    Attribution.prototype.getCollapsed = function () {\n        return this.collapsed_;\n    };\n    return Attribution;\n}(Control));\n/**\n * Update the attribution element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Attribution}\n * @api\n */\nexport function render(mapEvent) {\n    this.updateElement_(mapEvent.frameState);\n}\nexport default Attribution;\n//# sourceMappingURL=Attribution.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport { CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\nimport EventType from '../events/EventType.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label=''] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nvar Rotate = /** @class */ (function (_super) {\n    __extends(Rotate, _super);\n    /**\n     * @param {Options=} opt_options Rotate options.\n     */\n    function Rotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render || render,\n            target: options.target\n        }) || this;\n        var className = options.className !== undefined ? options.className : 'ol-rotate';\n        var label = options.label !== undefined ? options.label : '\\u21E7';\n        /**\n         * @type {HTMLElement}\n         * @private\n         */\n        _this.label_ = null;\n        if (typeof label === 'string') {\n            _this.label_ = document.createElement('span');\n            _this.label_.className = 'ol-compass';\n            _this.label_.textContent = label;\n        }\n        else {\n            _this.label_ = label;\n            _this.label_.classList.add('ol-compass');\n        }\n        var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n        var button = document.createElement('button');\n        button.className = className + '-reset';\n        button.setAttribute('type', 'button');\n        button.title = tipLabel;\n        button.appendChild(_this.label_);\n        button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(button);\n        _this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.rotation_ = undefined;\n        if (_this.autoHide_) {\n            _this.element.classList.add(CLASS_HIDDEN);\n        }\n        return _this;\n    }\n    /**\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Rotate.prototype.handleClick_ = function (event) {\n        event.preventDefault();\n        if (this.callResetNorth_ !== undefined) {\n            this.callResetNorth_();\n        }\n        else {\n            this.resetNorth_();\n        }\n    };\n    /**\n     * @private\n     */\n    Rotate.prototype.resetNorth_ = function () {\n        var map = this.getMap();\n        var view = map.getView();\n        if (!view) {\n            // the map does not have a view, so we can't act\n            // upon it\n            return;\n        }\n        if (view.getRotation() !== undefined) {\n            if (this.duration_ > 0) {\n                view.animate({\n                    rotation: 0,\n                    duration: this.duration_,\n                    easing: easeOut\n                });\n            }\n            else {\n                view.setRotation(0);\n            }\n        }\n    };\n    return Rotate;\n}(Control));\n/**\n * Update the rotate control element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Rotate}\n * @api\n */\nexport function render(mapEvent) {\n    var frameState = mapEvent.frameState;\n    if (!frameState) {\n        return;\n    }\n    var rotation = frameState.viewState.rotation;\n    if (rotation != this.rotation_) {\n        var transform = 'rotate(' + rotation + 'rad)';\n        if (this.autoHide_) {\n            var contains = this.element.classList.contains(CLASS_HIDDEN);\n            if (!contains && rotation === 0) {\n                this.element.classList.add(CLASS_HIDDEN);\n            }\n            else if (contains && rotation !== 0) {\n                this.element.classList.remove(CLASS_HIDDEN);\n            }\n        }\n        this.label_.style.transform = transform;\n    }\n    this.rotation_ = rotation;\n}\nexport default Rotate;\n//# sourceMappingURL=Rotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/Zoom\n */\nimport EventType from '../events/EventType.js';\nimport Control from './Control.js';\nimport { CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='-'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nvar Zoom = /** @class */ (function (_super) {\n    __extends(Zoom, _super);\n    /**\n     * @param {Options=} opt_options Zoom options.\n     */\n    function Zoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            target: options.target\n        }) || this;\n        var className = options.className !== undefined ? options.className : 'ol-zoom';\n        var delta = options.delta !== undefined ? options.delta : 1;\n        var zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n        var zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n        var zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n            options.zoomInTipLabel : 'Zoom in';\n        var zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n            options.zoomOutTipLabel : 'Zoom out';\n        var inElement = document.createElement('button');\n        inElement.className = className + '-in';\n        inElement.setAttribute('type', 'button');\n        inElement.title = zoomInTipLabel;\n        inElement.appendChild(typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel);\n        inElement.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this, delta), false);\n        var outElement = document.createElement('button');\n        outElement.className = className + '-out';\n        outElement.setAttribute('type', 'button');\n        outElement.title = zoomOutTipLabel;\n        outElement.appendChild(typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel);\n        outElement.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this, -delta), false);\n        var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        var element = _this.element;\n        element.className = cssClasses;\n        element.appendChild(inElement);\n        element.appendChild(outElement);\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * @param {number} delta Zoom delta.\n     * @param {MouseEvent} event The event to handle\n     * @private\n     */\n    Zoom.prototype.handleClick_ = function (delta, event) {\n        event.preventDefault();\n        this.zoomByDelta_(delta);\n    };\n    /**\n     * @param {number} delta Zoom delta.\n     * @private\n     */\n    Zoom.prototype.zoomByDelta_ = function (delta) {\n        var map = this.getMap();\n        var view = map.getView();\n        if (!view) {\n            // the map does not have a view, so we can't act\n            // upon it\n            return;\n        }\n        var currentZoom = view.getZoom();\n        if (currentZoom !== undefined) {\n            var newZoom = view.getConstrainedZoom(currentZoom + delta);\n            if (this.duration_ > 0) {\n                if (view.getAnimating()) {\n                    view.cancelAnimations();\n                }\n                view.animate({\n                    zoom: newZoom,\n                    duration: this.duration_,\n                    easing: easeOut\n                });\n            }\n            else {\n                view.setZoom(newZoom);\n            }\n        }\n    };\n    return Zoom;\n}(Control));\nexport default Zoom;\n//# sourceMappingURL=Zoom.js.map","/**\n * @module ol/control\n */\nimport Collection from './Collection.js';\nimport Attribution from './control/Attribution.js';\nimport Rotate from './control/Rotate.js';\nimport Zoom from './control/Zoom.js';\nexport { default as Attribution } from './control/Attribution.js';\nexport { default as Control } from './control/Control.js';\nexport { default as FullScreen } from './control/FullScreen.js';\nexport { default as MousePosition } from './control/MousePosition.js';\nexport { default as OverviewMap } from './control/OverviewMap.js';\nexport { default as Rotate } from './control/Rotate.js';\nexport { default as ScaleLine } from './control/ScaleLine.js';\nexport { default as Zoom } from './control/Zoom.js';\nexport { default as ZoomSlider } from './control/ZoomSlider.js';\nexport { default as ZoomToExtent } from './control/ZoomToExtent.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./control/Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./control/Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./control/Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions=} opt_options\n * Defaults options.\n * @return {Collection<import(\"./control/Control.js\").default>}\n * Controls.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var controls = new Collection();\n    var zoomControl = options.zoom !== undefined ? options.zoom : true;\n    if (zoomControl) {\n        controls.push(new Zoom(options.zoomOptions));\n    }\n    var rotateControl = options.rotate !== undefined ? options.rotate : true;\n    if (rotateControl) {\n        controls.push(new Rotate(options.rotateOptions));\n    }\n    var attributionControl = options.attribution !== undefined ?\n        options.attribution : true;\n    if (attributionControl) {\n        controls.push(new Attribution(options.attributionOptions));\n    }\n    return controls;\n}\n//# sourceMappingURL=control.js.map","/**\n * @module ol/featureloader\n */\nimport { VOID } from './functions.js';\nimport FormatType from './format/FormatType.js';\n/**\n *\n * @type {boolean}\n * @private\n */\nvar withCredentials = false;\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default), import(\"./extent.js\").Extent, number,\n *                    import(\"./proj/Projection.js\").default): void} FeatureLoader\n * @api\n */\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {function(this:import(\"./VectorTile.js\").default, Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default, import(\"./extent.js\").Extent): void|function(this:import(\"./source/Vector\").default, Array<import(\"./Feature.js\").default>): void} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:import(\"./VectorTile.js\").default): void|function(this:import(\"./source/Vector\").default): void} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function (extent, resolution, projection) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url, true);\n        if (format.getType() == FormatType.ARRAY_BUFFER) {\n            xhr.responseType = 'arraybuffer';\n        }\n        xhr.withCredentials = withCredentials;\n        /**\n         * @param {Event} event Event.\n         * @private\n         */\n        xhr.onload = function (event) {\n            // status will be 0 for file:// urls\n            if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n                var type = format.getType();\n                /** @type {Document|Node|Object|string|undefined} */\n                var source = void 0;\n                if (type == FormatType.JSON || type == FormatType.TEXT) {\n                    source = xhr.responseText;\n                }\n                else if (type == FormatType.XML) {\n                    source = xhr.responseXML;\n                    if (!source) {\n                        source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                    }\n                }\n                else if (type == FormatType.ARRAY_BUFFER) {\n                    source = /** @type {ArrayBuffer} */ (xhr.response);\n                }\n                if (source) {\n                    success.call(this, format.readFeatures(source, {\n                        extent: extent,\n                        featureProjection: projection\n                    }), format.readProjection(source));\n                }\n                else {\n                    failure.call(this);\n                }\n            }\n            else {\n                failure.call(this);\n            }\n        }.bind(this);\n        /**\n         * @private\n         */\n        xhr.onerror = function () {\n            failure.call(this);\n        }.bind(this);\n        xhr.send();\n    });\n}\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n    return loadFeaturesXhr(url, format, \n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function (features, dataProjection) {\n        var sourceOrTile = /** @type {?} */ (this);\n        if (typeof sourceOrTile.addFeatures === 'function') {\n            /** @type {import(\"./source/Vector\").default} */ (sourceOrTile).addFeatures(features);\n        }\n    }, /* FIXME handle error */ VOID);\n}\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n    withCredentials = xhrWithCredentials;\n}\n//# sourceMappingURL=featureloader.js.map","/**\n * @module ol/loadingstrategy\n */\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n    return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n    return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution) {\n        var z = tileGrid.getZForResolution(resolution);\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n        /** @type {Array<import(\"./extent.js\").Extent>} */\n        var extents = [];\n        /** @type {import(\"./tilecoord.js\").TileCoord} */\n        var tileCoord = [z, 0, 0];\n        for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n            for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n                extents.push(tileGrid.getTileCoordExtent(tileCoord));\n            }\n        }\n        return extents;\n    });\n}\n//# sourceMappingURL=loadingstrategy.js.map","/**\n * @module ol/source/Vector\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getUid } from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport { extend } from '../array.js';\nimport { assert } from '../asserts.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport { containsExtent, equals } from '../extent.js';\nimport { xhr } from '../featureloader.js';\nimport { TRUE, VOID } from '../functions.js';\nimport { all as allStrategy } from '../loadingstrategy.js';\nimport { isEmpty, getValues } from '../obj.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nvar VectorSourceEvent = /** @class */ (function (_super) {\n    __extends(VectorSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Feature.js\").default<Geometry>=} opt_feature Feature.\n     */\n    function VectorSourceEvent(type, opt_feature) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The feature being added or removed.\n         * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n         * @api\n         */\n        _this.feature = opt_feature;\n        return _this;\n    }\n    return VectorSourceEvent;\n}(Event));\nexport { VectorSourceEvent };\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180 and 180 meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nvar VectorSource = /** @class */ (function (_super) {\n    __extends(VectorSource, _super);\n    /**\n     * @param {Options=} opt_options Vector source options.\n     */\n    function VectorSource(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            projection: undefined,\n            state: SourceState.READY,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true\n        }) || this;\n        /**\n         * @private\n         * @type {import(\"../featureloader.js\").FeatureLoader}\n         */\n        _this.loader_ = VOID;\n        /**\n         * @private\n         * @type {import(\"../format/Feature.js\").default|undefined}\n         */\n        _this.format_ = options.format;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n        /**\n         * @private\n         * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n         */\n        _this.url_ = options.url;\n        if (options.loader !== undefined) {\n            _this.loader_ = options.loader;\n        }\n        else if (_this.url_ !== undefined) {\n            assert(_this.format_, 7); // `format` must be set when `url` is set\n            // create a XHR feature loader for \"url\" and \"format\"\n            _this.loader_ = xhr(_this.url_, /** @type {import(\"../format/Feature.js\").default} */ (_this.format_));\n        }\n        /**\n         * @private\n         * @type {LoadingStrategy}\n         */\n        _this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n        var useSpatialIndex = options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n        /**\n         * @private\n         * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n        /**\n         * @private\n         * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n         */\n        _this.loadedExtentsRtree_ = new RBush();\n        /**\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.nullGeometryFeatures_ = {};\n        /**\n         * A lookup of features by id (the return from feature.getId()).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.idIndex_ = {};\n        /**\n         * A lookup of features by uid (using getUid(feature)).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.uidIndex_ = {};\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.featureChangeKeys_ = {};\n        /**\n         * @private\n         * @type {Collection<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresCollection_ = null;\n        var collection, features;\n        if (Array.isArray(options.features)) {\n            features = options.features;\n        }\n        else if (options.features) {\n            collection = options.features;\n            features = collection.getArray();\n        }\n        if (!useSpatialIndex && collection === undefined) {\n            collection = new Collection(features);\n        }\n        if (features !== undefined) {\n            _this.addFeaturesInternal(features);\n        }\n        if (collection !== undefined) {\n            _this.bindFeaturesCollection_(collection);\n        }\n        return _this;\n    }\n    /**\n     * Add a single feature to the source.  If you want to add a batch of features\n     * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n     * instead. A feature will not be added to the source if feature with\n     * the same id is already there. The reason for this behavior is to avoid\n     * feature duplication when using bbox or tile loading strategies.\n     * Note: this also applies if an {@link module:ol/Collection} is used for features,\n     * meaning that if a feature with a duplicate id is added in the collection, it will\n     * be removed from it right away.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n     * @api\n     */\n    VectorSource.prototype.addFeature = function (feature) {\n        this.addFeatureInternal(feature);\n        this.changed();\n    };\n    /**\n     * Add a feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @protected\n     */\n    VectorSource.prototype.addFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        if (!this.addToIndex_(featureKey, feature)) {\n            if (this.featuresCollection_) {\n                this.featuresCollection_.remove(feature);\n            }\n            return;\n        }\n        this.setupChangeEvents_(featureKey, feature);\n        var geometry = feature.getGeometry();\n        if (geometry) {\n            var extent = geometry.getExtent();\n            if (this.featuresRtree_) {\n                this.featuresRtree_.insert(extent, feature);\n            }\n        }\n        else {\n            this.nullGeometryFeatures_[featureKey] = feature;\n        }\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @private\n     */\n    VectorSource.prototype.setupChangeEvents_ = function (featureKey, feature) {\n        this.featureChangeKeys_[featureKey] = [\n            listen(feature, EventType.CHANGE, this.handleFeatureChange_, this),\n            listen(feature, ObjectEventType.PROPERTYCHANGE, this.handleFeatureChange_, this)\n        ];\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} The feature is \"valid\", in the sense that it is also a\n     *     candidate for insertion into the Rtree.\n     * @private\n     */\n    VectorSource.prototype.addToIndex_ = function (featureKey, feature) {\n        var valid = true;\n        var id = feature.getId();\n        if (id !== undefined) {\n            if (!(id.toString() in this.idIndex_)) {\n                this.idIndex_[id.toString()] = feature;\n            }\n            else {\n                valid = false;\n            }\n        }\n        if (valid) {\n            assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n            this.uidIndex_[featureKey] = feature;\n        }\n        return valid;\n    };\n    /**\n     * Add a batch of features to the source.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n     * @api\n     */\n    VectorSource.prototype.addFeatures = function (features) {\n        this.addFeaturesInternal(features);\n        this.changed();\n    };\n    /**\n     * Add features without firing a `change` event.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n     * @protected\n     */\n    VectorSource.prototype.addFeaturesInternal = function (features) {\n        var extents = [];\n        var newFeatures = [];\n        var geometryFeatures = [];\n        for (var i = 0, length_1 = features.length; i < length_1; i++) {\n            var feature = features[i];\n            var featureKey = getUid(feature);\n            if (this.addToIndex_(featureKey, feature)) {\n                newFeatures.push(feature);\n            }\n        }\n        for (var i = 0, length_2 = newFeatures.length; i < length_2; i++) {\n            var feature = newFeatures[i];\n            var featureKey = getUid(feature);\n            this.setupChangeEvents_(featureKey, feature);\n            var geometry = feature.getGeometry();\n            if (geometry) {\n                var extent = geometry.getExtent();\n                extents.push(extent);\n                geometryFeatures.push(feature);\n            }\n            else {\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.load(extents, geometryFeatures);\n        }\n        for (var i = 0, length_3 = newFeatures.length; i < length_3; i++) {\n            this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n        }\n    };\n    /**\n     * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n     * @private\n     */\n    VectorSource.prototype.bindFeaturesCollection_ = function (collection) {\n        var modifyingCollection = false;\n        this.addEventListener(VectorEventType.ADDFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.push(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        this.addEventListener(VectorEventType.REMOVEFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.remove(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        collection.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.addFeature(/** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        collection.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.removeFeature(/** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        this.featuresCollection_ = collection;\n    };\n    /**\n     * Remove all features from the source.\n     * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#removefeature} events.\n     * @api\n     */\n    VectorSource.prototype.clear = function (opt_fast) {\n        if (opt_fast) {\n            for (var featureId in this.featureChangeKeys_) {\n                var keys = this.featureChangeKeys_[featureId];\n                keys.forEach(unlistenByKey);\n            }\n            if (!this.featuresCollection_) {\n                this.featureChangeKeys_ = {};\n                this.idIndex_ = {};\n                this.uidIndex_ = {};\n            }\n        }\n        else {\n            if (this.featuresRtree_) {\n                this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));\n                for (var id in this.nullGeometryFeatures_) {\n                    this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n                }\n            }\n        }\n        if (this.featuresCollection_) {\n            this.featuresCollection_.clear();\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.clear();\n        }\n        this.nullGeometryFeatures_ = {};\n        var clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n        this.dispatchEvent(clearEvent);\n        this.changed();\n    };\n    /**\n     * Iterate through all features on the source, calling the provided callback\n     * with each one.  If the callback returns any \"truthy\" value, iteration will\n     * stop and the function will return the same value.\n     * Note: this function only iterate through the feature that have a defined geometry.\n     *\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     on the source.  Return a truthy value to stop iteration.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeature = function (callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEach(callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometries contain the provided\n     * coordinate, calling the callback with each feature.  If the callback returns\n     * a \"truthy\" value, iteration will stop and the function will return the same\n     * value.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose goemetry contains the provided coordinate.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     */\n    VectorSource.prototype.forEachFeatureAtCoordinateDirect = function (coordinate, callback) {\n        var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n        return this.forEachFeatureInExtent(extent, function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsCoordinate(coordinate)) {\n                return callback(feature);\n            }\n            else {\n                return undefined;\n            }\n        });\n    };\n    /**\n     * Iterate through all features whose bounding box intersects the provided\n     * extent (note that the feature's geometry may not intersect the extent),\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you are interested in features whose geometry intersects an extent, call\n     * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n     *\n     * When `useSpatialIndex` is set to false, this method will loop through all\n     * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose bounding box intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureInExtent = function (extent, callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEachInExtent(extent, callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometry intersects the provided extent,\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you only want to test for bounding box intersection, call the\n     * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose geometry intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureIntersectingExtent = function (extent, callback) {\n        return this.forEachFeatureInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         * @return {T|undefined} The return value from the last call to the callback.\n         */\n        function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsExtent(extent)) {\n                var result = callback(feature);\n                if (result) {\n                    return result;\n                }\n            }\n        });\n    };\n    /**\n     * Get the features collection associated with this source. Will be `null`\n     * unless the source was configured with `useSpatialIndex` set to `false`, or\n     * with an {@link module:ol/Collection} as `features`.\n     * @return {Collection<import(\"../Feature.js\").default<Geometry>>} The collection of features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesCollection = function () {\n        return this.featuresCollection_;\n    };\n    /**\n     * Get all features on the source in random order.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeatures = function () {\n        var features;\n        if (this.featuresCollection_) {\n            features = this.featuresCollection_.getArray();\n        }\n        else if (this.featuresRtree_) {\n            features = this.featuresRtree_.getAll();\n            if (!isEmpty(this.nullGeometryFeatures_)) {\n                extend(features, getValues(this.nullGeometryFeatures_));\n            }\n        }\n        return (\n        /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (features));\n    };\n    /**\n     * Get all features whose geometry intersects the provided coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesAtCoordinate = function (coordinate) {\n        var features = [];\n        this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n            features.push(feature);\n        });\n        return features;\n    };\n    /**\n     * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n     * all features intersecting the given extent in random order (so it may include\n     * features whose geometries do not intersect the extent).\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesInExtent = function (extent) {\n        return this.featuresRtree_.getInExtent(extent);\n    };\n    /**\n     * Get the closest feature to the provided coordinate.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>):boolean=} opt_filter Feature filter function.\n     *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n     *     and it should return a boolean value. By default, no filtering is made.\n     * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n     * @api\n     */\n    VectorSource.prototype.getClosestFeatureToCoordinate = function (coordinate, opt_filter) {\n        // Find the closest feature using branch and bound.  We start searching an\n        // infinite extent, and find the distance from the first feature found.  This\n        // becomes the closest feature.  We then compute a smaller extent which any\n        // closer feature must intersect.  We continue searching with this smaller\n        // extent, trying to find a closer feature.  Every time we find a closer\n        // feature, we update the extent being searched so that any even closer\n        // feature must intersect it.  We continue until we run out of features.\n        var x = coordinate[0];\n        var y = coordinate[1];\n        var closestFeature = null;\n        var closestPoint = [NaN, NaN];\n        var minSquaredDistance = Infinity;\n        var extent = [-Infinity, -Infinity, Infinity, Infinity];\n        var filter = opt_filter ? opt_filter : TRUE;\n        this.featuresRtree_.forEachInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         */\n        function (feature) {\n            if (filter(feature)) {\n                var geometry = feature.getGeometry();\n                var previousMinSquaredDistance = minSquaredDistance;\n                minSquaredDistance = geometry.closestPointXY(x, y, closestPoint, minSquaredDistance);\n                if (minSquaredDistance < previousMinSquaredDistance) {\n                    closestFeature = feature;\n                    // This is sneaky.  Reduce the extent that it is currently being\n                    // searched while the R-Tree traversal using this same extent object\n                    // is still in progress.  This is safe because the new extent is\n                    // strictly contained by the old extent.\n                    var minDistance = Math.sqrt(minSquaredDistance);\n                    extent[0] = x - minDistance;\n                    extent[1] = y - minDistance;\n                    extent[2] = x + minDistance;\n                    extent[3] = y + minDistance;\n                }\n            }\n        });\n        return closestFeature;\n    };\n    /**\n     * Get the extent of the features currently in the source.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Destination extent. If provided, no new extent\n     *     will be created. Instead, that extent's coordinates will be overwritten.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    VectorSource.prototype.getExtent = function (opt_extent) {\n        return this.featuresRtree_.getExtent(opt_extent);\n    };\n    /**\n     * Get a feature by its identifier (the value returned by feature.getId()).\n     * Note that the index treats string and numeric identifiers as the same.  So\n     * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n     *\n     * @param {string|number} id Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n     * @api\n     */\n    VectorSource.prototype.getFeatureById = function (id) {\n        var feature = this.idIndex_[id.toString()];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get a feature by its internal unique identifier (using `getUid`).\n     *\n     * @param {string} uid Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n     */\n    VectorSource.prototype.getFeatureByUid = function (uid) {\n        var feature = this.uidIndex_[uid];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get the format associated with this source.\n     *\n     * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n     * @api\n     */\n    VectorSource.prototype.getFormat = function () {\n        return this.format_;\n    };\n    /**\n     * @return {boolean} The source can have overlapping geometries.\n     */\n    VectorSource.prototype.getOverlaps = function () {\n        return this.overlaps_;\n    };\n    /**\n     * Get the url associated with this source.\n     *\n     * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n     * @api\n     */\n    VectorSource.prototype.getUrl = function () {\n        return this.url_;\n    };\n    /**\n     * @param {Event} event Event.\n     * @private\n     */\n    VectorSource.prototype.handleFeatureChange_ = function (event) {\n        var feature = /** @type {import(\"../Feature.js\").default<Geometry>} */ (event.target);\n        var featureKey = getUid(feature);\n        var geometry = feature.getGeometry();\n        if (!geometry) {\n            if (!(featureKey in this.nullGeometryFeatures_)) {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.remove(feature);\n                }\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        else {\n            var extent = geometry.getExtent();\n            if (featureKey in this.nullGeometryFeatures_) {\n                delete this.nullGeometryFeatures_[featureKey];\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.insert(extent, feature);\n                }\n            }\n            else {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.update(extent, feature);\n                }\n            }\n        }\n        var id = feature.getId();\n        if (id !== undefined) {\n            var sid = id.toString();\n            if (this.idIndex_[sid] !== feature) {\n                this.removeFromIdIndex_(feature);\n                this.idIndex_[sid] = feature;\n            }\n        }\n        else {\n            this.removeFromIdIndex_(feature);\n            this.uidIndex_[featureKey] = feature;\n        }\n        this.changed();\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature));\n    };\n    /**\n     * Returns true if the feature is contained within the source.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {boolean} Has feature.\n     * @api\n     */\n    VectorSource.prototype.hasFeature = function (feature) {\n        var id = feature.getId();\n        if (id !== undefined) {\n            return id in this.idIndex_;\n        }\n        else {\n            return getUid(feature) in this.uidIndex_;\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    VectorSource.prototype.isEmpty = function () {\n        return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    VectorSource.prototype.loadFeatures = function (extent, resolution, projection) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var extentsToLoad = this.strategy_(extent, resolution);\n        this.loading = false;\n        var _loop_1 = function (i, ii) {\n            var extentToLoad = extentsToLoad[i];\n            var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad, \n            /**\n             * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n             * @return {boolean} Contains.\n             */\n            function (object) {\n                return containsExtent(object.extent, extentToLoad);\n            });\n            if (!alreadyLoaded) {\n                this_1.loader_.call(this_1, extentToLoad, resolution, projection);\n                loadedExtentsRtree.insert(extentToLoad, { extent: extentToLoad.slice() });\n                this_1.loading = this_1.loader_ !== VOID;\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n            _loop_1(i, ii);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    VectorSource.prototype.refresh = function () {\n        this.clear(true);\n        this.loadedExtentsRtree_.clear();\n        _super.prototype.refresh.call(this);\n    };\n    /**\n     * Remove an extent from the list of loaded extents.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    VectorSource.prototype.removeLoadedExtent = function (extent) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var obj;\n        loadedExtentsRtree.forEachInExtent(extent, function (object) {\n            if (equals(object.extent, extent)) {\n                obj = object;\n                return true;\n            }\n        });\n        if (obj) {\n            loadedExtentsRtree.remove(obj);\n        }\n    };\n    /**\n     * Remove a single feature from the source.  If you want to remove all features\n     * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n     * instead.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n     * @api\n     */\n    VectorSource.prototype.removeFeature = function (feature) {\n        var featureKey = getUid(feature);\n        if (featureKey in this.nullGeometryFeatures_) {\n            delete this.nullGeometryFeatures_[featureKey];\n        }\n        else {\n            if (this.featuresRtree_) {\n                this.featuresRtree_.remove(feature);\n            }\n        }\n        this.removeFeatureInternal(feature);\n        this.changed();\n    };\n    /**\n     * Remove feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @protected\n     */\n    VectorSource.prototype.removeFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n        delete this.featureChangeKeys_[featureKey];\n        var id = feature.getId();\n        if (id !== undefined) {\n            delete this.idIndex_[id.toString()];\n        }\n        delete this.uidIndex_[featureKey];\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature));\n    };\n    /**\n     * Remove a feature from the id index.  Called internally when the feature id\n     * may have changed.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} Removed the feature from the index.\n     * @private\n     */\n    VectorSource.prototype.removeFromIdIndex_ = function (feature) {\n        var removed = false;\n        for (var id in this.idIndex_) {\n            if (this.idIndex_[id] === feature) {\n                delete this.idIndex_[id];\n                removed = true;\n                break;\n            }\n        }\n        return removed;\n    };\n    /**\n     * Set the new loader of the source. The next render cycle will use the\n     * new loader.\n     * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n     * @api\n     */\n    VectorSource.prototype.setLoader = function (loader) {\n        this.loader_ = loader;\n    };\n    /**\n     * Points the source to a new url. The next render cycle will use the new url.\n     * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n     * @api\n     */\n    VectorSource.prototype.setUrl = function (url) {\n        assert(this.format_, 7); // `format` must be set when `url` is set\n        this.setLoader(xhr(url, this.format_));\n    };\n    return VectorSource;\n}(Source));\nexport default VectorSource;\n//# sourceMappingURL=Vector.js.map","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature'\n};\n//# sourceMappingURL=VectorEventType.js.map","/**\n * @module ol/structs/RBush\n */\nimport { getUid } from '../util.js';\nimport RBush_ from 'rbush';\nimport { createOrUpdate, equals } from '../extent.js';\nimport { isEmpty } from '../obj.js';\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nvar RBush = /** @class */ (function () {\n    /**\n     * @param {number=} opt_maxEntries Max entries.\n     */\n    function RBush(opt_maxEntries) {\n        /**\n         * @private\n         */\n        this.rbush_ = new RBush_(opt_maxEntries);\n        /**\n         * A mapping between the objects added to this rbush wrapper\n         * and the objects that are actually added to the internal rbush.\n         * @private\n         * @type {Object<string, Entry>}\n         */\n        this.items_ = {};\n    }\n    /**\n     * Insert a value into the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.insert = function (extent, value) {\n        /** @type {Entry} */\n        var item = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3],\n            value: value\n        };\n        this.rbush_.insert(item);\n        this.items_[getUid(value)] = item;\n    };\n    /**\n     * Bulk-insert values into the RBush.\n     * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n     * @param {Array<T>} values Values.\n     */\n    RBush.prototype.load = function (extents, values) {\n        var items = new Array(values.length);\n        for (var i = 0, l = values.length; i < l; i++) {\n            var extent = extents[i];\n            var value = values[i];\n            /** @type {Entry} */\n            var item = {\n                minX: extent[0],\n                minY: extent[1],\n                maxX: extent[2],\n                maxY: extent[3],\n                value: value\n            };\n            items[i] = item;\n            this.items_[getUid(value)] = item;\n        }\n        this.rbush_.load(items);\n    };\n    /**\n     * Remove a value from the RBush.\n     * @param {T} value Value.\n     * @return {boolean} Removed.\n     */\n    RBush.prototype.remove = function (value) {\n        var uid = getUid(value);\n        // get the object in which the value was wrapped when adding to the\n        // internal rbush. then use that object to do the removal.\n        var item = this.items_[uid];\n        delete this.items_[uid];\n        return this.rbush_.remove(item) !== null;\n    };\n    /**\n     * Update the extent of a value in the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.update = function (extent, value) {\n        var item = this.items_[getUid(value)];\n        var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n        if (!equals(bbox, extent)) {\n            this.remove(value);\n            this.insert(extent, value);\n        }\n    };\n    /**\n     * Return all values in the RBush.\n     * @return {Array<T>} All.\n     */\n    RBush.prototype.getAll = function () {\n        var items = this.rbush_.all();\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Return all values in the given extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<T>} All in extent.\n     */\n    RBush.prototype.getInExtent = function (extent) {\n        /** @type {Entry} */\n        var bbox = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3]\n        };\n        var items = this.rbush_.search(bbox);\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Calls a callback function with each value in the tree.\n     * If the callback returns a truthy value, this value is returned without\n     * checking the rest of the tree.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach = function (callback) {\n        return this.forEach_(this.getAll(), callback);\n    };\n    /**\n     * Calls a callback function with each value in the provided extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEachInExtent = function (extent, callback) {\n        return this.forEach_(this.getInExtent(extent), callback);\n    };\n    /**\n     * @param {Array<T>} values Values.\n     * @param {function(T): *} callback Callback.\n     * @private\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach_ = function (values, callback) {\n        var result;\n        for (var i = 0, l = values.length; i < l; i++) {\n            result = callback(values[i]);\n            if (result) {\n                return result;\n            }\n        }\n        return result;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    RBush.prototype.isEmpty = function () {\n        return isEmpty(this.items_);\n    };\n    /**\n     * Remove all values from the RBush.\n     */\n    RBush.prototype.clear = function () {\n        this.rbush_.clear();\n        this.items_ = {};\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    RBush.prototype.getExtent = function (opt_extent) {\n        var data = this.rbush_.toJSON();\n        return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n    };\n    /**\n     * @param {RBush} rbush R-Tree.\n     */\n    RBush.prototype.concat = function (rbush) {\n        this.rbush_.load(rbush.rbush_.all());\n        for (var i in rbush.items_) {\n            this.items_[i] = rbush.items_[i];\n        }\n    };\n    return RBush;\n}());\nexport default RBush;\n//# sourceMappingURL=RBush.js.map","/**\n * @module ol/format/Feature\n */\nimport { assign } from '../obj.js';\nimport { abstract } from '../util.js';\nimport { get as getProjection, equivalent as equivalentProjection, transformExtent } from '../proj.js';\nimport Units from '../proj/Units.js';\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent in map units of the tile being read.\n * This is only required when reading data with tile pixels as geometry units. When configured,\n * a `dataProjection` with `TILE_PIXELS` as `units` and the tile's pixel extent as `extent` needs to be\n * provided.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {@link module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\nvar FeatureFormat = /** @class */ (function () {\n    function FeatureFormat() {\n        /**\n         * @protected\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        this.dataProjection = null;\n        /**\n         * @protected\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        this.defaultFeatureProjection = null;\n    }\n    /**\n     * Adds the data projection to the read options.\n     * @param {Document|Node|Object|string} source Source.\n     * @param {ReadOptions=} opt_options Options.\n     * @return {ReadOptions|undefined} Options.\n     * @protected\n     */\n    FeatureFormat.prototype.getReadOptions = function (source, opt_options) {\n        var options;\n        if (opt_options) {\n            var dataProjection = opt_options.dataProjection ?\n                getProjection(opt_options.dataProjection) : this.readProjection(source);\n            if (opt_options.extent &&\n                dataProjection && dataProjection.getUnits() === Units.TILE_PIXELS) {\n                dataProjection = getProjection(dataProjection);\n                dataProjection.setWorldExtent(opt_options.extent);\n            }\n            options = {\n                dataProjection: dataProjection,\n                featureProjection: opt_options.featureProjection\n            };\n        }\n        return this.adaptOptions(options);\n    };\n    /**\n     * Sets the `dataProjection` on the options, if no `dataProjection`\n     * is set.\n     * @param {WriteOptions|ReadOptions|undefined} options\n     *     Options.\n     * @protected\n     * @return {WriteOptions|ReadOptions|undefined}\n     *     Updated options.\n     */\n    FeatureFormat.prototype.adaptOptions = function (options) {\n        return assign({\n            dataProjection: this.dataProjection,\n            featureProjection: this.defaultFeatureProjection\n        }, options);\n    };\n    /**\n     * @abstract\n     * @return {import(\"./FormatType.js\").default} Format.\n     */\n    FeatureFormat.prototype.getType = function () {\n        return abstract();\n    };\n    /**\n     * Read a single feature from a source.\n     *\n     * @abstract\n     * @param {Document|Node|Object|string} source Source.\n     * @param {ReadOptions=} opt_options Read options.\n     * @return {import(\"../Feature.js\").FeatureLike} Feature.\n     */\n    FeatureFormat.prototype.readFeature = function (source, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read all features from a source.\n     *\n     * @abstract\n     * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n     * @param {ReadOptions=} opt_options Read options.\n     * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n     */\n    FeatureFormat.prototype.readFeatures = function (source, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read a single geometry from a source.\n     *\n     * @abstract\n     * @param {Document|Node|Object|string} source Source.\n     * @param {ReadOptions=} opt_options Read options.\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    FeatureFormat.prototype.readGeometry = function (source, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read the projection from a source.\n     *\n     * @abstract\n     * @param {Document|Node|Object|string} source Source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    FeatureFormat.prototype.readProjection = function (source) {\n        return abstract();\n    };\n    /**\n     * Encode a feature in this format.\n     *\n     * @abstract\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {WriteOptions=} opt_options Write options.\n     * @return {string} Result.\n     */\n    FeatureFormat.prototype.writeFeature = function (feature, opt_options) {\n        return abstract();\n    };\n    /**\n     * Encode an array of features in this format.\n     *\n     * @abstract\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {WriteOptions=} opt_options Write options.\n     * @return {string} Result.\n     */\n    FeatureFormat.prototype.writeFeatures = function (features, opt_options) {\n        return abstract();\n    };\n    /**\n     * Write a single geometry in this format.\n     *\n     * @abstract\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {WriteOptions=} opt_options Write options.\n     * @return {string} Result.\n     */\n    FeatureFormat.prototype.writeGeometry = function (geometry, opt_options) {\n        return abstract();\n    };\n    return FeatureFormat;\n}());\nexport default FeatureFormat;\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {(WriteOptions|ReadOptions)=} opt_options Options.\n * @return {import(\"../geom/Geometry.js\").default} Transformed geometry.\n */\nexport function transformGeometryWithOptions(geometry, write, opt_options) {\n    var featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n    var dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n    var transformed;\n    if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n        transformed = (write ? geometry.clone() : geometry).transform(write ? featureProjection : dataProjection, write ? dataProjection : featureProjection);\n    }\n    else {\n        transformed = geometry;\n    }\n    if (write && opt_options && /** @type {WriteOptions} */ (opt_options).decimals !== undefined) {\n        var power_1 = Math.pow(10, /** @type {WriteOptions} */ (opt_options).decimals);\n        // if decimals option on write, round each coordinate appropriately\n        /**\n         * @param {Array<number>} coordinates Coordinates.\n         * @return {Array<number>} Transformed coordinates.\n         */\n        var transform = function (coordinates) {\n            for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n                coordinates[i] = Math.round(coordinates[i] * power_1) / power_1;\n            }\n            return coordinates;\n        };\n        if (transformed === geometry) {\n            transformed = geometry.clone();\n        }\n        transformed.applyTransform(transform);\n    }\n    return transformed;\n}\n/**\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @param {ReadOptions=} opt_options Read options.\n * @return {import(\"../extent.js\").Extent} Transformed extent.\n */\nexport function transformExtentWithOptions(extent, opt_options) {\n    var featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n    var dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n    if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n        return transformExtent(extent, dataProjection, featureProjection);\n    }\n    else {\n        return extent;\n    }\n}\n//# sourceMappingURL=Feature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LinearRing\n */\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { linearRing as linearRingArea } from './flat/area.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nvar LinearRing = /** @class */ (function (_super) {\n    __extends(LinearRing, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {GeometryLayout=} opt_layout Layout.\n     */\n    function LinearRing(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LinearRing} Clone.\n     * @override\n     * @api\n     */\n    LinearRing.prototype.clone = function () {\n        return new LinearRing(this.flatCoordinates.slice(), this.layout);\n    };\n    /**\n     * @inheritDoc\n     */\n    LinearRing.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Return the area of the linear ring on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    LinearRing.prototype.getArea = function () {\n        return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinates of the linear ring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @override\n     * @api\n     */\n    LinearRing.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @inheritDoc\n     */\n    LinearRing.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    LinearRing.prototype.getType = function () {\n        return GeometryType.LINEAR_RING;\n    };\n    /**\n     * @inheritDoc\n     */\n    LinearRing.prototype.intersectsExtent = function (extent) {\n        return false;\n    };\n    /**\n     * Set the coordinates of the linear ring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    LinearRing.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LinearRing;\n}(SimpleGeometry));\nexport default LinearRing;\n//# sourceMappingURL=LinearRing.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Polygon\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY, getCenter } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { offset as sphereOffset } from '../sphere.js';\nimport { linearRings as linearRingsArea } from './flat/area.js';\nimport { assignClosestArrayPoint, arrayMaxSquaredDelta } from './flat/closest.js';\nimport { linearRingsContainsXY } from './flat/contains.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { getInteriorPointOfArray } from './flat/interiorpoint.js';\nimport { intersectsLinearRingArray } from './flat/intersectsextent.js';\nimport { linearRingsAreOriented, orientLinearRings } from './flat/orient.js';\nimport { quantizeArray } from './flat/simplify.js';\nimport { modulo } from '../math.js';\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    /**\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n     *     Array of linear rings that define the polygon. The first linear ring of the\n     *     array defines the outer-boundary or surface of the polygon. Each subsequent\n     *     linear ring defines a hole in the surface of the polygon. A linear ring is\n     *     an array of vertices' coordinates where the first coordinate and the last are\n     *     equivalent. (For internal use, flat coordinates in combination with\n     *     `opt_layout` and `opt_ends` are also accepted.)\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @param {Array<number>=} opt_ends Ends (for internal use with flat coordinates).\n     */\n    function Polygon(coordinates, opt_layout, opt_ends) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        _this.ends_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatInteriorPointRevision_ = -1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatInteriorPoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.orientedRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.orientedFlatCoordinates_ = null;\n        if (opt_layout !== undefined && opt_ends) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n            _this.ends_ = opt_ends;\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed linear ring to this polygon.\n     * @param {LinearRing} linearRing Linear ring.\n     * @api\n     */\n    Polygon.prototype.appendLinearRing = function (linearRing) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n        }\n        this.ends_.push(this.flatCoordinates.length);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Polygon} Clone.\n     * @override\n     * @api\n     */\n    Polygon.prototype.clone = function () {\n        return new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n    };\n    /**\n     * @inheritDoc\n     */\n    Polygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * @inheritDoc\n     */\n    Polygon.prototype.containsXY = function (x, y) {\n        return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n    };\n    /**\n     * Return the area of the polygon on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    Polygon.prototype.getArea = function () {\n        return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n    };\n    /**\n     * Get the coordinate array for this geometry.  This array has the structure\n     * of a GeoJSON coordinate array for polygons.\n     *\n     * @param {boolean=} opt_right Orient coordinates according to the right-hand\n     *     rule (counter-clockwise for exterior and clockwise for interior rings).\n     *     If `false`, coordinates will be oriented according to the left-hand rule\n     *     (clockwise for exterior and counter-clockwise for interior rings).\n     *     By default, coordinate orientation will depend on how the geometry was\n     *     constructed.\n     * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n     * @override\n     * @api\n     */\n    Polygon.prototype.getCoordinates = function (opt_right) {\n        var flatCoordinates;\n        if (opt_right !== undefined) {\n            flatCoordinates = this.getOrientedFlatCoordinates().slice();\n            orientLinearRings(flatCoordinates, 0, this.ends_, this.stride, opt_right);\n        }\n        else {\n            flatCoordinates = this.flatCoordinates;\n        }\n        return inflateCoordinatesArray(flatCoordinates, 0, this.ends_, this.stride);\n    };\n    /**\n     * @return {Array<number>} Ends.\n     */\n    Polygon.prototype.getEnds = function () {\n        return this.ends_;\n    };\n    /**\n     * @return {Array<number>} Interior point.\n     */\n    Polygon.prototype.getFlatInteriorPoint = function () {\n        if (this.flatInteriorPointRevision_ != this.getRevision()) {\n            var flatCenter = getCenter(this.getExtent());\n            this.flatInteriorPoint_ = getInteriorPointOfArray(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, flatCenter, 0);\n            this.flatInteriorPointRevision_ = this.getRevision();\n        }\n        return this.flatInteriorPoint_;\n    };\n    /**\n     * Return an interior point of the polygon.\n     * @return {Point} Interior point as XYM coordinate, where M is the\n     * length of the horizontal intersection that the point belongs to.\n     * @api\n     */\n    Polygon.prototype.getInteriorPoint = function () {\n        return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n    };\n    /**\n     * Return the number of rings of the polygon,  this includes the exterior\n     * ring and any interior rings.\n     *\n     * @return {number} Number of rings.\n     * @api\n     */\n    Polygon.prototype.getLinearRingCount = function () {\n        return this.ends_.length;\n    };\n    /**\n     * Return the Nth linear ring of the polygon geometry. Return `null` if the\n     * given index is out of range.\n     * The exterior linear ring is available at index `0` and the interior rings\n     * at index `1` and beyond.\n     *\n     * @param {number} index Index.\n     * @return {LinearRing} Linear ring.\n     * @api\n     */\n    Polygon.prototype.getLinearRing = function (index) {\n        if (index < 0 || this.ends_.length <= index) {\n            return null;\n        }\n        return new LinearRing(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n    };\n    /**\n     * Return the linear rings of the polygon.\n     * @return {Array<LinearRing>} Linear rings.\n     * @api\n     */\n    Polygon.prototype.getLinearRings = function () {\n        var layout = this.layout;\n        var flatCoordinates = this.flatCoordinates;\n        var ends = this.ends_;\n        var linearRings = [];\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n            linearRings.push(linearRing);\n            offset = end;\n        }\n        return linearRings;\n    };\n    /**\n     * @return {Array<number>} Oriented flat coordinates.\n     */\n    Polygon.prototype.getOrientedFlatCoordinates = function () {\n        if (this.orientedRevision_ != this.getRevision()) {\n            var flatCoordinates = this.flatCoordinates;\n            if (linearRingsAreOriented(flatCoordinates, 0, this.ends_, this.stride)) {\n                this.orientedFlatCoordinates_ = flatCoordinates;\n            }\n            else {\n                this.orientedFlatCoordinates_ = flatCoordinates.slice();\n                this.orientedFlatCoordinates_.length =\n                    orientLinearRings(this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n            }\n            this.orientedRevision_ = this.getRevision();\n        }\n        return this.orientedFlatCoordinates_;\n    };\n    /**\n     * @inheritDoc\n     */\n    Polygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEnds = [];\n        simplifiedFlatCoordinates.length = quantizeArray(this.flatCoordinates, 0, this.ends_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEnds);\n        return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Polygon.prototype.getType = function () {\n        return GeometryType.POLYGON;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Polygon.prototype.intersectsExtent = function (extent) {\n        return intersectsLinearRingArray(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the polygon.\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    Polygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 2);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n        this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n        this.changed();\n    };\n    return Polygon;\n}(SimpleGeometry));\nexport default Polygon;\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number=} opt_sphereRadius Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n    var n = opt_n ? opt_n : 32;\n    /** @type {Array<number>} */\n    var flatCoordinates = [];\n    for (var i = 0; i < n; ++i) {\n        extend(flatCoordinates, sphereOffset(center, radius, 2 * Math.PI * i / n, opt_sphereRadius));\n    }\n    flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n    return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var flatCoordinates = [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n    return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n    var sides = opt_sides ? opt_sides : 32;\n    var stride = circle.getStride();\n    var layout = circle.getLayout();\n    var center = circle.getCenter();\n    var arrayLength = stride * (sides + 1);\n    var flatCoordinates = new Array(arrayLength);\n    for (var i = 0; i < arrayLength; i += stride) {\n        flatCoordinates[i] = 0;\n        flatCoordinates[i + 1] = 0;\n        for (var j = 2; j < stride; j++) {\n            flatCoordinates[i + j] = center[j];\n        }\n    }\n    var ends = [flatCoordinates.length];\n    var polygon = new Polygon(flatCoordinates, layout, ends);\n    makeRegular(polygon, center, circle.getRadius(), opt_angle);\n    return polygon;\n}\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n    var flatCoordinates = polygon.getFlatCoordinates();\n    var stride = polygon.getStride();\n    var sides = flatCoordinates.length / stride - 1;\n    var startAngle = opt_angle ? opt_angle : 0;\n    for (var i = 0; i <= sides; ++i) {\n        var offset = i * stride;\n        var angle = startAngle + (modulo(i, sides) * 2 * Math.PI / sides);\n        flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n        flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n    }\n    polygon.changed();\n}\n//# sourceMappingURL=Polygon.js.map","/**\n * @module ol/source/State\n */\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n    UNDEFINED: 'undefined',\n    LOADING: 'loading',\n    READY: 'ready',\n    ERROR: 'error'\n};\n//# sourceMappingURL=State.js.map","/**\n * @module ol/css\n */\n/**\n * @typedef {Object} FontParameters\n * @property {Array<string>} families\n * @property {string} style\n * @property {string} weight\n */\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_HIDDEN = 'ol-hidden';\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_SELECTABLE = 'ol-selectable';\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSELECTABLE = 'ol-unselectable';\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSUPPORTED = 'ol-unsupported';\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_CONTROL = 'ol-control';\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_COLLAPSED = 'ol-collapsed';\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {FontParameters} The font families (or null if the input spec is invalid).\n */\nexport var getFontParameters = (function () {\n    /**\n     * @type {CSSStyleDeclaration}\n     */\n    var style;\n    /**\n     * @type {Object<string, FontParameters>}\n     */\n    var cache = {};\n    return function (font) {\n        if (!style) {\n            style = document.createElement('div').style;\n        }\n        if (!(font in cache)) {\n            style.font = font;\n            var family = style.fontFamily;\n            var fontWeight = style.fontWeight;\n            var fontStyle = style.fontStyle;\n            style.font = '';\n            if (!family) {\n                return null;\n            }\n            var families = family.split(/,\\s?/);\n            cache[font] = {\n                families: families,\n                weight: fontWeight,\n                style: fontStyle\n            };\n        }\n        return cache[font];\n    };\n})();\n//# sourceMappingURL=css.js.map","/**\n * @module ol/style/IconOrigin\n */\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_RIGHT: 'bottom-right',\n    TOP_LEFT: 'top-left',\n    TOP_RIGHT: 'top-right'\n};\n//# sourceMappingURL=IconOrigin.js.map","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nvar BaseEvent = /** @class */ (function () {\n    /**\n     * @param {string} type Type.\n     */\n    function BaseEvent(type) {\n        /**\n         * @type {boolean}\n         */\n        this.propagationStopped;\n        /**\n         * The event type.\n         * @type {string}\n         * @api\n         */\n        this.type = type;\n        /**\n         * The event target.\n         * @type {Object}\n         * @api\n         */\n        this.target = null;\n    }\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.preventDefault = function () {\n        this.propagationStopped = true;\n    };\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    return BaseEvent;\n}());\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n    evt.stopPropagation();\n}\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n    evt.preventDefault();\n}\nexport default BaseEvent;\n//# sourceMappingURL=Event.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/SimpleGeometry\n */\nimport { abstract } from '../util.js';\nimport { createOrUpdateFromFlatCoordinates, getCenter } from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport { rotate, scale, translate, transform2D } from './flat/transform.js';\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nvar SimpleGeometry = /** @class */ (function (_super) {\n    __extends(SimpleGeometry, _super);\n    function SimpleGeometry() {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {GeometryLayout}\n         */\n        _this.layout = GeometryLayout.XY;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.stride = 2;\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.flatCoordinates = null;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    SimpleGeometry.prototype.computeExtent = function (extent) {\n        return createOrUpdateFromFlatCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * @abstract\n     * @return {Array<*>} Coordinates.\n     */\n    SimpleGeometry.prototype.getCoordinates = function () {\n        return abstract();\n    };\n    /**\n     * Return the first coordinate of the geometry.\n     * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n     * @api\n     */\n    SimpleGeometry.prototype.getFirstCoordinate = function () {\n        return this.flatCoordinates.slice(0, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat coordinates.\n     */\n    SimpleGeometry.prototype.getFlatCoordinates = function () {\n        return this.flatCoordinates;\n    };\n    /**\n     * Return the last coordinate of the geometry.\n     * @return {import(\"../coordinate.js\").Coordinate} Last point.\n     * @api\n     */\n    SimpleGeometry.prototype.getLastCoordinate = function () {\n        return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n    };\n    /**\n     * Return the {@link module:ol/geom/GeometryLayout layout} of the geometry.\n     * @return {GeometryLayout} Layout.\n     * @api\n     */\n    SimpleGeometry.prototype.getLayout = function () {\n        return this.layout;\n    };\n    /**\n     * @inheritDoc\n     */\n    SimpleGeometry.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        if (this.simplifiedGeometryRevision !== this.getRevision()) {\n            this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n            this.simplifiedGeometryRevision = this.getRevision();\n        }\n        // If squaredTolerance is negative or if we know that simplification will not\n        // have any effect then just return this.\n        if (squaredTolerance < 0 ||\n            (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n                squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n            return this;\n        }\n        var simplifiedGeometry = this.getSimplifiedGeometryInternal(squaredTolerance);\n        var simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n        if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n            return simplifiedGeometry;\n        }\n        else {\n            // Simplification did not actually remove any coordinates.  We now know\n            // that any calls to getSimplifiedGeometry with a squaredTolerance less\n            // than or equal to the current squaredTolerance will also not have any\n            // effect.  This allows us to short circuit simplification (saving CPU\n            // cycles) and prevents the cache of simplified geometries from filling\n            // up with useless identical copies of this geometry (saving memory).\n            this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n            return this;\n        }\n    };\n    /**\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {SimpleGeometry} Simplified geometry.\n     * @protected\n     */\n    SimpleGeometry.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        return this;\n    };\n    /**\n     * @return {number} Stride.\n     */\n    SimpleGeometry.prototype.getStride = function () {\n        return this.stride;\n    };\n    /**\n     * @param {GeometryLayout} layout Layout.\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     */\n    SimpleGeometry.prototype.setFlatCoordinates = function (layout, flatCoordinates) {\n        this.stride = getStrideForLayout(layout);\n        this.layout = layout;\n        this.flatCoordinates = flatCoordinates;\n    };\n    /**\n     * @abstract\n     * @param {!Array<*>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     */\n    SimpleGeometry.prototype.setCoordinates = function (coordinates, opt_layout) {\n        abstract();\n    };\n    /**\n     * @param {GeometryLayout|undefined} layout Layout.\n     * @param {Array<*>} coordinates Coordinates.\n     * @param {number} nesting Nesting.\n     * @protected\n     */\n    SimpleGeometry.prototype.setLayout = function (layout, coordinates, nesting) {\n        /** @type {number} */\n        var stride;\n        if (layout) {\n            stride = getStrideForLayout(layout);\n        }\n        else {\n            for (var i = 0; i < nesting; ++i) {\n                if (coordinates.length === 0) {\n                    this.layout = GeometryLayout.XY;\n                    this.stride = 2;\n                    return;\n                }\n                else {\n                    coordinates = /** @type {Array} */ (coordinates[0]);\n                }\n            }\n            stride = coordinates.length;\n            layout = getLayoutForStride(stride);\n        }\n        this.layout = layout;\n        this.stride = stride;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    SimpleGeometry.prototype.applyTransform = function (transformFn) {\n        if (this.flatCoordinates) {\n            transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n            this.changed();\n        }\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    SimpleGeometry.prototype.rotate = function (angle, anchor) {\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            rotate(flatCoordinates, 0, flatCoordinates.length, stride, angle, anchor, flatCoordinates);\n            this.changed();\n        }\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    SimpleGeometry.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        var sy = opt_sy;\n        if (sy === undefined) {\n            sy = sx;\n        }\n        var anchor = opt_anchor;\n        if (!anchor) {\n            anchor = getCenter(this.getExtent());\n        }\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            scale(flatCoordinates, 0, flatCoordinates.length, stride, sx, sy, anchor, flatCoordinates);\n            this.changed();\n        }\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    SimpleGeometry.prototype.translate = function (deltaX, deltaY) {\n        var flatCoordinates = this.getFlatCoordinates();\n        if (flatCoordinates) {\n            var stride = this.getStride();\n            translate(flatCoordinates, 0, flatCoordinates.length, stride, deltaX, deltaY, flatCoordinates);\n            this.changed();\n        }\n    };\n    return SimpleGeometry;\n}(Geometry));\n/**\n * @param {number} stride Stride.\n * @return {GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n    var layout;\n    if (stride == 2) {\n        layout = GeometryLayout.XY;\n    }\n    else if (stride == 3) {\n        layout = GeometryLayout.XYZ;\n    }\n    else if (stride == 4) {\n        layout = GeometryLayout.XYZM;\n    }\n    return (\n    /** @type {GeometryLayout} */ (layout));\n}\n/**\n * @param {GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n    var stride;\n    if (layout == GeometryLayout.XY) {\n        stride = 2;\n    }\n    else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n        stride = 3;\n    }\n    else if (layout == GeometryLayout.XYZM) {\n        stride = 4;\n    }\n    return /** @type {number} */ (stride);\n}\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n    var flatCoordinates = simpleGeometry.getFlatCoordinates();\n    if (!flatCoordinates) {\n        return null;\n    }\n    else {\n        var stride = simpleGeometry.getStride();\n        return transform2D(flatCoordinates, 0, flatCoordinates.length, stride, transform, opt_dest);\n    }\n}\nexport default SimpleGeometry;\n//# sourceMappingURL=SimpleGeometry.js.map","/**\n * @module ol/proj/Units\n */\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nvar Units = {\n    DEGREES: 'degrees',\n    FEET: 'ft',\n    METERS: 'm',\n    PIXELS: 'pixels',\n    TILE_PIXELS: 'tile-pixels',\n    USFEET: 'us-ft'\n};\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport var METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\nexport default Units;\n//# sourceMappingURL=Units.js.map","/**\n * @module ol/tilecoord\n */\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n    if (opt_tileCoord !== undefined) {\n        opt_tileCoord[0] = z;\n        opt_tileCoord[1] = x;\n        opt_tileCoord[2] = y;\n        return opt_tileCoord;\n    }\n    else {\n        return [z, x, y];\n    }\n}\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n    return z + '/' + x + '/' + y;\n}\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n    return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n    return key.split('/').map(Number);\n}\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n    return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n    var z = tileCoord[0];\n    var x = tileCoord[1];\n    var y = tileCoord[2];\n    if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n        return false;\n    }\n    var extent = tileGrid.getExtent();\n    var tileRange;\n    if (!extent) {\n        tileRange = tileGrid.getFullTileRange(z);\n    }\n    else {\n        tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    }\n    if (!tileRange) {\n        return true;\n    }\n    else {\n        return tileRange.containsXY(x, y);\n    }\n}\n//# sourceMappingURL=tilecoord.js.map","/**\n * @module ol/size\n */\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = size[0] + 2 * num;\n    opt_size[1] = size[1] + 2 * num;\n    return opt_size;\n}\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n    return size[0] > 0 && size[1] > 0;\n}\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = (size[0] * ratio + 0.5) | 0;\n    opt_size[1] = (size[1] * ratio + 0.5) | 0;\n    return opt_size;\n}\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    else {\n        if (opt_size === undefined) {\n            opt_size = [size, size];\n        }\n        else {\n            opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n        }\n        return opt_size;\n    }\n}\n//# sourceMappingURL=size.js.map","/**\n * @module ol/extent/Relationship\n */\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n    UNKNOWN: 0,\n    INTERSECTING: 1,\n    ABOVE: 2,\n    RIGHT: 4,\n    BELOW: 8,\n    LEFT: 16\n};\n//# sourceMappingURL=Relationship.js.map","/**\n * @module ol/easing\n */\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n    return Math.pow(t, 3);\n}\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n    return 1 - easeIn(1 - t);\n}\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n}\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n    return t;\n}\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing~inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n    if (t < 0.5) {\n        return inAndOut(2 * t);\n    }\n    else {\n        return 1 - inAndOut(2 * (t - 0.5));\n    }\n}\n//# sourceMappingURL=easing.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport { getUid } from '../../util.js';\nimport ViewHint from '../../ViewHint.js';\nimport { buffer, createEmpty, containsExtent, getWidth, intersects as intersectsExtent } from '../../extent.js';\nimport { fromUserExtent, toUserExtent, getUserProjection, getTransformFromProjections } from '../../proj.js';\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport ExecutorGroup, { replayDeclutter } from '../../render/canvas/ExecutorGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport { defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature } from '../vector.js';\nimport { toString as transformToString, makeScale, makeInverse } from '../../transform.js';\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nvar CanvasVectorLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasVectorLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Vector.js\").default} vectorLayer Vector layer.\n     */\n    function CanvasVectorLayerRenderer(vectorLayer) {\n        var _this = _super.call(this, vectorLayer) || this;\n        /** @private */\n        _this.boundHandleStyleImageChange_ = _this.handleStyleImageChange_.bind(_this);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.dirty_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedResolution_ = NaN;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.renderedExtent_ = createEmpty();\n        /**\n         * @private\n         * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n         */\n        _this.renderedRenderOrder_ = null;\n        /**\n         * @private\n         * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n         */\n        _this.replayGroup_ = null;\n        /**\n         * A new replay group had to be created by `prepareFrame()`\n         * @type {boolean}\n         */\n        _this.replayGroupChanged = true;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.useContainer = function (target, transform, opacity) {\n        if (opacity < 1) {\n            target = null;\n        }\n        _super.prototype.useContainer.call(this, target, transform, opacity);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var pixelRatio = frameState.pixelRatio;\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        // set forward and inverse pixel transforms\n        makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n        makeInverse(this.inversePixelTransform, this.pixelTransform);\n        this.useContainer(target, this.pixelTransform, layerState.opacity);\n        var context = this.context;\n        var canvas = context.canvas;\n        var replayGroup = this.replayGroup_;\n        if (!replayGroup || replayGroup.isEmpty()) {\n            if (!this.containerReused && canvas.width > 0) {\n                canvas.width = 0;\n            }\n            return this.container;\n        }\n        // resize and clear\n        var width = Math.round(frameState.size[0] * pixelRatio);\n        var height = Math.round(frameState.size[1] * pixelRatio);\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n            var canvasTransform = transformToString(this.pixelTransform);\n            if (canvas.style.transform !== canvasTransform) {\n                canvas.style.transform = canvasTransform;\n            }\n        }\n        else if (!this.containerReused) {\n            context.clearRect(0, 0, width, height);\n        }\n        this.preRender(context, frameState);\n        var extent = frameState.extent;\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var rotation = viewState.rotation;\n        var projectionExtent = projection.getExtent();\n        var vectorSource = this.getLayer().getSource();\n        // clipped rendering if layer extent is set\n        var clipped = false;\n        if (layerState.extent) {\n            var layerExtent = fromUserExtent(layerState.extent, projection);\n            clipped = !containsExtent(layerExtent, frameState.extent) && intersectsExtent(layerExtent, frameState.extent);\n            if (clipped) {\n                this.clip(context, frameState, layerExtent);\n            }\n        }\n        var viewHints = frameState.viewHints;\n        var snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n        var transform = this.getRenderTransform(frameState, width, height, 0);\n        var declutterReplays = this.getLayer().getDeclutter() ? {} : null;\n        replayGroup.execute(context, transform, rotation, snapToPixel, undefined, declutterReplays);\n        if (vectorSource.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, extent)) {\n            var startX = extent[0];\n            var worldWidth = getWidth(projectionExtent);\n            var world = 0;\n            var offsetX = void 0;\n            while (startX < projectionExtent[0]) {\n                --world;\n                offsetX = worldWidth * world;\n                var transform_1 = this.getRenderTransform(frameState, width, height, offsetX);\n                replayGroup.execute(context, transform_1, rotation, snapToPixel, undefined, declutterReplays);\n                startX += worldWidth;\n            }\n            world = 0;\n            startX = extent[2];\n            while (startX > projectionExtent[2]) {\n                ++world;\n                offsetX = worldWidth * world;\n                var transform_2 = this.getRenderTransform(frameState, width, height, offsetX);\n                replayGroup.execute(context, transform_2, rotation, snapToPixel, undefined, declutterReplays);\n                startX -= worldWidth;\n            }\n        }\n        if (declutterReplays) {\n            var viewHints_1 = frameState.viewHints;\n            var hifi = !(viewHints_1[ViewHint.ANIMATING] || viewHints_1[ViewHint.INTERACTING]);\n            replayDeclutter(declutterReplays, context, rotation, 1, hifi, frameState.declutterItems);\n        }\n        if (clipped) {\n            context.restore();\n        }\n        this.postRender(context, frameState);\n        var opacity = layerState.opacity;\n        var container = this.container;\n        if (opacity !== parseFloat(container.style.opacity)) {\n            container.style.opacity = opacity === 1 ? '' : opacity;\n        }\n        return this.container;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n        if (!this.replayGroup_) {\n            return undefined;\n        }\n        else {\n            var resolution = frameState.viewState.resolution;\n            var rotation = frameState.viewState.rotation;\n            var layer_1 = this.getLayer();\n            /** @type {!Object<string, boolean>} */\n            var features_1 = {};\n            var result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, \n            /**\n             * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n             * @return {?} Callback result.\n             */\n            function (feature) {\n                var key = getUid(feature);\n                if (!(key in features_1)) {\n                    features_1[key] = true;\n                    return callback(feature, layer_1);\n                }\n            }, layer_1.getDeclutter() ? declutteredFeatures : null);\n            return result;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.handleFontsChanged = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && this.replayGroup_) {\n            layer.changed();\n        }\n    };\n    /**\n     * Handle changes in image style state.\n     * @param {import(\"../../events/Event.js\").default} event Image style change event.\n     * @private\n     */\n    CanvasVectorLayerRenderer.prototype.handleStyleImageChange_ = function (event) {\n        this.renderIfReadyAndVisible();\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var vectorLayer = this.getLayer();\n        var vectorSource = vectorLayer.getSource();\n        var animating = frameState.viewHints[ViewHint.ANIMATING];\n        var interacting = frameState.viewHints[ViewHint.INTERACTING];\n        var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n        var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n        if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n            (!updateWhileInteracting && interacting)) {\n            return true;\n        }\n        var frameStateExtent = frameState.extent;\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var resolution = viewState.resolution;\n        var pixelRatio = frameState.pixelRatio;\n        var vectorLayerRevision = vectorLayer.getRevision();\n        var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n        var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n        if (vectorLayerRenderOrder === undefined) {\n            vectorLayerRenderOrder = defaultRenderOrder;\n        }\n        var extent = buffer(frameStateExtent, vectorLayerRenderBuffer * resolution);\n        var projectionExtent = viewState.projection.getExtent();\n        if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n            !containsExtent(projectionExtent, frameState.extent)) {\n            // For the replay group, we need an extent that intersects the real world\n            // (-180 to +180). To support geometries in a coordinate range from -540\n            // to +540, we add at least 1 world width on each side of the projection\n            // extent. If the viewport is wider than the world, we need to add half of\n            // the viewport width to make sure we cover the whole viewport.\n            var worldWidth = getWidth(projectionExtent);\n            var gutter = Math.max(getWidth(extent) / 2, worldWidth);\n            extent[0] = projectionExtent[0] - gutter;\n            extent[2] = projectionExtent[2] + gutter;\n        }\n        if (!this.dirty_ &&\n            this.renderedResolution_ == resolution &&\n            this.renderedRevision_ == vectorLayerRevision &&\n            this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n            containsExtent(this.renderedExtent_, extent)) {\n            this.replayGroupChanged = false;\n            return true;\n        }\n        if (this.replayGroup_) {\n            this.replayGroup_.dispose();\n        }\n        this.replayGroup_ = null;\n        this.dirty_ = false;\n        var replayGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio, vectorLayer.getDeclutter());\n        var userProjection = getUserProjection();\n        var userTransform;\n        if (userProjection) {\n            vectorSource.loadFeatures(toUserExtent(extent, projection), resolution, userProjection);\n            userTransform = getTransformFromProjections(userProjection, projection);\n        }\n        else {\n            vectorSource.loadFeatures(extent, resolution, projection);\n        }\n        var squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n        /**\n         * @param {import(\"../../Feature.js\").default} feature Feature.\n         * @this {CanvasVectorLayerRenderer}\n         */\n        var render = function (feature) {\n            var styles;\n            var styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n            if (styleFunction) {\n                styles = styleFunction(feature, resolution);\n            }\n            if (styles) {\n                var dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup, userTransform);\n                this.dirty_ = this.dirty_ || dirty;\n            }\n        }.bind(this);\n        var userExtent = toUserExtent(extent, projection);\n        if (vectorLayerRenderOrder) {\n            /** @type {Array<import(\"../../Feature.js\").default>} */\n            var features_2 = [];\n            vectorSource.forEachFeatureInExtent(userExtent, \n            /**\n             * @param {import(\"../../Feature.js\").default} feature Feature.\n             */\n            function (feature) {\n                features_2.push(feature);\n            });\n            features_2.sort(vectorLayerRenderOrder);\n            for (var i = 0, ii = features_2.length; i < ii; ++i) {\n                render(features_2[i]);\n            }\n        }\n        else {\n            vectorSource.forEachFeatureInExtent(userExtent, render);\n        }\n        var replayGroupInstructions = replayGroup.finish();\n        var executorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), replayGroupInstructions, vectorLayer.getRenderBuffer());\n        this.renderedResolution_ = resolution;\n        this.renderedRevision_ = vectorLayerRevision;\n        this.renderedRenderOrder_ = vectorLayerRenderOrder;\n        this.renderedExtent_ = extent;\n        this.replayGroup_ = executorGroup;\n        this.replayGroupChanged = true;\n        return true;\n    };\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @param {number} squaredTolerance Squared render tolerance.\n     * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n     * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n     * @param {import(\"../../proj.js\").TransformFunction} opt_transform Transform from user to view projection.\n     * @return {boolean} `true` if an image is loading.\n     */\n    CanvasVectorLayerRenderer.prototype.renderFeature = function (feature, squaredTolerance, styles, builderGroup, opt_transform) {\n        if (!styles) {\n            return false;\n        }\n        var loading = false;\n        if (Array.isArray(styles)) {\n            for (var i = 0, ii = styles.length; i < ii; ++i) {\n                loading = renderFeature(builderGroup, feature, styles[i], squaredTolerance, this.boundHandleStyleImageChange_, opt_transform) || loading;\n            }\n        }\n        else {\n            loading = renderFeature(builderGroup, feature, styles, squaredTolerance, this.boundHandleStyleImageChange_, opt_transform);\n        }\n        return loading;\n    };\n    return CanvasVectorLayerRenderer;\n}(CanvasLayerRenderer));\nexport default CanvasVectorLayerRenderer;\n//# sourceMappingURL=VectorLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Vector\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {BaseVectorLayer<import(\"../source/Vector.js\").default>}\n * @api\n */\nvar VectorLayer = /** @class */ (function (_super) {\n    __extends(VectorLayer, _super);\n    /**\n     * @param {import(\"./BaseVector.js\").Options=} opt_options Options.\n     */\n    function VectorLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    VectorLayer.prototype.createRenderer = function () {\n        return new CanvasVectorLayerRenderer(this);\n    };\n    return VectorLayer;\n}(BaseVectorLayer));\nexport default VectorLayer;\n//# sourceMappingURL=Vector.js.map","/**\n * @module ol/interaction/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    ACTIVE: 'active'\n};\n//# sourceMappingURL=Property.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport { easeOut, linear } from '../easing.js';\nimport InteractionProperty from './Property.js';\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return). The interactions\n * are traversed in reverse order of the interactions collection of the map.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nvar Interaction = /** @class */ (function (_super) {\n    __extends(Interaction, _super);\n    /**\n     * @param {InteractionOptions} options Options.\n     */\n    function Interaction(options) {\n        var _this = _super.call(this) || this;\n        if (options.handleEvent) {\n            _this.handleEvent = options.handleEvent;\n        }\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        _this.setActive(true);\n        return _this;\n    }\n    /**\n     * Return whether the interaction is currently active.\n     * @return {boolean} `true` if the interaction is active, `false` otherwise.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.getActive = function () {\n        return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n    };\n    /**\n     * Get the map associated with this interaction.\n     * @return {import(\"../PluggableMap.js\").default} Map.\n     * @api\n     */\n    Interaction.prototype.getMap = function () {\n        return this.map_;\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @api\n     */\n    Interaction.prototype.handleEvent = function (mapBrowserEvent) {\n        return true;\n    };\n    /**\n     * Activate or deactivate the interaction.\n     * @param {boolean} active Active.\n     * @observable\n     * @api\n     */\n    Interaction.prototype.setActive = function (active) {\n        this.set(InteractionProperty.ACTIVE, active);\n    };\n    /**\n     * Remove the interaction from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    Interaction.prototype.setMap = function (map) {\n        this.map_ = map;\n    };\n    return Interaction;\n}(BaseObject));\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n    var currentCenter = view.getCenterInternal();\n    if (currentCenter) {\n        var center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n        view.animateInternal({\n            duration: opt_duration !== undefined ? opt_duration : 250,\n            easing: linear,\n            center: view.getConstrainedCenter(center)\n        });\n    }\n}\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate in the user projection.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n    var currentZoom = view.getZoom();\n    if (currentZoom === undefined) {\n        return;\n    }\n    var newZoom = view.getConstrainedZoom(currentZoom + delta);\n    var newResolution = view.getResolutionForZoom(newZoom);\n    if (view.getAnimating()) {\n        view.cancelAnimations();\n    }\n    view.animate({\n        resolution: newResolution,\n        anchor: opt_anchor,\n        duration: opt_duration !== undefined ? opt_duration : 250,\n        easing: easeOut\n    });\n}\nexport default Interaction;\n//# sourceMappingURL=Interaction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport { listen, unlistenByKey, listenOnce } from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * Listen for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n     *     called with an array of event types as the first argument, the return\n     *     will be an array of keys.\n     * @api\n     */\n    Observable.prototype.on = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * Listen once for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n     *     called with an array of event types as the first argument, the return\n     *     will be an array of keys.\n     * @api\n     */\n    Observable.prototype.once = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listenOnce(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listenOnce(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @api\n     */\n    Observable.prototype.un = function (type, listener) {\n        if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","/**\n * @module ol/geom/flat/transform\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var x = flatCoordinates[j];\n        var y = flatCoordinates[j + 1];\n        dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n        dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var anchorX = anchor[0];\n    var anchorY = anchor[1];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var deltaX = flatCoordinates[j] - anchorX;\n        var deltaY = flatCoordinates[j + 1] - anchorY;\n        dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n        dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var anchorX = anchor[0];\n    var anchorY = anchor[1];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        var deltaX = flatCoordinates[j] - anchorX;\n        var deltaY = flatCoordinates[j + 1] - anchorY;\n        dest[i++] = anchorX + sx * deltaX;\n        dest[i++] = anchorY + sy * deltaY;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n    var dest = opt_dest ? opt_dest : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        dest[i++] = flatCoordinates[j] + deltaX;\n        dest[i++] = flatCoordinates[j + 1] + deltaY;\n        for (var k = j + 2; k < j + stride; ++k) {\n            dest[i++] = flatCoordinates[k];\n        }\n    }\n    if (opt_dest && dest.length != i) {\n        dest.length = i;\n    }\n    return dest;\n}\n//# sourceMappingURL=transform.js.map","/**\n * @module ol/coordinate\n */\nimport { modulo } from './math.js';\nimport { padNumber } from './string.js';\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n    coordinate[0] += +delta[0];\n    coordinate[1] += +delta[1];\n    return coordinate;\n}\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n    var r = circle.getRadius();\n    var center = circle.getCenter();\n    var x0 = center[0];\n    var y0 = center[1];\n    var x1 = coordinate[0];\n    var y1 = coordinate[1];\n    var dx = x1 - x0;\n    var dy = y1 - y0;\n    if (dx === 0 && dy === 0) {\n        dx = 1;\n    }\n    var d = Math.sqrt(dx * dx + dy * dy);\n    var x = x0 + r * dx / d;\n    var y = y0 + r * dy / d;\n    return [x, y];\n}\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n    var x0 = coordinate[0];\n    var y0 = coordinate[1];\n    var start = segment[0];\n    var end = segment[1];\n    var x1 = start[0];\n    var y1 = start[1];\n    var x2 = end[0];\n    var y2 = end[1];\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var along = (dx === 0 && dy === 0) ? 0 :\n        ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n    var x, y;\n    if (along <= 0) {\n        x = x1;\n        y = y1;\n    }\n    else if (along >= 1) {\n        x = x2;\n        y = y2;\n    }\n    else {\n        x = x1 + along * dx;\n        y = y1 + along * dy;\n    }\n    return [x, y];\n}\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n    return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function (coordinate) {\n        return toStringXY(coordinate, opt_fractionDigits);\n    });\n}\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n    var normalizedDegrees = modulo(degrees + 180, 360) - 180;\n    var x = Math.abs(3600 * normalizedDegrees);\n    var dflPrecision = opt_fractionDigits || 0;\n    var precision = Math.pow(10, dflPrecision);\n    var deg = Math.floor(x / 3600);\n    var min = Math.floor((x - deg * 3600) / 60);\n    var sec = x - (deg * 3600) - (min * 60);\n    sec = Math.ceil(sec * precision) / precision;\n    if (sec >= 60) {\n        sec = 0;\n        min += 1;\n    }\n    if (min >= 60) {\n        min = 0;\n        deg += 1;\n    }\n    return deg + '\\u00b0 ' + padNumber(min, 2) + '\\u2032 ' +\n        padNumber(sec, 2, dflPrecision) + '\\u2033' +\n        (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n}\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n    if (coordinate) {\n        return template\n            .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n            .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n    var equals = true;\n    for (var i = coordinate1.length - 1; i >= 0; --i) {\n        if (coordinate1[i] != coordinate2[i]) {\n            equals = false;\n            break;\n        }\n    }\n    return equals;\n}\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n    var cosAngle = Math.cos(angle);\n    var sinAngle = Math.sin(angle);\n    var x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    var y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    coordinate[0] = x;\n    coordinate[1] = y;\n    return coordinate;\n}\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n    coordinate[0] *= scale;\n    coordinate[1] *= scale;\n    return coordinate;\n}\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n    var dx = coord1[0] - coord2[0];\n    var dy = coord1[1] - coord2[1];\n    return dx * dx + dy * dy;\n}\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n    return Math.sqrt(squaredDistance(coord1, coord2));\n}\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n    return squaredDistance(coordinate, closestOnSegment(coordinate, segment));\n}\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47 58 60 N 7 50 60 E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47 58 60.0 N 7 50 60.0 E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n    if (coordinate) {\n        return degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n            degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n    return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n//# sourceMappingURL=coordinate.js.map","/**\n * @module ol/reproj/common\n */\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport var ERROR_THRESHOLD = 0.5;\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport var ENABLE_RASTER_REPROJECTION = true;\n//# sourceMappingURL=common.js.map","/**\n * @module ol/CollectionEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when an item is added to the collection.\n     * @event module:ol/Collection.CollectionEvent#add\n     * @api\n     */\n    ADD: 'add',\n    /**\n     * Triggered when an item is removed from the collection.\n     * @event module:ol/Collection.CollectionEvent#remove\n     * @api\n     */\n    REMOVE: 'remove'\n};\n//# sourceMappingURL=CollectionEventType.js.map","/**\n * @module ol/has\n */\nvar ua = typeof navigator !== 'undefined' ?\n    navigator.userAgent.toLowerCase() : '';\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport var FIREFOX = ua.indexOf('firefox') !== -1;\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport var SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport var WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport var MAC = ua.indexOf('macintosh') !== -1;\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport var DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport var IMAGE_DECODE = typeof Image !== 'undefined' && Image.prototype.decode;\n//# sourceMappingURL=has.js.map","/**\n * @module ol/style/IconAnchorUnits\n */\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n    FRACTION: 'fraction',\n    PIXELS: 'pixels'\n};\n//# sourceMappingURL=IconAnchorUnits.js.map","/**\n * @module ol/geom/flat/deflate\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n    for (var i = 0, ii = coordinate.length; i < ii; ++i) {\n        flatCoordinates[offset++] = coordinate[i];\n    }\n    return offset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        var coordinate = coordinates[i];\n        for (var j = 0; j < stride; ++j) {\n            flatCoordinates[offset++] = coordinate[j];\n        }\n    }\n    return offset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>=} opt_ends Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n    var ends = opt_ends ? opt_ends : [];\n    var i = 0;\n    for (var j = 0, jj = coordinatess.length; j < jj; ++j) {\n        var end = deflateCoordinates(flatCoordinates, offset, coordinatess[j], stride);\n        ends[i++] = end;\n        offset = end;\n    }\n    ends.length = i;\n    return ends;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>=} opt_endss Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n    var endss = opt_endss ? opt_endss : [];\n    var i = 0;\n    for (var j = 0, jj = coordinatesss.length; j < jj; ++j) {\n        var ends = deflateCoordinatesArray(flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n        endss[i++] = ends;\n        offset = ends[ends.length - 1];\n    }\n    endss.length = i;\n    return endss;\n}\n//# sourceMappingURL=deflate.js.map","/**\n * @module ol/geom/flat/inflate\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>=} opt_coordinates Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n    var coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n    var i = 0;\n    for (var j = offset; j < end; j += stride) {\n        coordinates[i++] = flatCoordinates.slice(j, j + stride);\n    }\n    coordinates.length = i;\n    return coordinates;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n    var coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n    var i = 0;\n    for (var j = 0, jj = ends.length; j < jj; ++j) {\n        var end = ends[j];\n        coordinatess[i++] = inflateCoordinates(flatCoordinates, offset, end, stride, coordinatess[i]);\n        offset = end;\n    }\n    coordinatess.length = i;\n    return coordinatess;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n    var coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n    var i = 0;\n    for (var j = 0, jj = endss.length; j < jj; ++j) {\n        var ends = endss[j];\n        coordinatesss[i++] = inflateCoordinatesArray(flatCoordinates, offset, ends, stride, coordinatesss[i]);\n        offset = ends[ends.length - 1];\n    }\n    coordinatesss.length = i;\n    return coordinatesss;\n}\n//# sourceMappingURL=inflate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LENGTH: 'length'\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nvar CollectionEvent = /** @class */ (function (_super) {\n    __extends(CollectionEvent, _super);\n    /**\n     * @param {CollectionEventType} type Type.\n     * @param {*=} opt_element Element.\n     * @param {number} opt_index The index of the added or removed element.\n     */\n    function CollectionEvent(type, opt_element, opt_index) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The element that is added to or removed from the collection.\n         * @type {*}\n         * @api\n         */\n        _this.element = opt_element;\n        /**\n         * The index of the added or removed element.\n         * @type {number}\n         * @api\n         */\n        _this.index = opt_index;\n        return _this;\n    }\n    return CollectionEvent;\n}(Event));\nexport { CollectionEvent };\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    /**\n     * @param {Array<T>=} opt_array Array.\n     * @param {Options=} opt_options Collection options.\n     */\n    function Collection(opt_array, opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.unique_ = !!options.unique;\n        /**\n         * @private\n         * @type {!Array<T>}\n         */\n        _this.array_ = opt_array ? opt_array : [];\n        if (_this.unique_) {\n            for (var i = 0, ii = _this.array_.length; i < ii; ++i) {\n                _this.assertUnique_(_this.array_[i], i);\n            }\n        }\n        _this.updateLength_();\n        return _this;\n    }\n    /**\n     * Remove all elements from the collection.\n     * @api\n     */\n    Collection.prototype.clear = function () {\n        while (this.getLength() > 0) {\n            this.pop();\n        }\n    };\n    /**\n     * Add elements to the collection.  This pushes each item in the provided array\n     * to the end of the collection.\n     * @param {!Array<T>} arr Array.\n     * @return {Collection<T>} This collection.\n     * @api\n     */\n    Collection.prototype.extend = function (arr) {\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            this.push(arr[i]);\n        }\n        return this;\n    };\n    /**\n     * Iterate over each element, calling the provided callback.\n     * @param {function(T, number, Array<T>): *} f The function to call\n     *     for every element. This function takes 3 arguments (the element, the\n     *     index and the array). The return value is ignored.\n     * @api\n     */\n    Collection.prototype.forEach = function (f) {\n        var array = this.array_;\n        for (var i = 0, ii = array.length; i < ii; ++i) {\n            f(array[i], i, array);\n        }\n    };\n    /**\n     * Get a reference to the underlying Array object. Warning: if the array\n     * is mutated, no events will be dispatched by the collection, and the\n     * collection's \"length\" property won't be in sync with the actual length\n     * of the array.\n     * @return {!Array<T>} Array.\n     * @api\n     */\n    Collection.prototype.getArray = function () {\n        return this.array_;\n    };\n    /**\n     * Get the element at the provided index.\n     * @param {number} index Index.\n     * @return {T} Element.\n     * @api\n     */\n    Collection.prototype.item = function (index) {\n        return this.array_[index];\n    };\n    /**\n     * Get the length of this collection.\n     * @return {number} The length of the array.\n     * @observable\n     * @api\n     */\n    Collection.prototype.getLength = function () {\n        return this.get(Property.LENGTH);\n    };\n    /**\n     * Insert an element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.insertAt = function (index, elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        this.array_.splice(index, 0, elem);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n    };\n    /**\n     * Remove the last element of the collection and return it.\n     * Return `undefined` if the collection is empty.\n     * @return {T|undefined} Element.\n     * @api\n     */\n    Collection.prototype.pop = function () {\n        return this.removeAt(this.getLength() - 1);\n    };\n    /**\n     * Insert the provided element at the end of the collection.\n     * @param {T} elem Element.\n     * @return {number} New length of the collection.\n     * @api\n     */\n    Collection.prototype.push = function (elem) {\n        if (this.unique_) {\n            this.assertUnique_(elem);\n        }\n        var n = this.getLength();\n        this.insertAt(n, elem);\n        return this.getLength();\n    };\n    /**\n     * Remove the first occurrence of an element from the collection.\n     * @param {T} elem Element.\n     * @return {T|undefined} The removed element or undefined if none found.\n     * @api\n     */\n    Collection.prototype.remove = function (elem) {\n        var arr = this.array_;\n        for (var i = 0, ii = arr.length; i < ii; ++i) {\n            if (arr[i] === elem) {\n                return this.removeAt(i);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Remove the element at the provided index and return it.\n     * Return `undefined` if the collection does not contain this index.\n     * @param {number} index Index.\n     * @return {T|undefined} Value.\n     * @api\n     */\n    Collection.prototype.removeAt = function (index) {\n        var prev = this.array_[index];\n        this.array_.splice(index, 1);\n        this.updateLength_();\n        this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n        return prev;\n    };\n    /**\n     * Set the element at the provided index.\n     * @param {number} index Index.\n     * @param {T} elem Element.\n     * @api\n     */\n    Collection.prototype.setAt = function (index, elem) {\n        var n = this.getLength();\n        if (index < n) {\n            if (this.unique_) {\n                this.assertUnique_(elem, index);\n            }\n            var prev = this.array_[index];\n            this.array_[index] = elem;\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev, index));\n            this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD, elem, index));\n        }\n        else {\n            for (var j = n; j < index; ++j) {\n                this.insertAt(j, undefined);\n            }\n            this.insertAt(index, elem);\n        }\n    };\n    /**\n     * @private\n     */\n    Collection.prototype.updateLength_ = function () {\n        this.set(Property.LENGTH, this.array_.length);\n    };\n    /**\n     * @private\n     * @param {T} elem Element.\n     * @param {number=} opt_except Optional index to ignore.\n     */\n    Collection.prototype.assertUnique_ = function (elem, opt_except) {\n        for (var i = 0, ii = this.array_.length; i < ii; ++i) {\n            if (this.array_[i] === elem && i !== opt_except) {\n                throw new AssertionError(58);\n            }\n        }\n    };\n    return Collection;\n}(BaseObject));\nexport default Collection;\n//# sourceMappingURL=Collection.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Layer\n */\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { getChangeEventType } from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport { assign } from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {boolean} hasOverlay Set by the renderer when an overlay for points and text is used.\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n * @property {number} minZoom\n * @property {number} maxZoom\n */\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is be added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link module:ol/Map~Map#forEachLayerAtPixel} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} SourceType\n * @api\n */\nvar Layer = /** @class */ (function (_super) {\n    __extends(Layer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function Layer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        delete baseOptions.source;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapPrecomposeKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapRenderKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceChangeKey_ = null;\n        /**\n         * @private\n         * @type {import(\"../renderer/Layer.js\").default}\n         */\n        _this.renderer_ = null;\n        // Overwrite default render method with a custom one\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.map) {\n            _this.setMap(options.map);\n        }\n        _this.addEventListener(getChangeEventType(LayerProperty.SOURCE), _this.handleSourcePropertyChange_);\n        var source = options.source ? /** @type {SourceType} */ (options.source) : null;\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array ? opt_array : [];\n        array.push(this);\n        return array;\n    };\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states ? opt_states : [];\n        states.push(this.getLayerState());\n        return states;\n    };\n    /**\n     * Get the layer source.\n     * @return {SourceType} The layer source (or `null` if not yet set).\n     * @observable\n     * @api\n     */\n    Layer.prototype.getSource = function () {\n        return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n    };\n    /**\n      * @inheritDoc\n      */\n    Layer.prototype.getSourceState = function () {\n        var source = this.getSource();\n        return !source ? SourceState.UNDEFINED : source.getState();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourceChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourcePropertyChange_ = function () {\n        if (this.sourceChangeKey_) {\n            unlistenByKey(this.sourceChangeKey_);\n            this.sourceChangeKey_ = null;\n        }\n        var source = this.getSource();\n        if (source) {\n            this.sourceChangeKey_ = listen(source, EventType.CHANGE, this.handleSourceChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * In charge to manage the rendering of the layer. One layer type is\n     * bounded with one layer renderer.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target which the renderer may (but need not) use\n     * for rendering its content.\n     * @return {HTMLElement} The rendered element.\n     */\n    Layer.prototype.render = function (frameState, target) {\n        var layerRenderer = this.getRenderer();\n        if (layerRenderer.prepareFrame(frameState)) {\n            return layerRenderer.renderFrame(frameState, target);\n        }\n    };\n    /**\n     * Sets the layer to be rendered on top of other layers on a map. The map will\n     * not manage this layer in its layers collection, and the callback in\n     * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n     * is useful for temporary layers. To remove an unmanaged layer from the map,\n     * use `#setMap(null)`.\n     *\n     * To add the layer to a map and have it managed by the map, use\n     * {@link module:ol/Map#addLayer} instead.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Layer.prototype.setMap = function (map) {\n        if (this.mapPrecomposeKey_) {\n            unlistenByKey(this.mapPrecomposeKey_);\n            this.mapPrecomposeKey_ = null;\n        }\n        if (!map) {\n            this.changed();\n        }\n        if (this.mapRenderKey_) {\n            unlistenByKey(this.mapRenderKey_);\n            this.mapRenderKey_ = null;\n        }\n        if (map) {\n            this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function (evt) {\n                var renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n                renderEvent.frameState.layerStatesArray.push(this.getLayerState(false));\n            }, this);\n            this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n            this.changed();\n        }\n    };\n    /**\n     * Set the layer source.\n     * @param {SourceType} source The layer source.\n     * @observable\n     * @api\n     */\n    Layer.prototype.setSource = function (source) {\n        this.set(LayerProperty.SOURCE, source);\n    };\n    /**\n     * Get the renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} The layer renderer.\n     */\n    Layer.prototype.getRenderer = function () {\n        if (!this.renderer_) {\n            this.renderer_ = this.createRenderer();\n        }\n        return this.renderer_;\n    };\n    /**\n     * @return {boolean} The layer has a renderer.\n     */\n    Layer.prototype.hasRenderer = function () {\n        return !!this.renderer_;\n    };\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    Layer.prototype.createRenderer = function () {\n        return null;\n    };\n    return Layer;\n}(BaseLayer));\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n    if (!layerState.visible) {\n        return false;\n    }\n    var resolution = viewState.resolution;\n    if (resolution < layerState.minResolution || resolution >= layerState.maxResolution) {\n        return false;\n    }\n    var zoom = viewState.zoom;\n    return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nexport default Layer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/geom/flat/closest\n */\nimport { lerp, squaredDistance as squaredDx } from '../../math.js';\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n    var x1 = flatCoordinates[offset1];\n    var y1 = flatCoordinates[offset1 + 1];\n    var dx = flatCoordinates[offset2] - x1;\n    var dy = flatCoordinates[offset2 + 1] - y1;\n    var offset;\n    if (dx === 0 && dy === 0) {\n        offset = offset1;\n    }\n    else {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            offset = offset2;\n        }\n        else if (t > 0) {\n            for (var i = 0; i < stride; ++i) {\n                closestPoint[i] = lerp(flatCoordinates[offset1 + i], flatCoordinates[offset2 + i], t);\n            }\n            closestPoint.length = stride;\n            return;\n        }\n        else {\n            offset = offset1;\n        }\n    }\n    for (var i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n    }\n    closestPoint.length = stride;\n}\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    for (offset += stride; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        var squaredDelta = squaredDx(x1, y1, x2, y2);\n        if (squaredDelta > max) {\n            max = squaredDelta;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        max = maxSquaredDelta(flatCoordinates, offset, end, stride, max);\n        offset = end;\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        max = arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max);\n        offset = ends[ends.length - 1];\n    }\n    return max;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    if (offset == end) {\n        return minSquaredDistance;\n    }\n    var i, squaredDistance;\n    if (maxDelta === 0) {\n        // All points are identical, so just test the first point.\n        squaredDistance = squaredDx(x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n        if (squaredDistance < minSquaredDistance) {\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = flatCoordinates[offset + i];\n            }\n            closestPoint.length = stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    }\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    var index = offset + stride;\n    while (index < end) {\n        assignClosest(flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n        squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n        if (squaredDistance < minSquaredDistance) {\n            minSquaredDistance = squaredDistance;\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = tmpPoint[i];\n            }\n            closestPoint.length = stride;\n            index += stride;\n        }\n        else {\n            // Skip ahead multiple points, because we know that all the skipped\n            // points cannot be any closer than the closest point we have found so\n            // far.  We know this because we know how close the current point is, how\n            // close the closest point we have found so far is, and the maximum\n            // distance between consecutive points.  For example, if we're currently\n            // at distance 10, the best we've found so far is 3, and that the maximum\n            // distance between consecutive points is 2, then we'll need to skip at\n            // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n            // finding a closer point.  We use Math.max(..., 1) to ensure that we\n            // always advance at least one point, to avoid an infinite loop.\n            index += stride * Math.max(((Math.sqrt(squaredDistance) -\n                Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n        }\n    }\n    if (isRing) {\n        // Check the closing segment.\n        assignClosest(flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n        squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n        if (squaredDistance < minSquaredDistance) {\n            minSquaredDistance = squaredDistance;\n            for (i = 0; i < stride; ++i) {\n                closestPoint[i] = tmpPoint[i];\n            }\n            closestPoint.length = stride;\n        }\n    }\n    return minSquaredDistance;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        minSquaredDistance = assignClosestPoint(flatCoordinates, offset, end, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n        offset = end;\n    }\n    return minSquaredDistance;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset, endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, opt_tmpPoint) {\n    var tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        minSquaredDistance = assignClosestArrayPoint(flatCoordinates, offset, ends, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n        offset = ends[ends.length - 1];\n    }\n    return minSquaredDistance;\n}\n//# sourceMappingURL=closest.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LineString\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { interpolatePoint, lineStringCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineString } from './flat/intersectsextent.js';\nimport { lineStringLength } from './flat/length.js';\nimport { forEach as forEachSegment } from './flat/segments.js';\nimport { douglasPeucker } from './flat/simplify.js';\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nvar LineString = /** @class */ (function (_super) {\n    __extends(LineString, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {GeometryLayout=} opt_layout Layout.\n     */\n    function LineString(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatMidpoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatMidpointRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed coordinate to the coordinates of the linestring.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @api\n     */\n    LineString.prototype.appendCoordinate = function (coordinate) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = coordinate.slice();\n        }\n        else {\n            extend(this.flatCoordinates, coordinate);\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LineString} Clone.\n     * @override\n     * @api\n     */\n    LineString.prototype.clone = function () {\n        return new LineString(this.flatCoordinates.slice(), this.layout);\n    };\n    /**\n     * @inheritDoc\n     */\n    LineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Iterate over each segment, calling the provided callback.\n     * If the callback returns a truthy value the function returns that\n     * value immediately. Otherwise the function returns `false`.\n     *\n     * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n     *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n     * @return {T|boolean} Value.\n     * @template T,S\n     * @api\n     */\n    LineString.prototype.forEachSegment = function (callback) {\n        return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * @param {number} m M.\n     * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    LineString.prototype.getCoordinateAtM = function (m, opt_extrapolate) {\n        if (this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        return lineStringCoordinateAtM(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, m, extrapolate);\n    };\n    /**\n     * Return the coordinates of the linestring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @override\n     * @api\n     */\n    LineString.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinate at the provided fraction along the linestring.\n     * The `fraction` is a number between 0 and 1, where 0 is the start of the\n     * linestring and 1 is the end.\n     * @param {number} fraction Fraction.\n     * @param {import(\"../coordinate.js\").Coordinate=} opt_dest Optional coordinate whose values will\n     *     be modified. If not provided, a new coordinate will be returned.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n     * @api\n     */\n    LineString.prototype.getCoordinateAt = function (fraction, opt_dest) {\n        return interpolatePoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, fraction, opt_dest);\n    };\n    /**\n     * Return the length of the linestring on projected plane.\n     * @return {number} Length (on projected plane).\n     * @api\n     */\n    LineString.prototype.getLength = function () {\n        return lineStringLength(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat midpoint.\n     */\n    LineString.prototype.getFlatMidpoint = function () {\n        if (this.flatMidpointRevision_ != this.getRevision()) {\n            this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n            this.flatMidpointRevision_ = this.getRevision();\n        }\n        return this.flatMidpoint_;\n    };\n    /**\n     * @inheritDoc\n     */\n    LineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    LineString.prototype.getType = function () {\n        return GeometryType.LINE_STRING;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    LineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineString(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the linestring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    LineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LineString;\n}(SimpleGeometry));\nexport default LineString;\n//# sourceMappingURL=LineString.js.map","/**\n * @module ol/tilegrid\n */\nimport { DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE } from './tilegrid/common.js';\nimport { toSize } from './size.js';\nimport { containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth } from './extent.js';\nimport Corner from './extent/Corner.js';\nimport { get as getProjection, METERS_PER_UNIT } from './proj.js';\nimport Units from './proj/Units.js';\nimport TileGrid from './tilegrid/TileGrid.js';\n/**\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {!TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n    var tileGrid = projection.getDefaultTileGrid();\n    if (!tileGrid) {\n        tileGrid = createForProjection(projection);\n        projection.setDefaultTileGrid(tileGrid);\n    }\n    return tileGrid;\n}\n/**\n * @param {TileGrid} tileGrid Tile grid.\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {import(\"./tilecoord.js\").TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n    var z = tileCoord[0];\n    var center = tileGrid.getTileCoordCenter(tileCoord);\n    var projectionExtent = extentFromProjection(projection);\n    if (!containsCoordinate(projectionExtent, center)) {\n        var worldWidth = getWidth(projectionExtent);\n        var worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n        center[0] += worldWidth * worldsAway;\n        return tileGrid.getTileCoordForCoordAndZ(center, z);\n    }\n    else {\n        return tileCoord;\n    }\n}\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n    var corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n    var resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n    return new TileGrid({\n        extent: extent,\n        origin: getCorner(extent, corner),\n        resolutions: resolutions,\n        tileSize: opt_tileSize\n    });\n}\n/**\n * @typedef {Object} XYZOptions\n * @property {import(\"./extent.js\").Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. The zero level of the grid is defined by the resolution at which one tile fits in the\n * provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|import(\"./size.js\").Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {XYZOptions=} opt_options Tile grid options.\n * @return {!TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n    /** @type {XYZOptions} */\n    var xyzOptions = opt_options || {};\n    var extent = xyzOptions.extent || getProjection('EPSG:3857').getExtent();\n    /** @type {import(\"./tilegrid/TileGrid.js\").Options} */\n    var gridOptions = {\n        extent: extent,\n        minZoom: xyzOptions.minZoom,\n        tileSize: xyzOptions.tileSize,\n        resolutions: resolutionsFromExtent(extent, xyzOptions.maxZoom, xyzOptions.tileSize)\n    };\n    return new TileGrid(gridOptions);\n}\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize) {\n    var maxZoom = opt_maxZoom !== undefined ?\n        opt_maxZoom : DEFAULT_MAX_ZOOM;\n    var height = getHeight(extent);\n    var width = getWidth(extent);\n    var tileSize = toSize(opt_tileSize !== undefined ?\n        opt_tileSize : DEFAULT_TILE_SIZE);\n    var maxResolution = Math.max(width / tileSize[0], height / tileSize[1]);\n    var length = maxZoom + 1;\n    var resolutions = new Array(length);\n    for (var z = 0; z < length; ++z) {\n        resolutions[z] = maxResolution / Math.pow(2, z);\n    }\n    return resolutions;\n}\n/**\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n    var extent = extentFromProjection(projection);\n    return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @return {import(\"./extent.js\").Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n    projection = getProjection(projection);\n    var extent = projection.getExtent();\n    if (!extent) {\n        var half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit();\n        extent = createOrUpdate(-half, -half, half, half);\n    }\n    return extent;\n}\n//# sourceMappingURL=tilegrid.js.map","/**\n * @module ol/style/IconImage\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createCanvasContext2D } from '../dom.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\nvar IconImage = /** @class */ (function (_super) {\n    __extends(IconImage, _super);\n    /**\n     * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n     * @param {string|undefined} src Src.\n     * @param {import(\"../size.js\").Size} size Size.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../ImageState.js\").default} imageState Image state.\n     * @param {import(\"../color.js\").Color} color Color.\n     */\n    function IconImage(image, src, size, crossOrigin, imageState, color) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = !image ? new Image() : image;\n        if (crossOrigin !== null) {\n            /** @type {HTMLImageElement} */ (_this.image_).crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = color ? document.createElement('canvas') : null;\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = color;\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"../ImageState.js\").default}\n         */\n        _this.imageState_ = imageState;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = size;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.tainted_;\n        return _this;\n    }\n    /**\n     * @private\n     * @return {boolean} The image canvas is tainted.\n     */\n    IconImage.prototype.isTainted_ = function () {\n        if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n            this.tainted_ = false;\n            var context = createCanvasContext2D(1, 1);\n            try {\n                context.drawImage(this.image_, 0, 0);\n                context.getImageData(0, 0, 1, 1);\n            }\n            catch (e) {\n                this.tainted_ = true;\n            }\n        }\n        return this.tainted_ === true;\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.dispatchChangeEvent_ = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageError_ = function () {\n        this.imageState_ = ImageState.ERROR;\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageLoad_ = function () {\n        this.imageState_ = ImageState.LOADED;\n        if (this.size_) {\n            this.image_.width = this.size_[0];\n            this.image_.height = this.size_[1];\n        }\n        this.size_ = [this.image_.width, this.image_.height];\n        this.unlistenImage_();\n        this.replaceColor_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     */\n    IconImage.prototype.getImage = function (pixelRatio) {\n        return this.canvas_ ? this.canvas_ : this.image_;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    IconImage.prototype.getImageState = function () {\n        return this.imageState_;\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    IconImage.prototype.getHitDetectionImage = function (pixelRatio) {\n        if (!this.hitDetectionImage_) {\n            if (this.isTainted_()) {\n                var width = this.size_[0];\n                var height = this.size_[1];\n                var context = createCanvasContext2D(width, height);\n                context.fillRect(0, 0, width, height);\n                this.hitDetectionImage_ = context.canvas;\n            }\n            else {\n                this.hitDetectionImage_ = this.image_;\n            }\n        }\n        return this.hitDetectionImage_;\n    };\n    /**\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    IconImage.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {string|undefined} Image src.\n     */\n    IconImage.prototype.getSrc = function () {\n        return this.src_;\n    };\n    /**\n     * Load not yet loaded URI.\n     */\n    IconImage.prototype.load = function () {\n        if (this.imageState_ == ImageState.IDLE) {\n            this.imageState_ = ImageState.LOADING;\n            try {\n                /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n            }\n            catch (e) {\n                this.handleImageError_();\n            }\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.replaceColor_ = function () {\n        if (!this.color_ || this.isTainted_()) {\n            return;\n        }\n        this.canvas_.width = this.image_.width;\n        this.canvas_.height = this.image_.height;\n        var ctx = this.canvas_.getContext('2d');\n        ctx.drawImage(this.image_, 0, 0);\n        var imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n        var data = imgData.data;\n        var r = this.color_[0] / 255.0;\n        var g = this.color_[1] / 255.0;\n        var b = this.color_[2] / 255.0;\n        for (var i = 0, ii = data.length; i < ii; i += 4) {\n            data[i] *= r;\n            data[i + 1] *= g;\n            data[i + 2] *= b;\n        }\n        ctx.putImageData(imgData, 0, 0);\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    IconImage.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return IconImage;\n}(EventTarget));\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n    var iconImage = iconImageCache.get(src, crossOrigin, color);\n    if (!iconImage) {\n        iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n        iconImageCache.set(src, crossOrigin, color, iconImage);\n    }\n    return iconImage;\n}\nexport default IconImage;\n//# sourceMappingURL=IconImage.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/style/Icon\n */\nimport { getUid } from '../util.js';\nimport ImageState from '../ImageState.js';\nimport { assert } from '../asserts.js';\nimport { asArray } from '../color.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport { get as getIconImage } from './IconImage.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageStyle from './Image.js';\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nvar Icon = /** @class */ (function (_super) {\n    __extends(Icon, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Icon(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        /**\n         * @type {number}\n         */\n        var opacity = options.opacity !== undefined ? options.opacity : 1;\n        /**\n         * @type {number}\n         */\n        var rotation = options.rotation !== undefined ? options.rotation : 0;\n        /**\n         * @type {number}\n         */\n        var scale = options.scale !== undefined ? options.scale : 1;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ?\n            options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: opacity,\n            rotation: rotation,\n            scale: scale,\n            rotateWithView: rotateWithView\n        }) || this;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.normalizedAnchor_ = null;\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n            options.anchorOrigin : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n            options.anchorXUnits : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n            options.anchorYUnits : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        var image = options.img !== undefined ? options.img : null;\n        /**\n         * @type {import(\"../size.js\").Size}\n         */\n        var imgSize = options.imgSize !== undefined ? options.imgSize : null;\n        /**\n         * @type {string|undefined}\n         */\n        var src = options.src;\n        assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n        assert(!image || (image && imgSize), 5); // `imgSize` must be set when `image` is provided\n        if ((src === undefined || src.length === 0) && image) {\n            src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n        }\n        assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n        /**\n         * @type {import(\"../ImageState.js\").default}\n         */\n        var imageState = options.src !== undefined ?\n            ImageState.IDLE : ImageState.LOADED;\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = options.color !== undefined ? asArray(options.color) : null;\n        /**\n         * @private\n         * @type {import(\"./IconImage.js\").default}\n         */\n        _this.iconImage_ = getIconImage(image, /** @type {string} */ (src), imgSize, _this.crossOrigin_, imageState, _this.color_);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n            options.offsetOrigin : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = options.size !== undefined ? options.size : null;\n        return _this;\n    }\n    /**\n     * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n     * @return {Icon} The cloned style.\n     * @api\n     */\n    Icon.prototype.clone = function () {\n        return new Icon({\n            anchor: this.anchor_.slice(),\n            anchorOrigin: this.anchorOrigin_,\n            anchorXUnits: this.anchorXUnits_,\n            anchorYUnits: this.anchorYUnits_,\n            crossOrigin: this.crossOrigin_,\n            color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n            src: this.getSrc(),\n            offset: this.offset_.slice(),\n            offsetOrigin: this.offsetOrigin_,\n            size: this.size_ !== null ? this.size_.slice() : undefined,\n            opacity: this.getOpacity(),\n            scale: this.getScale(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView()\n        });\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Icon.prototype.getAnchor = function () {\n        if (this.normalizedAnchor_) {\n            return this.normalizedAnchor_;\n        }\n        var anchor = this.anchor_;\n        var size = this.getSize();\n        if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n            this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n            if (!size) {\n                return null;\n            }\n            anchor = this.anchor_.slice();\n            if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n                anchor[0] *= size[0];\n            }\n            if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n                anchor[1] *= size[1];\n            }\n        }\n        if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n            if (!size) {\n                return null;\n            }\n            if (anchor === this.anchor_) {\n                anchor = this.anchor_.slice();\n            }\n            if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n                this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                anchor[0] = -anchor[0] + size[0];\n            }\n            if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                anchor[1] = -anchor[1] + size[1];\n            }\n        }\n        this.normalizedAnchor_ = anchor;\n        return this.normalizedAnchor_;\n    };\n    /**\n     * Set the anchor point. The anchor determines the center point for the\n     * symbolizer.\n     *\n     * @param {Array<number>} anchor Anchor.\n     * @api\n     */\n    Icon.prototype.setAnchor = function (anchor) {\n        this.anchor_ = anchor;\n        this.normalizedAnchor_ = null;\n    };\n    /**\n     * Get the icon color.\n     * @return {import(\"../color.js\").Color} Color.\n     * @api\n     */\n    Icon.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the image icon.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     * @override\n     * @api\n     */\n    Icon.prototype.getImage = function (pixelRatio) {\n        return this.iconImage_.getImage(pixelRatio);\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getImageSize = function () {\n        return this.iconImage_.getSize();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getHitDetectionImageSize = function () {\n        return this.getImageSize();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getImageState = function () {\n        return this.iconImage_.getImageState();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getHitDetectionImage = function (pixelRatio) {\n        return this.iconImage_.getHitDetectionImage(pixelRatio);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Icon.prototype.getOrigin = function () {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        var offset = this.offset_;\n        if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n            var size = this.getSize();\n            var iconImageSize = this.iconImage_.getSize();\n            if (!size || !iconImageSize) {\n                return null;\n            }\n            offset = offset.slice();\n            if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[0] = iconImageSize[0] - size[0] - offset[0];\n            }\n            if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[1] = iconImageSize[1] - size[1] - offset[1];\n            }\n        }\n        this.origin_ = offset;\n        return this.origin_;\n    };\n    /**\n     * Get the image URL.\n     * @return {string|undefined} Image src.\n     * @api\n     */\n    Icon.prototype.getSrc = function () {\n        return this.iconImage_.getSrc();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Icon.prototype.getSize = function () {\n        return !this.size_ ? this.iconImage_.getSize() : this.size_;\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.listenImageChange = function (listener) {\n        this.iconImage_.addEventListener(EventType.CHANGE, listener);\n    };\n    /**\n     * Load not yet loaded URI.\n     * When rendering a feature with an icon style, the vector renderer will\n     * automatically call this method. However, you might want to call this\n     * method yourself for preloading or other purposes.\n     * @override\n     * @api\n     */\n    Icon.prototype.load = function () {\n        this.iconImage_.load();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.unlistenImageChange = function (listener) {\n        this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n    };\n    return Icon;\n}(ImageStyle));\nexport default Icon;\n//# sourceMappingURL=Icon.js.map","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n    if (Array.isArray(color)) {\n        return toString(color);\n    }\n    else {\n        return color;\n    }\n}\n//# sourceMappingURL=colorlike.js.map","/**\n * @module ol/string\n */\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n    var numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n    var decimal = numberString.indexOf('.');\n    decimal = decimal === -1 ? numberString.length : decimal;\n    return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n}\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\nexport function compareVersions(v1, v2) {\n    var s1 = ('' + v1).split('.');\n    var s2 = ('' + v2).split('.');\n    for (var i = 0; i < Math.max(s1.length, s2.length); i++) {\n        var n1 = parseInt(s1[i] || '0', 10);\n        var n2 = parseInt(s2[i] || '0', 10);\n        if (n1 > n2) {\n            return 1;\n        }\n        if (n2 > n1) {\n            return -1;\n        }\n    }\n    return 0;\n}\n//# sourceMappingURL=string.js.map","/**\n * @module ol/tileurlfunction\n */\nimport { assert } from './asserts.js';\nimport { modulo } from './math.js';\nimport { hash as tileCoordHash } from './tilecoord.js';\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n    var zRegEx = /\\{z\\}/g;\n    var xRegEx = /\\{x\\}/g;\n    var yRegEx = /\\{y\\}/g;\n    var dashYRegEx = /\\{-y\\}/g;\n    return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n            return undefined;\n        }\n        else {\n            return template.replace(zRegEx, tileCoord[0].toString())\n                .replace(xRegEx, tileCoord[1].toString())\n                .replace(yRegEx, tileCoord[2].toString())\n                .replace(dashYRegEx, function () {\n                var z = tileCoord[0];\n                var range = tileGrid.getFullTileRange(z);\n                assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n                var y = range.getHeight() - tileCoord[2] - 1;\n                return y.toString();\n            });\n        }\n    });\n}\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n    var len = templates.length;\n    var tileUrlFunctions = new Array(len);\n    for (var i = 0; i < len; ++i) {\n        tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n    }\n    return createFromTileUrlFunctions(tileUrlFunctions);\n}\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n    if (tileUrlFunctions.length === 1) {\n        return tileUrlFunctions[0];\n    }\n    return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n            return undefined;\n        }\n        else {\n            var h = tileCoordHash(tileCoord);\n            var index = modulo(h, tileUrlFunctions.length);\n            return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n        }\n    });\n}\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n    return undefined;\n}\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n    var urls = [];\n    var match = /\\{([a-z])-([a-z])\\}/.exec(url);\n    if (match) {\n        // char range\n        var startCharCode = match[1].charCodeAt(0);\n        var stopCharCode = match[2].charCodeAt(0);\n        var charCode = void 0;\n        for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n            urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n        }\n        return urls;\n    }\n    match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n    if (match) {\n        // number range\n        var stop_1 = parseInt(match[2], 10);\n        for (var i = parseInt(match[1], 10); i <= stop_1; i++) {\n            urls.push(url.replace(match[0], i.toString()));\n        }\n        return urls;\n    }\n    urls.push(url);\n    return urls;\n}\n//# sourceMappingURL=tileurlfunction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport { VOID } from '../functions.js';\nimport Event from './Event.js';\nimport { clear } from '../obj.js';\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nvar Target = /** @class */ (function (_super) {\n    __extends(Target, _super);\n    /**\n     * @param {*=} opt_target Default event target for dispatched events.\n     */\n    function Target(opt_target) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.target_ = opt_target;\n        /**\n         * @private\n         * @type {!Object<string, number>}\n         */\n        _this.pendingRemovals_ = {};\n        /**\n         * @private\n         * @type {!Object<string, number>}\n         */\n        _this.dispatching_ = {};\n        /**\n         * @private\n         * @type {!Object<string, Array<import(\"../events.js\").ListenerFunction>>}\n         */\n        _this.listeners_ = {};\n        return _this;\n    }\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n     */\n    Target.prototype.addEventListener = function (type, listener) {\n        if (!type || !listener) {\n            return;\n        }\n        var listeners = this.listeners_[type];\n        if (!listeners) {\n            listeners = this.listeners_[type] = [];\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    /**\n     * Dispatches an event and calls all listeners listening for events\n     * of this type. The event parameter can either be a string or an\n     * Object with a `type` property.\n     *\n     * @param {{type: string,\n     *     target: (EventTargetLike|undefined),\n     *     propagationStopped: (boolean|undefined)}|\n     *     import(\"./Event.js\").default|string} event Event object.\n     * @return {boolean|undefined} `false` if anyone called preventDefault on the\n     *     event object or if any of the listeners returned false.\n     * @api\n     */\n    Target.prototype.dispatchEvent = function (event) {\n        var evt = typeof event === 'string' ? new Event(event) : event;\n        var type = evt.type;\n        if (!evt.target) {\n            evt.target = this.target_ || this;\n        }\n        var listeners = this.listeners_[type];\n        var propagate;\n        if (listeners) {\n            if (!(type in this.dispatching_)) {\n                this.dispatching_[type] = 0;\n                this.pendingRemovals_[type] = 0;\n            }\n            ++this.dispatching_[type];\n            for (var i = 0, ii = listeners.length; i < ii; ++i) {\n                if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n                    propagate = false;\n                    break;\n                }\n            }\n            --this.dispatching_[type];\n            if (this.dispatching_[type] === 0) {\n                var pendingRemovals = this.pendingRemovals_[type];\n                delete this.pendingRemovals_[type];\n                while (pendingRemovals--) {\n                    this.removeEventListener(type, VOID);\n                }\n                delete this.dispatching_[type];\n            }\n            return propagate;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    Target.prototype.disposeInternal = function () {\n        clear(this.listeners_);\n    };\n    /**\n     * Get the listeners for a specified event type. Listeners are returned in the\n     * order that they will be called in.\n     *\n     * @param {string} type Type.\n     * @return {Array<import(\"../events.js\").ListenerFunction>} Listeners.\n     */\n    Target.prototype.getListeners = function (type) {\n        return this.listeners_[type];\n    };\n    /**\n     * @param {string=} opt_type Type. If not provided,\n     *     `true` will be returned if this event target has any listeners.\n     * @return {boolean} Has listeners.\n     */\n    Target.prototype.hasListener = function (opt_type) {\n        return opt_type ?\n            opt_type in this.listeners_ :\n            Object.keys(this.listeners_).length > 0;\n    };\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n     */\n    Target.prototype.removeEventListener = function (type, listener) {\n        var listeners = this.listeners_[type];\n        if (listeners) {\n            var index = listeners.indexOf(listener);\n            if (index !== -1) {\n                if (type in this.pendingRemovals_) {\n                    // make listener a no-op, and remove later in #dispatchEvent()\n                    listeners[index] = VOID;\n                    ++this.pendingRemovals_[type];\n                }\n                else {\n                    listeners.splice(index, 1);\n                    if (listeners.length === 0) {\n                        delete this.listeners_[type];\n                    }\n                }\n            }\n        }\n    };\n    return Target;\n}(Disposable));\nexport default Target;\n//# sourceMappingURL=Target.js.map","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\nimport { squaredSegmentDistance, squaredDistance } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end, stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n    var simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n        opt_simplifiedFlatCoordinates : [];\n    if (!highQuality) {\n        end = radialDistance(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        flatCoordinates = simplifiedFlatCoordinates;\n        offset = 0;\n        stride = 2;\n    }\n    simplifiedFlatCoordinates.length = douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n    return simplifiedFlatCoordinates;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    var n = (end - offset) / stride;\n    if (n < 3) {\n        for (; offset < end; offset += stride) {\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + 1];\n        }\n        return simplifiedOffset;\n    }\n    /** @type {Array<number>} */\n    var markers = new Array(n);\n    markers[0] = 1;\n    markers[n - 1] = 1;\n    /** @type {Array<number>} */\n    var stack = [offset, end - stride];\n    var index = 0;\n    while (stack.length > 0) {\n        var last = stack.pop();\n        var first = stack.pop();\n        var maxSquaredDistance = 0;\n        var x1 = flatCoordinates[first];\n        var y1 = flatCoordinates[first + 1];\n        var x2 = flatCoordinates[last];\n        var y2 = flatCoordinates[last + 1];\n        for (var i = first + stride; i < last; i += stride) {\n            var x = flatCoordinates[i];\n            var y = flatCoordinates[i + 1];\n            var squaredDistance_1 = squaredSegmentDistance(x, y, x1, y1, x2, y2);\n            if (squaredDistance_1 > maxSquaredDistance) {\n                index = i;\n                maxSquaredDistance = squaredDistance_1;\n            }\n        }\n        if (maxSquaredDistance > squaredTolerance) {\n            markers[(index - offset) / stride] = 1;\n            if (first + stride < index) {\n                stack.push(first, index);\n            }\n            if (index + stride < last) {\n                stack.push(index, last);\n            }\n        }\n    }\n    for (var i = 0; i < n; ++i) {\n        if (markers[i]) {\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + i * stride];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + i * stride + 1];\n        }\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset, ends, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        simplifiedOffset = douglasPeucker(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset);\n        simplifiedEnds.push(simplifiedOffset);\n        offset = end;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(flatCoordinates, offset, endss, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        var simplifiedEnds = [];\n        simplifiedOffset = douglasPeuckerArray(flatCoordinates, offset, ends, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n        simplifiedEndss.push(simplifiedEnds);\n        offset = ends[ends.length - 1];\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end, stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    if (end <= offset + stride) {\n        // zero or one point, no simplification possible, so copy and return\n        for (; offset < end; offset += stride) {\n            simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n            simplifiedFlatCoordinates[simplifiedOffset++] =\n                flatCoordinates[offset + 1];\n        }\n        return simplifiedOffset;\n    }\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    // copy first point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n    var x2 = x1;\n    var y2 = y1;\n    for (offset += stride; offset < end; offset += stride) {\n        x2 = flatCoordinates[offset];\n        y2 = flatCoordinates[offset + 1];\n        if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n            // copy point at offset\n            simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n            simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n            x1 = x2;\n            y1 = y2;\n        }\n    }\n    if (x2 != x1 || y2 != y1) {\n        // copy last point\n        simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n        simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n    return tolerance * Math.round(value / tolerance);\n}\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n    // do nothing if the line is empty\n    if (offset == end) {\n        return simplifiedOffset;\n    }\n    // snap the first coordinate (P1)\n    var x1 = snap(flatCoordinates[offset], tolerance);\n    var y1 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // add the first coordinate to the output\n    simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n    // find the next coordinate that does not snap to the same value as the first\n    // coordinate (P2)\n    var x2, y2;\n    do {\n        x2 = snap(flatCoordinates[offset], tolerance);\n        y2 = snap(flatCoordinates[offset + 1], tolerance);\n        offset += stride;\n        if (offset == end) {\n            // all coordinates snap to the same value, the line collapses to a point\n            // push the last snapped value anyway to ensure that the output contains\n            // at least two points\n            // FIXME should we really return at least two points anyway?\n            simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n            simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n            return simplifiedOffset;\n        }\n    } while (x2 == x1 && y2 == y1);\n    while (offset < end) {\n        // snap the next coordinate (P3)\n        var x3 = snap(flatCoordinates[offset], tolerance);\n        var y3 = snap(flatCoordinates[offset + 1], tolerance);\n        offset += stride;\n        // skip P3 if it is equal to P2\n        if (x3 == x2 && y3 == y2) {\n            continue;\n        }\n        // calculate the delta between P1 and P2\n        var dx1 = x2 - x1;\n        var dy1 = y2 - y1;\n        // calculate the delta between P3 and P1\n        var dx2 = x3 - x1;\n        var dy2 = y3 - y1;\n        // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n        // P1 in the same direction then P2 is on the straight line between P1 and\n        // P3\n        if ((dx1 * dy2 == dy1 * dx2) &&\n            ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n            ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n            // discard P2 and set P2 = P3\n            x2 = x3;\n            y2 = y3;\n            continue;\n        }\n        // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n        // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n        // and continue with P1 = P2 and P2 = P3\n        simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n        simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n        x1 = x2;\n        y1 = y2;\n        x2 = x3;\n        y2 = y3;\n    }\n    // add the last point (P2)\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(flatCoordinates, offset, ends, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        simplifiedOffset = quantize(flatCoordinates, offset, end, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset);\n        simplifiedEnds.push(simplifiedOffset);\n        offset = end;\n    }\n    return simplifiedOffset;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(flatCoordinates, offset, endss, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        var simplifiedEnds = [];\n        simplifiedOffset = quantizeArray(flatCoordinates, offset, ends, stride, tolerance, simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n        simplifiedEndss.push(simplifiedEnds);\n        offset = ends[ends.length - 1];\n    }\n    return simplifiedOffset;\n}\n//# sourceMappingURL=simplify.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Tile\n */\nimport TileState from './TileState.js';\nimport { easeIn } from './easing.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport { abstract } from './util.js';\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string): void} LoadFunction\n * @api\n */\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nvar Tile = /** @class */ (function (_super) {\n    __extends(Tile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {TileState} state State.\n     * @param {Options=} opt_options Tile options.\n     */\n    function Tile(tileCoord, state, opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @type {import(\"./tilecoord.js\").TileCoord}\n         */\n        _this.tileCoord = tileCoord;\n        /**\n         * @protected\n         * @type {TileState}\n         */\n        _this.state = state;\n        /**\n         * An \"interim\" tile for this tile. The interim tile may be used while this\n         * one is loading, for \"smooth\" transitions when changing params/dimensions\n         * on the source.\n         * @type {Tile}\n         */\n        _this.interimTile = null;\n        /**\n         * The tile is available at the highest possible resolution. Subclasses can\n         * set this to `false` initially. Tile load listeners will not be\n         * unregistered before this is set to `true` and a `#changed()` is called.\n         * @type {boolean}\n         */\n        _this.hifi = true;\n        /**\n         * A key assigned to the tile. This is used by the tile source to determine\n         * if this tile can effectively be used, or if a new tile should be created\n         * and this one be used as an interim tile for this new tile.\n         * @type {string}\n         */\n        _this.key = '';\n        /**\n         * The duration for the opacity transition.\n         * @type {number}\n         */\n        _this.transition_ = options.transition === undefined ? 250 : options.transition;\n        /**\n         * Lookup of start times for rendering transitions.  If the start time is\n         * equal to -1, the transition is complete.\n         * @type {Object<string, number>}\n         */\n        _this.transitionStarts_ = {};\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    Tile.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {string} Key.\n     */\n    Tile.prototype.getKey = function () {\n        return this.key + '/' + this.tileCoord;\n    };\n    /**\n     * Get the interim tile most suitable for rendering using the chain of interim\n     * tiles. This corresponds to the  most recent tile that has been loaded, if no\n     * such tile exists, the original tile is returned.\n     * @return {!Tile} Best tile for rendering.\n     */\n    Tile.prototype.getInterimTile = function () {\n        if (!this.interimTile) {\n            //empty chain\n            return this;\n        }\n        var tile = this.interimTile;\n        // find the first loaded tile and return it. Since the chain is sorted in\n        // decreasing order of creation time, there is no need to search the remainder\n        // of the list (all those tiles correspond to older requests and will be\n        // cleaned up by refreshInterimChain)\n        do {\n            if (tile.getState() == TileState.LOADED) {\n                // Show tile immediately instead of fading it in after loading, because\n                // the interim tile is in place already\n                this.transition_ = 0;\n                return tile;\n            }\n            tile = tile.interimTile;\n        } while (tile);\n        // we can not find a better tile\n        return this;\n    };\n    /**\n     * Goes through the chain of interim tiles and discards sections of the chain\n     * that are no longer relevant.\n     */\n    Tile.prototype.refreshInterimChain = function () {\n        if (!this.interimTile) {\n            return;\n        }\n        var tile = this.interimTile;\n        var prev = /** @type {Tile} */ (this);\n        do {\n            if (tile.getState() == TileState.LOADED) {\n                //we have a loaded tile, we can discard the rest of the list\n                //we would could abort any LOADING tile request\n                //older than this tile (i.e. any LOADING tile following this entry in the chain)\n                tile.interimTile = null;\n                break;\n            }\n            else if (tile.getState() == TileState.LOADING) {\n                //keep this LOADING tile any loaded tiles later in the chain are\n                //older than this tile, so we're still interested in the request\n                prev = tile;\n            }\n            else if (tile.getState() == TileState.IDLE) {\n                //the head of the list is the most current tile, we don't need\n                //to start any other requests for this chain\n                prev.interimTile = tile.interimTile;\n            }\n            else {\n                prev = tile;\n            }\n            tile = prev.interimTile;\n        } while (tile);\n    };\n    /**\n     * Get the tile coordinate for this tile.\n     * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n     * @api\n     */\n    Tile.prototype.getTileCoord = function () {\n        return this.tileCoord;\n    };\n    /**\n     * @return {TileState} State.\n     */\n    Tile.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n     * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n     * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n     * the tile queue and will block other requests.\n     * @param {TileState} state State.\n     * @api\n     */\n    Tile.prototype.setState = function (state) {\n        if (this.state !== TileState.ERROR && this.state > state) {\n            throw new Error('Tile load sequence violation');\n        }\n        this.state = state;\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @abstract\n     * @api\n     */\n    Tile.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * Get the alpha value for rendering.\n     * @param {string} id An id for the renderer.\n     * @param {number} time The render frame time.\n     * @return {number} A number between 0 and 1.\n     */\n    Tile.prototype.getAlpha = function (id, time) {\n        if (!this.transition_) {\n            return 1;\n        }\n        var start = this.transitionStarts_[id];\n        if (!start) {\n            start = time;\n            this.transitionStarts_[id] = start;\n        }\n        else if (start === -1) {\n            return 1;\n        }\n        var delta = time - start + (1000 / 60); // avoid rendering at 0\n        if (delta >= this.transition_) {\n            return 1;\n        }\n        return easeIn(delta / this.transition_);\n    };\n    /**\n     * Determine if a tile is in an alpha transition.  A tile is considered in\n     * transition if tile.getAlpha() has not yet been called or has been called\n     * and returned 1.\n     * @param {string} id An id for the renderer.\n     * @return {boolean} The tile is in transition.\n     */\n    Tile.prototype.inTransition = function (id) {\n        if (!this.transition_) {\n            return false;\n        }\n        return this.transitionStarts_[id] !== -1;\n    };\n    /**\n     * Mark a transition as complete.\n     * @param {string} id An id for the renderer.\n     */\n    Tile.prototype.endTransition = function (id) {\n        if (this.transition_) {\n            this.transitionStarts_[id] = -1;\n        }\n    };\n    return Tile;\n}(EventTarget));\nexport default Tile;\n//# sourceMappingURL=Tile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport { createCanvasContext2D } from './dom.js';\nimport { listenImage } from './Image.js';\nvar ImageTile = /** @class */ (function (_super) {\n    __extends(ImageTile, _super);\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {TileState} state State.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @param {import(\"./Tile.js\").Options=} opt_options Tile options.\n     */\n    function ImageTile(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n        var _this = _super.call(this, tileCoord, state, opt_options) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ = crossOrigin;\n        /**\n         * Image URI\n         *\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"./Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction_ = tileLoadFunction;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    ImageTile.prototype.disposeInternal = function () {\n        if (this.state == TileState.LOADING) {\n            this.unlistenImage_();\n            this.image_ = getBlankImage();\n        }\n        if (this.interimTile) {\n            this.interimTile.dispose();\n        }\n        this.state = TileState.ABORT;\n        this.changed();\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @api\n     */\n    ImageTile.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * @inheritDoc\n     */\n    ImageTile.prototype.getKey = function () {\n        return this.src_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageError_ = function () {\n        this.state = TileState.ERROR;\n        this.unlistenImage_();\n        this.image_ = getBlankImage();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageTile.prototype.handleImageLoad_ = function () {\n        var image = /** @type {HTMLImageElement} */ (this.image_);\n        if (image.naturalWidth && image.naturalHeight) {\n            this.state = TileState.LOADED;\n        }\n        else {\n            this.state = TileState.EMPTY;\n        }\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    ImageTile.prototype.load = function () {\n        if (this.state == TileState.ERROR) {\n            this.state = TileState.IDLE;\n            this.image_ = new Image();\n            if (this.crossOrigin_ !== null) {\n                this.image_.crossOrigin = this.crossOrigin_;\n            }\n        }\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            this.tileLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageTile.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageTile;\n}(Tile));\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n    var ctx = createCanvasContext2D(1, 1);\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return ctx.canvas;\n}\nexport default ImageTile;\n//# sourceMappingURL=ImageTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/reproj/Tile\n */\nimport { ERROR_THRESHOLD } from './common.js';\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { getArea, getCenter, getIntersection } from '../extent.js';\nimport { clamp } from '../math.js';\nimport { calculateSourceResolution, render as renderReprojected } from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n/**\n * @typedef {function(number, number, number, number) : import(\"../Tile.js\").default} FunctionType\n */\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nvar ReprojTile = /** @class */ (function (_super) {\n    __extends(ReprojTile, _super);\n    /**\n     * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n     * @param {import(\"../tilegrid/TileGrid.js\").default} sourceTileGrid Source tile grid.\n     * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n     * @param {import(\"../tilegrid/TileGrid.js\").default} targetTileGrid Target tile grid.\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Coordinate of the tile.\n     * @param {import(\"../tilecoord.js\").TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {number} gutter Gutter of the source tiles.\n     * @param {FunctionType} getTileFunction\n     *     Function returning source tiles (z, x, y, pixelRatio).\n     * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n     * @param {boolean=} opt_renderEdges Render reprojection edges.\n     */\n    function ReprojTile(sourceProj, sourceTileGrid, targetProj, targetTileGrid, tileCoord, wrappedTileCoord, pixelRatio, gutter, getTileFunction, opt_errorThreshold, opt_renderEdges) {\n        var _this = _super.call(this, tileCoord, TileState.IDLE) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.gutter_ = gutter;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        _this.sourceTileGrid_ = sourceTileGrid;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        _this.targetTileGrid_ = targetTileGrid;\n        /**\n         * @private\n         * @type {import(\"../tilecoord.js\").TileCoord}\n         */\n        _this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n        /**\n         * @private\n         * @type {!Array<import(\"../Tile.js\").default>}\n         */\n        _this.sourceTiles_ = [];\n        /**\n         * @private\n         * @type {?Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.sourcesListenerKeys_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.sourceZ_ = 0;\n        var targetExtent = targetTileGrid.getTileCoordExtent(_this.wrappedTileCoord_);\n        var maxTargetExtent = _this.targetTileGrid_.getExtent();\n        var maxSourceExtent = _this.sourceTileGrid_.getExtent();\n        var limitedTargetExtent = maxTargetExtent ?\n            getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n        if (getArea(limitedTargetExtent) === 0) {\n            // Tile is completely outside range -> EMPTY\n            // TODO: is it actually correct that the source even creates the tile ?\n            _this.state = TileState.EMPTY;\n            return _this;\n        }\n        var sourceProjExtent = sourceProj.getExtent();\n        if (sourceProjExtent) {\n            if (!maxSourceExtent) {\n                maxSourceExtent = sourceProjExtent;\n            }\n            else {\n                maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n            }\n        }\n        var targetResolution = targetTileGrid.getResolution(_this.wrappedTileCoord_[0]);\n        var targetCenter = getCenter(limitedTargetExtent);\n        var sourceResolution = calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution);\n        if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n            // invalid sourceResolution -> EMPTY\n            // probably edges of the projections when no extent is defined\n            _this.state = TileState.EMPTY;\n            return _this;\n        }\n        var errorThresholdInPixels = opt_errorThreshold !== undefined ?\n            opt_errorThreshold : ERROR_THRESHOLD;\n        /**\n         * @private\n         * @type {!import(\"./Triangulation.js\").default}\n         */\n        _this.triangulation_ = new Triangulation(sourceProj, targetProj, limitedTargetExtent, maxSourceExtent, sourceResolution * errorThresholdInPixels);\n        if (_this.triangulation_.getTriangles().length === 0) {\n            // no valid triangles -> EMPTY\n            _this.state = TileState.EMPTY;\n            return _this;\n        }\n        _this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n        var sourceExtent = _this.triangulation_.calculateSourceExtent();\n        if (maxSourceExtent) {\n            if (sourceProj.canWrapX()) {\n                sourceExtent[1] = clamp(sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n                sourceExtent[3] = clamp(sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n            }\n            else {\n                sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n            }\n        }\n        if (!getArea(sourceExtent)) {\n            _this.state = TileState.EMPTY;\n        }\n        else {\n            var sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(sourceExtent, _this.sourceZ_);\n            for (var srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n                for (var srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n                    var tile = getTileFunction(_this.sourceZ_, srcX, srcY, pixelRatio);\n                    if (tile) {\n                        _this.sourceTiles_.push(tile);\n                    }\n                }\n            }\n            if (_this.sourceTiles_.length === 0) {\n                _this.state = TileState.EMPTY;\n            }\n        }\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    ReprojTile.prototype.disposeInternal = function () {\n        if (this.state == TileState.LOADING) {\n            this.unlistenSources_();\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Get the HTML Canvas element for this tile.\n     * @return {HTMLCanvasElement} Canvas.\n     */\n    ReprojTile.prototype.getImage = function () {\n        return this.canvas_;\n    };\n    /**\n     * @private\n     */\n    ReprojTile.prototype.reproject_ = function () {\n        var sources = [];\n        this.sourceTiles_.forEach(function (tile, i, arr) {\n            if (tile && tile.getState() == TileState.LOADED) {\n                sources.push({\n                    extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n                    image: tile.getImage()\n                });\n            }\n        }.bind(this));\n        this.sourceTiles_.length = 0;\n        if (sources.length === 0) {\n            this.state = TileState.ERROR;\n        }\n        else {\n            var z = this.wrappedTileCoord_[0];\n            var size = this.targetTileGrid_.getTileSize(z);\n            var width = typeof size === 'number' ? size : size[0];\n            var height = typeof size === 'number' ? size : size[1];\n            var targetResolution = this.targetTileGrid_.getResolution(z);\n            var sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n            var targetExtent = this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);\n            this.canvas_ = renderReprojected(width, height, this.pixelRatio_, sourceResolution, this.sourceTileGrid_.getExtent(), targetResolution, targetExtent, this.triangulation_, sources, this.gutter_, this.renderEdges_);\n            this.state = TileState.LOADED;\n        }\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     */\n    ReprojTile.prototype.load = function () {\n        if (this.state == TileState.IDLE) {\n            this.state = TileState.LOADING;\n            this.changed();\n            var leftToLoad_1 = 0;\n            this.sourcesListenerKeys_ = [];\n            this.sourceTiles_.forEach(function (tile, i, arr) {\n                var state = tile.getState();\n                if (state == TileState.IDLE || state == TileState.LOADING) {\n                    leftToLoad_1++;\n                    var sourceListenKey_1 = listen(tile, EventType.CHANGE, function (e) {\n                        var state = tile.getState();\n                        if (state == TileState.LOADED ||\n                            state == TileState.ERROR ||\n                            state == TileState.EMPTY) {\n                            unlistenByKey(sourceListenKey_1);\n                            leftToLoad_1--;\n                            if (leftToLoad_1 === 0) {\n                                this.unlistenSources_();\n                                this.reproject_();\n                            }\n                        }\n                    }, this);\n                    this.sourcesListenerKeys_.push(sourceListenKey_1);\n                }\n            }.bind(this));\n            this.sourceTiles_.forEach(function (tile, i, arr) {\n                var state = tile.getState();\n                if (state == TileState.IDLE) {\n                    tile.load();\n                }\n            });\n            if (leftToLoad_1 === 0) {\n                setTimeout(this.reproject_.bind(this), 0);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    ReprojTile.prototype.unlistenSources_ = function () {\n        this.sourcesListenerKeys_.forEach(unlistenByKey);\n        this.sourcesListenerKeys_ = null;\n    };\n    return ReprojTile;\n}(Tile));\nexport default ReprojTile;\n//# sourceMappingURL=Tile.js.map","/**\n * @module ol/source/TileEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a tile starts loading.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n     * @api\n     */\n    TILELOADSTART: 'tileloadstart',\n    /**\n     * Triggered when a tile finishes loading, either when its data is loaded,\n     * or when loading was aborted because the tile is no longer needed.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n     * @api\n     */\n    TILELOADEND: 'tileloadend',\n    /**\n     * Triggered if tile loading results in an error.\n     * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n     * @api\n     */\n    TILELOADERROR: 'tileloaderror'\n};\n//# sourceMappingURL=TileEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/UrlTile\n */\nimport { getUid } from '../util.js';\nimport TileState from '../TileState.js';\nimport { expandUrl, createFromTemplates, nullTileUrlFunction } from '../tileurlfunction.js';\nimport TileSource, { TileSourceEvent } from './Tile.js';\nimport TileEventType from './TileEventType.js';\nimport { getKeyZXY } from '../tilecoord.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {import(\"../Tile.js\").LoadFunction} tileLoadFunction\n * @property {number} [tilePixelRatio]\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction]\n * @property {string} [url]\n * @property {Array<string>} [urls]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n * @property {number} [zDirection=0]\n */\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n */\nvar UrlTile = /** @class */ (function (_super) {\n    __extends(UrlTile, _super);\n    /**\n     * @param {Options} options Image tile options.\n     */\n    function UrlTile(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            opaque: options.opaque,\n            projection: options.projection,\n            state: options.state,\n            tileGrid: options.tileGrid,\n            tilePixelRatio: options.tilePixelRatio,\n            wrapX: options.wrapX,\n            transition: options.transition,\n            key: options.key,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection\n        }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.generateTileUrlFunction_ = !options.tileUrlFunction;\n        /**\n         * @protected\n         * @type {import(\"../Tile.js\").LoadFunction}\n         */\n        _this.tileLoadFunction = options.tileLoadFunction;\n        /**\n         * @protected\n         * @type {import(\"../Tile.js\").UrlFunction}\n         */\n        _this.tileUrlFunction = options.tileUrlFunction ? options.tileUrlFunction.bind(_this) : nullTileUrlFunction;\n        /**\n         * @protected\n         * @type {!Array<string>|null}\n         */\n        _this.urls = null;\n        if (options.urls) {\n            _this.setUrls(options.urls);\n        }\n        else if (options.url) {\n            _this.setUrl(options.url);\n        }\n        /**\n         * @private\n         * @type {!Object<string, boolean>}\n         */\n        _this.tileLoadingKeys_ = {};\n        return _this;\n    }\n    /**\n     * Return the tile load function of the source.\n     * @return {import(\"../Tile.js\").LoadFunction} TileLoadFunction\n     * @api\n     */\n    UrlTile.prototype.getTileLoadFunction = function () {\n        return this.tileLoadFunction;\n    };\n    /**\n     * Return the tile URL function of the source.\n     * @return {import(\"../Tile.js\").UrlFunction} TileUrlFunction\n     * @api\n     */\n    UrlTile.prototype.getTileUrlFunction = function () {\n        return this.tileUrlFunction;\n    };\n    /**\n     * Return the URLs used for this source.\n     * When a tileUrlFunction is used instead of url or urls,\n     * null will be returned.\n     * @return {!Array<string>|null} URLs.\n     * @api\n     */\n    UrlTile.prototype.getUrls = function () {\n        return this.urls;\n    };\n    /**\n     * Handle tile change events.\n     * @param {import(\"../events/Event.js\").default} event Event.\n     * @protected\n     */\n    UrlTile.prototype.handleTileChange = function (event) {\n        var tile = /** @type {import(\"../Tile.js\").default} */ (event.target);\n        var uid = getUid(tile);\n        var tileState = tile.getState();\n        var type;\n        if (tileState == TileState.LOADING) {\n            this.tileLoadingKeys_[uid] = true;\n            type = TileEventType.TILELOADSTART;\n        }\n        else if (uid in this.tileLoadingKeys_) {\n            delete this.tileLoadingKeys_[uid];\n            type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR :\n                (tileState == TileState.LOADED || tileState == TileState.ABORT) ?\n                    TileEventType.TILELOADEND : undefined;\n        }\n        if (type != undefined) {\n            this.dispatchEvent(new TileSourceEvent(type, tile));\n        }\n    };\n    /**\n     * Set the tile load function of the source.\n     * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n     * @api\n     */\n    UrlTile.prototype.setTileLoadFunction = function (tileLoadFunction) {\n        this.tileCache.clear();\n        this.tileLoadFunction = tileLoadFunction;\n        this.changed();\n    };\n    /**\n     * Set the tile URL function of the source.\n     * @param {import(\"../Tile.js\").UrlFunction} tileUrlFunction Tile URL function.\n     * @param {string=} key Optional new tile key for the source.\n     * @api\n     */\n    UrlTile.prototype.setTileUrlFunction = function (tileUrlFunction, key) {\n        this.tileUrlFunction = tileUrlFunction;\n        this.tileCache.pruneExceptNewestZ();\n        if (typeof key !== 'undefined') {\n            this.setKey(key);\n        }\n        else {\n            this.changed();\n        }\n    };\n    /**\n     * Set the URL to use for requests.\n     * @param {string} url URL.\n     * @api\n     */\n    UrlTile.prototype.setUrl = function (url) {\n        var urls = this.urls = expandUrl(url);\n        this.setUrls(urls);\n    };\n    /**\n     * Set the URLs to use for requests.\n     * @param {Array<string>} urls URLs.\n     * @api\n     */\n    UrlTile.prototype.setUrls = function (urls) {\n        this.urls = urls;\n        var key = urls.join('\\n');\n        if (this.generateTileUrlFunction_) {\n            this.setTileUrlFunction(createFromTemplates(urls, this.tileGrid), key);\n        }\n        else {\n            this.setKey(key);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    UrlTile.prototype.useTile = function (z, x, y) {\n        var tileCoordKey = getKeyZXY(z, x, y);\n        if (this.tileCache.containsKey(tileCoordKey)) {\n            this.tileCache.get(tileCoordKey);\n        }\n    };\n    return UrlTile;\n}(TileSource));\nexport default UrlTile;\n//# sourceMappingURL=UrlTile.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/TileImage\n */\nimport { ENABLE_RASTER_REPROJECTION } from '../reproj/common.js';\nimport { getUid } from '../util.js';\nimport ImageTile from '../ImageTile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport EventType from '../events/EventType.js';\nimport { equivalent, get as getProjection } from '../proj.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport UrlTile from './UrlTile.js';\nimport { getKey, getKeyZXY } from '../tilecoord.js';\nimport { getForProjection as getTileGridForProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./State.js\").default} [state] Source state.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [key] Optional tile key for proper cache fetching\n * @property {number} [zDirection=0] Indicate which resolution should be used\n * by a renderer if the view resolution does not match any resolution of the tile source.\n * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n * will be used. If -1, the nearest higher resolution will be used.\n */\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nvar TileImage = /** @class */ (function (_super) {\n    __extends(TileImage, _super);\n    /**\n     * @param {!Options} options Image tile options.\n     */\n    function TileImage(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            opaque: options.opaque,\n            projection: options.projection,\n            state: options.state,\n            tileGrid: options.tileGrid,\n            tileLoadFunction: options.tileLoadFunction ?\n                options.tileLoadFunction : defaultTileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: options.tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX,\n            transition: options.transition,\n            key: options.key,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection\n        }) || this;\n        /**\n         * @protected\n         * @type {?string}\n         */\n        _this.crossOrigin =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @protected\n         * @type {typeof ImageTile}\n         */\n        _this.tileClass = options.tileClass !== undefined ?\n            options.tileClass : ImageTile;\n        /**\n         * @protected\n         * @type {!Object<string, TileCache>}\n         */\n        _this.tileCacheForProjection = {};\n        /**\n         * @protected\n         * @type {!Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n         */\n        _this.tileGridForProjection = {};\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderReprojectionEdges_ = false;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.canExpireCache = function () {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            return _super.prototype.canExpireCache.call(this);\n        }\n        if (this.tileCache.canExpireCache()) {\n            return true;\n        }\n        else {\n            for (var key in this.tileCacheForProjection) {\n                if (this.tileCacheForProjection[key].canExpireCache()) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.expireCache = function (projection, usedTiles) {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            _super.prototype.expireCache.call(this, projection, usedTiles);\n            return;\n        }\n        var usedTileCache = this.getTileCacheForProjection(projection);\n        this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n        for (var id in this.tileCacheForProjection) {\n            var tileCache = this.tileCacheForProjection[id];\n            tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.getGutterForProjection = function (projection) {\n        if (ENABLE_RASTER_REPROJECTION &&\n            this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n            return 0;\n        }\n        else {\n            return this.getGutter();\n        }\n    };\n    /**\n     * @return {number} Gutter.\n     */\n    TileImage.prototype.getGutter = function () {\n        return 0;\n    };\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.getOpaque = function (projection) {\n        if (ENABLE_RASTER_REPROJECTION &&\n            this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n            return false;\n        }\n        else {\n            return _super.prototype.getOpaque.call(this, projection);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.getTileGridForProjection = function (projection) {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            return _super.prototype.getTileGridForProjection.call(this, projection);\n        }\n        var thisProj = this.getProjection();\n        if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n            return this.tileGrid;\n        }\n        else {\n            var projKey = getUid(projection);\n            if (!(projKey in this.tileGridForProjection)) {\n                this.tileGridForProjection[projKey] = getTileGridForProjection(projection);\n            }\n            return (\n            /** @type {!import(\"../tilegrid/TileGrid.js\").default} */ (this.tileGridForProjection[projKey]));\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.getTileCacheForProjection = function (projection) {\n        if (!ENABLE_RASTER_REPROJECTION) {\n            return _super.prototype.getTileCacheForProjection.call(this, projection);\n        }\n        var thisProj = this.getProjection();\n        if (!thisProj || equivalent(thisProj, projection)) {\n            return this.tileCache;\n        }\n        else {\n            var projKey = getUid(projection);\n            if (!(projKey in this.tileCacheForProjection)) {\n                this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n            }\n            return this.tileCacheForProjection[projKey];\n        }\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {string} key The key set on the tile.\n     * @return {!import(\"../Tile.js\").default} Tile.\n     * @private\n     */\n    TileImage.prototype.createTile_ = function (z, x, y, pixelRatio, projection, key) {\n        var tileCoord = [z, x, y];\n        var urlTileCoord = this.getTileCoordForTileUrlFunction(tileCoord, projection);\n        var tileUrl = urlTileCoord ?\n            this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n        var tile = new this.tileClass(tileCoord, tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY, tileUrl !== undefined ? tileUrl : '', this.crossOrigin, this.tileLoadFunction, this.tileOptions);\n        tile.key = key;\n        tile.addEventListener(EventType.CHANGE, this.handleTileChange.bind(this));\n        return tile;\n    };\n    /**\n     * @inheritDoc\n     */\n    TileImage.prototype.getTile = function (z, x, y, pixelRatio, projection) {\n        var sourceProjection = /** @type {!import(\"../proj/Projection.js\").default} */ (this.getProjection());\n        if (!ENABLE_RASTER_REPROJECTION ||\n            !sourceProjection || !projection || equivalent(sourceProjection, projection)) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n        }\n        else {\n            var cache = this.getTileCacheForProjection(projection);\n            var tileCoord = [z, x, y];\n            var tile = void 0;\n            var tileCoordKey = getKey(tileCoord);\n            if (cache.containsKey(tileCoordKey)) {\n                tile = /** @type {!import(\"../Tile.js\").default} */ (cache.get(tileCoordKey));\n            }\n            var key = this.getKey();\n            if (tile && tile.key == key) {\n                return tile;\n            }\n            else {\n                var sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n                var targetTileGrid = this.getTileGridForProjection(projection);\n                var wrappedTileCoord = this.getTileCoordForTileUrlFunction(tileCoord, projection);\n                var newTile = new ReprojTile(sourceProjection, sourceTileGrid, projection, targetTileGrid, tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio), this.getGutter(), function (z, x, y, pixelRatio) {\n                    return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n                }.bind(this), this.reprojectionErrorThreshold_, this.renderReprojectionEdges_);\n                newTile.key = key;\n                if (tile) {\n                    newTile.interimTile = tile;\n                    newTile.refreshInterimChain();\n                    cache.replace(tileCoordKey, newTile);\n                }\n                else {\n                    cache.set(tileCoordKey, newTile);\n                }\n                return newTile;\n            }\n        }\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {!import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!import(\"../Tile.js\").default} Tile.\n     * @protected\n     */\n    TileImage.prototype.getTileInternal = function (z, x, y, pixelRatio, projection) {\n        var tile = null;\n        var tileCoordKey = getKeyZXY(z, x, y);\n        var key = this.getKey();\n        if (!this.tileCache.containsKey(tileCoordKey)) {\n            tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n            this.tileCache.set(tileCoordKey, tile);\n        }\n        else {\n            tile = this.tileCache.get(tileCoordKey);\n            if (tile.key != key) {\n                // The source's params changed. If the tile has an interim tile and if we\n                // can use it then we use it. Otherwise we create a new tile.  In both\n                // cases we attempt to assign an interim tile to the new tile.\n                var interimTile = tile;\n                tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n                //make the new tile the head of the list,\n                if (interimTile.getState() == TileState.IDLE) {\n                    //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n                    tile.interimTile = interimTile.interimTile;\n                }\n                else {\n                    tile.interimTile = interimTile;\n                }\n                tile.refreshInterimChain();\n                this.tileCache.replace(tileCoordKey, tile);\n            }\n        }\n        return tile;\n    };\n    /**\n     * Sets whether to render reprojection edges or not (usually for debugging).\n     * @param {boolean} render Render the edges.\n     * @api\n     */\n    TileImage.prototype.setRenderReprojectionEdges = function (render) {\n        if (!ENABLE_RASTER_REPROJECTION ||\n            this.renderReprojectionEdges_ == render) {\n            return;\n        }\n        this.renderReprojectionEdges_ = render;\n        for (var id in this.tileCacheForProjection) {\n            this.tileCacheForProjection[id].clear();\n        }\n        this.changed();\n    };\n    /**\n     * Sets the tile grid to use when reprojecting the tiles to the given\n     * projection instead of the default tile grid for the projection.\n     *\n     * This can be useful when the default tile grid cannot be created\n     * (e.g. projection has no extent defined) or\n     * for optimization reasons (custom tile size, resolutions, ...).\n     *\n     * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n     * @param {import(\"../tilegrid/TileGrid.js\").default} tilegrid Tile grid to use for the projection.\n     * @api\n     */\n    TileImage.prototype.setTileGridForProjection = function (projection, tilegrid) {\n        if (ENABLE_RASTER_REPROJECTION) {\n            var proj = getProjection(projection);\n            if (proj) {\n                var projKey = getUid(proj);\n                if (!(projKey in this.tileGridForProjection)) {\n                    this.tileGridForProjection[projKey] = tilegrid;\n                }\n            }\n        }\n    };\n    return TileImage;\n}(UrlTile));\n/**\n * @param {ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n    /** @type {HTMLImageElement|HTMLVideoElement} */ (imageTile.getImage()).src = src;\n}\nexport default TileImage;\n//# sourceMappingURL=TileImage.js.map","/**\n * @module ol/format/FormatType\n */\n/**\n * @enum {string}\n */\nexport default {\n    ARRAY_BUFFER: 'arraybuffer',\n    JSON: 'json',\n    TEXT: 'text',\n    XML: 'xml'\n};\n//# sourceMappingURL=FormatType.js.map","/**\n * @module ol/geom/flat/contains\n */\nimport { forEachCorner } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n    var outside = forEachCorner(extent, \n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function (coordinate) {\n        return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n    return !outside;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n    // http://geomalgorithms.com/a03-_inclusion.html\n    // Copyright 2000 softSurfer, 2012 Dan Sunday\n    // This code may be freely used and modified for any purpose\n    // providing that this copyright notice is included with it.\n    // SoftSurfer makes no warranty for this code, and cannot be held\n    // liable for any real or imagined damage resulting from its use.\n    // Users of this code must verify correctness for their application.\n    var wn = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        if (y1 <= y) {\n            if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n                wn++;\n            }\n        }\n        else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n            wn--;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    return wn !== 0;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n    if (ends.length === 0) {\n        return false;\n    }\n    if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n        return false;\n    }\n    for (var i = 1, ii = ends.length; i < ii; ++i) {\n        if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n    if (endss.length === 0) {\n        return false;\n    }\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n            return true;\n        }\n        offset = ends[ends.length - 1];\n    }\n    return false;\n}\n//# sourceMappingURL=contains.js.map","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nvar DEFAULT_FILL_COLOR = '#333';\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle=Math.PI/4] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45 (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement='point'] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nvar Text = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Text(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.font_ = options.font;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.text_ = options.text;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textAlign_ = options.textAlign;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textBaseline_ = options.textBaseline;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill :\n            new Fill({ color: DEFAULT_FILL_COLOR });\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n        /**\n         * @private\n         * @type {import(\"./TextPlacement.js\").default|string}\n         */\n        this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.overflow_ = !!options.overflow;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.padding_ = options.padding === undefined ? null : options.padding;\n    }\n    /**\n     * Clones the style.\n     * @return {Text} The cloned style.\n     * @api\n     */\n    Text.prototype.clone = function () {\n        return new Text({\n            font: this.getFont(),\n            placement: this.getPlacement(),\n            maxAngle: this.getMaxAngle(),\n            overflow: this.getOverflow(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            scale: this.getScale(),\n            text: this.getText(),\n            textAlign: this.getTextAlign(),\n            textBaseline: this.getTextBaseline(),\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            offsetX: this.getOffsetX(),\n            offsetY: this.getOffsetY(),\n            backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n            backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined,\n            padding: this.getPadding()\n        });\n    };\n    /**\n     * Get the `overflow` configuration.\n     * @return {boolean} Let text overflow the length of the path they follow.\n     * @api\n     */\n    Text.prototype.getOverflow = function () {\n        return this.overflow_;\n    };\n    /**\n     * Get the font name.\n     * @return {string|undefined} Font.\n     * @api\n     */\n    Text.prototype.getFont = function () {\n        return this.font_;\n    };\n    /**\n     * Get the maximum angle between adjacent characters.\n     * @return {number} Angle in radians.\n     * @api\n     */\n    Text.prototype.getMaxAngle = function () {\n        return this.maxAngle_;\n    };\n    /**\n     * Get the label placement.\n     * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n     * @api\n     */\n    Text.prototype.getPlacement = function () {\n        return this.placement_;\n    };\n    /**\n     * Get the x-offset for the text.\n     * @return {number} Horizontal text offset.\n     * @api\n     */\n    Text.prototype.getOffsetX = function () {\n        return this.offsetX_;\n    };\n    /**\n     * Get the y-offset for the text.\n     * @return {number} Vertical text offset.\n     * @api\n     */\n    Text.prototype.getOffsetY = function () {\n        return this.offsetY_;\n    };\n    /**\n     * Get the fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Determine whether the text rotates with the map.\n     * @return {boolean|undefined} Rotate with map.\n     * @api\n     */\n    Text.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the text rotation.\n     * @return {number|undefined} Rotation.\n     * @api\n     */\n    Text.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the text scale.\n     * @return {number|undefined} Scale.\n     * @api\n     */\n    Text.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Get the text to be rendered.\n     * @return {string|undefined} Text.\n     * @api\n     */\n    Text.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Get the text alignment.\n     * @return {string|undefined} Text align.\n     * @api\n     */\n    Text.prototype.getTextAlign = function () {\n        return this.textAlign_;\n    };\n    /**\n     * Get the text baseline.\n     * @return {string|undefined} Text baseline.\n     * @api\n     */\n    Text.prototype.getTextBaseline = function () {\n        return this.textBaseline_;\n    };\n    /**\n     * Get the background fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getBackgroundFill = function () {\n        return this.backgroundFill_;\n    };\n    /**\n     * Get the background stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getBackgroundStroke = function () {\n        return this.backgroundStroke_;\n    };\n    /**\n     * Get the padding for the text.\n     * @return {Array<number>} Padding.\n     * @api\n     */\n    Text.prototype.getPadding = function () {\n        return this.padding_;\n    };\n    /**\n     * Set the `overflow` property.\n     *\n     * @param {boolean} overflow Let text overflow the path that it follows.\n     * @api\n     */\n    Text.prototype.setOverflow = function (overflow) {\n        this.overflow_ = overflow;\n    };\n    /**\n     * Set the font.\n     *\n     * @param {string|undefined} font Font.\n     * @api\n     */\n    Text.prototype.setFont = function (font) {\n        this.font_ = font;\n    };\n    /**\n     * Set the maximum angle between adjacent characters.\n     *\n     * @param {number} maxAngle Angle in radians.\n     * @api\n     */\n    Text.prototype.setMaxAngle = function (maxAngle) {\n        this.maxAngle_ = maxAngle;\n    };\n    /**\n     * Set the x offset.\n     *\n     * @param {number} offsetX Horizontal text offset.\n     * @api\n     */\n    Text.prototype.setOffsetX = function (offsetX) {\n        this.offsetX_ = offsetX;\n    };\n    /**\n     * Set the y offset.\n     *\n     * @param {number} offsetY Vertical text offset.\n     * @api\n     */\n    Text.prototype.setOffsetY = function (offsetY) {\n        this.offsetY_ = offsetY;\n    };\n    /**\n     * Set the text placement.\n     *\n     * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n     * @api\n     */\n    Text.prototype.setPlacement = function (placement) {\n        this.placement_ = placement;\n    };\n    /**\n     * Set whether to rotate the text with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    Text.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number|undefined} rotation Rotation.\n     * @api\n     */\n    Text.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number|undefined} scale Scale.\n     * @api\n     */\n    Text.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n    };\n    /**\n     * Set the stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Set the text.\n     *\n     * @param {string|undefined} text Text.\n     * @api\n     */\n    Text.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Set the text alignment.\n     *\n     * @param {string|undefined} textAlign Text align.\n     * @api\n     */\n    Text.prototype.setTextAlign = function (textAlign) {\n        this.textAlign_ = textAlign;\n    };\n    /**\n     * Set the text baseline.\n     *\n     * @param {string|undefined} textBaseline Text baseline.\n     * @api\n     */\n    Text.prototype.setTextBaseline = function (textBaseline) {\n        this.textBaseline_ = textBaseline;\n    };\n    /**\n     * Set the background fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setBackgroundFill = function (fill) {\n        this.backgroundFill_ = fill;\n    };\n    /**\n     * Set the background stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setBackgroundStroke = function (stroke) {\n        this.backgroundStroke_ = stroke;\n    };\n    /**\n     * Set the padding (`[top, right, bottom, left]`).\n     *\n     * @param {!Array<number>} padding Padding.\n     * @api\n     */\n    Text.prototype.setPadding = function (padding) {\n        this.padding_ = padding;\n    };\n    return Text;\n}());\nexport default Text;\n//# sourceMappingURL=Text.js.map","/**\n * @module ol/renderer/vector\n */\nimport { getUid } from '../util.js';\nimport ImageState from '../ImageState.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport BuilderType from '../render/canvas/BuilderType.js';\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nvar SIMPLIFY_TOLERANCE = 0.5;\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\nvar GEOMETRY_RENDERERS = {\n    'Point': renderPointGeometry,\n    'LineString': renderLineStringGeometry,\n    'Polygon': renderPolygonGeometry,\n    'MultiPoint': renderMultiPointGeometry,\n    'MultiLineString': renderMultiLineStringGeometry,\n    'MultiPolygon': renderMultiPolygonGeometry,\n    'GeometryCollection': renderGeometryCollectionGeometry,\n    'Circle': renderCircleGeometry\n};\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n    return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n    var tolerance = getTolerance(resolution, pixelRatio);\n    return tolerance * tolerance;\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n    return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderCircleGeometry(builderGroup, geometry, style, feature) {\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    if (fillStyle || strokeStyle) {\n        var circleReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.CIRCLE);\n        circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n        circleReplay.drawCircle(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, opt_transform) {\n    var loading = false;\n    var imageStyle = style.getImage();\n    if (imageStyle) {\n        var imageState = imageStyle.getImageState();\n        if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n            imageStyle.unlistenImageChange(listener);\n        }\n        else {\n            if (imageState == ImageState.IDLE) {\n                imageStyle.load();\n            }\n            imageState = imageStyle.getImageState();\n            imageStyle.listenImageChange(listener);\n            loading = true;\n        }\n    }\n    renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform);\n    return loading;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform) {\n    var geometry = style.getGeometryFunction()(feature);\n    if (!geometry) {\n        return;\n    }\n    var simplifiedGeometry = geometry.simplifyTransformed(squaredTolerance, opt_transform);\n    var renderer = style.getRenderer();\n    if (renderer) {\n        renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n    }\n    else {\n        var geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n        geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n    if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n        var geometries = /** @type {import(\"../geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            renderGeometry(replayGroup, geometries[i], style, feature);\n        }\n        return;\n    }\n    var replay = replayGroup.getBuilder(style.getZIndex(), BuilderType.DEFAULT);\n    replay.drawCustom(/** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geometry), feature, style.getRenderer());\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature) {\n    var geometries = geometry.getGeometriesArray();\n    var i, ii;\n    for (i = 0, ii = geometries.length; i < ii; ++i) {\n        var geometryRenderer = GEOMETRY_RENDERERS[geometries[i].getType()];\n        geometryRenderer(replayGroup, geometries[i], style, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderLineStringGeometry(builderGroup, geometry, style, feature) {\n    var strokeStyle = style.getStroke();\n    if (strokeStyle) {\n        var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n        lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n        lineStringReplay.drawLineString(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiLineStringGeometry(builderGroup, geometry, style, feature) {\n    var strokeStyle = style.getStroke();\n    if (strokeStyle) {\n        var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n        lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n        lineStringReplay.drawMultiLineString(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderMultiPolygonGeometry(builderGroup, geometry, style, feature) {\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    if (strokeStyle || fillStyle) {\n        var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n        polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n        polygonReplay.drawMultiPolygon(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPointGeometry(builderGroup, geometry, style, feature) {\n    var imageStyle = style.getImage();\n    if (imageStyle) {\n        if (imageStyle.getImageState() != ImageState.LOADED) {\n            return;\n        }\n        var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n        imageReplay.setImageStyle(imageStyle, builderGroup.addDeclutter(false));\n        imageReplay.drawPoint(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(!!imageStyle));\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiPointGeometry(builderGroup, geometry, style, feature) {\n    var imageStyle = style.getImage();\n    if (imageStyle) {\n        if (imageStyle.getImageState() != ImageState.LOADED) {\n            return;\n        }\n        var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n        imageReplay.setImageStyle(imageStyle, builderGroup.addDeclutter(false));\n        imageReplay.drawMultiPoint(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(!!imageStyle));\n        textReplay.drawText(geometry, feature);\n    }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPolygonGeometry(builderGroup, geometry, style, feature) {\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    if (fillStyle || strokeStyle) {\n        var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n        polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n        polygonReplay.drawPolygon(geometry, feature);\n    }\n    var textStyle = style.getText();\n    if (textStyle) {\n        var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n        textReplay.setTextStyle(textStyle, builderGroup.addDeclutter(false));\n        textReplay.drawText(geometry, feature);\n    }\n}\n//# sourceMappingURL=vector.js.map","/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Group\n */\nimport { getUid } from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport { getChangeEventType } from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport { assert } from '../asserts.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { getIntersection } from '../extent.js';\nimport BaseLayer from './Base.js';\nimport { assign, clear } from '../obj.js';\nimport SourceState from '../source/State.js';\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    LAYERS: 'layers'\n};\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nvar LayerGroup = /** @class */ (function (_super) {\n    __extends(LayerGroup, _super);\n    /**\n     * @param {Options=} opt_options Layer options.\n     */\n    function LayerGroup(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var baseOptions = /** @type {Options} */ (assign({}, options));\n        delete baseOptions.layers;\n        var layers = options.layers;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.layersListenerKeys_ = [];\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.listenerKeys_ = {};\n        _this.addEventListener(getChangeEventType(Property.LAYERS), _this.handleLayersChanged_);\n        if (layers) {\n            if (Array.isArray(layers)) {\n                layers = new Collection(layers.slice(), { unique: true });\n            }\n            else {\n                assert(typeof /** @type {?} */ (layers).getArray === 'function', 43); // Expected `layers` to be an array or a `Collection`\n            }\n        }\n        else {\n            layers = new Collection(undefined, { unique: true });\n        }\n        _this.setLayers(layers);\n        return _this;\n    }\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayerChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    LayerGroup.prototype.handleLayersChanged_ = function () {\n        this.layersListenerKeys_.forEach(unlistenByKey);\n        this.layersListenerKeys_.length = 0;\n        var layers = this.getLayers();\n        this.layersListenerKeys_.push(listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this), listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this));\n        for (var id in this.listenerKeys_) {\n            this.listenerKeys_[id].forEach(unlistenByKey);\n        }\n        clear(this.listenerKeys_);\n        var layersArray = layers.getArray();\n        for (var i = 0, ii = layersArray.length; i < ii; i++) {\n            var layer = layersArray[i];\n            this.listenerKeys_[getUid(layer)] = [\n                listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n                listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n            ];\n        }\n        this.changed();\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersAdd_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        this.listenerKeys_[getUid(layer)] = [\n            listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n            listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n        ];\n        this.changed();\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n     * @private\n     */\n    LayerGroup.prototype.handleLayersRemove_ = function (collectionEvent) {\n        var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n        var key = getUid(layer);\n        this.listenerKeys_[key].forEach(unlistenByKey);\n        delete this.listenerKeys_[key];\n        this.changed();\n    };\n    /**\n     * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n     *   {@link module:ol/layer/Base layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.getLayers = function () {\n        return (\n        /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS)));\n    };\n    /**\n     * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n     * in this group.\n     * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n     *   {@link module:ol/layer/Base layers} that are part of this group.\n     * @observable\n     * @api\n     */\n    LayerGroup.prototype.setLayers = function (layers) {\n        this.set(Property.LAYERS, layers);\n    };\n    /**\n     * @inheritDoc\n     */\n    LayerGroup.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array !== undefined ? opt_array : [];\n        this.getLayers().forEach(function (layer) {\n            layer.getLayersArray(array);\n        });\n        return array;\n    };\n    /**\n     * @inheritDoc\n     */\n    LayerGroup.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states !== undefined ? opt_states : [];\n        var pos = states.length;\n        this.getLayers().forEach(function (layer) {\n            layer.getLayerStatesArray(states);\n        });\n        var ownLayerState = this.getLayerState();\n        for (var i = pos, ii = states.length; i < ii; i++) {\n            var layerState = states[i];\n            layerState.opacity *= ownLayerState.opacity;\n            layerState.visible = layerState.visible && ownLayerState.visible;\n            layerState.maxResolution = Math.min(layerState.maxResolution, ownLayerState.maxResolution);\n            layerState.minResolution = Math.max(layerState.minResolution, ownLayerState.minResolution);\n            layerState.minZoom = Math.max(layerState.minZoom, ownLayerState.minZoom);\n            layerState.maxZoom = Math.min(layerState.maxZoom, ownLayerState.maxZoom);\n            if (ownLayerState.extent !== undefined) {\n                if (layerState.extent !== undefined) {\n                    layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n                }\n                else {\n                    layerState.extent = ownLayerState.extent;\n                }\n            }\n        }\n        return states;\n    };\n    /**\n     * @inheritDoc\n     */\n    LayerGroup.prototype.getSourceState = function () {\n        return SourceState.READY;\n    };\n    return LayerGroup;\n}(BaseLayer));\nexport default LayerGroup;\n//# sourceMappingURL=Group.js.map","/**\n * @module ol/render/EventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered before a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#prerender\n     * @api\n     */\n    PRERENDER: 'prerender',\n    /**\n     * Triggered after a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered before layers are rendered.\n     * @event module:ol/render/Event~RenderEvent#precompose\n     * @api\n     */\n    PRECOMPOSE: 'precompose',\n    /**\n     * Triggered after all layers are rendered.\n     * @event module:ol/render/Event~RenderEvent#postcompose\n     * @api\n     */\n    POSTCOMPOSE: 'postcompose',\n    /**\n     * Triggered when rendering is complete, i.e. all sources and tiles have\n     * finished loading for the current viewport, and all tiles are faded in.\n     * @event module:ol/render/Event~RenderEvent#rendercomplete\n     * @api\n     */\n    RENDERCOMPLETE: 'rendercomplete'\n};\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/style/RegularShape\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport ImageState from '../ImageState.js';\nimport { defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit } from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n */\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} miterLimit\n */\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nvar RegularShape = /** @class */ (function (_super) {\n    __extends(RegularShape, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function RegularShape(options) {\n        var _this = this;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ?\n            options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: 1,\n            rotateWithView: rotateWithView,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            scale: 1\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.hitDetectionCanvas_ = null;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        _this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.points_ = options.points;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n            options.radius : options.radius1);\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.radius2_ = options.radius2;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.angle_ = options.angle !== undefined ? options.angle : 0;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.imageSize_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.hitDetectionImageSize_ = null;\n        _this.render();\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {RegularShape} The cloned style.\n     * @api\n     */\n    RegularShape.prototype.clone = function () {\n        var style = new RegularShape({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            points: this.getPoints(),\n            radius: this.getRadius(),\n            radius2: this.getRadius2(),\n            angle: this.getAngle(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getAnchor = function () {\n        return this.anchor_;\n    };\n    /**\n     * Get the angle used in generating the shape.\n     * @return {number} Shape's rotation in radians.\n     * @api\n     */\n    RegularShape.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    /**\n     * Get the fill style for the shape.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    RegularShape.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImage = function (pixelRatio) {\n        return this.hitDetectionCanvas_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getImage = function (pixelRatio) {\n        return this.canvas_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageSize = function () {\n        return this.imageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImageSize = function () {\n        return this.hitDetectionImageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageState = function () {\n        return ImageState.LOADED;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getOrigin = function () {\n        return this.origin_;\n    };\n    /**\n     * Get the number of points for generating the shape.\n     * @return {number} Number of points for stars and regular polygons.\n     * @api\n     */\n    RegularShape.prototype.getPoints = function () {\n        return this.points_;\n    };\n    /**\n     * Get the (primary) radius for the shape.\n     * @return {number} Radius.\n     * @api\n     */\n    RegularShape.prototype.getRadius = function () {\n        return this.radius_;\n    };\n    /**\n     * Get the secondary radius for the shape.\n     * @return {number|undefined} Radius2.\n     * @api\n     */\n    RegularShape.prototype.getRadius2 = function () {\n        return this.radius2_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * Get the stroke style for the shape.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    RegularShape.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.listenImageChange = function (listener) { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.load = function () { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.unlistenImageChange = function (listener) { };\n    /**\n     * @protected\n     */\n    RegularShape.prototype.render = function () {\n        var lineCap = defaultLineCap;\n        var lineJoin = defaultLineJoin;\n        var miterLimit = 0;\n        var lineDash = null;\n        var lineDashOffset = 0;\n        var strokeStyle;\n        var strokeWidth = 0;\n        if (this.stroke_) {\n            strokeStyle = this.stroke_.getColor();\n            if (strokeStyle === null) {\n                strokeStyle = defaultStrokeStyle;\n            }\n            strokeStyle = asColorLike(strokeStyle);\n            strokeWidth = this.stroke_.getWidth();\n            if (strokeWidth === undefined) {\n                strokeWidth = defaultLineWidth;\n            }\n            lineDash = this.stroke_.getLineDash();\n            lineDashOffset = this.stroke_.getLineDashOffset();\n            lineJoin = this.stroke_.getLineJoin();\n            if (lineJoin === undefined) {\n                lineJoin = defaultLineJoin;\n            }\n            lineCap = this.stroke_.getLineCap();\n            if (lineCap === undefined) {\n                lineCap = defaultLineCap;\n            }\n            miterLimit = this.stroke_.getMiterLimit();\n            if (miterLimit === undefined) {\n                miterLimit = defaultMiterLimit;\n            }\n        }\n        var size = 2 * (this.radius_ + strokeWidth) + 1;\n        var renderOptions = {\n            strokeStyle: strokeStyle,\n            strokeWidth: strokeWidth,\n            size: size,\n            lineCap: lineCap,\n            lineDash: lineDash,\n            lineDashOffset: lineDashOffset,\n            lineJoin: lineJoin,\n            miterLimit: miterLimit\n        };\n        var context = createCanvasContext2D(size, size);\n        this.canvas_ = context.canvas;\n        // canvas.width and height are rounded to the closest integer\n        size = this.canvas_.width;\n        var imageSize = size;\n        this.draw_(renderOptions, context, 0, 0);\n        this.createHitDetectionCanvas_(renderOptions);\n        this.anchor_ = [size / 2, size / 2];\n        this.size_ = [size, size];\n        this.imageSize_ = [imageSize, imageSize];\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The rendering context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.draw_ = function (renderOptions, context, x, y) {\n        var i, angle0, radiusC;\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            if (color === null) {\n                color = defaultFillStyle;\n            }\n            context.fillStyle = asColorLike(color);\n            context.fill();\n        }\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (context.setLineDash && renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineCap = renderOptions.lineCap;\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n        context.closePath();\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     */\n    RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n        this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n        this.hitDetectionCanvas_ = this.canvas_;\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            // determine if fill is transparent (or pattern or gradient)\n            var opacity = 0;\n            if (typeof color === 'string') {\n                color = asArray(color);\n            }\n            if (color === null) {\n                opacity = 1;\n            }\n            else if (Array.isArray(color)) {\n                opacity = color.length === 4 ? color[3] : 1;\n            }\n            if (opacity === 0) {\n                // if a transparent fill style is set, create an extra hit-detection image\n                // with a default fill style\n                var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n                this.hitDetectionCanvas_ = context.canvas;\n                this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context, x, y) {\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            var i = void 0, radiusC = void 0, angle0 = void 0;\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        context.fillStyle = defaultFillStyle;\n        context.fill();\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.stroke();\n        }\n        context.closePath();\n    };\n    return RegularShape;\n}(ImageStyle));\nexport default RegularShape;\n//# sourceMappingURL=RegularShape.js.map","/**\n * @module ol/style/Circle\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n */\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nvar CircleStyle = /** @class */ (function (_super) {\n    __extends(CircleStyle, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function CircleStyle(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            points: Infinity,\n            fill: options.fill,\n            radius: options.radius,\n            stroke: options.stroke\n        }) || this;\n        return _this;\n    }\n    /**\n    * Clones the style.\n    * @return {CircleStyle} The cloned style.\n    * @override\n    * @api\n    */\n    CircleStyle.prototype.clone = function () {\n        var style = new CircleStyle({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            radius: this.getRadius()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * Set the circle radius.\n     *\n     * @param {number} radius Circle radius.\n     * @api\n     */\n    CircleStyle.prototype.setRadius = function (radius) {\n        this.radius_ = radius;\n        this.render();\n    };\n    return CircleStyle;\n}(RegularShape));\nexport default CircleStyle;\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/proj/transforms\n */\nimport { isEmpty } from '../obj.js';\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nvar transforms = {};\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n    transforms = {};\n}\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n    var sourceCode = source.getCode();\n    var destinationCode = destination.getCode();\n    if (!(sourceCode in transforms)) {\n        transforms[sourceCode] = {};\n    }\n    transforms[sourceCode][destinationCode] = transformFn;\n}\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n    var sourceCode = source.getCode();\n    var destinationCode = destination.getCode();\n    var transform = transforms[sourceCode][destinationCode];\n    delete transforms[sourceCode][destinationCode];\n    if (isEmpty(transforms[sourceCode])) {\n        delete transforms[sourceCode];\n    }\n    return transform;\n}\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n    var transform;\n    if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n        transform = transforms[sourceCode][destinationCode];\n    }\n    return transform;\n}\n//# sourceMappingURL=transforms.js.map","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @private\n         */\n        this.disposed_ = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed_) {\n            this.disposed_ = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","/**\n * @module ol/color\n */\nimport { assert } from './asserts.js';\nimport { clamp } from './math.js';\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nvar HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nvar NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n    if (typeof color === 'string') {\n        return color;\n    }\n    else {\n        return toString(color);\n    }\n}\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n    var el = document.createElement('div');\n    el.style.color = color;\n    if (el.style.color !== '') {\n        document.body.appendChild(el);\n        var rgb = getComputedStyle(el).color;\n        document.body.removeChild(el);\n        return rgb;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport var fromString = (function () {\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n    /**\n     * @const\n     * @type {number}\n     */\n    var MAX_CACHE_SIZE = 1024;\n    /**\n     * @type {Object<string, Color>}\n     */\n    var cache = {};\n    /**\n     * @type {number}\n     */\n    var cacheSize = 0;\n    return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n        var color;\n        if (cache.hasOwnProperty(s)) {\n            color = cache[s];\n        }\n        else {\n            if (cacheSize >= MAX_CACHE_SIZE) {\n                var i = 0;\n                for (var key in cache) {\n                    if ((i++ & 3) === 0) {\n                        delete cache[key];\n                        --cacheSize;\n                    }\n                }\n            }\n            color = fromStringInternal_(s);\n            cache[s] = color;\n            ++cacheSize;\n        }\n        return color;\n    });\n})();\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n    if (Array.isArray(color)) {\n        return color;\n    }\n    else {\n        return fromString(color);\n    }\n}\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n    var r, g, b, a, color;\n    if (NAMED_COLOR_RE_.exec(s)) {\n        s = fromNamed(s);\n    }\n    if (HEX_COLOR_RE_.exec(s)) { // hex\n        var n = s.length - 1; // number of hex digits\n        var d = // number of digits per channel\n         void 0; // number of digits per channel\n        if (n <= 4) {\n            d = 1;\n        }\n        else {\n            d = 2;\n        }\n        var hasAlpha = n === 4 || n === 8;\n        r = parseInt(s.substr(1 + 0 * d, d), 16);\n        g = parseInt(s.substr(1 + 1 * d, d), 16);\n        b = parseInt(s.substr(1 + 2 * d, d), 16);\n        if (hasAlpha) {\n            a = parseInt(s.substr(1 + 3 * d, d), 16);\n        }\n        else {\n            a = 255;\n        }\n        if (d == 1) {\n            r = (r << 4) + r;\n            g = (g << 4) + g;\n            b = (b << 4) + b;\n            if (hasAlpha) {\n                a = (a << 4) + a;\n            }\n        }\n        color = [r, g, b, a / 255];\n    }\n    else if (s.indexOf('rgba(') == 0) { // rgba()\n        color = s.slice(5, -1).split(',').map(Number);\n        normalize(color);\n    }\n    else if (s.indexOf('rgb(') == 0) { // rgb()\n        color = s.slice(4, -1).split(',').map(Number);\n        color.push(1);\n        normalize(color);\n    }\n    else {\n        assert(false, 14); // Invalid color\n    }\n    return color;\n}\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n    color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n    color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n    color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n    color[3] = clamp(color[3], 0, 1);\n    return color;\n}\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n    var r = color[0];\n    if (r != (r | 0)) {\n        r = (r + 0.5) | 0;\n    }\n    var g = color[1];\n    if (g != (g | 0)) {\n        g = (g + 0.5) | 0;\n    }\n    var b = color[2];\n    if (b != (b | 0)) {\n        b = (b + 0.5) | 0;\n    }\n    var a = color[3] === undefined ? 1 : color[3];\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n//# sourceMappingURL=color.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/Builder\n */\nimport { equals, reverseSubArray } from '../../array.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { buffer, clone, coordinateRelationship } from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport { inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray } from '../../geom/flat/inflate.js';\nimport VectorContext from '../VectorContext.js';\nimport { defaultFillStyle, defaultStrokeStyle, defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset, defaultLineDash, defaultLineCap } from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, import(\"../canvas.js\").TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").StrokeState>} [strokeStates] The stroke states (decluttering).\n */\nvar CanvasBuilder = /** @class */ (function (_super) {\n    __extends(CanvasBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.tolerance = tolerance;\n        /**\n         * @protected\n         * @const\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.maxExtent = maxExtent;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.pixelRatio = pixelRatio;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.maxLineWidth = 0;\n        /**\n         * @protected\n         * @const\n         * @type {number}\n         */\n        _this.resolution = resolution;\n        /**\n         * @private\n         * @type {Array<*>}\n         */\n        _this.beginGeometryInstruction1_ = null;\n        /**\n         * @private\n         * @type {Array<*>}\n         */\n        _this.beginGeometryInstruction2_ = null;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.bufferedMaxExtent_ = null;\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.instructions = [];\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.coordinates = [];\n        /**\n         * @private\n         * @type {import(\"../../coordinate.js\").Coordinate}\n         */\n        _this.tmpCoordinate_ = [];\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.hitDetectionInstructions = [];\n        /**\n         * @protected\n         * @type {import(\"../canvas.js\").FillStrokeState}\n         */\n        _this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n        return _this;\n    }\n    /**\n     * @protected\n     * @param {Array<number>} dashArray Dash array.\n     * @return {Array<number>} Dash array with pixel ratio applied\n     */\n    CanvasBuilder.prototype.applyPixelRatio = function (dashArray) {\n        var pixelRatio = this.pixelRatio;\n        return pixelRatio == 1 ? dashArray : dashArray.map(function (dash) {\n            return dash * pixelRatio;\n        });\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @param {boolean} closed Last input coordinate equals first.\n     * @param {boolean} skipFirst Skip first coordinate.\n     * @protected\n     * @return {number} My end.\n     */\n    CanvasBuilder.prototype.appendFlatCoordinates = function (flatCoordinates, offset, end, stride, closed, skipFirst) {\n        var myEnd = this.coordinates.length;\n        var extent = this.getBufferedMaxExtent();\n        if (skipFirst) {\n            offset += stride;\n        }\n        var lastXCoord = flatCoordinates[offset];\n        var lastYCoord = flatCoordinates[offset + 1];\n        var nextCoord = this.tmpCoordinate_;\n        var skipped = true;\n        var i, lastRel, nextRel;\n        for (i = offset + stride; i < end; i += stride) {\n            nextCoord[0] = flatCoordinates[i];\n            nextCoord[1] = flatCoordinates[i + 1];\n            nextRel = coordinateRelationship(extent, nextCoord);\n            if (nextRel !== lastRel) {\n                if (skipped) {\n                    this.coordinates[myEnd++] = lastXCoord;\n                    this.coordinates[myEnd++] = lastYCoord;\n                }\n                this.coordinates[myEnd++] = nextCoord[0];\n                this.coordinates[myEnd++] = nextCoord[1];\n                skipped = false;\n            }\n            else if (nextRel === Relationship.INTERSECTING) {\n                this.coordinates[myEnd++] = nextCoord[0];\n                this.coordinates[myEnd++] = nextCoord[1];\n                skipped = false;\n            }\n            else {\n                skipped = true;\n            }\n            lastXCoord = nextCoord[0];\n            lastYCoord = nextCoord[1];\n            lastRel = nextRel;\n        }\n        // Last coordinate equals first or only one point to append:\n        if ((closed && skipped) || i === offset + stride) {\n            this.coordinates[myEnd++] = lastXCoord;\n            this.coordinates[myEnd++] = lastYCoord;\n        }\n        return myEnd;\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @param {Array<number>} builderEnds Builder ends.\n     * @return {number} Offset.\n     */\n    CanvasBuilder.prototype.drawCustomCoordinates_ = function (flatCoordinates, offset, ends, stride, builderEnds) {\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var builderEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n            builderEnds.push(builderEnd);\n            offset = end;\n        }\n        return offset;\n    };\n    /**\n     * @inheritDoc.\n     */\n    CanvasBuilder.prototype.drawCustom = function (geometry, feature, renderer) {\n        this.beginGeometry(geometry, feature);\n        var type = geometry.getType();\n        var stride = geometry.getStride();\n        var builderBegin = this.coordinates.length;\n        var flatCoordinates, builderEnd, builderEnds, builderEndss;\n        var offset;\n        if (type == GeometryType.MULTI_POLYGON) {\n            geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry);\n            flatCoordinates = geometry.getOrientedFlatCoordinates();\n            builderEndss = [];\n            var endss = geometry.getEndss();\n            offset = 0;\n            for (var i = 0, ii = endss.length; i < ii; ++i) {\n                var myEnds = [];\n                offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n                builderEndss.push(myEnds);\n            }\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n        }\n        else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n            builderEnds = [];\n            flatCoordinates = (type == GeometryType.POLYGON) ?\n                /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates() :\n                geometry.getFlatCoordinates();\n            offset = this.drawCustomCoordinates_(flatCoordinates, 0, \n            /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(), stride, builderEnds);\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEnds, geometry, renderer, inflateCoordinatesArray]);\n        }\n        else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n            flatCoordinates = geometry.getFlatCoordinates();\n            builderEnd = this.appendFlatCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n        }\n        else if (type == GeometryType.POINT) {\n            flatCoordinates = geometry.getFlatCoordinates();\n            this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n            builderEnd = this.coordinates.length;\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEnd, geometry, renderer]);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @protected\n     * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasBuilder.prototype.beginGeometry = function (geometry, feature) {\n        var extent = geometry.getExtent();\n        this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, extent];\n        this.instructions.push(this.beginGeometryInstruction1_);\n        this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, extent];\n        this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n    };\n    /**\n     * @return {SerializableInstructions} the serializable instructions.\n     */\n    CanvasBuilder.prototype.finish = function () {\n        return {\n            instructions: this.instructions,\n            hitDetectionInstructions: this.hitDetectionInstructions,\n            coordinates: this.coordinates\n        };\n    };\n    /**\n     * Reverse the hit detection instructions.\n     */\n    CanvasBuilder.prototype.reverseHitDetectionInstructions = function () {\n        var hitDetectionInstructions = this.hitDetectionInstructions;\n        // step 1 - reverse array\n        hitDetectionInstructions.reverse();\n        // step 2 - reverse instructions within geometry blocks\n        var i;\n        var n = hitDetectionInstructions.length;\n        var instruction;\n        var type;\n        var begin = -1;\n        for (i = 0; i < n; ++i) {\n            instruction = hitDetectionInstructions[i];\n            type = /** @type {CanvasInstruction} */ (instruction[0]);\n            if (type == CanvasInstruction.END_GEOMETRY) {\n                begin = i;\n            }\n            else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n                instruction[2] = i;\n                reverseSubArray(this.hitDetectionInstructions, begin, i);\n                begin = -1;\n            }\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasBuilder.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n        var state = this.state;\n        if (fillStyle) {\n            var fillStyleColor = fillStyle.getColor();\n            state.fillStyle = asColorLike(fillStyleColor ?\n                fillStyleColor : defaultFillStyle);\n        }\n        else {\n            state.fillStyle = undefined;\n        }\n        if (strokeStyle) {\n            var strokeStyleColor = strokeStyle.getColor();\n            state.strokeStyle = asColorLike(strokeStyleColor ?\n                strokeStyleColor : defaultStrokeStyle);\n            var strokeStyleLineCap = strokeStyle.getLineCap();\n            state.lineCap = strokeStyleLineCap !== undefined ?\n                strokeStyleLineCap : defaultLineCap;\n            var strokeStyleLineDash = strokeStyle.getLineDash();\n            state.lineDash = strokeStyleLineDash ?\n                strokeStyleLineDash.slice() : defaultLineDash;\n            var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n            state.lineDashOffset = strokeStyleLineDashOffset ?\n                strokeStyleLineDashOffset : defaultLineDashOffset;\n            var strokeStyleLineJoin = strokeStyle.getLineJoin();\n            state.lineJoin = strokeStyleLineJoin !== undefined ?\n                strokeStyleLineJoin : defaultLineJoin;\n            var strokeStyleWidth = strokeStyle.getWidth();\n            state.lineWidth = strokeStyleWidth !== undefined ?\n                strokeStyleWidth : defaultLineWidth;\n            var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n            state.miterLimit = strokeStyleMiterLimit !== undefined ?\n                strokeStyleMiterLimit : defaultMiterLimit;\n            if (state.lineWidth > this.maxLineWidth) {\n                this.maxLineWidth = state.lineWidth;\n                // invalidate the buffered max extent cache\n                this.bufferedMaxExtent_ = null;\n            }\n        }\n        else {\n            state.strokeStyle = undefined;\n            state.lineCap = undefined;\n            state.lineDash = null;\n            state.lineDashOffset = undefined;\n            state.lineJoin = undefined;\n            state.lineWidth = undefined;\n            state.miterLimit = undefined;\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @return {Array<*>} Fill instruction.\n     */\n    CanvasBuilder.prototype.createFill = function (state) {\n        var fillStyle = state.fillStyle;\n        /** @type {Array<*>} */\n        var fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n        if (typeof fillStyle !== 'string') {\n            // Fill is a pattern or gradient - align it!\n            fillInstruction.push(true);\n        }\n        return fillInstruction;\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     */\n    CanvasBuilder.prototype.applyStroke = function (state) {\n        this.instructions.push(this.createStroke(state));\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @return {Array<*>} Stroke instruction.\n     */\n    CanvasBuilder.prototype.createStroke = function (state) {\n        return [\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n            state.lineJoin, state.miterLimit,\n            this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n        ];\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n     */\n    CanvasBuilder.prototype.updateFillStyle = function (state, createFill) {\n        var fillStyle = state.fillStyle;\n        if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n            if (fillStyle !== undefined) {\n                this.instructions.push(createFill.call(this, state));\n            }\n            state.currentFillStyle = fillStyle;\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n     */\n    CanvasBuilder.prototype.updateStrokeStyle = function (state, applyStroke) {\n        var strokeStyle = state.strokeStyle;\n        var lineCap = state.lineCap;\n        var lineDash = state.lineDash;\n        var lineDashOffset = state.lineDashOffset;\n        var lineJoin = state.lineJoin;\n        var lineWidth = state.lineWidth;\n        var miterLimit = state.miterLimit;\n        if (state.currentStrokeStyle != strokeStyle ||\n            state.currentLineCap != lineCap ||\n            (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n            state.currentLineDashOffset != lineDashOffset ||\n            state.currentLineJoin != lineJoin ||\n            state.currentLineWidth != lineWidth ||\n            state.currentMiterLimit != miterLimit) {\n            if (strokeStyle !== undefined) {\n                applyStroke.call(this, state);\n            }\n            state.currentStrokeStyle = strokeStyle;\n            state.currentLineCap = lineCap;\n            state.currentLineDash = lineDash;\n            state.currentLineDashOffset = lineDashOffset;\n            state.currentLineJoin = lineJoin;\n            state.currentLineWidth = lineWidth;\n            state.currentMiterLimit = miterLimit;\n        }\n    };\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasBuilder.prototype.endGeometry = function (feature) {\n        this.beginGeometryInstruction1_[2] = this.instructions.length;\n        this.beginGeometryInstruction1_ = null;\n        this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n        this.beginGeometryInstruction2_ = null;\n        var endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n        this.instructions.push(endGeometryInstruction);\n        this.hitDetectionInstructions.push(endGeometryInstruction);\n    };\n    /**\n     * Get the buffered rendering extent.  Rendering will be clipped to the extent\n     * provided to the constructor.  To account for symbolizers that may intersect\n     * this extent, we calculate a buffered extent (e.g. based on stroke width).\n     * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n     * @protected\n     */\n    CanvasBuilder.prototype.getBufferedMaxExtent = function () {\n        if (!this.bufferedMaxExtent_) {\n            this.bufferedMaxExtent_ = clone(this.maxExtent);\n            if (this.maxLineWidth > 0) {\n                var width = this.resolution * (this.maxLineWidth + 1) / 2;\n                buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n            }\n        }\n        return this.bufferedMaxExtent_;\n    };\n    return CanvasBuilder;\n}(VectorContext));\nexport default CanvasBuilder;\n//# sourceMappingURL=Builder.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange'\n};\n//# sourceMappingURL=ObjectEventType.js.map","/**\n * @module ol/reproj\n */\nimport { createCanvasContext2D } from './dom.js';\nimport { containsCoordinate, createEmpty, extend, getHeight, getTopLeft, getWidth } from './extent.js';\nimport { solveLinearSystem } from './math.js';\nimport { getPointResolution, transform } from './proj.js';\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution) {\n    var sourceCenter = transform(targetCenter, targetProj, sourceProj);\n    // calculate the ideal resolution of the source data\n    var sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n    var targetMetersPerUnit = targetProj.getMetersPerUnit();\n    if (targetMetersPerUnit !== undefined) {\n        sourceResolution *= targetMetersPerUnit;\n    }\n    var sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n    if (sourceMetersPerUnit !== undefined) {\n        sourceResolution /= sourceMetersPerUnit;\n    }\n    // Based on the projection properties, the point resolution at the specified\n    // coordinates may be slightly different. We need to reverse-compensate this\n    // in order to achieve optimal results.\n    var sourceExtent = sourceProj.getExtent();\n    if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n        var compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n            sourceResolution;\n        if (isFinite(compensationFactor) && compensationFactor > 0) {\n            sourceResolution /= compensationFactor;\n        }\n    }\n    return sourceResolution;\n}\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {import(\"./coordinate.js\").Coordinate} New point 1 px farther from the centroid.\n */\nfunction enlargeClipPoint(centroidX, centroidY, x, y) {\n    var dX = x - centroidX;\n    var dY = y - centroidY;\n    var distance = Math.sqrt(dX * dX + dY * dY);\n    return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n}\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation\n * Calculated triangulation.\n * @param {Array<{extent: import(\"./extent.js\").Extent,\n *                 image: (HTMLCanvasElement|HTMLImageElement|HTMLVideoElement)}>} sources\n * Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio, sourceResolution, sourceExtent, targetResolution, targetExtent, triangulation, sources, gutter, opt_renderEdges) {\n    var context = createCanvasContext2D(Math.round(pixelRatio * width), Math.round(pixelRatio * height));\n    if (sources.length === 0) {\n        return context.canvas;\n    }\n    context.scale(pixelRatio, pixelRatio);\n    var sourceDataExtent = createEmpty();\n    sources.forEach(function (src, i, arr) {\n        extend(sourceDataExtent, src.extent);\n    });\n    var canvasWidthInUnits = getWidth(sourceDataExtent);\n    var canvasHeightInUnits = getHeight(sourceDataExtent);\n    var stitchContext = createCanvasContext2D(Math.round(pixelRatio * canvasWidthInUnits / sourceResolution), Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n    var stitchScale = pixelRatio / sourceResolution;\n    sources.forEach(function (src, i, arr) {\n        var xPos = src.extent[0] - sourceDataExtent[0];\n        var yPos = -(src.extent[3] - sourceDataExtent[3]);\n        var srcWidth = getWidth(src.extent);\n        var srcHeight = getHeight(src.extent);\n        stitchContext.drawImage(src.image, gutter, gutter, src.image.width - 2 * gutter, src.image.height - 2 * gutter, xPos * stitchScale, yPos * stitchScale, srcWidth * stitchScale, srcHeight * stitchScale);\n    });\n    var targetTopLeft = getTopLeft(targetExtent);\n    triangulation.getTriangles().forEach(function (triangle, i, arr) {\n        /* Calculate affine transform (src -> dst)\n         * Resulting matrix can be used to transform coordinate\n         * from `sourceProjection` to destination pixels.\n         *\n         * To optimize number of context calls and increase numerical stability,\n         * we also do the following operations:\n         * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n         * here before solving the linear system so [ui, vi] are pixel coordinates.\n         *\n         * Src points: xi, yi\n         * Dst points: ui, vi\n         * Affine coefficients: aij\n         *\n         * | x0 y0 1  0  0 0 |   |a00|   |u0|\n         * | x1 y1 1  0  0 0 |   |a01|   |u1|\n         * | x2 y2 1  0  0 0 | x |a02| = |u2|\n         * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n         * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n         * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n         */\n        var source = triangle.source;\n        var target = triangle.target;\n        var x0 = source[0][0], y0 = source[0][1];\n        var x1 = source[1][0], y1 = source[1][1];\n        var x2 = source[2][0], y2 = source[2][1];\n        var u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n        var v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n        var u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n        var v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n        var u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n        var v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n        // Shift all the source points to improve numerical stability\n        // of all the subsequent calculations. The [x0, y0] is used here.\n        // This is also used to simplify the linear system.\n        var sourceNumericalShiftX = x0;\n        var sourceNumericalShiftY = y0;\n        x0 = 0;\n        y0 = 0;\n        x1 -= sourceNumericalShiftX;\n        y1 -= sourceNumericalShiftY;\n        x2 -= sourceNumericalShiftX;\n        y2 -= sourceNumericalShiftY;\n        var augmentedMatrix = [\n            [x1, y1, 0, 0, u1 - u0],\n            [x2, y2, 0, 0, u2 - u0],\n            [0, 0, x1, y1, v1 - v0],\n            [0, 0, x2, y2, v2 - v0]\n        ];\n        var affineCoefs = solveLinearSystem(augmentedMatrix);\n        if (!affineCoefs) {\n            return;\n        }\n        context.save();\n        context.beginPath();\n        var centroidX = (u0 + u1 + u2) / 3;\n        var centroidY = (v0 + v1 + v2) / 3;\n        var p0 = enlargeClipPoint(centroidX, centroidY, u0, v0);\n        var p1 = enlargeClipPoint(centroidX, centroidY, u1, v1);\n        var p2 = enlargeClipPoint(centroidX, centroidY, u2, v2);\n        context.moveTo(p1[0], p1[1]);\n        context.lineTo(p0[0], p0[1]);\n        context.lineTo(p2[0], p2[1]);\n        context.clip();\n        context.transform(affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n        context.translate(sourceDataExtent[0] - sourceNumericalShiftX, sourceDataExtent[3] - sourceNumericalShiftY);\n        context.scale(sourceResolution / pixelRatio, -sourceResolution / pixelRatio);\n        context.drawImage(stitchContext.canvas, 0, 0);\n        context.restore();\n    });\n    if (opt_renderEdges) {\n        context.save();\n        context.strokeStyle = 'black';\n        context.lineWidth = 1;\n        triangulation.getTriangles().forEach(function (triangle, i, arr) {\n            var target = triangle.target;\n            var u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n            var v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n            var u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n            var v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n            var u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n            var v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n            context.beginPath();\n            context.moveTo(u1, v1);\n            context.lineTo(u0, v0);\n            context.lineTo(u2, v2);\n            context.closePath();\n            context.stroke();\n        });\n        context.restore();\n    }\n    return context.canvas;\n}\n//# sourceMappingURL=reproj.js.map","/**\n * @module ol/rotationconstraint\n */\nimport { toRadians } from './math.js';\n/**\n * @typedef {function((number|undefined), boolean=): (number|undefined)} Type\n */\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation) {\n    if (rotation !== undefined) {\n        return 0;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation) {\n    if (rotation !== undefined) {\n        return rotation;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n    var theta = 2 * Math.PI / n;\n    return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean=} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, opt_isMoving) {\n        if (opt_isMoving) {\n            return rotation;\n        }\n        if (rotation !== undefined) {\n            rotation = Math.floor(rotation / theta + 0.5) * theta;\n            return rotation;\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n    var tolerance = opt_tolerance || toRadians(5);\n    return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} opt_isMoving True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, opt_isMoving) {\n        if (opt_isMoving) {\n            return rotation;\n        }\n        if (rotation !== undefined) {\n            if (Math.abs(rotation) <= tolerance) {\n                return 0;\n            }\n            else {\n                return rotation;\n            }\n        }\n        else {\n            return undefined;\n        }\n    });\n}\n//# sourceMappingURL=rotationconstraint.js.map","/**\n * @module ol/layer/TileProperty\n */\n/**\n * @enum {string}\n */\nexport default {\n    PRELOAD: 'preload',\n    USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n//# sourceMappingURL=TileProperty.js.map","/**\n * @module ol/source/common\n */\n/**\n * Default WMS version.\n * @type {string}\n */\nexport var DEFAULT_WMS_VERSION = '1.3.0';\n//# sourceMappingURL=common.js.map","/**\n * @module ol/source/WMSServerType\n */\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n    /**\n     * HiDPI support for [Carmenta Server](https://www.carmenta.com/en/products/carmenta-server)\n     * @api\n     */\n    CARMENTA_SERVER: 'carmentaserver',\n    /**\n     * HiDPI support for [GeoServer](https://geoserver.org/)\n     * @api\n     */\n    GEOSERVER: 'geoserver',\n    /**\n     * HiDPI support for [MapServer](https://mapserver.org/)\n     * @api\n     */\n    MAPSERVER: 'mapserver',\n    /**\n     * HiDPI support for [QGIS](https://qgis.org/)\n     * @api\n     */\n    QGIS: 'qgis'\n};\n//# sourceMappingURL=WMSServerType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiLineString\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestArrayPoint, arrayMaxSquaredDelta } from './flat/closest.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { interpolatePoint, lineStringsCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineStringArray } from './flat/intersectsextent.js';\nimport { douglasPeuckerArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nvar MultiLineString = /** @class */ (function (_super) {\n    __extends(MultiLineString, _super);\n    /**\n     * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n     *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n     *     combination with `opt_layout` and `opt_ends` are also accepted.)\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @param {Array<number>=} opt_ends Flat coordinate ends for internal use.\n     */\n    function MultiLineString(coordinates, opt_layout, opt_ends) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        _this.ends_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (Array.isArray(coordinates[0])) {\n            _this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n        }\n        else if (opt_layout !== undefined && opt_ends) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n            _this.ends_ = opt_ends;\n        }\n        else {\n            var layout = _this.getLayout();\n            var lineStrings = /** @type {Array<LineString>} */ (coordinates);\n            var flatCoordinates = [];\n            var ends = [];\n            for (var i = 0, ii = lineStrings.length; i < ii; ++i) {\n                var lineString = lineStrings[i];\n                if (i === 0) {\n                    layout = lineString.getLayout();\n                }\n                extend(flatCoordinates, lineString.getFlatCoordinates());\n                ends.push(flatCoordinates.length);\n            }\n            _this.setFlatCoordinates(layout, flatCoordinates);\n            _this.ends_ = ends;\n        }\n        return _this;\n    }\n    /**\n     * Append the passed linestring to the multilinestring.\n     * @param {LineString} lineString LineString.\n     * @api\n     */\n    MultiLineString.prototype.appendLineString = function (lineString) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = lineString.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n        }\n        this.ends_.push(this.flatCoordinates.length);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiLineString} Clone.\n     * @override\n     * @api\n     */\n    MultiLineString.prototype.clone = function () {\n        return new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiLineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * `opt_interpolate` controls interpolation between consecutive LineStrings\n     * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n     * will be linearly interpolated between the last coordinate of one LineString\n     * and the first coordinate of the next LineString.  If `opt_interpolate` is\n     * `false` then the function will return `null` for Ms falling between\n     * LineStrings.\n     *\n     * @param {number} m M.\n     * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n     * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    MultiLineString.prototype.getCoordinateAtM = function (m, opt_extrapolate, opt_interpolate) {\n        if ((this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) ||\n            this.flatCoordinates.length === 0) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        var interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n        return lineStringsCoordinateAtM(this.flatCoordinates, 0, this.ends_, this.stride, m, extrapolate, interpolate);\n    };\n    /**\n     * Return the coordinates of the multilinestring.\n     * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n     * @override\n     * @api\n     */\n    MultiLineString.prototype.getCoordinates = function () {\n        return inflateCoordinatesArray(this.flatCoordinates, 0, this.ends_, this.stride);\n    };\n    /**\n     * @return {Array<number>} Ends.\n     */\n    MultiLineString.prototype.getEnds = function () {\n        return this.ends_;\n    };\n    /**\n     * Return the linestring at the specified index.\n     * @param {number} index Index.\n     * @return {LineString} LineString.\n     * @api\n     */\n    MultiLineString.prototype.getLineString = function (index) {\n        if (index < 0 || this.ends_.length <= index) {\n            return null;\n        }\n        return new LineString(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n    };\n    /**\n     * Return the linestrings of this multilinestring.\n     * @return {Array<LineString>} LineStrings.\n     * @api\n     */\n    MultiLineString.prototype.getLineStrings = function () {\n        var flatCoordinates = this.flatCoordinates;\n        var ends = this.ends_;\n        var layout = this.layout;\n        /** @type {Array<LineString>} */\n        var lineStrings = [];\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n            lineStrings.push(lineString);\n            offset = end;\n        }\n        return lineStrings;\n    };\n    /**\n     * @return {Array<number>} Flat midpoints.\n     */\n    MultiLineString.prototype.getFlatMidpoints = function () {\n        var midpoints = [];\n        var flatCoordinates = this.flatCoordinates;\n        var offset = 0;\n        var ends = this.ends_;\n        var stride = this.stride;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var midpoint = interpolatePoint(flatCoordinates, offset, end, stride, 0.5);\n            extend(midpoints, midpoint);\n            offset = end;\n        }\n        return midpoints;\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiLineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEnds = [];\n        simplifiedFlatCoordinates.length = douglasPeuckerArray(this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0, simplifiedEnds);\n        return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiLineString.prototype.getType = function () {\n        return GeometryType.MULTI_LINE_STRING;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiLineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineStringArray(this.flatCoordinates, 0, this.ends_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the multilinestring.\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    MultiLineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 2);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n        this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n        this.changed();\n    };\n    return MultiLineString;\n}(SimpleGeometry));\nexport default MultiLineString;\n//# sourceMappingURL=MultiLineString.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseImage\n */\nimport Layer from './Layer.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {import(\"../source/Image.js\").default} [source] Source for this layer.\n */\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {Layer<import(\"../source/Image.js\").default>}\n * @api\n */\nvar BaseImageLayer = /** @class */ (function (_super) {\n    __extends(BaseImageLayer, _super);\n    /**\n     * @param {Options=} opt_options Layer options.\n     */\n    function BaseImageLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, options) || this;\n        return _this;\n    }\n    return BaseImageLayer;\n}(Layer));\nexport default BaseImageLayer;\n//# sourceMappingURL=BaseImage.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport { ENABLE_RASTER_REPROJECTION } from '../../reproj/common.js';\nimport ViewHint from '../../ViewHint.js';\nimport { containsExtent, intersects } from '../../extent.js';\nimport { fromUserExtent } from '../../proj.js';\nimport { getIntersection, isEmpty } from '../../extent.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport { compose as composeTransform, makeInverse, toString as transformToString } from '../../transform.js';\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nvar CanvasImageLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasImageLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Image.js\").default} imageLayer Image layer.\n     */\n    function CanvasImageLayerRenderer(imageLayer) {\n        var _this = _super.call(this, imageLayer) || this;\n        /**\n         * @protected\n         * @type {?import(\"../../ImageBase.js\").default}\n         */\n        _this.image_ = null;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    CanvasImageLayerRenderer.prototype.getImage = function () {\n        return !this.image_ ? null : this.image_.getImage();\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        var pixelRatio = frameState.pixelRatio;\n        var viewState = frameState.viewState;\n        var viewResolution = viewState.resolution;\n        var imageSource = this.getLayer().getSource();\n        var hints = frameState.viewHints;\n        var renderedExtent = frameState.extent;\n        if (layerState.extent !== undefined) {\n            renderedExtent = getIntersection(renderedExtent, fromUserExtent(layerState.extent, viewState.projection));\n        }\n        if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] && !isEmpty(renderedExtent)) {\n            var projection = viewState.projection;\n            if (!ENABLE_RASTER_REPROJECTION) {\n                var sourceProjection = imageSource.getProjection();\n                if (sourceProjection) {\n                    projection = sourceProjection;\n                }\n            }\n            var image = imageSource.getImage(renderedExtent, viewResolution, pixelRatio, projection);\n            if (image && this.loadImage(image)) {\n                this.image_ = image;\n            }\n        }\n        return !!this.image_;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var image = this.image_;\n        var imageExtent = image.getExtent();\n        var imageResolution = image.getResolution();\n        var imagePixelRatio = image.getPixelRatio();\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        var pixelRatio = frameState.pixelRatio;\n        var viewState = frameState.viewState;\n        var viewCenter = viewState.center;\n        var viewResolution = viewState.resolution;\n        var size = frameState.size;\n        var scale = pixelRatio * imageResolution / (viewResolution * imagePixelRatio);\n        var width = Math.round(size[0] * pixelRatio);\n        var height = Math.round(size[1] * pixelRatio);\n        var rotation = viewState.rotation;\n        if (rotation) {\n            var size_1 = Math.round(Math.sqrt(width * width + height * height));\n            width = height = size_1;\n        }\n        // set forward and inverse pixel transforms\n        composeTransform(this.pixelTransform, frameState.size[0] / 2, frameState.size[1] / 2, 1 / pixelRatio, 1 / pixelRatio, rotation, -width / 2, -height / 2);\n        makeInverse(this.inversePixelTransform, this.pixelTransform);\n        this.useContainer(target, this.pixelTransform, layerState.opacity);\n        var context = this.context;\n        var canvas = context.canvas;\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n        else if (!this.containerReused) {\n            context.clearRect(0, 0, width, height);\n        }\n        // clipped rendering if layer extent is set\n        var clipped = false;\n        if (layerState.extent) {\n            var layerExtent = fromUserExtent(layerState.extent, viewState.projection);\n            clipped = !containsExtent(layerExtent, frameState.extent) && intersects(layerExtent, frameState.extent);\n            if (clipped) {\n                this.clipUnrotated(context, frameState, layerExtent);\n            }\n        }\n        var img = image.getImage();\n        var transform = composeTransform(this.tempTransform_, width / 2, height / 2, scale, scale, 0, imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution, imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n        this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n        var dx = transform[4];\n        var dy = transform[5];\n        var dw = img.width * transform[0];\n        var dh = img.height * transform[3];\n        this.preRender(context, frameState);\n        if (dw >= 0.5 && dh >= 0.5) {\n            var opacity = layerState.opacity;\n            var previousAlpha = void 0;\n            if (opacity !== 1) {\n                previousAlpha = this.context.globalAlpha;\n                this.context.globalAlpha = opacity;\n            }\n            this.context.drawImage(img, 0, 0, +img.width, +img.height, Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n            if (opacity !== 1) {\n                this.context.globalAlpha = previousAlpha;\n            }\n        }\n        this.postRender(context, frameState);\n        if (clipped) {\n            context.restore();\n        }\n        var canvasTransform = transformToString(this.pixelTransform);\n        if (canvasTransform !== canvas.style.transform) {\n            canvas.style.transform = canvasTransform;\n        }\n        return this.container;\n    };\n    return CanvasImageLayerRenderer;\n}(CanvasLayerRenderer));\nexport default CanvasImageLayerRenderer;\n//# sourceMappingURL=ImageLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Image\n */\nimport BaseImageLayer from './BaseImage.js';\nimport CanvasImageLayerRenderer from '../renderer/canvas/ImageLayer.js';\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nvar ImageLayer = /** @class */ (function (_super) {\n    __extends(ImageLayer, _super);\n    /**\n     * @param {import(\"./BaseImage.js\").Options=} opt_options Layer options.\n     */\n    function ImageLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    ImageLayer.prototype.createRenderer = function () {\n        return new CanvasImageLayerRenderer(this);\n    };\n    return ImageLayer;\n}(BaseImageLayer));\nexport default ImageLayer;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/uri\n */\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n    var keyParams = [];\n    // Skip any null or undefined parameter values\n    Object.keys(params).forEach(function (k) {\n        if (params[k] !== null && params[k] !== undefined) {\n            keyParams.push(k + '=' + encodeURIComponent(params[k]));\n        }\n    });\n    var qs = keyParams.join('&');\n    // remove any trailing ? or &\n    uri = uri.replace(/[?&]$/, '');\n    // append ? or & depending on whether uri has existing parameters\n    uri = uri.indexOf('?') === -1 ? uri + '?' : uri + '&';\n    return uri + qs;\n}\n//# sourceMappingURL=uri.js.map","/**\n * @module ol/proj/Projection\n */\nimport { METERS_PER_UNIT } from './Units.js';\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{import(\"../coordinate.js\").Coordinate}` as arguments, and returns\n * the `{number}` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4~register} function.\n *\n * @api\n */\nvar Projection = /** @class */ (function () {\n    /**\n     * @param {Options} options Projection options.\n     */\n    function Projection(options) {\n        /**\n         * @private\n         * @type {string}\n         */\n        this.code_ = options.code;\n        /**\n         * Units of projected coordinates. When set to `TILE_PIXELS`, a\n         * `this.extent_` and `this.worldExtent_` must be configured properly for each\n         * tile.\n         * @private\n         * @type {import(\"./Units.js\").default}\n         */\n        this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n        /**\n         * Validity extent of the projection in projected coordinates. For projections\n         * with `TILE_PIXELS` units, this is the extent of the tile in\n         * tile pixel space.\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = options.extent !== undefined ? options.extent : null;\n        /**\n         * Extent of the world in EPSG:4326. For projections with\n         * `TILE_PIXELS` units, this is the extent of the tile in\n         * projected coordinate space.\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.worldExtent_ = options.worldExtent !== undefined ?\n            options.worldExtent : null;\n        /**\n         * @private\n         * @type {string}\n         */\n        this.axisOrientation_ = options.axisOrientation !== undefined ?\n            options.axisOrientation : 'enu';\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.global_ = options.global !== undefined ? options.global : false;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.canWrapX_ = !!(this.global_ && this.extent_);\n        /**\n         * @private\n         * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n         */\n        this.getPointResolutionFunc_ = options.getPointResolution;\n        /**\n         * @private\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        this.defaultTileGrid_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.metersPerUnit_ = options.metersPerUnit;\n    }\n    /**\n     * @return {boolean} The projection is suitable for wrapping the x-axis\n     */\n    Projection.prototype.canWrapX = function () {\n        return this.canWrapX_;\n    };\n    /**\n     * Get the code for this projection, e.g. 'EPSG:4326'.\n     * @return {string} Code.\n     * @api\n     */\n    Projection.prototype.getCode = function () {\n        return this.code_;\n    };\n    /**\n     * Get the validity extent for this projection.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    Projection.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the units of this projection.\n     * @return {import(\"./Units.js\").default} Units.\n     * @api\n     */\n    Projection.prototype.getUnits = function () {\n        return this.units_;\n    };\n    /**\n     * Get the amount of meters per unit of this projection.  If the projection is\n     * not configured with `metersPerUnit` or a units identifier, the return is\n     * `undefined`.\n     * @return {number|undefined} Meters.\n     * @api\n     */\n    Projection.prototype.getMetersPerUnit = function () {\n        return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n    };\n    /**\n     * Get the world extent for this projection.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    Projection.prototype.getWorldExtent = function () {\n        return this.worldExtent_;\n    };\n    /**\n     * Get the axis orientation of this projection.\n     * Example values are:\n     * enu - the default easting, northing, elevation.\n     * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n     *     or south orientated transverse mercator.\n     * wnu - westing, northing, up - some planetary coordinate systems have\n     *     \"west positive\" coordinate systems\n     * @return {string} Axis orientation.\n     * @api\n     */\n    Projection.prototype.getAxisOrientation = function () {\n        return this.axisOrientation_;\n    };\n    /**\n     * Is this projection a global projection which spans the whole world?\n     * @return {boolean} Whether the projection is global.\n     * @api\n     */\n    Projection.prototype.isGlobal = function () {\n        return this.global_;\n    };\n    /**\n     * Set if the projection is a global projection which spans the whole world\n     * @param {boolean} global Whether the projection is global.\n     * @api\n     */\n    Projection.prototype.setGlobal = function (global) {\n        this.global_ = global;\n        this.canWrapX_ = !!(global && this.extent_);\n    };\n    /**\n     * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n     */\n    Projection.prototype.getDefaultTileGrid = function () {\n        return this.defaultTileGrid_;\n    };\n    /**\n     * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n     */\n    Projection.prototype.setDefaultTileGrid = function (tileGrid) {\n        this.defaultTileGrid_ = tileGrid;\n    };\n    /**\n     * Set the validity extent for this projection.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    Projection.prototype.setExtent = function (extent) {\n        this.extent_ = extent;\n        this.canWrapX_ = !!(this.global_ && extent);\n    };\n    /**\n     * Set the world extent for this projection.\n     * @param {import(\"../extent.js\").Extent} worldExtent World extent\n     *     [minlon, minlat, maxlon, maxlat].\n     * @api\n     */\n    Projection.prototype.setWorldExtent = function (worldExtent) {\n        this.worldExtent_ = worldExtent;\n    };\n    /**\n     * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n     * for this projection.\n     * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n     * @api\n     */\n    Projection.prototype.setGetPointResolution = function (func) {\n        this.getPointResolutionFunc_ = func;\n    };\n    /**\n     * Get the custom point resolution function for this projection (if set).\n     * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n     * resolution function (if set).\n     */\n    Projection.prototype.getPointResolutionFunc = function () {\n        return this.getPointResolutionFunc_;\n    };\n    return Projection;\n}());\nexport default Projection;\n//# sourceMappingURL=Projection.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Image\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport { listenOnce, unlistenByKey } from './events.js';\nimport EventType from './events/EventType.js';\nimport { getHeight } from './extent.js';\nimport { IMAGE_DECODE } from './has.js';\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\nvar ImageWrapper = /** @class */ (function (_super) {\n    __extends(ImageWrapper, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {string} src Image source URI.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {LoadFunction} imageLoadFunction Image load function.\n     */\n    function ImageWrapper(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n        var _this = _super.call(this, extent, resolution, pixelRatio, ImageState.IDLE) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n         */\n        _this.image_ = new Image();\n        if (crossOrigin !== null) {\n            _this.image_.crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @protected\n         * @type {ImageState}\n         */\n        _this.state = ImageState.IDLE;\n        /**\n         * @private\n         * @type {LoadFunction}\n         */\n        _this.imageLoadFunction_ = imageLoadFunction;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     * @api\n     */\n    ImageWrapper.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Tracks loading or read errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageError_ = function () {\n        this.state = ImageState.ERROR;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Tracks successful image load.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.handleImageLoad_ = function () {\n        if (this.resolution === undefined) {\n            this.resolution = getHeight(this.extent) / this.image_.height;\n        }\n        this.state = ImageState.LOADED;\n        this.unlistenImage_();\n        this.changed();\n    };\n    /**\n     * Load the image or retry if loading previously failed.\n     * Loading is taken care of by the tile queue, and calling this method is\n     * only needed for preloading or for reloading in case of an error.\n     * @override\n     * @api\n     */\n    ImageWrapper.prototype.load = function () {\n        if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            this.imageLoadFunction_(this, this.src_);\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n     */\n    ImageWrapper.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    ImageWrapper.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return ImageWrapper;\n}(ImageBase));\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n    var img = /** @type {HTMLImageElement} */ (image);\n    if (img.src && IMAGE_DECODE) {\n        var promise = img.decode();\n        var listening_1 = true;\n        var unlisten = function () {\n            listening_1 = false;\n        };\n        promise.then(function () {\n            if (listening_1) {\n                loadHandler();\n            }\n        }).catch(function (error) {\n            if (listening_1) {\n                // FIXME: Unconditionally call errorHandler() when this bug is fixed upstream:\n                //        https://bugs.webkit.org/show_bug.cgi?id=198527\n                if (error.name === 'EncodingError' && error.message === 'Invalid image type.') {\n                    loadHandler();\n                }\n                else {\n                    errorHandler();\n                }\n            }\n        });\n        return unlisten;\n    }\n    var listenerKeys = [\n        listenOnce(img, EventType.LOAD, loadHandler),\n        listenOnce(img, EventType.ERROR, errorHandler)\n    ];\n    return function unlisten() {\n        listenerKeys.forEach(unlistenByKey);\n    };\n}\nexport default ImageWrapper;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport { containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment } from '../../extent.js';\nimport { linearRingContainsXY, linearRingContainsExtent } from './contains.js';\nimport { forEach as forEachSegment } from './segments.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n    var coordinatesExtent = extendFlatCoordinates(createEmpty(), flatCoordinates, offset, end, stride);\n    if (!intersects(extent, coordinatesExtent)) {\n        return false;\n    }\n    if (containsExtent(extent, coordinatesExtent)) {\n        return true;\n    }\n    if (coordinatesExtent[0] >= extent[0] &&\n        coordinatesExtent[2] <= extent[2]) {\n        return true;\n    }\n    if (coordinatesExtent[1] >= extent[1] &&\n        coordinatesExtent[3] <= extent[3]) {\n        return true;\n    }\n    return forEachSegment(flatCoordinates, offset, end, stride, \n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function (point1, point2) {\n        return intersectsSegment(extent, point1, point2);\n    });\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        if (intersectsLineString(flatCoordinates, offset, ends[i], stride, extent)) {\n            return true;\n        }\n        offset = ends[i];\n    }\n    return false;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n    if (intersectsLineString(flatCoordinates, offset, end, stride, extent)) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n        return true;\n    }\n    if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n        return true;\n    }\n    return false;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n    if (!intersectsLinearRing(flatCoordinates, offset, ends[0], stride, extent)) {\n        return false;\n    }\n    if (ends.length === 1) {\n        return true;\n    }\n    for (var i = 1, ii = ends.length; i < ii; ++i) {\n        if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n            if (!intersectsLineString(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent)) {\n            return true;\n        }\n        offset = ends[ends.length - 1];\n    }\n    return false;\n}\n//# sourceMappingURL=intersectsextent.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiPoint\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY, containsXY } from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nvar MultiPoint = /** @class */ (function (_super) {\n    __extends(MultiPoint, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     */\n    function MultiPoint(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        if (opt_layout && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed point to this multipoint.\n     * @param {Point} point Point.\n     * @api\n     */\n    MultiPoint.prototype.appendPoint = function (point) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = point.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, point.getFlatCoordinates());\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiPoint} Clone.\n     * @override\n     * @api\n     */\n    MultiPoint.prototype.clone = function () {\n        var multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n        return multiPoint;\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPoint.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        var flatCoordinates = this.flatCoordinates;\n        var stride = this.stride;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var squaredDistance = squaredDx(x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n            if (squaredDistance < minSquaredDistance) {\n                minSquaredDistance = squaredDistance;\n                for (var j = 0; j < stride; ++j) {\n                    closestPoint[j] = flatCoordinates[i + j];\n                }\n                closestPoint.length = stride;\n            }\n        }\n        return minSquaredDistance;\n    };\n    /**\n     * Return the coordinates of the multipoint.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @override\n     * @api\n     */\n    MultiPoint.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the point at the specified index.\n     * @param {number} index Index.\n     * @return {Point} Point.\n     * @api\n     */\n    MultiPoint.prototype.getPoint = function (index) {\n        var n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n        if (index < 0 || n <= index) {\n            return null;\n        }\n        return new Point(this.flatCoordinates.slice(index * this.stride, (index + 1) * this.stride), this.layout);\n    };\n    /**\n     * Return the points of this multipoint.\n     * @return {Array<Point>} Points.\n     * @api\n     */\n    MultiPoint.prototype.getPoints = function () {\n        var flatCoordinates = this.flatCoordinates;\n        var layout = this.layout;\n        var stride = this.stride;\n        /** @type {Array<Point>} */\n        var points = [];\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var point = new Point(flatCoordinates.slice(i, i + stride), layout);\n            points.push(point);\n        }\n        return points;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPoint.prototype.getType = function () {\n        return GeometryType.MULTI_POINT;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPoint.prototype.intersectsExtent = function (extent) {\n        var flatCoordinates = this.flatCoordinates;\n        var stride = this.stride;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var x = flatCoordinates[i];\n            var y = flatCoordinates[i + 1];\n            if (containsXY(extent, x, y)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Set the coordinates of the multipoint.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    MultiPoint.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return MultiPoint;\n}(SimpleGeometry));\nexport default MultiPoint;\n//# sourceMappingURL=MultiPoint.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nvar DoubleClickZoom = /** @class */ (function (_super) {\n    __extends(DoubleClickZoom, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function DoubleClickZoom(opt_options) {\n        var _this = _super.call(this, {\n            handleEvent: handleEvent\n        }) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    return DoubleClickZoom;\n}(Interaction));\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n    var stopEvent = false;\n    if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n        var browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n        var map = mapBrowserEvent.map;\n        var anchor = mapBrowserEvent.coordinate;\n        var delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n        var view = map.getView();\n        zoomByDelta(view, delta, anchor, this.duration_);\n        mapBrowserEvent.preventDefault();\n        stopEvent = true;\n    }\n    return !stopEvent;\n}\nexport default DoubleClickZoom;\n//# sourceMappingURL=DoubleClickZoom.js.map","/**\n * @module ol/Kinetic\n */\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nvar Kinetic = /** @class */ (function () {\n    /**\n     * @param {number} decay Rate of decay (must be negative).\n     * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n     * @param {number} delay Delay to consider to calculate the kinetic\n     *     initial values (milliseconds).\n     */\n    function Kinetic(decay, minVelocity, delay) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.decay_ = decay;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.minVelocity_ = minVelocity;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.delay_ = delay;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.points_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        this.angle_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.initialVelocity_ = 0;\n    }\n    /**\n     * FIXME empty description for jsdoc\n     */\n    Kinetic.prototype.begin = function () {\n        this.points_.length = 0;\n        this.angle_ = 0;\n        this.initialVelocity_ = 0;\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     */\n    Kinetic.prototype.update = function (x, y) {\n        this.points_.push(x, y, Date.now());\n    };\n    /**\n     * @return {boolean} Whether we should do kinetic animation.\n     */\n    Kinetic.prototype.end = function () {\n        if (this.points_.length < 6) {\n            // at least 2 points are required (i.e. there must be at least 6 elements\n            // in the array)\n            return false;\n        }\n        var delay = Date.now() - this.delay_;\n        var lastIndex = this.points_.length - 3;\n        if (this.points_[lastIndex + 2] < delay) {\n            // the last tracked point is too old, which means that the user stopped\n            // panning before releasing the map\n            return false;\n        }\n        // get the first point which still falls into the delay time\n        var firstIndex = lastIndex - 3;\n        while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n            firstIndex -= 3;\n        }\n        var duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n        // we don't want a duration of 0 (divide by zero)\n        // we also make sure the user panned for a duration of at least one frame\n        // (1/60s) to compute sane displacement values\n        if (duration < 1000 / 60) {\n            return false;\n        }\n        var dx = this.points_[lastIndex] - this.points_[firstIndex];\n        var dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n        this.angle_ = Math.atan2(dy, dx);\n        this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n        return this.initialVelocity_ > this.minVelocity_;\n    };\n    /**\n     * @return {number} Total distance travelled (pixels).\n     */\n    Kinetic.prototype.getDistance = function () {\n        return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n    };\n    /**\n     * @return {number} Angle of the kinetic panning animation (radians).\n     */\n    Kinetic.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    return Kinetic;\n}());\nexport default Kinetic;\n//# sourceMappingURL=Kinetic.js.map","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport { assert } from '../asserts.js';\nimport { TRUE, FALSE } from '../functions.js';\nimport { WEBKIT, MAC } from '../has.js';\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport var altKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport var altShiftKeysOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        originalEvent.shiftKey);\n};\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport var focus = function (event) {\n    return event.target.getTargetElement() === document.activeElement;\n};\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport var always = TRUE;\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport var click = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport var mouseActionButton = function (mapBrowserEvent) {\n    var originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    return originalEvent.button == 0 &&\n        !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport var never = FALSE;\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport var pointerMove = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == 'pointermove';\n};\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport var singleClick = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport var doubleClick = function (mapBrowserEvent) {\n    return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport var noModifierKeys = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n};\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport var platformModifierKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return !originalEvent.altKey &&\n        (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey;\n};\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport var shiftKeyOnly = function (mapBrowserEvent) {\n    var originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n    return (!originalEvent.altKey &&\n        !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n        originalEvent.shiftKey);\n};\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport var targetNotEditable = function (mapBrowserEvent) {\n    var target = mapBrowserEvent.target;\n    var tagName = /** @type {Element} */ (target).tagName;\n    return (tagName !== 'INPUT' &&\n        tagName !== 'SELECT' &&\n        tagName !== 'TEXTAREA');\n};\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport var mouseOnly = function (mapBrowserEvent) {\n    var pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n    assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvent.pointerType == 'mouse';\n};\n/**\n * Return `true` if the event originates from a touchable device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a touchable device.\n * @api\n */\nexport var touchOnly = function (mapBrowserEvent) {\n    var pointerEvt = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n    assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvt.pointerType === 'touch';\n};\n/**\n * Return `true` if the event originates from a digital pen.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a digital pen.\n * @api\n */\nexport var penOnly = function (mapBrowserEvent) {\n    var pointerEvt = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n    assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n    return pointerEvt.pointerType === 'pen';\n};\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See http://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport var primaryAction = function (mapBrowserEvent) {\n    var pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n    assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n    return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n//# sourceMappingURL=condition.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Pointer\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction from './Interaction.js';\nimport { getValues } from '../obj.js';\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nvar PointerInteraction = /** @class */ (function (_super) {\n    __extends(PointerInteraction, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function PointerInteraction(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        if (options.handleDownEvent) {\n            _this.handleDownEvent = options.handleDownEvent;\n        }\n        if (options.handleDragEvent) {\n            _this.handleDragEvent = options.handleDragEvent;\n        }\n        if (options.handleMoveEvent) {\n            _this.handleMoveEvent = options.handleMoveEvent;\n        }\n        if (options.handleUpEvent) {\n            _this.handleUpEvent = options.handleUpEvent;\n        }\n        if (options.stopDown) {\n            _this.stopDown = options.stopDown;\n        }\n        /**\n         * @type {boolean}\n         * @protected\n         */\n        _this.handlingDownUpSequence = false;\n        /**\n         * @type {!Object<string, PointerEvent>}\n         * @private\n         */\n        _this.trackedPointers_ = {};\n        /**\n         * @type {Array<PointerEvent>}\n         * @protected\n         */\n        _this.targetPointers = [];\n        return _this;\n    }\n    /**\n     * Handle pointer down events.\n     * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDownEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * Handle pointer drag events.\n     * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleDragEvent = function (mapBrowserEvent) { };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n     * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n     * detected.\n     * @override\n     * @api\n     */\n    PointerInteraction.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!( /** @type {import(\"../MapBrowserPointerEvent.js\").default} */(mapBrowserEvent).pointerEvent)) {\n            return true;\n        }\n        var stopEvent = false;\n        this.updateTrackedPointers_(mapBrowserEvent);\n        if (this.handlingDownUpSequence) {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n                this.handleDragEvent(mapBrowserEvent);\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                var handledUp = this.handleUpEvent(mapBrowserEvent);\n                this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n            }\n        }\n        else {\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n                var handled = this.handleDownEvent(mapBrowserEvent);\n                if (handled) {\n                    mapBrowserEvent.preventDefault();\n                }\n                this.handlingDownUpSequence = handled;\n                stopEvent = this.stopDown(handled);\n            }\n            else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n                this.handleMoveEvent(mapBrowserEvent);\n            }\n        }\n        return !stopEvent;\n    };\n    /**\n     * Handle pointer move events.\n     * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n     * @protected\n     */\n    PointerInteraction.prototype.handleMoveEvent = function (mapBrowserEvent) { };\n    /**\n     * Handle pointer up events.\n     * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n     * @return {boolean} If the event was consumed.\n     * @protected\n     */\n    PointerInteraction.prototype.handleUpEvent = function (mapBrowserEvent) {\n        return false;\n    };\n    /**\n     * This function is used to determine if \"down\" events should be propagated\n     * to other interactions or should be stopped.\n     * @param {boolean} handled Was the event handled by the interaction?\n     * @return {boolean} Should the `down` event be stopped?\n     */\n    PointerInteraction.prototype.stopDown = function (handled) {\n        return handled;\n    };\n    /**\n     * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n     * @private\n     */\n    PointerInteraction.prototype.updateTrackedPointers_ = function (mapBrowserEvent) {\n        if (isPointerDraggingEvent(mapBrowserEvent)) {\n            var event_1 = mapBrowserEvent.pointerEvent;\n            var id = event_1.pointerId.toString();\n            if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n                delete this.trackedPointers_[id];\n            }\n            else if (mapBrowserEvent.type ==\n                MapBrowserEventType.POINTERDOWN) {\n                this.trackedPointers_[id] = event_1;\n            }\n            else if (id in this.trackedPointers_) {\n                // update only when there was a pointerdown event for this pointer\n                this.trackedPointers_[id] = event_1;\n            }\n            this.targetPointers = getValues(this.trackedPointers_);\n        }\n    };\n    return PointerInteraction;\n}(Interaction));\n/**\n * @param {Array<PointerEvent>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n    var length = pointerEvents.length;\n    var clientX = 0;\n    var clientY = 0;\n    for (var i = 0; i < length; i++) {\n        clientX += pointerEvents[i].clientX;\n        clientY += pointerEvents[i].clientY;\n    }\n    return [clientX / length, clientY / length];\n}\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n    var type = mapBrowserEvent.type;\n    return type === MapBrowserEventType.POINTERDOWN ||\n        type === MapBrowserEventType.POINTERDRAG ||\n        type === MapBrowserEventType.POINTERUP;\n}\nexport default PointerInteraction;\n//# sourceMappingURL=Pointer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragPan\n */\nimport { scale as scaleCoordinate, rotate as rotateCoordinate } from '../coordinate.js';\nimport { easeOut } from '../easing.js';\nimport { noModifierKeys, primaryAction } from '../events/condition.js';\nimport { FALSE } from '../functions.js';\nimport PointerInteraction, { centroid as centroidFromPointers } from './Pointer.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys} and {@link module:ol/events/condition~primaryAction}.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nvar DragPan = /** @class */ (function (_super) {\n    __extends(DragPan, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function DragPan(opt_options) {\n        var _this = _super.call(this, {\n            stopDown: FALSE\n        }) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../Kinetic.js\").default|undefined}\n         */\n        _this.kinetic_ = options.kinetic;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.lastCentroid = null;\n        /**\n         * @type {number}\n         */\n        _this.lastPointersCount_;\n        /**\n         * @type {boolean}\n         */\n        _this.panning_ = false;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : defaultCondition;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.noKinetic_ = false;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    DragPan.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!this.panning_) {\n            this.panning_ = true;\n            this.getMap().getView().beginInteraction();\n        }\n        var targetPointers = this.targetPointers;\n        var centroid = centroidFromPointers(targetPointers);\n        if (targetPointers.length == this.lastPointersCount_) {\n            if (this.kinetic_) {\n                this.kinetic_.update(centroid[0], centroid[1]);\n            }\n            if (this.lastCentroid) {\n                var delta = [\n                    this.lastCentroid[0] - centroid[0],\n                    centroid[1] - this.lastCentroid[1]\n                ];\n                var map = mapBrowserEvent.map;\n                var view = map.getView();\n                scaleCoordinate(delta, view.getResolution());\n                rotateCoordinate(delta, view.getRotation());\n                view.adjustCenterInternal(delta);\n            }\n        }\n        else if (this.kinetic_) {\n            // reset so we don't overestimate the kinetic energy after\n            // after one finger down, tiny drag, second finger down\n            this.kinetic_.begin();\n        }\n        this.lastCentroid = centroid;\n        this.lastPointersCount_ = targetPointers.length;\n    };\n    /**\n     * @inheritDoc\n     */\n    DragPan.prototype.handleUpEvent = function (mapBrowserEvent) {\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (this.targetPointers.length === 0) {\n            if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n                var distance = this.kinetic_.getDistance();\n                var angle = this.kinetic_.getAngle();\n                var center = view.getCenterInternal();\n                var centerpx = map.getPixelFromCoordinateInternal(center);\n                var dest = map.getCoordinateFromPixelInternal([\n                    centerpx[0] - distance * Math.cos(angle),\n                    centerpx[1] - distance * Math.sin(angle)\n                ]);\n                view.animateInternal({\n                    center: view.getConstrainedCenter(dest),\n                    duration: 500,\n                    easing: easeOut\n                });\n            }\n            if (this.panning_) {\n                this.panning_ = false;\n                view.endInteraction();\n            }\n            return false;\n        }\n        else {\n            if (this.kinetic_) {\n                // reset so we don't overestimate the kinetic energy after\n                // after one finger up, tiny drag, second finger up\n                this.kinetic_.begin();\n            }\n            this.lastCentroid = null;\n            return true;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    DragPan.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            this.lastCentroid = null;\n            // stop any current animation\n            if (view.getAnimating()) {\n                view.cancelAnimations();\n            }\n            if (this.kinetic_) {\n                this.kinetic_.begin();\n            }\n            // No kinetic as soon as more than one pointer on the screen is\n            // detected. This is to prevent nasty pans after pinch.\n            this.noKinetic_ = this.targetPointers.length > 1;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragPan;\n}(PointerInteraction));\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Browser event.\n * @return {boolean} Combined condition result.\n */\nfunction defaultCondition(mapBrowserEvent) {\n    return noModifierKeys(mapBrowserEvent) && primaryAction(mapBrowserEvent);\n}\nexport default DragPan;\n//# sourceMappingURL=DragPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragRotate\n */\nimport { disable } from '../rotationconstraint.js';\nimport { altShiftKeysOnly, mouseOnly, mouseActionButton } from '../events/condition.js';\nimport { FALSE } from '../functions.js';\nimport PointerInteraction from './Pointer.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nvar DragRotate = /** @class */ (function (_super) {\n    __extends(DragRotate, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function DragRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            stopDown: FALSE\n        }) || this;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    DragRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        var size = map.getSize();\n        var offset = mapBrowserEvent.pixel;\n        var theta = Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n        if (this.lastAngle_ !== undefined) {\n            var delta = theta - this.lastAngle_;\n            view.adjustRotationInternal(-delta);\n        }\n        this.lastAngle_ = theta;\n    };\n    /**\n     * @inheritDoc\n     */\n    DragRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return true;\n        }\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        view.endInteraction(this.duration_);\n        return false;\n    };\n    /**\n     * @inheritDoc\n     */\n    DragRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return false;\n        }\n        if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n            var map = mapBrowserEvent.map;\n            map.getView().beginInteraction();\n            this.lastAngle_ = undefined;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragRotate;\n}(PointerInteraction));\nexport default DragRotate;\n//# sourceMappingURL=DragRotate.js.map","/**\n * @module ol/render/Box\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\nvar RenderBox = /** @class */ (function (_super) {\n    __extends(RenderBox, _super);\n    /**\n     * @param {string} className CSS class name.\n     */\n    function RenderBox(className) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {import(\"../geom/Polygon.js\").default}\n         * @private\n         */\n        _this.geometry_ = null;\n        /**\n         * @type {HTMLDivElement}\n         * @private\n         */\n        _this.element_ = document.createElement('div');\n        _this.element_.style.position = 'absolute';\n        _this.element_.className = 'ol-box ' + className;\n        /**\n         * @private\n         * @type {import(\"../PluggableMap.js\").default}\n         */\n        _this.map_ = null;\n        /**\n         * @private\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../pixel.js\").Pixel}\n         */\n        _this.endPixel_ = null;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    RenderBox.prototype.disposeInternal = function () {\n        this.setMap(null);\n    };\n    /**\n     * @private\n     */\n    RenderBox.prototype.render_ = function () {\n        var startPixel = this.startPixel_;\n        var endPixel = this.endPixel_;\n        var px = 'px';\n        var style = this.element_.style;\n        style.left = Math.min(startPixel[0], endPixel[0]) + px;\n        style.top = Math.min(startPixel[1], endPixel[1]) + px;\n        style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n        style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n    };\n    /**\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    RenderBox.prototype.setMap = function (map) {\n        if (this.map_) {\n            this.map_.getOverlayContainer().removeChild(this.element_);\n            var style = this.element_.style;\n            style.left = style.top = style.width = style.height = 'inherit';\n        }\n        this.map_ = map;\n        if (this.map_) {\n            this.map_.getOverlayContainer().appendChild(this.element_);\n        }\n    };\n    /**\n     * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n     * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n     */\n    RenderBox.prototype.setPixels = function (startPixel, endPixel) {\n        this.startPixel_ = startPixel;\n        this.endPixel_ = endPixel;\n        this.createOrUpdateGeometry();\n        this.render_();\n    };\n    /**\n     * Creates or updates the cached geometry.\n     */\n    RenderBox.prototype.createOrUpdateGeometry = function () {\n        var startPixel = this.startPixel_;\n        var endPixel = this.endPixel_;\n        var pixels = [\n            startPixel,\n            [startPixel[0], endPixel[1]],\n            endPixel,\n            [endPixel[0], startPixel[1]]\n        ];\n        var coordinates = pixels.map(this.map_.getCoordinateFromPixelInternal, this.map_);\n        // close the polygon\n        coordinates[4] = coordinates[0].slice();\n        if (!this.geometry_) {\n            this.geometry_ = new Polygon([coordinates]);\n        }\n        else {\n            this.geometry_.setCoordinates([coordinates]);\n        }\n    };\n    /**\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     */\n    RenderBox.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    return RenderBox;\n}(Disposable));\nexport default RenderBox;\n//# sourceMappingURL=Box.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport { always, mouseOnly, mouseActionButton } from '../events/condition.js';\nimport { VOID } from '../functions.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)} [onBoxEnd] Code to execute just\n * before `boxend` is fired.\n */\n/**\n * @enum {string}\n */\nvar DragBoxEventType = {\n    /**\n     * Triggered upon drag box start.\n     * @event DragBoxEvent#boxstart\n     * @api\n     */\n    BOXSTART: 'boxstart',\n    /**\n     * Triggered on drag when box is active.\n     * @event DragBoxEvent#boxdrag\n     * @api\n     */\n    BOXDRAG: 'boxdrag',\n    /**\n     * Triggered upon drag box end.\n     * @event DragBoxEvent#boxend\n     * @api\n     */\n    BOXEND: 'boxend'\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nvar DragBoxEvent = /** @class */ (function (_super) {\n    __extends(DragBoxEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n     */\n    function DragBoxEvent(type, coordinate, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The coordinate of the drag event.\n         * @const\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @api\n         */\n        _this.coordinate = coordinate;\n        /**\n         * @const\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return DragBoxEvent;\n}(Event));\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @fires DragBoxEvent\n * @api\n */\nvar DragBox = /** @class */ (function (_super) {\n    __extends(DragBox, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function DragBox(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @type {import(\"../render/Box.js\").default}\n         * @private\n         */\n        _this.box_ = new RenderBox(options.className || 'ol-dragbox');\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n        /**\n         * Function to execute just before `onboxend` is fired\n         * @type {function(this:DragBox, import(\"../MapBrowserEvent.js\").default): void}\n         * @private\n         */\n        _this.onBoxEnd_ = options.onBoxEnd ? options.onBoxEnd : VOID;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         * @private\n         */\n        _this.startPixel_ = null;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : always;\n        /**\n         * @private\n         * @type {EndCondition}\n         */\n        _this.boxEndCondition_ = options.boxEndCondition ?\n            options.boxEndCondition : _this.defaultBoxEndCondition;\n        return _this;\n    }\n    /**\n     * The default condition for determining whether the boxend event\n     * should fire.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n     *     leading to the box end.\n     * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n     * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n     * @return {boolean} Whether or not the boxend condition should be fired.\n     */\n    DragBox.prototype.defaultBoxEndCondition = function (mapBrowserEvent, startPixel, endPixel) {\n        var width = endPixel[0] - startPixel[0];\n        var height = endPixel[1] - startPixel[1];\n        return width * width + height * height >= this.minArea_;\n    };\n    /**\n     * Returns geometry of last drawn box.\n     * @return {import(\"../geom/Polygon.js\").default} Geometry.\n     * @api\n     */\n    DragBox.prototype.getGeometry = function () {\n        return this.box_.getGeometry();\n    };\n    /**\n     * @inheritDoc\n     */\n    DragBox.prototype.handleDragEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return;\n        }\n        this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n        this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG, mapBrowserEvent.coordinate, mapBrowserEvent));\n    };\n    /**\n     * @inheritDoc\n     */\n    DragBox.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return true;\n        }\n        this.box_.setMap(null);\n        if (this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel)) {\n            this.onBoxEnd_(mapBrowserEvent);\n            this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND, mapBrowserEvent.coordinate, mapBrowserEvent));\n        }\n        return false;\n    };\n    /**\n     * @inheritDoc\n     */\n    DragBox.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (!mouseOnly(mapBrowserEvent)) {\n            return false;\n        }\n        if (mouseActionButton(mapBrowserEvent) &&\n            this.condition_(mapBrowserEvent)) {\n            this.startPixel_ = mapBrowserEvent.pixel;\n            this.box_.setMap(mapBrowserEvent.map);\n            this.box_.setPixels(this.startPixel_, this.startPixel_);\n            this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART, mapBrowserEvent.coordinate, mapBrowserEvent));\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return DragBox;\n}(PointerInteraction));\nexport default DragBox;\n//# sourceMappingURL=DragBox.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/DragZoom\n */\nimport { easeOut } from '../easing.js';\nimport { shiftKeyOnly } from '../events/condition.js';\nimport { createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter } from '../extent.js';\nimport DragBox from './DragBox.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the parent default\n * `boxEndCondition` function.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nvar DragZoom = /** @class */ (function (_super) {\n    __extends(DragZoom, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function DragZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var condition = options.condition ? options.condition : shiftKeyOnly;\n        _this = _super.call(this, {\n            condition: condition,\n            className: options.className || 'ol-dragzoom',\n            minArea: options.minArea,\n            onBoxEnd: onBoxEnd\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 200;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.out_ = options.out !== undefined ? options.out : false;\n        return _this;\n    }\n    return DragZoom;\n}(DragBox));\n/**\n * @this {DragZoom}\n */\nfunction onBoxEnd() {\n    var map = this.getMap();\n    var view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n    var size = /** @type {!import(\"../size.js\").Size} */ (map.getSize());\n    var extent = this.getGeometry().getExtent();\n    if (this.out_) {\n        var mapExtent = view.calculateExtentInternal(size);\n        var boxPixelExtent = createOrUpdateFromCoordinates([\n            map.getPixelFromCoordinateInternal(getBottomLeft(extent)),\n            map.getPixelFromCoordinateInternal(getTopRight(extent))\n        ]);\n        var factor = view.getResolutionForExtentInternal(boxPixelExtent, size);\n        scaleFromCenter(mapExtent, 1 / factor);\n        extent = mapExtent;\n    }\n    var resolution = view.getConstrainedResolution(view.getResolutionForExtentInternal(extent, size));\n    var center = view.getConstrainedCenter(getCenter(extent), resolution);\n    view.animateInternal({\n        resolution: resolution,\n        center: center,\n        duration: this.duration_,\n        easing: easeOut\n    });\n}\nexport default DragZoom;\n//# sourceMappingURL=DragZoom.js.map","/**\n * @module ol/events/KeyCode\n */\n/**\n * @enum {number}\n * @const\n */\nexport default {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40\n};\n//# sourceMappingURL=KeyCode.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardPan\n */\nimport { rotate as rotateCoordinate } from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport { noModifierKeys, targetNotEditable } from '../events/condition.js';\nimport Interaction, { pan } from './Interaction.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nvar KeyboardPan = /** @class */ (function (_super) {\n    __extends(KeyboardPan, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function KeyboardPan(opt_options) {\n        var _this = _super.call(this, {\n            handleEvent: handleEvent\n        }) || this;\n        var options = opt_options || {};\n        /**\n         * @private\n         * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n         * @return {boolean} Combined condition result.\n         */\n        _this.defaultCondition_ = function (mapBrowserEvent) {\n            return noModifierKeys(mapBrowserEvent) &&\n                targetNotEditable(mapBrowserEvent);\n        };\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition !== undefined ?\n            options.condition : _this.defaultCondition_;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelDelta_ = options.pixelDelta !== undefined ?\n            options.pixelDelta : 128;\n        return _this;\n    }\n    return KeyboardPan;\n}(Interaction));\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n    var stopEvent = false;\n    if (mapBrowserEvent.type == EventType.KEYDOWN) {\n        var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n        var keyCode = keyEvent.keyCode;\n        if (this.condition_(mapBrowserEvent) &&\n            (keyCode == KeyCode.DOWN ||\n                keyCode == KeyCode.LEFT ||\n                keyCode == KeyCode.RIGHT ||\n                keyCode == KeyCode.UP)) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            var mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n            var deltaX = 0, deltaY = 0;\n            if (keyCode == KeyCode.DOWN) {\n                deltaY = -mapUnitsDelta;\n            }\n            else if (keyCode == KeyCode.LEFT) {\n                deltaX = -mapUnitsDelta;\n            }\n            else if (keyCode == KeyCode.RIGHT) {\n                deltaX = mapUnitsDelta;\n            }\n            else {\n                deltaY = mapUnitsDelta;\n            }\n            var delta = [deltaX, deltaY];\n            rotateCoordinate(delta, view.getRotation());\n            pan(view, delta, this.duration_);\n            mapBrowserEvent.preventDefault();\n            stopEvent = true;\n        }\n    }\n    return !stopEvent;\n}\nexport default KeyboardPan;\n//# sourceMappingURL=KeyboardPan.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport { targetNotEditable } from '../events/condition.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nvar KeyboardZoom = /** @class */ (function (_super) {\n    __extends(KeyboardZoom, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function KeyboardZoom(opt_options) {\n        var _this = _super.call(this, {\n            handleEvent: handleEvent\n        }) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : targetNotEditable;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.delta_ = options.delta ? options.delta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 100;\n        return _this;\n    }\n    return KeyboardZoom;\n}(Interaction));\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n    var stopEvent = false;\n    if (mapBrowserEvent.type == EventType.KEYDOWN ||\n        mapBrowserEvent.type == EventType.KEYPRESS) {\n        var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n        var charCode = keyEvent.charCode;\n        if (this.condition_(mapBrowserEvent) &&\n            (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n            var map = mapBrowserEvent.map;\n            var delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n            var view = map.getView();\n            zoomByDelta(view, delta, undefined, this.duration_);\n            mapBrowserEvent.preventDefault();\n            stopEvent = true;\n        }\n    }\n    return !stopEvent;\n}\nexport default KeyboardZoom;\n//# sourceMappingURL=KeyboardZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport { always } from '../events/condition.js';\nimport EventType from '../events/EventType.js';\nimport { DEVICE_PIXEL_RATIO, FIREFOX } from '../has.js';\nimport Interaction, { zoomByDelta } from './Interaction.js';\nimport { clamp } from '../math.js';\n/**\n * @enum {string}\n */\nexport var Mode = {\n    TRACKPAD: 'trackpad',\n    WHEEL: 'wheel'\n};\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nvar MouseWheelZoom = /** @class */ (function (_super) {\n    __extends(MouseWheelZoom, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function MouseWheelZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.totalDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastDelta_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : always;\n        /**\n         * @private\n         * @type {?import(\"../coordinate.js\").Coordinate}\n         */\n        _this.lastAnchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.startTime_ = undefined;\n        /**\n         * @private\n         * @type {?}\n         */\n        _this.timeoutId_;\n        /**\n         * @private\n         * @type {Mode|undefined}\n         */\n        _this.mode_ = undefined;\n        /**\n         * Trackpad events separated by this delay will be considered separate\n         * interactions.\n         * @type {number}\n         */\n        _this.trackpadEventGap_ = 400;\n        /**\n         * @type {?}\n         */\n        _this.trackpadTimeoutId_;\n        /**\n         * The number of delta values per zoom level\n         * @private\n         * @type {number}\n         */\n        _this.trackpadDeltaPerZoom_ = 300;\n        return _this;\n    }\n    /**\n     * @private\n     */\n    MouseWheelZoom.prototype.endInteraction_ = function () {\n        this.trackpadTimeoutId_ = undefined;\n        var view = this.getMap().getView();\n        view.endInteraction(undefined, Math.sign(this.lastDelta_), this.lastAnchor_);\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n     * zooms the map.\n     * @override\n     */\n    MouseWheelZoom.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var type = mapBrowserEvent.type;\n        if (type !== EventType.WHEEL) {\n            return true;\n        }\n        mapBrowserEvent.preventDefault();\n        var map = mapBrowserEvent.map;\n        var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n        if (this.useAnchor_) {\n            this.lastAnchor_ = mapBrowserEvent.coordinate;\n        }\n        // Delta normalisation inspired by\n        // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n        var delta;\n        if (mapBrowserEvent.type == EventType.WHEEL) {\n            delta = wheelEvent.deltaY;\n            if (FIREFOX &&\n                wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n                delta /= DEVICE_PIXEL_RATIO;\n            }\n            if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n                delta *= 40;\n            }\n        }\n        if (delta === 0) {\n            return false;\n        }\n        else {\n            this.lastDelta_ = delta;\n        }\n        var now = Date.now();\n        if (this.startTime_ === undefined) {\n            this.startTime_ = now;\n        }\n        if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n            this.mode_ = Math.abs(delta) < 4 ?\n                Mode.TRACKPAD :\n                Mode.WHEEL;\n        }\n        if (this.mode_ === Mode.TRACKPAD) {\n            var view = map.getView();\n            if (this.trackpadTimeoutId_) {\n                clearTimeout(this.trackpadTimeoutId_);\n            }\n            else {\n                view.beginInteraction();\n            }\n            this.trackpadTimeoutId_ = setTimeout(this.endInteraction_.bind(this), this.trackpadEventGap_);\n            view.adjustZoom(-delta / this.trackpadDeltaPerZoom_, this.lastAnchor_);\n            this.startTime_ = now;\n            return false;\n        }\n        this.totalDelta_ += delta;\n        var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n        clearTimeout(this.timeoutId_);\n        this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n        return false;\n    };\n    /**\n     * @private\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     */\n    MouseWheelZoom.prototype.handleWheelZoom_ = function (map) {\n        var view = map.getView();\n        if (view.getAnimating()) {\n            view.cancelAnimations();\n        }\n        var delta = clamp(this.totalDelta_, -this.maxDelta_, this.maxDelta_);\n        zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n        this.mode_ = undefined;\n        this.totalDelta_ = 0;\n        this.lastAnchor_ = null;\n        this.startTime_ = undefined;\n        this.timeoutId_ = undefined;\n    };\n    /**\n     * Enable or disable using the mouse's location as an anchor when zooming\n     * @param {boolean} useAnchor true to zoom to the mouse's location, false\n     * to zoom to the center of the map\n     * @api\n     */\n    MouseWheelZoom.prototype.setMouseAnchor = function (useAnchor) {\n        this.useAnchor_ = useAnchor;\n        if (!useAnchor) {\n            this.lastAnchor_ = null;\n        }\n    };\n    return MouseWheelZoom;\n}(Interaction));\nexport default MouseWheelZoom;\n//# sourceMappingURL=MouseWheelZoom.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchRotate\n */\nimport { FALSE } from '../functions.js';\nimport PointerInteraction, { centroid as centroidFromPointers } from './Pointer.js';\nimport { disable } from '../rotationconstraint.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchRotate = /** @class */ (function (_super) {\n    __extends(PinchRotate, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function PinchRotate(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastAngle_ = undefined;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.rotating_ = false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.rotationDelta_ = 0.0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 250;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    PinchRotate.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var rotationDelta = 0.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        // angle between touches\n        var angle = Math.atan2(touch1.clientY - touch0.clientY, touch1.clientX - touch0.clientX);\n        if (this.lastAngle_ !== undefined) {\n            var delta = angle - this.lastAngle_;\n            this.rotationDelta_ += delta;\n            if (!this.rotating_ &&\n                Math.abs(this.rotationDelta_) > this.threshold_) {\n                this.rotating_ = true;\n            }\n            rotationDelta = delta;\n        }\n        this.lastAngle_ = angle;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (view.getConstraints().rotation === disable) {\n            return;\n        }\n        // rotate anchor point.\n        // FIXME: should be the intersection point between the lines:\n        //     touch0,touch1 and previousTouch0,previousTouch1\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // rotate\n        if (this.rotating_) {\n            map.render();\n            view.adjustRotationInternal(rotationDelta, this.anchor_);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    PinchRotate.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            view.endInteraction(this.duration_);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    PinchRotate.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastAngle_ = undefined;\n            this.rotating_ = false;\n            this.rotationDelta_ = 0.0;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchRotate;\n}(PointerInteraction));\nexport default PinchRotate;\n//# sourceMappingURL=PinchRotate.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/PinchZoom\n */\nimport { FALSE } from '../functions.js';\nimport PointerInteraction, { centroid as centroidFromPointers } from './Pointer.js';\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchZoom = /** @class */ (function (_super) {\n    __extends(PinchZoom, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function PinchZoom(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 400;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.lastDistance_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.lastScaleDelta_ = 1;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    PinchZoom.prototype.handleDragEvent = function (mapBrowserEvent) {\n        var scaleDelta = 1.0;\n        var touch0 = this.targetPointers[0];\n        var touch1 = this.targetPointers[1];\n        var dx = touch0.clientX - touch1.clientX;\n        var dy = touch0.clientY - touch1.clientY;\n        // distance between touches\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        if (this.lastDistance_ !== undefined) {\n            scaleDelta = this.lastDistance_ / distance;\n        }\n        this.lastDistance_ = distance;\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        if (scaleDelta != 1.0) {\n            this.lastScaleDelta_ = scaleDelta;\n        }\n        // scale anchor point.\n        var viewportPosition = map.getViewport().getBoundingClientRect();\n        var centroid = centroidFromPointers(this.targetPointers);\n        centroid[0] -= viewportPosition.left;\n        centroid[1] -= viewportPosition.top;\n        this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n        // scale, bypass the resolution constraint\n        map.render();\n        view.adjustResolutionInternal(scaleDelta, this.anchor_);\n    };\n    /**\n     * @inheritDoc\n     */\n    PinchZoom.prototype.handleUpEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length < 2) {\n            var map = mapBrowserEvent.map;\n            var view = map.getView();\n            var direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n            view.endInteraction(this.duration_, direction);\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    PinchZoom.prototype.handleDownEvent = function (mapBrowserEvent) {\n        if (this.targetPointers.length >= 2) {\n            var map = mapBrowserEvent.map;\n            this.anchor_ = null;\n            this.lastDistance_ = undefined;\n            this.lastScaleDelta_ = 1;\n            if (!this.handlingDownUpSequence) {\n                map.getView().beginInteraction();\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    return PinchZoom;\n}(PointerInteraction));\nexport default PinchZoom;\n//# sourceMappingURL=PinchZoom.js.map","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nimport { focus } from './events/condition.js';\nexport { default as DoubleClickZoom } from './interaction/DoubleClickZoom.js';\nexport { default as DragAndDrop } from './interaction/DragAndDrop.js';\nexport { default as DragBox } from './interaction/DragBox.js';\nexport { default as DragPan } from './interaction/DragPan.js';\nexport { default as DragRotate } from './interaction/DragRotate.js';\nexport { default as DragRotateAndZoom } from './interaction/DragRotateAndZoom.js';\nexport { default as DragZoom } from './interaction/DragZoom.js';\nexport { default as Draw } from './interaction/Draw.js';\nexport { default as Extent } from './interaction/Extent.js';\nexport { default as Interaction } from './interaction/Interaction.js';\nexport { default as KeyboardPan } from './interaction/KeyboardPan.js';\nexport { default as KeyboardZoom } from './interaction/KeyboardZoom.js';\nexport { default as Modify } from './interaction/Modify.js';\nexport { default as MouseWheelZoom } from './interaction/MouseWheelZoom.js';\nexport { default as PinchRotate } from './interaction/PinchRotate.js';\nexport { default as PinchZoom } from './interaction/PinchZoom.js';\nexport { default as Pointer } from './interaction/Pointer.js';\nexport { default as Select } from './interaction/Select.js';\nexport { default as Snap } from './interaction/Snap.js';\nexport { default as Translate } from './interaction/Translate.js';\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or double click zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. Changing the order can\n * be of interest if the event propagation needs to be stopped at a point.\n * The default set of interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions=} opt_options Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n    var options = opt_options ? opt_options : {};\n    var interactions = new Collection();\n    var kinetic = new Kinetic(-0.005, 0.05, 100);\n    var altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n        options.altShiftDragRotate : true;\n    if (altShiftDragRotate) {\n        interactions.push(new DragRotate());\n    }\n    var doubleClickZoom = options.doubleClickZoom !== undefined ?\n        options.doubleClickZoom : true;\n    if (doubleClickZoom) {\n        interactions.push(new DoubleClickZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration\n        }));\n    }\n    var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n    if (dragPan) {\n        interactions.push(new DragPan({\n            condition: options.onFocusOnly ? focus : undefined,\n            kinetic: kinetic\n        }));\n    }\n    var pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n        true;\n    if (pinchRotate) {\n        interactions.push(new PinchRotate());\n    }\n    var pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n    if (pinchZoom) {\n        interactions.push(new PinchZoom({\n            duration: options.zoomDuration\n        }));\n    }\n    var keyboard = options.keyboard !== undefined ? options.keyboard : true;\n    if (keyboard) {\n        interactions.push(new KeyboardPan());\n        interactions.push(new KeyboardZoom({\n            delta: options.zoomDelta,\n            duration: options.zoomDuration\n        }));\n    }\n    var mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n        options.mouseWheelZoom : true;\n    if (mouseWheelZoom) {\n        interactions.push(new MouseWheelZoom({\n            condition: options.onFocusOnly ? focus : undefined,\n            duration: options.zoomDuration\n        }));\n    }\n    var shiftDragZoom = options.shiftDragZoom !== undefined ?\n        options.shiftDragZoom : true;\n    if (shiftDragZoom) {\n        interactions.push(new DragZoom({\n            duration: options.zoomDuration\n        }));\n    }\n    return interactions;\n}\n//# sourceMappingURL=interaction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiPolygon\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { linearRingss as linearRingssArea } from './flat/area.js';\nimport { linearRingss as linearRingssCenter } from './flat/center.js';\nimport { assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta } from './flat/closest.js';\nimport { linearRingssContainsXY } from './flat/contains.js';\nimport { deflateMultiCoordinatesArray } from './flat/deflate.js';\nimport { inflateMultiCoordinatesArray } from './flat/inflate.js';\nimport { getInteriorPointsOfMultiArray } from './flat/interiorpoint.js';\nimport { intersectsLinearRingMultiArray } from './flat/intersectsextent.js';\nimport { linearRingssAreOriented, orientLinearRingsArray } from './flat/orient.js';\nimport { quantizeMultiArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nvar MultiPolygon = /** @class */ (function (_super) {\n    __extends(MultiPolygon, _super);\n    /**\n     * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @param {Array<Array<number>>=} opt_endss Array of ends for internal use with flat coordinates.\n     */\n    function MultiPolygon(coordinates, opt_layout, opt_endss) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<Array<number>>}\n         * @private\n         */\n        _this.endss_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatInteriorPointsRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.flatInteriorPoints_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.orientedRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.orientedFlatCoordinates_ = null;\n        if (!opt_endss && !Array.isArray(coordinates[0])) {\n            var layout = _this.getLayout();\n            var polygons = /** @type {Array<Polygon>} */ (coordinates);\n            var flatCoordinates = [];\n            var endss = [];\n            for (var i = 0, ii = polygons.length; i < ii; ++i) {\n                var polygon = polygons[i];\n                if (i === 0) {\n                    layout = polygon.getLayout();\n                }\n                var offset = flatCoordinates.length;\n                var ends = polygon.getEnds();\n                for (var j = 0, jj = ends.length; j < jj; ++j) {\n                    ends[j] += offset;\n                }\n                extend(flatCoordinates, polygon.getFlatCoordinates());\n                endss.push(ends);\n            }\n            opt_layout = layout;\n            coordinates = flatCoordinates;\n            opt_endss = endss;\n        }\n        if (opt_layout !== undefined && opt_endss) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n            _this.endss_ = opt_endss;\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed polygon to this multipolygon.\n     * @param {Polygon} polygon Polygon.\n     * @api\n     */\n    MultiPolygon.prototype.appendPolygon = function (polygon) {\n        /** @type {Array<number>} */\n        var ends;\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = polygon.getFlatCoordinates().slice();\n            ends = polygon.getEnds().slice();\n            this.endss_.push();\n        }\n        else {\n            var offset = this.flatCoordinates.length;\n            extend(this.flatCoordinates, polygon.getFlatCoordinates());\n            ends = polygon.getEnds().slice();\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                ends[i] += offset;\n            }\n        }\n        this.endss_.push(ends);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiPolygon} Clone.\n     * @override\n     * @api\n     */\n    MultiPolygon.prototype.clone = function () {\n        var len = this.endss_.length;\n        var newEndss = new Array(len);\n        for (var i = 0; i < len; ++i) {\n            newEndss[i] = this.endss_[i].slice();\n        }\n        return new MultiPolygon(this.flatCoordinates.slice(), this.layout, newEndss);\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPolygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates, 0, this.endss_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPolygon.prototype.containsXY = function (x, y) {\n        return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n    };\n    /**\n     * Return the area of the multipolygon on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    MultiPolygon.prototype.getArea = function () {\n        return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n    };\n    /**\n     * Get the coordinate array for this geometry.  This array has the structure\n     * of a GeoJSON coordinate array for multi-polygons.\n     *\n     * @param {boolean=} opt_right Orient coordinates according to the right-hand\n     *     rule (counter-clockwise for exterior and clockwise for interior rings).\n     *     If `false`, coordinates will be oriented according to the left-hand rule\n     *     (clockwise for exterior and counter-clockwise for interior rings).\n     *     By default, coordinate orientation will depend on how the geometry was\n     *     constructed.\n     * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n     * @override\n     * @api\n     */\n    MultiPolygon.prototype.getCoordinates = function (opt_right) {\n        var flatCoordinates;\n        if (opt_right !== undefined) {\n            flatCoordinates = this.getOrientedFlatCoordinates().slice();\n            orientLinearRingsArray(flatCoordinates, 0, this.endss_, this.stride, opt_right);\n        }\n        else {\n            flatCoordinates = this.flatCoordinates;\n        }\n        return inflateMultiCoordinatesArray(flatCoordinates, 0, this.endss_, this.stride);\n    };\n    /**\n     * @return {Array<Array<number>>} Endss.\n     */\n    MultiPolygon.prototype.getEndss = function () {\n        return this.endss_;\n    };\n    /**\n     * @return {Array<number>} Flat interior points.\n     */\n    MultiPolygon.prototype.getFlatInteriorPoints = function () {\n        if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n            var flatCenters = linearRingssCenter(this.flatCoordinates, 0, this.endss_, this.stride);\n            this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, flatCenters);\n            this.flatInteriorPointsRevision_ = this.getRevision();\n        }\n        return this.flatInteriorPoints_;\n    };\n    /**\n     * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n     * @return {MultiPoint} Interior points as XYM coordinates, where M is\n     * the length of the horizontal intersection that the point belongs to.\n     * @api\n     */\n    MultiPolygon.prototype.getInteriorPoints = function () {\n        return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n    };\n    /**\n     * @return {Array<number>} Oriented flat coordinates.\n     */\n    MultiPolygon.prototype.getOrientedFlatCoordinates = function () {\n        if (this.orientedRevision_ != this.getRevision()) {\n            var flatCoordinates = this.flatCoordinates;\n            if (linearRingssAreOriented(flatCoordinates, 0, this.endss_, this.stride)) {\n                this.orientedFlatCoordinates_ = flatCoordinates;\n            }\n            else {\n                this.orientedFlatCoordinates_ = flatCoordinates.slice();\n                this.orientedFlatCoordinates_.length =\n                    orientLinearRingsArray(this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n            }\n            this.orientedRevision_ = this.getRevision();\n        }\n        return this.orientedFlatCoordinates_;\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPolygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEndss = [];\n        simplifiedFlatCoordinates.length = quantizeMultiArray(this.flatCoordinates, 0, this.endss_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEndss);\n        return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n    };\n    /**\n     * Return the polygon at the specified index.\n     * @param {number} index Index.\n     * @return {Polygon} Polygon.\n     * @api\n     */\n    MultiPolygon.prototype.getPolygon = function (index) {\n        if (index < 0 || this.endss_.length <= index) {\n            return null;\n        }\n        var offset;\n        if (index === 0) {\n            offset = 0;\n        }\n        else {\n            var prevEnds = this.endss_[index - 1];\n            offset = prevEnds[prevEnds.length - 1];\n        }\n        var ends = this.endss_[index].slice();\n        var end = ends[ends.length - 1];\n        if (offset !== 0) {\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                ends[i] -= offset;\n            }\n        }\n        return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n    };\n    /**\n     * Return the polygons of this multipolygon.\n     * @return {Array<Polygon>} Polygons.\n     * @api\n     */\n    MultiPolygon.prototype.getPolygons = function () {\n        var layout = this.layout;\n        var flatCoordinates = this.flatCoordinates;\n        var endss = this.endss_;\n        var polygons = [];\n        var offset = 0;\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n            var ends = endss[i].slice();\n            var end = ends[ends.length - 1];\n            if (offset !== 0) {\n                for (var j = 0, jj = ends.length; j < jj; ++j) {\n                    ends[j] -= offset;\n                }\n            }\n            var polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n            polygons.push(polygon);\n            offset = end;\n        }\n        return polygons;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPolygon.prototype.getType = function () {\n        return GeometryType.MULTI_POLYGON;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPolygon.prototype.intersectsExtent = function (extent) {\n        return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the multipolygon.\n     * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    MultiPolygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 3);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var endss = deflateMultiCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n        if (endss.length === 0) {\n            this.flatCoordinates.length = 0;\n        }\n        else {\n            var lastEnds = endss[endss.length - 1];\n            this.flatCoordinates.length = lastEnds.length === 0 ?\n                0 : lastEnds[lastEnds.length - 1];\n        }\n        this.changed();\n    };\n    return MultiPolygon;\n}(SimpleGeometry));\nexport default MultiPolygon;\n//# sourceMappingURL=MultiPolygon.js.map","/**\n * @module ol/geom/flat/center\n */\nimport { createEmpty, createOrUpdateFromFlatCoordinates } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n    var flatCenters = [];\n    var extent = createEmpty();\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n        flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n        offset = ends[ends.length - 1];\n    }\n    return flatCenters;\n}\n//# sourceMappingURL=center.js.map","/**\n * @module ol/MapEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered after a map frame is rendered.\n     * @event module:ol/MapEvent~MapEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered when the map starts moving.\n     * @event module:ol/MapEvent~MapEvent#movestart\n     * @api\n     */\n    MOVESTART: 'movestart',\n    /**\n     * Triggered after the map is moved.\n     * @event module:ol/MapEvent~MapEvent#moveend\n     * @api\n     */\n    MOVEEND: 'moveend'\n};\n//# sourceMappingURL=MapEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/reproj/Image\n */\nimport { ERROR_THRESHOLD } from './common.js';\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { getCenter, getIntersection, getHeight, getWidth } from '../extent.js';\nimport { calculateSourceResolution, render as renderReprojected } from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n/**\n * @typedef {function(import(\"../extent.js\").Extent, number, number) : import(\"../ImageBase.js\").default} FunctionType\n */\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nvar ReprojImage = /** @class */ (function (_super) {\n    __extends(ReprojImage, _super);\n    /**\n     * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection (of the data).\n     * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n     * @param {import(\"../extent.js\").Extent} targetExtent Target extent.\n     * @param {number} targetResolution Target resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {FunctionType} getImageFunction\n     *     Function returning source images (extent, resolution, pixelRatio).\n     */\n    function ReprojImage(sourceProj, targetProj, targetExtent, targetResolution, pixelRatio, getImageFunction) {\n        var _this = this;\n        var maxSourceExtent = sourceProj.getExtent();\n        var maxTargetExtent = targetProj.getExtent();\n        var limitedTargetExtent = maxTargetExtent ?\n            getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n        var targetCenter = getCenter(limitedTargetExtent);\n        var sourceResolution = calculateSourceResolution(sourceProj, targetProj, targetCenter, targetResolution);\n        var errorThresholdInPixels = ERROR_THRESHOLD;\n        var triangulation = new Triangulation(sourceProj, targetProj, limitedTargetExtent, maxSourceExtent, sourceResolution * errorThresholdInPixels);\n        var sourceExtent = triangulation.calculateSourceExtent();\n        var sourceImage = getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n        var state = sourceImage ? ImageState.IDLE : ImageState.EMPTY;\n        var sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n        _this = _super.call(this, targetExtent, targetResolution, sourcePixelRatio, state) || this;\n        /**\n         * @private\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        _this.targetProj_ = targetProj;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.maxSourceExtent_ = maxSourceExtent;\n        /**\n         * @private\n         * @type {!import(\"./Triangulation.js\").default}\n         */\n        _this.triangulation_ = triangulation;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.targetResolution_ = targetResolution;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.targetExtent_ = targetExtent;\n        /**\n         * @private\n         * @type {import(\"../ImageBase.js\").default}\n         */\n        _this.sourceImage_ = sourceImage;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.sourcePixelRatio_ = sourcePixelRatio;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceListenerKey_ = null;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    ReprojImage.prototype.disposeInternal = function () {\n        if (this.state == ImageState.LOADING) {\n            this.unlistenSource_();\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * @inheritDoc\n     */\n    ReprojImage.prototype.getImage = function () {\n        return this.canvas_;\n    };\n    /**\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    ReprojImage.prototype.getProjection = function () {\n        return this.targetProj_;\n    };\n    /**\n     * @private\n     */\n    ReprojImage.prototype.reproject_ = function () {\n        var sourceState = this.sourceImage_.getState();\n        if (sourceState == ImageState.LOADED) {\n            var width = getWidth(this.targetExtent_) / this.targetResolution_;\n            var height = getHeight(this.targetExtent_) / this.targetResolution_;\n            this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_, this.sourceImage_.getResolution(), this.maxSourceExtent_, this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n                    extent: this.sourceImage_.getExtent(),\n                    image: this.sourceImage_.getImage()\n                }], 0);\n        }\n        this.state = sourceState;\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     */\n    ReprojImage.prototype.load = function () {\n        if (this.state == ImageState.IDLE) {\n            this.state = ImageState.LOADING;\n            this.changed();\n            var sourceState = this.sourceImage_.getState();\n            if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n                this.reproject_();\n            }\n            else {\n                this.sourceListenerKey_ = listen(this.sourceImage_, EventType.CHANGE, function (e) {\n                    var sourceState = this.sourceImage_.getState();\n                    if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n                        this.unlistenSource_();\n                        this.reproject_();\n                    }\n                }, this);\n                this.sourceImage_.load();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    ReprojImage.prototype.unlistenSource_ = function () {\n        unlistenByKey(/** @type {!import(\"../events.js\").EventsKey} */ (this.sourceListenerKey_));\n        this.sourceListenerKey_ = null;\n    };\n    return ReprojImage;\n}(ImageBase));\nexport default ReprojImage;\n//# sourceMappingURL=Image.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/Image\n */\nimport { abstract } from '../util.js';\nimport { ENABLE_RASTER_REPROJECTION } from '../reproj/common.js';\nimport ImageState from '../ImageState.js';\nimport { linearFindNearest } from '../array.js';\nimport Event from '../events/Event.js';\nimport { equals } from '../extent.js';\nimport { equivalent } from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from './Source.js';\n/**\n * @enum {string}\n */\nvar ImageSourceEventType = {\n    /**\n     * Triggered when an image starts loading.\n     * @event module:ol/source/Image.ImageSourceEvent#imageloadstart\n     * @api\n     */\n    IMAGELOADSTART: 'imageloadstart',\n    /**\n     * Triggered when an image finishes loading.\n     * @event module:ol/source/Image.ImageSourceEvent#imageloadend\n     * @api\n     */\n    IMAGELOADEND: 'imageloadend',\n    /**\n     * Triggered if image loading results in an error.\n     * @event module:ol/source/Image.ImageSourceEvent#imageloaderror\n     * @api\n     */\n    IMAGELOADERROR: 'imageloaderror'\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nvar ImageSourceEvent = /** @class */ (function (_super) {\n    __extends(ImageSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Image.js\").default} image The image.\n     */\n    function ImageSourceEvent(type, image) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The image related to the event.\n         * @type {import(\"../Image.js\").default}\n         * @api\n         */\n        _this.image = image;\n        return _this;\n    }\n    return ImageSourceEvent;\n}(Event));\nexport { ImageSourceEvent };\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {Array<number>} [resolutions]\n * @property {import(\"./State.js\").default} [state]\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @abstract\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nvar ImageSource = /** @class */ (function (_super) {\n    __extends(ImageSource, _super);\n    /**\n     * @param {Options} options Single image source options.\n     */\n    function ImageSource(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            projection: options.projection,\n            state: options.state\n        }) || this;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.resolutions_ = options.resolutions !== undefined ?\n            options.resolutions : null;\n        /**\n         * @private\n         * @type {import(\"../reproj/Image.js\").default}\n         */\n        _this.reprojectedImage_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.reprojectedRevision_ = 0;\n        return _this;\n    }\n    /**\n     * @return {Array<number>} Resolutions.\n     * @override\n     */\n    ImageSource.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * @protected\n     * @param {number} resolution Resolution.\n     * @return {number} Resolution.\n     */\n    ImageSource.prototype.findNearestResolution = function (resolution) {\n        if (this.resolutions_) {\n            var idx = linearFindNearest(this.resolutions_, resolution, 0);\n            resolution = this.resolutions_[idx];\n        }\n        return resolution;\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../ImageBase.js\").default} Single image.\n     */\n    ImageSource.prototype.getImage = function (extent, resolution, pixelRatio, projection) {\n        var sourceProjection = this.getProjection();\n        if (!ENABLE_RASTER_REPROJECTION ||\n            !sourceProjection ||\n            !projection ||\n            equivalent(sourceProjection, projection)) {\n            if (sourceProjection) {\n                projection = sourceProjection;\n            }\n            return this.getImageInternal(extent, resolution, pixelRatio, projection);\n        }\n        else {\n            if (this.reprojectedImage_) {\n                if (this.reprojectedRevision_ == this.getRevision() &&\n                    equivalent(this.reprojectedImage_.getProjection(), projection) &&\n                    this.reprojectedImage_.getResolution() == resolution &&\n                    equals(this.reprojectedImage_.getExtent(), extent)) {\n                    return this.reprojectedImage_;\n                }\n                this.reprojectedImage_.dispose();\n                this.reprojectedImage_ = null;\n            }\n            this.reprojectedImage_ = new ReprojImage(sourceProjection, projection, extent, resolution, pixelRatio, function (extent, resolution, pixelRatio) {\n                return this.getImageInternal(extent, resolution, pixelRatio, sourceProjection);\n            }.bind(this));\n            this.reprojectedRevision_ = this.getRevision();\n            return this.reprojectedImage_;\n        }\n    };\n    /**\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../ImageBase.js\").default} Single image.\n     * @protected\n     */\n    ImageSource.prototype.getImageInternal = function (extent, resolution, pixelRatio, projection) {\n        return abstract();\n    };\n    /**\n     * Handle image change events.\n     * @param {import(\"../events/Event.js\").default} event Event.\n     * @protected\n     */\n    ImageSource.prototype.handleImageChange = function (event) {\n        var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n        switch (image.getState()) {\n            case ImageState.LOADING:\n                this.loading = true;\n                this.dispatchEvent(new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART, image));\n                break;\n            case ImageState.LOADED:\n                this.loading = false;\n                this.dispatchEvent(new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND, image));\n                break;\n            case ImageState.ERROR:\n                this.loading = false;\n                this.dispatchEvent(new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR, image));\n                break;\n            default:\n            // pass\n        }\n    };\n    return ImageSource;\n}(Source));\n/**\n * Default image load function for image sources that use import(\"../Image.js\").Image image\n * instances.\n * @param {import(\"../Image.js\").default} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n    /** @type {HTMLImageElement|HTMLVideoElement} */ (image.getImage()).src = src;\n}\nexport default ImageSource;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/geom/flat/reverse\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n    while (offset < end - stride) {\n        for (var i = 0; i < stride; ++i) {\n            var tmp = flatCoordinates[offset + i];\n            flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n            flatCoordinates[end - stride + i] = tmp;\n        }\n        offset += stride;\n        end -= stride;\n    }\n}\n//# sourceMappingURL=reverse.js.map","/**\n * @module ol/geom/flat/orient\n */\nimport { coordinates as reverseCoordinates } from './reverse.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n    // http://tinyurl.com/clockwise-method\n    // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n    var edge = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        edge += (x2 - x1) * (y2 + y1);\n        x1 = x2;\n        y1 = y2;\n    }\n    return edge > 0;\n}\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right) {\n    var right = opt_right !== undefined ? opt_right : false;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n        if (i === 0) {\n            if ((right && isClockwise) || (!right && !isClockwise)) {\n                return false;\n            }\n        }\n        else {\n            if ((right && !isClockwise) || (!right && isClockwise)) {\n                return false;\n            }\n        }\n        offset = end;\n    }\n    return true;\n}\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        if (!linearRingsAreOriented(flatCoordinates, offset, ends, stride, opt_right)) {\n            return false;\n        }\n        if (ends.length) {\n            offset = ends[ends.length - 1];\n        }\n    }\n    return true;\n}\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n    var right = opt_right !== undefined ? opt_right : false;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        var isClockwise = linearRingIsClockwise(flatCoordinates, offset, end, stride);\n        var reverse = i === 0 ?\n            (right && isClockwise) || (!right && !isClockwise) :\n            (right && !isClockwise) || (!right && isClockwise);\n        if (reverse) {\n            reverseCoordinates(flatCoordinates, offset, end, stride);\n        }\n        offset = end;\n    }\n    return offset;\n}\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        offset = orientLinearRings(flatCoordinates, offset, endss[i], stride, opt_right);\n    }\n    return offset;\n}\n//# sourceMappingURL=orient.js.map","/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Geometry\n */\nimport { abstract } from '../util.js';\nimport BaseObject from '../Object.js';\nimport { createEmpty, getHeight, returnOrUpdate } from '../extent.js';\nimport { transform2D } from './flat/transform.js';\nimport { get as getProjection, getTransform } from '../proj.js';\nimport Units from '../proj/Units.js';\nimport { create as createTransform, compose as composeTransform } from '../transform.js';\nimport { memoizeOne } from '../functions.js';\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nvar tmpTransform = createTransform();\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nvar Geometry = /** @class */ (function (_super) {\n    __extends(Geometry, _super);\n    function Geometry() {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.extent_ = createEmpty();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.extentRevision_ = -1;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.simplifiedGeometryRevision = 0;\n        /**\n         * Get a transformed and simplified version of the geometry.\n         * @abstract\n         * @param {number} revision The geometry revision.\n         * @param {number} squaredTolerance Squared tolerance.\n         * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n         * @return {Geometry} Simplified geometry.\n         */\n        _this.simplifyTransformedInternal = memoizeOne(function (revision, squaredTolerance, opt_transform) {\n            if (!opt_transform) {\n                return this.getSimplifiedGeometry(squaredTolerance);\n            }\n            var clone = this.clone();\n            clone.applyTransform(opt_transform);\n            return clone.getSimplifiedGeometry(squaredTolerance);\n        });\n        return _this;\n    }\n    /**\n     * Get a transformed and simplified version of the geometry.\n     * @abstract\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n     * @return {Geometry} Simplified geometry.\n     */\n    Geometry.prototype.simplifyTransformed = function (squaredTolerance, opt_transform) {\n        return this.simplifyTransformedInternal(this.getRevision(), squaredTolerance, opt_transform);\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @abstract\n     * @return {!Geometry} Clone.\n     */\n    Geometry.prototype.clone = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n     * @param {number} minSquaredDistance Minimum squared distance.\n     * @return {number} Minimum squared distance.\n     */\n    Geometry.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        return abstract();\n    };\n    /**\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @return {boolean} Contains (x, y).\n     */\n    Geometry.prototype.containsXY = function (x, y) {\n        var coord = this.getClosestPoint([x, y]);\n        return coord[0] === x && coord[1] === y;\n    };\n    /**\n     * Return the closest point of the geometry to the passed point as\n     * {@link module:ol/coordinate~Coordinate coordinate}.\n     * @param {import(\"../coordinate.js\").Coordinate} point Point.\n     * @param {import(\"../coordinate.js\").Coordinate=} opt_closestPoint Closest point.\n     * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n     * @api\n     */\n    Geometry.prototype.getClosestPoint = function (point, opt_closestPoint) {\n        var closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n        this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n        return closestPoint;\n    };\n    /**\n     * Returns true if this geometry includes the specified coordinate. If the\n     * coordinate is on the boundary of the geometry, returns false.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains coordinate.\n     * @api\n     */\n    Geometry.prototype.intersectsCoordinate = function (coordinate) {\n        return this.containsXY(coordinate[0], coordinate[1]);\n    };\n    /**\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @protected\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     */\n    Geometry.prototype.computeExtent = function (extent) {\n        return abstract();\n    };\n    /**\n     * Get the extent of the geometry.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n     * @return {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    Geometry.prototype.getExtent = function (opt_extent) {\n        if (this.extentRevision_ != this.getRevision()) {\n            this.extent_ = this.computeExtent(this.extent_);\n            this.extentRevision_ = this.getRevision();\n        }\n        return returnOrUpdate(this.extent_, opt_extent);\n    };\n    /**\n     * Rotate the geometry around a given coordinate. This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} angle Rotation angle in radians.\n     * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n     * @api\n     */\n    Geometry.prototype.rotate = function (angle, anchor) {\n        abstract();\n    };\n    /**\n     * Scale the geometry (with an optional origin).  This modifies the geometry\n     * coordinates in place.\n     * @abstract\n     * @param {number} sx The scaling factor in the x-direction.\n     * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n     *     sx).\n     * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor The scale origin (defaults to the center\n     *     of the geometry extent).\n     * @api\n     */\n    Geometry.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        abstract();\n    };\n    /**\n     * Create a simplified version of this geometry.  For linestrings, this uses\n     * the [Douglas Peucker](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)\n     * algorithm.  For polygons, a quantization-based\n     * simplification is used to preserve topology.\n     * @param {number} tolerance The tolerance distance for simplification.\n     * @return {Geometry} A new, simplified version of the original geometry.\n     * @api\n     */\n    Geometry.prototype.simplify = function (tolerance) {\n        return this.getSimplifiedGeometry(tolerance * tolerance);\n    };\n    /**\n     * Create a simplified version of this geometry using the Douglas Peucker\n     * algorithm.\n     * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n     * @abstract\n     * @param {number} squaredTolerance Squared tolerance.\n     * @return {Geometry} Simplified geometry.\n     */\n    Geometry.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        return abstract();\n    };\n    /**\n     * Get the type of this geometry.\n     * @abstract\n     * @return {import(\"./GeometryType.js\").default} Geometry type.\n     */\n    Geometry.prototype.getType = function () {\n        return abstract();\n    };\n    /**\n     * Apply a transform function to each coordinate of the geometry.\n     * The geometry is modified in place.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     * @abstract\n     * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n     */\n    Geometry.prototype.applyTransform = function (transformFn) {\n        abstract();\n    };\n    /**\n     * Test if the geometry and the passed extent intersect.\n     * @abstract\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {boolean} `true` if the geometry and the extent intersect.\n     */\n    Geometry.prototype.intersectsExtent = function (extent) {\n        return abstract();\n    };\n    /**\n     * Translate the geometry.  This modifies the geometry coordinates in place.  If\n     * instead you want a new geometry, first `clone()` this geometry.\n     * @abstract\n     * @param {number} deltaX Delta X.\n     * @param {number} deltaY Delta Y.\n     * @api\n     */\n    Geometry.prototype.translate = function (deltaX, deltaY) {\n        abstract();\n    };\n    /**\n     * Transform each coordinate of the geometry from one coordinate reference\n     * system to another. The geometry is modified in place.\n     * For example, a line will be transformed to a line and a circle to a circle.\n     * If you do not want the geometry modified in place, first `clone()` it and\n     * then use this function on the clone.\n     *\n     * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n     *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n     * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n     *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n     * @return {Geometry} This geometry.  Note that original geometry is\n     *     modified in place.\n     * @api\n     */\n    Geometry.prototype.transform = function (source, destination) {\n        /** @type {import(\"../proj/Projection.js\").default} */\n        var sourceProj = getProjection(source);\n        var transformFn = sourceProj.getUnits() == Units.TILE_PIXELS ?\n            function (inCoordinates, outCoordinates, stride) {\n                var pixelExtent = sourceProj.getExtent();\n                var projectedExtent = sourceProj.getWorldExtent();\n                var scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n                composeTransform(tmpTransform, projectedExtent[0], projectedExtent[3], scale, -scale, 0, 0, 0);\n                transform2D(inCoordinates, 0, inCoordinates.length, stride, tmpTransform, outCoordinates);\n                return getTransform(sourceProj, destination)(inCoordinates, outCoordinates, stride);\n            } :\n            getTransform(sourceProj, destination);\n        this.applyTransform(transformFn);\n        return this;\n    };\n    return Geometry;\n}(BaseObject));\nexport default Geometry;\n//# sourceMappingURL=Geometry.js.map","/**\n * @module ol/format/GeoJSON\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { assert } from '../asserts.js';\nimport Feature from '../Feature.js';\nimport { transformGeometryWithOptions } from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport { assign, isEmpty } from '../obj.js';\nimport { get as getProjection } from '../proj.js';\nimport GeometryType from '../geom/GeometryType.js';\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n  * @api\n */\nvar GeoJSON = /** @class */ (function (_super) {\n    __extends(GeoJSON, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function GeoJSON(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this) || this;\n        /**\n         * @inheritDoc\n         */\n        _this.dataProjection = getProjection(options.dataProjection ?\n            options.dataProjection : 'EPSG:4326');\n        if (options.featureProjection) {\n            _this.defaultFeatureProjection = getProjection(options.featureProjection);\n        }\n        /**\n         * Name of the geometry attribute for features.\n         * @type {string|undefined}\n         * @private\n         */\n        _this.geometryName_ = options.geometryName;\n        /**\n         * Look for the geometry name in the feature GeoJSON\n         * @type {boolean|undefined}\n         * @private\n         */\n        _this.extractGeometryName_ = options.extractGeometryName;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    GeoJSON.prototype.readFeatureFromObject = function (object, opt_options) {\n        /**\n         * @type {GeoJSONFeature}\n         */\n        var geoJSONFeature = null;\n        if (object['type'] === 'Feature') {\n            geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n        }\n        else {\n            geoJSONFeature = {\n                'type': 'Feature',\n                'geometry': /** @type {GeoJSONGeometry} */ (object),\n                'properties': null\n            };\n        }\n        var geometry = readGeometry(geoJSONFeature['geometry'], opt_options);\n        var feature = new Feature();\n        if (this.geometryName_) {\n            feature.setGeometryName(this.geometryName_);\n        }\n        else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n            feature.setGeometryName(geoJSONFeature['geometry_name']);\n        }\n        feature.setGeometry(geometry);\n        if ('id' in geoJSONFeature) {\n            feature.setId(geoJSONFeature['id']);\n        }\n        if (geoJSONFeature['properties']) {\n            feature.setProperties(geoJSONFeature['properties'], true);\n        }\n        return feature;\n    };\n    /**\n     * @inheritDoc\n     */\n    GeoJSON.prototype.readFeaturesFromObject = function (object, opt_options) {\n        var geoJSONObject = /** @type {GeoJSONObject} */ (object);\n        /** @type {Array<import(\"../Feature.js\").default>} */\n        var features = null;\n        if (geoJSONObject['type'] === 'FeatureCollection') {\n            var geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (object);\n            features = [];\n            var geoJSONFeatures = geoJSONFeatureCollection['features'];\n            for (var i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n                features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n            }\n        }\n        else {\n            features = [this.readFeatureFromObject(object, opt_options)];\n        }\n        return features;\n    };\n    /**\n     * @inheritDoc\n     */\n    GeoJSON.prototype.readGeometryFromObject = function (object, opt_options) {\n        return readGeometry(/** @type {GeoJSONGeometry} */ (object), opt_options);\n    };\n    /**\n     * @inheritDoc\n     */\n    GeoJSON.prototype.readProjectionFromObject = function (object) {\n        var crs = object['crs'];\n        var projection;\n        if (crs) {\n            if (crs['type'] == 'name') {\n                projection = getProjection(crs['properties']['name']);\n            }\n            else {\n                assert(false, 36); // Unknown SRS type\n            }\n        }\n        else {\n            projection = this.dataProjection;\n        }\n        return (\n        /** @type {import(\"../proj/Projection.js\").default} */ (projection));\n    };\n    /**\n     * Encode a feature as a GeoJSON Feature object.\n     *\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {GeoJSONFeature} Object.\n     * @override\n     * @api\n     */\n    GeoJSON.prototype.writeFeatureObject = function (feature, opt_options) {\n        opt_options = this.adaptOptions(opt_options);\n        /** @type {GeoJSONFeature} */\n        var object = {\n            'type': 'Feature',\n            geometry: null,\n            properties: null\n        };\n        var id = feature.getId();\n        if (id !== undefined) {\n            object.id = id;\n        }\n        var geometry = feature.getGeometry();\n        if (geometry) {\n            object.geometry = writeGeometry(geometry, opt_options);\n        }\n        var properties = feature.getProperties();\n        delete properties[feature.getGeometryName()];\n        if (!isEmpty(properties)) {\n            object.properties = properties;\n        }\n        return object;\n    };\n    /**\n     * Encode an array of features as a GeoJSON object.\n     *\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {GeoJSONFeatureCollection} GeoJSON Object.\n     * @override\n     * @api\n     */\n    GeoJSON.prototype.writeFeaturesObject = function (features, opt_options) {\n        opt_options = this.adaptOptions(opt_options);\n        var objects = [];\n        for (var i = 0, ii = features.length; i < ii; ++i) {\n            objects.push(this.writeFeatureObject(features[i], opt_options));\n        }\n        return {\n            type: 'FeatureCollection',\n            features: objects\n        };\n    };\n    /**\n     * Encode a geometry as a GeoJSON object.\n     *\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n     * @override\n     * @api\n     */\n    GeoJSON.prototype.writeGeometryObject = function (geometry, opt_options) {\n        return writeGeometry(geometry, this.adaptOptions(opt_options));\n    };\n    return GeoJSON;\n}(JSONFeature));\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n    if (!object) {\n        return null;\n    }\n    /**\n     * @type {import(\"../geom/Geometry.js\").default}\n     */\n    var geometry;\n    switch (object['type']) {\n        case GeometryType.POINT: {\n            geometry = readPointGeometry(/** @type {GeoJSONPoint} */ (object));\n            break;\n        }\n        case GeometryType.LINE_STRING: {\n            geometry = readLineStringGeometry(/** @type {GeoJSONLineString} */ (object));\n            break;\n        }\n        case GeometryType.POLYGON: {\n            geometry = readPolygonGeometry(/** @type {GeoJSONPolygon} */ (object));\n            break;\n        }\n        case GeometryType.MULTI_POINT: {\n            geometry = readMultiPointGeometry(/** @type {GeoJSONMultiPoint} */ (object));\n            break;\n        }\n        case GeometryType.MULTI_LINE_STRING: {\n            geometry = readMultiLineStringGeometry(/** @type {GeoJSONMultiLineString} */ (object));\n            break;\n        }\n        case GeometryType.MULTI_POLYGON: {\n            geometry = readMultiPolygonGeometry(/** @type {GeoJSONMultiPolygon} */ (object));\n            break;\n        }\n        case GeometryType.GEOMETRY_COLLECTION: {\n            geometry = readGeometryCollectionGeometry(/** @type {GeoJSONGeometryCollection} */ (object));\n            break;\n        }\n        default: {\n            throw new Error('Unsupported GeoJSON type: ' + object.type);\n        }\n    }\n    return transformGeometryWithOptions(geometry, false, opt_options);\n}\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {GeometryCollection} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, opt_options) {\n    var geometries = object['geometries'].map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     */\n    function (geometry) {\n        return readGeometry(geometry, opt_options);\n    });\n    return new GeometryCollection(geometries);\n}\n/**\n * @param {GeoJSONPoint} object Object.\n * @return {Point} Point.\n */\nfunction readPointGeometry(object) {\n    return new Point(object['coordinates']);\n}\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {LineString} LineString.\n */\nfunction readLineStringGeometry(object) {\n    return new LineString(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {MultiLineString} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n    return new MultiLineString(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {MultiPoint} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n    return new MultiPoint(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {MultiPolygon} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n    return new MultiPolygon(object['coordinates']);\n}\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {Polygon} Polygon.\n */\nfunction readPolygonGeometry(object) {\n    return new Polygon(object['coordinates']);\n}\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n    geometry = transformGeometryWithOptions(geometry, true, opt_options);\n    var type = geometry.getType();\n    /** @type {GeoJSONGeometry} */\n    var geoJSON;\n    switch (type) {\n        case GeometryType.POINT: {\n            geoJSON = writePointGeometry(/** @type {Point} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.LINE_STRING: {\n            geoJSON = writeLineStringGeometry(/** @type {LineString} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.POLYGON: {\n            geoJSON = writePolygonGeometry(/** @type {Polygon} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.MULTI_POINT: {\n            geoJSON = writeMultiPointGeometry(/** @type {MultiPoint} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.MULTI_LINE_STRING: {\n            geoJSON = writeMultiLineStringGeometry(/** @type {MultiLineString} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.MULTI_POLYGON: {\n            geoJSON = writeMultiPolygonGeometry(/** @type {MultiPolygon} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.GEOMETRY_COLLECTION: {\n            geoJSON = writeGeometryCollectionGeometry(/** @type {GeometryCollection} */ (geometry), opt_options);\n            break;\n        }\n        case GeometryType.CIRCLE: {\n            geoJSON = {\n                type: 'GeometryCollection',\n                geometries: []\n            };\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return geoJSON;\n}\n/**\n * @param {GeometryCollection} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n    var geometries = geometry.getGeometriesArray().map(function (geometry) {\n        var options = assign({}, opt_options);\n        delete options.featureProjection;\n        return writeGeometry(geometry, options);\n    });\n    return {\n        type: 'GeometryCollection',\n        geometries: geometries\n    };\n}\n/**\n * @param {LineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n    return {\n        type: 'LineString',\n        coordinates: geometry.getCoordinates()\n    };\n}\n/**\n * @param {MultiLineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n    return {\n        type: 'MultiLineString',\n        coordinates: geometry.getCoordinates()\n    };\n}\n/**\n * @param {MultiPoint} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n    return {\n        type: 'MultiPoint',\n        coordinates: geometry.getCoordinates()\n    };\n}\n/**\n * @param {MultiPolygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n    var right;\n    if (opt_options) {\n        right = opt_options.rightHanded;\n    }\n    return {\n        type: 'MultiPolygon',\n        coordinates: geometry.getCoordinates(right)\n    };\n}\n/**\n * @param {Point} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n    return {\n        type: 'Point',\n        coordinates: geometry.getCoordinates()\n    };\n}\n/**\n * @param {Polygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n    var right;\n    if (opt_options) {\n        right = opt_options.rightHanded;\n    }\n    return {\n        type: 'Polygon',\n        coordinates: geometry.getCoordinates(right)\n    };\n}\nexport default GeoJSON;\n//# sourceMappingURL=GeoJSON.js.map","/**\n * @module ol/extent/Corner\n */\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_RIGHT: 'bottom-right',\n    TOP_LEFT: 'top-left',\n    TOP_RIGHT: 'top-right'\n};\n//# sourceMappingURL=Corner.js.map","/**\n * @module ol/TileRange\n */\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nvar TileRange = /** @class */ (function () {\n    /**\n     * @param {number} minX Minimum X.\n     * @param {number} maxX Maximum X.\n     * @param {number} minY Minimum Y.\n     * @param {number} maxY Maximum Y.\n     */\n    function TileRange(minX, maxX, minY, maxY) {\n        /**\n         * @type {number}\n         */\n        this.minX = minX;\n        /**\n         * @type {number}\n         */\n        this.maxX = maxX;\n        /**\n         * @type {number}\n         */\n        this.minY = minY;\n        /**\n         * @type {number}\n         */\n        this.maxY = maxY;\n    }\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {boolean} Contains tile coordinate.\n     */\n    TileRange.prototype.contains = function (tileCoord) {\n        return this.containsXY(tileCoord[1], tileCoord[2]);\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Contains.\n     */\n    TileRange.prototype.containsTileRange = function (tileRange) {\n        return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n            this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n    };\n    /**\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @return {boolean} Contains coordinate.\n     */\n    TileRange.prototype.containsXY = function (x, y) {\n        return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Equals.\n     */\n    TileRange.prototype.equals = function (tileRange) {\n        return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n            this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     */\n    TileRange.prototype.extend = function (tileRange) {\n        if (tileRange.minX < this.minX) {\n            this.minX = tileRange.minX;\n        }\n        if (tileRange.maxX > this.maxX) {\n            this.maxX = tileRange.maxX;\n        }\n        if (tileRange.minY < this.minY) {\n            this.minY = tileRange.minY;\n        }\n        if (tileRange.maxY > this.maxY) {\n            this.maxY = tileRange.maxY;\n        }\n    };\n    /**\n     * @return {number} Height.\n     */\n    TileRange.prototype.getHeight = function () {\n        return this.maxY - this.minY + 1;\n    };\n    /**\n     * @return {import(\"./size.js\").Size} Size.\n     */\n    TileRange.prototype.getSize = function () {\n        return [this.getWidth(), this.getHeight()];\n    };\n    /**\n     * @return {number} Width.\n     */\n    TileRange.prototype.getWidth = function () {\n        return this.maxX - this.minX + 1;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Intersects.\n     */\n    TileRange.prototype.intersects = function (tileRange) {\n        return this.minX <= tileRange.maxX &&\n            this.maxX >= tileRange.minX &&\n            this.minY <= tileRange.maxY &&\n            this.maxY >= tileRange.minY;\n    };\n    return TileRange;\n}());\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n    if (tileRange !== undefined) {\n        tileRange.minX = minX;\n        tileRange.maxX = maxX;\n        tileRange.minY = minY;\n        tileRange.maxY = maxY;\n        return tileRange;\n    }\n    else {\n        return new TileRange(minX, maxX, minY, maxY);\n    }\n}\nexport default TileRange;\n//# sourceMappingURL=TileRange.js.map","/**\n * @module ol/geom/flat/straightchunk\n */\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n    var chunkStart = offset;\n    var chunkEnd = offset;\n    var chunkM = 0;\n    var m = 0;\n    var start = offset;\n    var acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n    for (i = offset; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        if (x1 !== undefined) {\n            x23 = x2 - x1;\n            y23 = y2 - y1;\n            m23 = Math.sqrt(x23 * x23 + y23 * y23);\n            if (x12 !== undefined) {\n                m += m12;\n                acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n                if (acos > maxAngle) {\n                    if (m > chunkM) {\n                        chunkM = m;\n                        chunkStart = start;\n                        chunkEnd = i;\n                    }\n                    m = 0;\n                    start = i - stride;\n                }\n            }\n            m12 = m23;\n            x12 = x23;\n            y12 = y23;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    m += m23;\n    return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n//# sourceMappingURL=straightchunk.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/TextBuilder\n */\nimport { getUid } from '../../util.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { intersects } from '../../extent.js';\nimport { matchingChunk } from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport { labelCache, defaultTextAlign, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline } from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n/**\n * @const\n * @enum {number}\n */\nexport var TEXT_ALIGN = {\n    'left': 0,\n    'end': 0,\n    'center': 0.5,\n    'right': 1,\n    'start': 1,\n    'top': 0,\n    'middle': 0.5,\n    'hanging': 0.2,\n    'alphabetic': 0.8,\n    'ideographic': 0.8,\n    'bottom': 1\n};\nvar CanvasTextBuilder = /** @class */ (function (_super) {\n    __extends(CanvasTextBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasTextBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").DeclutterGroups}\n         */\n        _this.declutterGroups_;\n        /**\n         * @private\n         * @type {Array<HTMLCanvasElement>}\n         */\n        _this.labels_ = null;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.text_ = '';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetY_ = 0;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.textRotateWithView_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textRotation_ = 0;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.textFillState_ = null;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").FillState>}\n         */\n        _this.fillStates = {};\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.textStrokeState_ = null;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n         */\n        _this.strokeStates = {};\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").TextState}\n         */\n        _this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").TextState>}\n         */\n        _this.textStates = {};\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.textKey_ = '';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.fillKey_ = '';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.strokeKey_ = '';\n        labelCache.prune();\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    CanvasTextBuilder.prototype.finish = function () {\n        var instructions = _super.prototype.finish.call(this);\n        instructions.textStates = this.textStates;\n        instructions.fillStates = this.fillStates;\n        instructions.strokeStates = this.strokeStates;\n        return instructions;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTextBuilder.prototype.drawText = function (geometry, feature) {\n        var fillState = this.textFillState_;\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n            return;\n        }\n        var begin = this.coordinates.length;\n        var geometryType = geometry.getType();\n        var flatCoordinates = null;\n        var end = 2;\n        var stride = 2;\n        var i, ii;\n        if (textState.placement === TextPlacement.LINE) {\n            if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n                return;\n            }\n            var ends = void 0;\n            flatCoordinates = geometry.getFlatCoordinates();\n            stride = geometry.getStride();\n            if (geometryType == GeometryType.LINE_STRING) {\n                ends = [flatCoordinates.length];\n            }\n            else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n                ends = geometry.getEnds();\n            }\n            else if (geometryType == GeometryType.POLYGON) {\n                ends = geometry.getEnds().slice(0, 1);\n            }\n            else if (geometryType == GeometryType.MULTI_POLYGON) {\n                var endss = geometry.getEndss();\n                ends = [];\n                for (i = 0, ii = endss.length; i < ii; ++i) {\n                    ends.push(endss[i][0]);\n                }\n            }\n            this.beginGeometry(geometry, feature);\n            var textAlign = textState.textAlign;\n            var flatOffset = 0;\n            var flatEnd = void 0;\n            for (var o = 0, oo = ends.length; o < oo; ++o) {\n                if (textAlign == undefined) {\n                    var range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n                    flatOffset = range[0];\n                    flatEnd = range[1];\n                }\n                else {\n                    flatEnd = ends[o];\n                }\n                for (i = flatOffset; i < flatEnd; i += stride) {\n                    this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n                }\n                end = this.coordinates.length;\n                flatOffset = ends[o];\n                var declutterGroup = this.declutterGroups_ ?\n                    (o === 0 ? this.declutterGroups_[0] : [].concat(this.declutterGroups_[0])) :\n                    null;\n                this.drawChars_(begin, end, declutterGroup);\n                begin = end;\n            }\n            this.endGeometry(feature);\n        }\n        else {\n            var geometryWidths = null;\n            if (!textState.overflow) {\n                geometryWidths = [];\n            }\n            switch (geometryType) {\n                case GeometryType.POINT:\n                case GeometryType.MULTI_POINT:\n                    flatCoordinates = geometry.getFlatCoordinates();\n                    end = flatCoordinates.length;\n                    break;\n                case GeometryType.LINE_STRING:\n                    flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n                    break;\n                case GeometryType.CIRCLE:\n                    flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n                    break;\n                case GeometryType.MULTI_LINE_STRING:\n                    flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n                    end = flatCoordinates.length;\n                    break;\n                case GeometryType.POLYGON:\n                    flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n                    if (!textState.overflow) {\n                        geometryWidths.push(flatCoordinates[2] / this.resolution);\n                    }\n                    stride = 3;\n                    break;\n                case GeometryType.MULTI_POLYGON:\n                    var interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n                    flatCoordinates = [];\n                    for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n                        if (!textState.overflow) {\n                            geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n                        }\n                        flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n                    }\n                    end = flatCoordinates.length;\n                    if (end == 0) {\n                        return;\n                    }\n                    break;\n                default:\n            }\n            end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n            this.saveTextStates_();\n            if (textState.backgroundFill || textState.backgroundStroke) {\n                this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n                if (textState.backgroundFill) {\n                    this.updateFillStyle(this.state, this.createFill);\n                    this.hitDetectionInstructions.push(this.createFill(this.state));\n                }\n                if (textState.backgroundStroke) {\n                    this.updateStrokeStyle(this.state, this.applyStroke);\n                    this.hitDetectionInstructions.push(this.createStroke(this.state));\n                }\n            }\n            this.beginGeometry(geometry, feature);\n            // The image is unknown at this stage so we pass null; it will be computed at render time.\n            // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n            // render time.\n            var pixelRatio_1 = this.pixelRatio;\n            this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n                null, NaN, NaN, this.declutterGroups_, NaN, 1, 0, 0,\n                this.textRotateWithView_, this.textRotation_, 1, NaN,\n                textState.padding == defaultPadding ?\n                    defaultPadding : textState.padding.map(function (p) {\n                    return p * pixelRatio_1;\n                }),\n                !!textState.backgroundFill, !!textState.backgroundStroke,\n                this.text_, this.textKey_, this.strokeKey_, this.fillKey_,\n                this.textOffsetX_, this.textOffsetY_, geometryWidths\n            ]);\n            this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n                null, NaN, NaN, this.declutterGroups_, NaN, 1, 0, 0,\n                this.textRotateWithView_, this.textRotation_, 1 / this.pixelRatio, NaN,\n                textState.padding,\n                !!textState.backgroundFill, !!textState.backgroundStroke,\n                this.text_, this.textKey_, this.strokeKey_, this.fillKey_,\n                this.textOffsetX_, this.textOffsetY_, geometryWidths\n            ]);\n            this.endGeometry(feature);\n        }\n    };\n    /**\n     * @private\n     */\n    CanvasTextBuilder.prototype.saveTextStates_ = function () {\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        var fillState = this.textFillState_;\n        var strokeKey = this.strokeKey_;\n        if (strokeState) {\n            if (!(strokeKey in this.strokeStates)) {\n                this.strokeStates[strokeKey] = {\n                    strokeStyle: strokeState.strokeStyle,\n                    lineCap: strokeState.lineCap,\n                    lineDashOffset: strokeState.lineDashOffset,\n                    lineWidth: strokeState.lineWidth,\n                    lineJoin: strokeState.lineJoin,\n                    miterLimit: strokeState.miterLimit,\n                    lineDash: strokeState.lineDash\n                };\n            }\n        }\n        var textKey = this.textKey_;\n        if (!(textKey in this.textStates)) {\n            this.textStates[textKey] = {\n                font: textState.font,\n                textAlign: textState.textAlign || defaultTextAlign,\n                textBaseline: textState.textBaseline || defaultTextBaseline,\n                scale: textState.scale\n            };\n        }\n        var fillKey = this.fillKey_;\n        if (fillState) {\n            if (!(fillKey in this.fillStates)) {\n                this.fillStates[fillKey] = {\n                    fillStyle: fillState.fillStyle\n                };\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {number} begin Begin.\n     * @param {number} end End.\n     * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n     */\n    CanvasTextBuilder.prototype.drawChars_ = function (begin, end, declutterGroup) {\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        var strokeKey = this.strokeKey_;\n        var textKey = this.textKey_;\n        var fillKey = this.fillKey_;\n        this.saveTextStates_();\n        var pixelRatio = this.pixelRatio;\n        var baseline = TEXT_ALIGN[textState.textBaseline];\n        var offsetY = this.textOffsetY_ * pixelRatio;\n        var text = this.text_;\n        var textScale = textState.scale;\n        var strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n        this.instructions.push([CanvasInstruction.DRAW_CHARS,\n            begin, end, baseline, declutterGroup,\n            textState.overflow, fillKey, textState.maxAngle,\n            pixelRatio,\n            offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n        ]);\n        this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n            begin, end, baseline, declutterGroup,\n            textState.overflow, fillKey, textState.maxAngle,\n            1,\n            offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n        ]);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTextBuilder.prototype.setTextStyle = function (textStyle, declutterGroups) {\n        var textState, fillState, strokeState;\n        if (!textStyle) {\n            this.text_ = '';\n        }\n        else {\n            this.declutterGroups_ = /** @type {import(\"../canvas.js\").DeclutterGroups} */ (declutterGroups);\n            var textFillStyle = textStyle.getFill();\n            if (!textFillStyle) {\n                fillState = this.textFillState_ = null;\n            }\n            else {\n                fillState = this.textFillState_;\n                if (!fillState) {\n                    fillState = this.textFillState_ = /** @type {import(\"../canvas.js\").FillState} */ ({});\n                }\n                fillState.fillStyle = asColorLike(textFillStyle.getColor() || defaultFillStyle);\n            }\n            var textStrokeStyle = textStyle.getStroke();\n            if (!textStrokeStyle) {\n                strokeState = this.textStrokeState_ = null;\n            }\n            else {\n                strokeState = this.textStrokeState_;\n                if (!strokeState) {\n                    strokeState = this.textStrokeState_ = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n                }\n                var lineDash = textStrokeStyle.getLineDash();\n                var lineDashOffset = textStrokeStyle.getLineDashOffset();\n                var lineWidth = textStrokeStyle.getWidth();\n                var miterLimit = textStrokeStyle.getMiterLimit();\n                strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n                strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n                strokeState.lineDashOffset =\n                    lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n                strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n                strokeState.lineWidth =\n                    lineWidth === undefined ? defaultLineWidth : lineWidth;\n                strokeState.miterLimit =\n                    miterLimit === undefined ? defaultMiterLimit : miterLimit;\n                strokeState.strokeStyle = asColorLike(textStrokeStyle.getColor() || defaultStrokeStyle);\n            }\n            textState = this.textState_;\n            var font = textStyle.getFont() || defaultFont;\n            checkFont(font);\n            var textScale = textStyle.getScale();\n            textState.overflow = textStyle.getOverflow();\n            textState.font = font;\n            textState.maxAngle = textStyle.getMaxAngle();\n            textState.placement = textStyle.getPlacement();\n            textState.textAlign = textStyle.getTextAlign();\n            textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n            textState.backgroundFill = textStyle.getBackgroundFill();\n            textState.backgroundStroke = textStyle.getBackgroundStroke();\n            textState.padding = textStyle.getPadding() || defaultPadding;\n            textState.scale = textScale === undefined ? 1 : textScale;\n            var textOffsetX = textStyle.getOffsetX();\n            var textOffsetY = textStyle.getOffsetY();\n            var textRotateWithView = textStyle.getRotateWithView();\n            var textRotation = textStyle.getRotation();\n            this.text_ = textStyle.getText() || '';\n            this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n            this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n            this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n            this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n            this.strokeKey_ = strokeState ?\n                (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n                    strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n                    strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n                '';\n            this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n            this.fillKey_ = fillState ?\n                (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n                '';\n        }\n    };\n    return CanvasTextBuilder;\n}(CanvasBuilder));\nexport default CanvasTextBuilder;\n//# sourceMappingURL=TextBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/Source\n */\nimport { abstract } from '../util.js';\nimport BaseObject from '../Object.js';\nimport { get as getProjection } from '../proj.js';\nimport SourceState from './State.js';\n/**\n * A function that returns a string or an array of strings representing source\n * attributions.\n *\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\n */\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `' Acme Inc.'`)\n * * an array of simple strings (e.g. `[' Acme Inc.', ' Bacme Inc.']`)\n * * a function that returns a string or array of strings ({@link module:ol/source/Source~Attribution})\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {SourceState} [state='ready']\n * @property {boolean} [wrapX=false]\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nvar Source = /** @class */ (function (_super) {\n    __extends(Source, _super);\n    /**\n     * @param {Options} options Source options.\n     */\n    function Source(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        _this.projection_ = getProjection(options.projection);\n        /**\n         * @private\n         * @type {?Attribution}\n         */\n        _this.attributions_ = adaptAttributions(options.attributions);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.attributionsCollapsible_ = options.attributionsCollapsible !== undefined ?\n            options.attributionsCollapsible : true;\n        /**\n         * This source is currently loading data. Sources that defer loading to the\n         * map's tile queue never set this to `true`.\n         * @type {boolean}\n         */\n        _this.loading = false;\n        /**\n         * @private\n         * @type {SourceState}\n         */\n        _this.state_ = options.state !== undefined ?\n            options.state : SourceState.READY;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n        return _this;\n    }\n    /**\n     * Get the attribution function for the source.\n     * @return {?Attribution} Attribution function.\n     */\n    Source.prototype.getAttributions = function () {\n        return this.attributions_;\n    };\n    /**\n     * @return {boolean} Attributions are collapsible.\n     */\n    Source.prototype.getAttributionsCollapsible = function () {\n        return this.attributionsCollapsible_;\n    };\n    /**\n     * Get the projection of the source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     * @api\n     */\n    Source.prototype.getProjection = function () {\n        return this.projection_;\n    };\n    /**\n     * @abstract\n     * @return {Array<number>|undefined} Resolutions.\n     */\n    Source.prototype.getResolutions = function () {\n        return abstract();\n    };\n    /**\n     * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n     * @return {SourceState} State.\n     * @api\n     */\n    Source.prototype.getState = function () {\n        return this.state_;\n    };\n    /**\n     * @return {boolean|undefined} Wrap X.\n     */\n    Source.prototype.getWrapX = function () {\n        return this.wrapX_;\n    };\n    /**\n     * Refreshes the source. The source will be cleared, and data from the server will be reloaded.\n     * @api\n     */\n    Source.prototype.refresh = function () {\n        this.changed();\n    };\n    /**\n     * Set the attributions of the source.\n     * @param {AttributionLike|undefined} attributions Attributions.\n     *     Can be passed as `string`, `Array<string>`, {@link module:ol/source/Source~Attribution},\n     *     or `undefined`.\n     * @api\n     */\n    Source.prototype.setAttributions = function (attributions) {\n        this.attributions_ = adaptAttributions(attributions);\n        this.changed();\n    };\n    /**\n     * Set the state of the source.\n     * @param {SourceState} state State.\n     * @protected\n     */\n    Source.prototype.setState = function (state) {\n        this.state_ = state;\n        this.changed();\n    };\n    return Source;\n}(BaseObject));\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {?Attribution} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n    if (!attributionLike) {\n        return null;\n    }\n    if (Array.isArray(attributionLike)) {\n        return function (frameState) {\n            return attributionLike;\n        };\n    }\n    if (typeof attributionLike === 'function') {\n        return attributionLike;\n    }\n    return function (frameState) {\n        return [attributionLike];\n    };\n}\nexport default Source;\n//# sourceMappingURL=Source.js.map","/**\n * @module ol/source/ImageWMS\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DEFAULT_WMS_VERSION } from './common.js';\nimport ImageWrapper from '../Image.js';\nimport { assert } from '../asserts.js';\nimport EventType from '../events/EventType.js';\nimport { containsExtent, getCenter, getForViewAndSize, getHeight, getWidth } from '../extent.js';\nimport { assign } from '../obj.js';\nimport { get as getProjection, transform } from '../proj.js';\nimport { calculateSourceResolution } from '../reproj.js';\nimport ImageSource, { defaultImageLoadFunction } from './Image.js';\nimport WMSServerType from './WMSServerType.js';\nimport { compareVersions } from '../string.js';\nimport { appendParams } from '../uri.js';\n/**\n * @const\n * @type {import(\"../size.js\").Size}\n */\nvar GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"./WMSServerType.js\").default|string} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver` or `qgis`. Only needed if `hidpi` is `true`.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} url WMS service URL.\n */\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nvar ImageWMS = /** @class */ (function (_super) {\n    __extends(ImageWMS, _super);\n    /**\n     * @param {Options=} [opt_options] ImageWMS options.\n     */\n    function ImageWMS(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            projection: options.projection,\n            resolutions: options.resolutions\n        }) || this;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.url_ = options.url;\n        /**\n         * @private\n         * @type {import(\"../Image.js\").LoadFunction}\n         */\n        _this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n            options.imageLoadFunction : defaultImageLoadFunction;\n        /**\n         * @private\n         * @type {!Object}\n         */\n        _this.params_ = options.params || {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.v13_ = true;\n        _this.updateV13_();\n        /**\n         * @private\n         * @type {import(\"./WMSServerType.js\").default|undefined}\n         */\n        _this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n        /**\n         * @private\n         * @type {import(\"../Image.js\").default}\n         */\n        _this.image_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.imageSize_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedRevision_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n        return _this;\n    }\n    /**\n     * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n     * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n     * constructed.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n     * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n     *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n     *     in the `LAYERS` parameter will be used. `VERSION` should not be\n     *     specified here.\n     * @return {string|undefined} GetFeatureInfo URL.\n     * @api\n     */\n    ImageWMS.prototype.getFeatureInfoUrl = function (coordinate, resolution, projection, params) {\n        if (this.url_ === undefined) {\n            return undefined;\n        }\n        var projectionObj = getProjection(projection);\n        var sourceProjectionObj = this.getProjection();\n        if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n            resolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n            coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n        }\n        var extent = getForViewAndSize(coordinate, resolution, 0, GETFEATUREINFO_IMAGE_SIZE);\n        var baseParams = {\n            'SERVICE': 'WMS',\n            'VERSION': DEFAULT_WMS_VERSION,\n            'REQUEST': 'GetFeatureInfo',\n            'FORMAT': 'image/png',\n            'TRANSPARENT': true,\n            'QUERY_LAYERS': this.params_['LAYERS']\n        };\n        assign(baseParams, this.params_, params);\n        var x = Math.floor((coordinate[0] - extent[0]) / resolution);\n        var y = Math.floor((extent[3] - coordinate[1]) / resolution);\n        baseParams[this.v13_ ? 'I' : 'X'] = x;\n        baseParams[this.v13_ ? 'J' : 'Y'] = y;\n        return this.getRequestUrl_(extent, GETFEATUREINFO_IMAGE_SIZE, 1, sourceProjectionObj || projectionObj, baseParams);\n    };\n    /**\n     * Return the GetLegendGraphic URL, optionally optimized for the passed\n     * resolution and possibly including any passed specific parameters. Returns\n     * `undefined` if the GetLegendGraphic URL cannot be constructed.\n     *\n     * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n     *     will not be calculated and included in URL.\n     * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n     *     request is generated for this wms layer, else it will try to use the\n     *     configured wms layer. Default `FORMAT` is `image/png`.\n     *     `VERSION` should not be specified here.\n     * @return {string|undefined} GetLegendGraphic URL.\n     * @api\n     */\n    ImageWMS.prototype.getLegendUrl = function (resolution, params) {\n        if (this.url_ === undefined) {\n            return undefined;\n        }\n        var baseParams = {\n            'SERVICE': 'WMS',\n            'VERSION': DEFAULT_WMS_VERSION,\n            'REQUEST': 'GetLegendGraphic',\n            'FORMAT': 'image/png'\n        };\n        if (params === undefined || params['LAYER'] === undefined) {\n            var layers = this.params_.LAYERS;\n            var isSingleLayer = !Array.isArray(layers) || layers.length === 1;\n            if (!isSingleLayer) {\n                return undefined;\n            }\n            baseParams['LAYER'] = layers;\n        }\n        if (resolution !== undefined) {\n            var mpu = this.getProjection() ? this.getProjection().getMetersPerUnit() : 1;\n            var dpi = 25.4 / 0.28;\n            var inchesPerMeter = 39.37;\n            baseParams['SCALE'] = resolution * mpu * inchesPerMeter * dpi;\n        }\n        assign(baseParams, params);\n        return appendParams(/** @type {string} */ (this.url_), baseParams);\n    };\n    /**\n     * Get the user-provided params, i.e. those passed to the constructor through\n     * the \"params\" option, and possibly updated using the updateParams method.\n     * @return {Object} Params.\n     * @api\n     */\n    ImageWMS.prototype.getParams = function () {\n        return this.params_;\n    };\n    /**\n     * @inheritDoc\n     */\n    ImageWMS.prototype.getImageInternal = function (extent, resolution, pixelRatio, projection) {\n        if (this.url_ === undefined) {\n            return null;\n        }\n        resolution = this.findNearestResolution(resolution);\n        if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n            pixelRatio = 1;\n        }\n        var imageResolution = resolution / pixelRatio;\n        var center = getCenter(extent);\n        var viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n        var viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n        var viewExtent = getForViewAndSize(center, imageResolution, 0, [viewWidth, viewHeight]);\n        var requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n        var requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n        var requestExtent = getForViewAndSize(center, imageResolution, 0, [requestWidth, requestHeight]);\n        var image = this.image_;\n        if (image &&\n            this.renderedRevision_ == this.getRevision() &&\n            image.getResolution() == resolution &&\n            image.getPixelRatio() == pixelRatio &&\n            containsExtent(image.getExtent(), viewExtent)) {\n            return image;\n        }\n        var params = {\n            'SERVICE': 'WMS',\n            'VERSION': DEFAULT_WMS_VERSION,\n            'REQUEST': 'GetMap',\n            'FORMAT': 'image/png',\n            'TRANSPARENT': true\n        };\n        assign(params, this.params_);\n        this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n        this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n        var url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio, projection, params);\n        this.image_ = new ImageWrapper(requestExtent, resolution, pixelRatio, url, this.crossOrigin_, this.imageLoadFunction_);\n        this.renderedRevision_ = this.getRevision();\n        this.image_.addEventListener(EventType.CHANGE, this.handleImageChange.bind(this));\n        return this.image_;\n    };\n    /**\n     * Return the image load function of the source.\n     * @return {import(\"../Image.js\").LoadFunction} The image load function.\n     * @api\n     */\n    ImageWMS.prototype.getImageLoadFunction = function () {\n        return this.imageLoadFunction_;\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {import(\"../size.js\").Size} size Size.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {Object} params Params.\n     * @return {string} Request URL.\n     * @private\n     */\n    ImageWMS.prototype.getRequestUrl_ = function (extent, size, pixelRatio, projection, params) {\n        assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n        params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n        if (!('STYLES' in this.params_)) {\n            params['STYLES'] = '';\n        }\n        if (pixelRatio != 1) {\n            switch (this.serverType_) {\n                case WMSServerType.GEOSERVER:\n                    var dpi = (90 * pixelRatio + 0.5) | 0;\n                    if ('FORMAT_OPTIONS' in params) {\n                        params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n                    }\n                    else {\n                        params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n                    }\n                    break;\n                case WMSServerType.MAPSERVER:\n                    params['MAP_RESOLUTION'] = 90 * pixelRatio;\n                    break;\n                case WMSServerType.CARMENTA_SERVER:\n                case WMSServerType.QGIS:\n                    params['DPI'] = 90 * pixelRatio;\n                    break;\n                default:\n                    assert(false, 8); // Unknown `serverType` configured\n                    break;\n            }\n        }\n        params['WIDTH'] = size[0];\n        params['HEIGHT'] = size[1];\n        var axisOrientation = projection.getAxisOrientation();\n        var bbox;\n        if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n            bbox = [extent[1], extent[0], extent[3], extent[2]];\n        }\n        else {\n            bbox = extent;\n        }\n        params['BBOX'] = bbox.join(',');\n        return appendParams(/** @type {string} */ (this.url_), params);\n    };\n    /**\n     * Return the URL used for this WMS source.\n     * @return {string|undefined} URL.\n     * @api\n     */\n    ImageWMS.prototype.getUrl = function () {\n        return this.url_;\n    };\n    /**\n     * Set the image load function of the source.\n     * @param {import(\"../Image.js\").LoadFunction} imageLoadFunction Image load function.\n     * @api\n     */\n    ImageWMS.prototype.setImageLoadFunction = function (imageLoadFunction) {\n        this.image_ = null;\n        this.imageLoadFunction_ = imageLoadFunction;\n        this.changed();\n    };\n    /**\n     * Set the URL to use for requests.\n     * @param {string|undefined} url URL.\n     * @api\n     */\n    ImageWMS.prototype.setUrl = function (url) {\n        if (url != this.url_) {\n            this.url_ = url;\n            this.image_ = null;\n            this.changed();\n        }\n    };\n    /**\n     * Update the user-provided params.\n     * @param {Object} params Params.\n     * @api\n     */\n    ImageWMS.prototype.updateParams = function (params) {\n        assign(this.params_, params);\n        this.updateV13_();\n        this.image_ = null;\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    ImageWMS.prototype.updateV13_ = function () {\n        var version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n        this.v13_ = compareVersions(version, '1.3') >= 0;\n    };\n    return ImageWMS;\n}(ImageSource));\nexport default ImageWMS;\n//# sourceMappingURL=ImageWMS.js.map","/**\n * @module ol/geom/flat/area\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n    var twiceArea = 0;\n    var x1 = flatCoordinates[end - stride];\n    var y1 = flatCoordinates[end - stride + 1];\n    for (; offset < end; offset += stride) {\n        var x2 = flatCoordinates[offset];\n        var y2 = flatCoordinates[offset + 1];\n        twiceArea += y1 * x2 - x1 * y2;\n        x1 = x2;\n        y1 = y2;\n    }\n    return twiceArea / 2;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n    var area = 0;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        area += linearRing(flatCoordinates, offset, end, stride);\n        offset = end;\n    }\n    return area;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n    var area = 0;\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        area += linearRings(flatCoordinates, offset, ends, stride);\n        offset = ends[ends.length - 1];\n    }\n    return area;\n}\n//# sourceMappingURL=area.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Layer\n */\nimport { abstract } from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport EventType from '../events/EventType.js';\nimport SourceState from '../source/State.js';\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nvar LayerRenderer = /** @class */ (function (_super) {\n    __extends(LayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function LayerRenderer(layer) {\n        var _this = _super.call(this) || this;\n        /** @private */\n        _this.boundHandleImageChange_ = _this.handleImageChange_.bind(_this);\n        /**\n         * @private\n         * @type {LayerType}\n         */\n        _this.layer_ = layer;\n        return _this;\n    }\n    /**\n     * Determine whether render should be called.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    LayerRenderer.prototype.prepareFrame = function (frameState) {\n        return abstract();\n    };\n    /**\n     * Render the layer.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    LayerRenderer.prototype.renderFrame = function (frameState, target) {\n        return abstract();\n    };\n    /**\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @param {number} zoom Zoom level.\n     * @param {import(\"../Tile.js\").default} tile Tile.\n     */\n    LayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (!tiles[zoom]) {\n            tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n    };\n    /**\n     * Create a function that adds loaded tiles to the tile lookup.\n     * @param {import(\"../source/Tile.js\").default} source Tile source.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n     *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n     * @protected\n     */\n    LayerRenderer.prototype.createLoadedTileFinder = function (source, projection, tiles) {\n        return (\n        /**\n         * @param {number} zoom Zoom level.\n         * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n         * @return {boolean} The tile range is fully loaded.\n         * @this {LayerRenderer}\n         */\n        function (zoom, tileRange) {\n            var callback = this.loadedTileCallback.bind(this, tiles, zoom);\n            return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n        }).bind(this);\n    };\n    /**\n     * @abstract\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default): T} callback Feature callback.\n     * @param {Array<import(\"../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n     * @return {T|void} Callback result.\n     * @template T\n     */\n    LayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) { };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    LayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        return abstract();\n    };\n    /**\n     * @return {LayerType} Layer.\n     */\n    LayerRenderer.prototype.getLayer = function () {\n        return this.layer_;\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     * @abstract\n     */\n    LayerRenderer.prototype.handleFontsChanged = function () { };\n    /**\n     * Handle changes in image state.\n     * @param {import(\"../events/Event.js\").default} event Image change event.\n     * @private\n     */\n    LayerRenderer.prototype.handleImageChange_ = function (event) {\n        var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n        if (image.getState() === ImageState.LOADED) {\n            this.renderIfReadyAndVisible();\n        }\n    };\n    /**\n     * Load the image if not already loaded, and register the image change\n     * listener if needed.\n     * @param {import(\"../ImageBase.js\").default} image Image.\n     * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n     * @protected\n     */\n    LayerRenderer.prototype.loadImage = function (image) {\n        var imageState = image.getState();\n        if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n            image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n        }\n        if (imageState == ImageState.IDLE) {\n            image.load();\n            imageState = image.getState();\n        }\n        return imageState == ImageState.LOADED;\n    };\n    /**\n     * @protected\n     */\n    LayerRenderer.prototype.renderIfReadyAndVisible = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n            layer.changed();\n        }\n    };\n    return LayerRenderer;\n}(Observable));\nexport default LayerRenderer;\n//# sourceMappingURL=Layer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/Layer\n */\nimport { getBottomLeft, getBottomRight, getTopLeft, getTopRight } from '../../extent.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport { rotateAtOffset } from '../../render/canvas.js';\nimport LayerRenderer from '../Layer.js';\nimport { create as createTransform, apply as applyTransform, compose as composeTransform, toString as transformToString } from '../../transform.js';\n/**\n * @abstract\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n */\nvar CanvasLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasLayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function CanvasLayerRenderer(layer) {\n        var _this = _super.call(this, layer) || this;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.container = null;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.renderedResolution;\n        /**\n         * A temporary transform.  The values in this transform should only be used in a\n         * function that sets the values.\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.tempTransform_ = createTransform();\n        /**\n         * The transform for rendered pixels to viewport CSS pixels.  This transform must\n         * be set when rendering a frame and may be used by other functions after rendering.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.pixelTransform = createTransform();\n        /**\n         * The transform for viewport CSS pixels to rendered pixels.  This transform must\n         * be set when rendering a frame and may be used by other functions after rendering.\n         * @protected\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.inversePixelTransform = createTransform();\n        /**\n         * @protected\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.context = null;\n        /**\n         * @type {boolean}\n         */\n        _this.containerReused = false;\n        return _this;\n    }\n    /**\n     * Get a rendering container from an existing target, if compatible.\n     * @param {HTMLElement} target Potential render target.\n     * @param {import(\"../../transform\").Transform} transform Transform.\n     * @param {number} opacity Opacity.\n     */\n    CanvasLayerRenderer.prototype.useContainer = function (target, transform, opacity) {\n        var layerClassName = this.getLayer().getClassName();\n        var container, context;\n        if (target && target.style.opacity === '' && target.className === layerClassName) {\n            var canvas = target.firstElementChild;\n            if (canvas instanceof HTMLCanvasElement) {\n                context = canvas.getContext('2d');\n            }\n        }\n        if (context && context.canvas.style.transform === transformToString(transform)) {\n            // Container of the previous layer renderer can be used.\n            this.container = target;\n            this.context = context;\n            this.containerReused = true;\n        }\n        else if (this.containerReused) {\n            // Previously reused container cannot be used any more.\n            this.container = null;\n            this.context = null;\n            this.containerReused = false;\n        }\n        if (!this.container) {\n            container = document.createElement('div');\n            container.className = layerClassName;\n            var style = container.style;\n            style.position = 'absolute';\n            style.width = '100%';\n            style.height = '100%';\n            context = createCanvasContext2D();\n            var canvas = context.canvas;\n            container.appendChild(canvas);\n            style = canvas.style;\n            style.position = 'absolute';\n            style.transformOrigin = 'top left';\n            this.container = container;\n            this.context = context;\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.clip = function (context, frameState, extent) {\n        var pixelRatio = frameState.pixelRatio;\n        var halfWidth = (frameState.size[0] * pixelRatio) / 2;\n        var halfHeight = (frameState.size[1] * pixelRatio) / 2;\n        var rotation = frameState.viewState.rotation;\n        var topLeft = getTopLeft(extent);\n        var topRight = getTopRight(extent);\n        var bottomRight = getBottomRight(extent);\n        var bottomLeft = getBottomLeft(extent);\n        applyTransform(frameState.coordinateToPixelTransform, topLeft);\n        applyTransform(frameState.coordinateToPixelTransform, topRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n        context.save();\n        rotateAtOffset(context, -rotation, halfWidth, halfHeight);\n        context.beginPath();\n        context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n        context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n        context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n        context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n        context.clip();\n        rotateAtOffset(context, rotation, halfWidth, halfHeight);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.clipUnrotated = function (context, frameState, extent) {\n        var topLeft = getTopLeft(extent);\n        var topRight = getTopRight(extent);\n        var bottomRight = getBottomRight(extent);\n        var bottomLeft = getBottomLeft(extent);\n        applyTransform(frameState.coordinateToPixelTransform, topLeft);\n        applyTransform(frameState.coordinateToPixelTransform, topRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n        applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n        var inverted = this.inversePixelTransform;\n        applyTransform(inverted, topLeft);\n        applyTransform(inverted, topRight);\n        applyTransform(inverted, bottomRight);\n        applyTransform(inverted, bottomLeft);\n        context.save();\n        context.beginPath();\n        context.moveTo(Math.round(topLeft[0]), Math.round(topLeft[1]));\n        context.lineTo(Math.round(topRight[0]), Math.round(topRight[1]));\n        context.lineTo(Math.round(bottomRight[0]), Math.round(bottomRight[1]));\n        context.lineTo(Math.round(bottomLeft[0]), Math.round(bottomLeft[1]));\n        context.clip();\n    };\n    /**\n     * @param {import(\"../../render/EventType.js\").default} type Event type.\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    CanvasLayerRenderer.prototype.dispatchRenderEvent_ = function (type, context, frameState) {\n        var layer = this.getLayer();\n        if (layer.hasListener(type)) {\n            var event_1 = new RenderEvent(type, this.inversePixelTransform, frameState, context);\n            layer.dispatchEvent(event_1);\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.preRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @protected\n     */\n    CanvasLayerRenderer.prototype.postRender = function (context, frameState) {\n        this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n    };\n    /**\n     * Creates a transform for rendering to an element that will be rotated after rendering.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} width Width of the rendered element (in pixels).\n     * @param {number} height Height of the rendered element (in pixels).\n     * @param {number} offsetX Offset on the x-axis in view coordinates.\n     * @protected\n     * @return {!import(\"../../transform.js\").Transform} Transform.\n     */\n    CanvasLayerRenderer.prototype.getRenderTransform = function (frameState, width, height, offsetX) {\n        var viewState = frameState.viewState;\n        var pixelRatio = frameState.pixelRatio;\n        var dx1 = width / 2;\n        var dy1 = height / 2;\n        var sx = pixelRatio / viewState.resolution;\n        var sy = -sx;\n        var dx2 = -viewState.center[0] + offsetX;\n        var dy2 = -viewState.center[1];\n        return composeTransform(this.tempTransform_, dx1, dy1, sx, sy, -viewState.rotation, dx2, dy2);\n    };\n    /**\n     * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    CanvasLayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        var renderPixel = applyTransform(this.inversePixelTransform, pixel.slice());\n        var context = this.context;\n        var data;\n        try {\n            data = context.getImageData(Math.round(renderPixel[0]), Math.round(renderPixel[1]), 1, 1).data;\n        }\n        catch (err) {\n            if (err.name === 'SecurityError') {\n                // tainted canvas, we assume there is data at the given pixel (although there might not be)\n                return new Uint8Array();\n            }\n            return data;\n        }\n        if (data[3] === 0) {\n            return null;\n        }\n        return data;\n    };\n    return CanvasLayerRenderer;\n}(LayerRenderer));\nexport default CanvasLayerRenderer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/style/IconImageCache\n */\nimport { asString } from '../color.js';\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n */\nvar IconImageCache = /** @class */ (function () {\n    function IconImageCache() {\n        /**\n        * @type {!Object<string, import(\"./IconImage.js\").default>}\n        * @private\n        */\n        this.cache_ = {};\n        /**\n        * @type {number}\n        * @private\n        */\n        this.cacheSize_ = 0;\n        /**\n        * @type {number}\n        * @private\n        */\n        this.maxCacheSize_ = 32;\n    }\n    /**\n    * FIXME empty description for jsdoc\n    */\n    IconImageCache.prototype.clear = function () {\n        this.cache_ = {};\n        this.cacheSize_ = 0;\n    };\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    IconImageCache.prototype.canExpireCache = function () {\n        return this.cacheSize_ > this.maxCacheSize_;\n    };\n    /**\n    * FIXME empty description for jsdoc\n    */\n    IconImageCache.prototype.expire = function () {\n        if (this.canExpireCache()) {\n            var i = 0;\n            for (var key in this.cache_) {\n                var iconImage = this.cache_[key];\n                if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n                    delete this.cache_[key];\n                    --this.cacheSize_;\n                }\n            }\n        }\n    };\n    /**\n    * @param {string} src Src.\n    * @param {?string} crossOrigin Cross origin.\n    * @param {import(\"../color.js\").Color} color Color.\n    * @return {import(\"./IconImage.js\").default} Icon image.\n    */\n    IconImageCache.prototype.get = function (src, crossOrigin, color) {\n        var key = getKey(src, crossOrigin, color);\n        return key in this.cache_ ? this.cache_[key] : null;\n    };\n    /**\n    * @param {string} src Src.\n    * @param {?string} crossOrigin Cross origin.\n    * @param {import(\"../color.js\").Color} color Color.\n    * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n    */\n    IconImageCache.prototype.set = function (src, crossOrigin, color, iconImage) {\n        var key = getKey(src, crossOrigin, color);\n        this.cache_[key] = iconImage;\n        ++this.cacheSize_;\n    };\n    /**\n    * Set the cache size of the icon cache. Default is `32`. Change this value when\n    * your map uses more than 32 different icon images and you are not caching icon\n    * styles on the application level.\n    * @param {number} maxCacheSize Cache max size.\n    * @api\n    */\n    IconImageCache.prototype.setSize = function (maxCacheSize) {\n        this.maxCacheSize_ = maxCacheSize;\n        this.expire();\n    };\n    return IconImageCache;\n}());\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n    var colorString = color ? asString(color) : 'null';\n    return crossOrigin + ':' + src + ':' + colorString;\n}\nexport default IconImageCache;\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport var shared = new IconImageCache();\n//# sourceMappingURL=IconImageCache.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/GeometryCollection\n */\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter } from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryType from './GeometryType.js';\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @api\n */\nvar GeometryCollection = /** @class */ (function (_super) {\n    __extends(GeometryCollection, _super);\n    /**\n     * @param {Array<Geometry>=} opt_geometries Geometries.\n     */\n    function GeometryCollection(opt_geometries) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {Array<Geometry>}\n         */\n        _this.geometries_ = opt_geometries ? opt_geometries : null;\n        /**\n         * @type {Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.changeEventsKeys_ = [];\n        _this.listenGeometriesChange_();\n        return _this;\n    }\n    /**\n     * @private\n     */\n    GeometryCollection.prototype.unlistenGeometriesChange_ = function () {\n        this.changeEventsKeys_.forEach(unlistenByKey);\n        this.changeEventsKeys_.length = 0;\n    };\n    /**\n     * @private\n     */\n    GeometryCollection.prototype.listenGeometriesChange_ = function () {\n        if (!this.geometries_) {\n            return;\n        }\n        for (var i = 0, ii = this.geometries_.length; i < ii; ++i) {\n            this.changeEventsKeys_.push(listen(this.geometries_[i], EventType.CHANGE, this.changed, this));\n        }\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!GeometryCollection} Clone.\n     * @override\n     * @api\n     */\n    GeometryCollection.prototype.clone = function () {\n        var geometryCollection = new GeometryCollection(null);\n        geometryCollection.setGeometries(this.geometries_);\n        return geometryCollection;\n    };\n    /**\n     * @inheritDoc\n     */\n    GeometryCollection.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            minSquaredDistance = geometries[i].closestPointXY(x, y, closestPoint, minSquaredDistance);\n        }\n        return minSquaredDistance;\n    };\n    /**\n     * @inheritDoc\n     */\n    GeometryCollection.prototype.containsXY = function (x, y) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            if (geometries[i].containsXY(x, y)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * @inheritDoc\n     */\n    GeometryCollection.prototype.computeExtent = function (extent) {\n        createOrUpdateEmpty(extent);\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            extend(extent, geometries[i].getExtent());\n        }\n        return extent;\n    };\n    /**\n     * Return the geometries that make up this geometry collection.\n     * @return {Array<Geometry>} Geometries.\n     * @api\n     */\n    GeometryCollection.prototype.getGeometries = function () {\n        return cloneGeometries(this.geometries_);\n    };\n    /**\n     * @return {Array<Geometry>} Geometries.\n     */\n    GeometryCollection.prototype.getGeometriesArray = function () {\n        return this.geometries_;\n    };\n    /**\n     * @inheritDoc\n     */\n    GeometryCollection.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n        if (this.simplifiedGeometryRevision !== this.getRevision()) {\n            this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n            this.simplifiedGeometryRevision = this.getRevision();\n        }\n        if (squaredTolerance < 0 ||\n            (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n                squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n            return this;\n        }\n        var simplifiedGeometries = [];\n        var geometries = this.geometries_;\n        var simplified = false;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            var geometry = geometries[i];\n            var simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n            simplifiedGeometries.push(simplifiedGeometry);\n            if (simplifiedGeometry !== geometry) {\n                simplified = true;\n            }\n        }\n        if (simplified) {\n            var simplifiedGeometryCollection = new GeometryCollection(null);\n            simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n            return simplifiedGeometryCollection;\n        }\n        else {\n            this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n            return this;\n        }\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    GeometryCollection.prototype.getType = function () {\n        return GeometryType.GEOMETRY_COLLECTION;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    GeometryCollection.prototype.intersectsExtent = function (extent) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            if (geometries[i].intersectsExtent(extent)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    GeometryCollection.prototype.isEmpty = function () {\n        return this.geometries_.length === 0;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    GeometryCollection.prototype.rotate = function (angle, anchor) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].rotate(angle, anchor);\n        }\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    GeometryCollection.prototype.scale = function (sx, opt_sy, opt_anchor) {\n        var anchor = opt_anchor;\n        if (!anchor) {\n            anchor = getCenter(this.getExtent());\n        }\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].scale(sx, opt_sy, anchor);\n        }\n        this.changed();\n    };\n    /**\n     * Set the geometries that make up this geometry collection.\n     * @param {Array<Geometry>} geometries Geometries.\n     * @api\n     */\n    GeometryCollection.prototype.setGeometries = function (geometries) {\n        this.setGeometriesArray(cloneGeometries(geometries));\n    };\n    /**\n     * @param {Array<Geometry>} geometries Geometries.\n     */\n    GeometryCollection.prototype.setGeometriesArray = function (geometries) {\n        this.unlistenGeometriesChange_();\n        this.geometries_ = geometries;\n        this.listenGeometriesChange_();\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    GeometryCollection.prototype.applyTransform = function (transformFn) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].applyTransform(transformFn);\n        }\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    GeometryCollection.prototype.translate = function (deltaX, deltaY) {\n        var geometries = this.geometries_;\n        for (var i = 0, ii = geometries.length; i < ii; ++i) {\n            geometries[i].translate(deltaX, deltaY);\n        }\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     */\n    GeometryCollection.prototype.disposeInternal = function () {\n        this.unlistenGeometriesChange_();\n        _super.prototype.disposeInternal.call(this);\n    };\n    return GeometryCollection;\n}(Geometry));\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n    var clonedGeometries = [];\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n        clonedGeometries.push(geometries[i].clone());\n    }\n    return clonedGeometries;\n}\nexport default GeometryCollection;\n//# sourceMappingURL=GeometryCollection.js.map","/**\n * @module ol/geom/flat/interpolate\n */\nimport { binarySearch } from '../../array.js';\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n    var pointX = NaN;\n    var pointY = NaN;\n    var n = (end - offset) / stride;\n    if (n === 1) {\n        pointX = flatCoordinates[offset];\n        pointY = flatCoordinates[offset + 1];\n    }\n    else if (n == 2) {\n        pointX = (1 - fraction) * flatCoordinates[offset] +\n            fraction * flatCoordinates[offset + stride];\n        pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n            fraction * flatCoordinates[offset + stride + 1];\n    }\n    else if (n !== 0) {\n        var x1 = flatCoordinates[offset];\n        var y1 = flatCoordinates[offset + 1];\n        var length_1 = 0;\n        var cumulativeLengths = [0];\n        for (var i = offset + stride; i < end; i += stride) {\n            var x2 = flatCoordinates[i];\n            var y2 = flatCoordinates[i + 1];\n            length_1 += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n            cumulativeLengths.push(length_1);\n            x1 = x2;\n            y1 = y2;\n        }\n        var target = fraction * length_1;\n        var index = binarySearch(cumulativeLengths, target);\n        if (index < 0) {\n            var t = (target - cumulativeLengths[-index - 2]) /\n                (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n            var o = offset + (-index - 2) * stride;\n            pointX = lerp(flatCoordinates[o], flatCoordinates[o + stride], t);\n            pointY = lerp(flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n        }\n        else {\n            pointX = flatCoordinates[offset + index * stride];\n            pointY = flatCoordinates[offset + index * stride + 1];\n        }\n    }\n    if (opt_dest) {\n        opt_dest[0] = pointX;\n        opt_dest[1] = pointY;\n        return opt_dest;\n    }\n    else {\n        return [pointX, pointY];\n    }\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n    if (end == offset) {\n        return null;\n    }\n    var coordinate;\n    if (m < flatCoordinates[offset + stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(offset, offset + stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    else if (flatCoordinates[end - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(end - stride, end);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    // FIXME use O(1) search\n    if (m == flatCoordinates[offset + stride - 1]) {\n        return flatCoordinates.slice(offset, offset + stride);\n    }\n    var lo = offset / stride;\n    var hi = end / stride;\n    while (lo < hi) {\n        var mid = (lo + hi) >> 1;\n        if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n            hi = mid;\n        }\n        else {\n            lo = mid + 1;\n        }\n    }\n    var m0 = flatCoordinates[lo * stride - 1];\n    if (m == m0) {\n        return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n    }\n    var m1 = flatCoordinates[(lo + 1) * stride - 1];\n    var t = (m - m0) / (m1 - m0);\n    coordinate = [];\n    for (var i = 0; i < stride - 1; ++i) {\n        coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i], flatCoordinates[lo * stride + i], t));\n    }\n    coordinate.push(m);\n    return coordinate;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n    if (interpolate) {\n        return lineStringCoordinateAtM(flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n    }\n    var coordinate;\n    if (m < flatCoordinates[stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(0, stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    if (flatCoordinates[flatCoordinates.length - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        if (offset == end) {\n            continue;\n        }\n        if (m < flatCoordinates[offset + stride - 1]) {\n            return null;\n        }\n        else if (m <= flatCoordinates[end - 1]) {\n            return lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, false);\n        }\n        offset = end;\n    }\n    return null;\n}\n//# sourceMappingURL=interpolate.js.map","/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * See https://mapbox.com/developers/api/.\n */\nimport { createFromTemplates } from '../tileurlfunction.js';\nimport { assert } from '../asserts.js';\nimport { applyTransform, intersects } from '../extent.js';\nimport { jsonp as requestJSONP } from '../net.js';\nimport { get as getProjection, getTransformFromProjections } from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Config\n * @property {string} [name] The name.\n * @property {string} [description] The description.\n * @property {string} [version] The version.\n * @property {string} [attribution] The attribution.\n * @property {string} [template] The template.\n * @property {string} [legend] The legend.\n * @property {string} [scheme] The scheme.\n * @property {Array<string>} tiles The tile URL templates.\n * @property {Array<string>} [grids] Optional grids.\n * @property {number} [minzoom] Minimum zoom level.\n * @property {number} [maxzoom] Maximum zoom level.\n * @property {Array<number>} [bounds] Optional bounds.\n * @property {Array<number>} [center] Optional center.\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {Config} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * Note: `tileSize` and other non-standard TileJSON properties are currently ignored.\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n * @api\n */\nvar TileJSON = /** @class */ (function (_super) {\n    __extends(TileJSON, _super);\n    /**\n     * @param {Options} options TileJSON options.\n     */\n    function TileJSON(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            projection: getProjection('EPSG:3857'),\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            state: SourceState.LOADING,\n            tileLoadFunction: options.tileLoadFunction,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition\n        }) || this;\n        /**\n         * @type {Config}\n         * @private\n         */\n        _this.tileJSON_ = null;\n        /**\n         * @type {number|import(\"../size.js\").Size}\n         * @private\n         */\n        _this.tileSize_ = options.tileSize;\n        if (options.url) {\n            if (options.jsonp) {\n                requestJSONP(options.url, _this.handleTileJSONResponse.bind(_this), _this.handleTileJSONError.bind(_this));\n            }\n            else {\n                var client = new XMLHttpRequest();\n                client.addEventListener('load', _this.onXHRLoad_.bind(_this));\n                client.addEventListener('error', _this.onXHRError_.bind(_this));\n                client.open('GET', options.url);\n                client.send();\n            }\n        }\n        else if (options.tileJSON) {\n            _this.handleTileJSONResponse(options.tileJSON);\n        }\n        else {\n            assert(false, 51); // Either `url` or `tileJSON` options must be provided\n        }\n        return _this;\n    }\n    /**\n     * @private\n     * @param {Event} event The load event.\n     */\n    TileJSON.prototype.onXHRLoad_ = function (event) {\n        var client = /** @type {XMLHttpRequest} */ (event.target);\n        // status will be 0 for file:// urls\n        if (!client.status || client.status >= 200 && client.status < 300) {\n            var response = void 0;\n            try {\n                response = /** @type {TileJSON} */ (JSON.parse(client.responseText));\n            }\n            catch (err) {\n                this.handleTileJSONError();\n                return;\n            }\n            this.handleTileJSONResponse(response);\n        }\n        else {\n            this.handleTileJSONError();\n        }\n    };\n    /**\n     * @private\n     * @param {Event} event The error event.\n     */\n    TileJSON.prototype.onXHRError_ = function (event) {\n        this.handleTileJSONError();\n    };\n    /**\n     * @return {Config} The tilejson object.\n     * @api\n     */\n    TileJSON.prototype.getTileJSON = function () {\n        return this.tileJSON_;\n    };\n    /**\n     * @protected\n     * @param {Config} tileJSON Tile JSON.\n     */\n    TileJSON.prototype.handleTileJSONResponse = function (tileJSON) {\n        var epsg4326Projection = getProjection('EPSG:4326');\n        var sourceProjection = this.getProjection();\n        var extent;\n        if (tileJSON['bounds'] !== undefined) {\n            var transform = getTransformFromProjections(epsg4326Projection, sourceProjection);\n            extent = applyTransform(tileJSON['bounds'], transform);\n        }\n        var minZoom = tileJSON['minzoom'] || 0;\n        var maxZoom = tileJSON['maxzoom'] || 22;\n        var tileGrid = createXYZ({\n            extent: extentFromProjection(sourceProjection),\n            maxZoom: maxZoom,\n            minZoom: minZoom,\n            tileSize: this.tileSize_\n        });\n        this.tileGrid = tileGrid;\n        this.tileUrlFunction = createFromTemplates(tileJSON['tiles'], tileGrid);\n        if (tileJSON['attribution'] !== undefined && !this.getAttributions()) {\n            var attributionExtent_1 = extent !== undefined ?\n                extent : epsg4326Projection.getExtent();\n            this.setAttributions(function (frameState) {\n                if (intersects(attributionExtent_1, frameState.extent)) {\n                    return [tileJSON['attribution']];\n                }\n                return null;\n            });\n        }\n        this.tileJSON_ = tileJSON;\n        this.setState(SourceState.READY);\n    };\n    /**\n     * @protected\n     */\n    TileJSON.prototype.handleTileJSONError = function () {\n        this.setState(SourceState.ERROR);\n    };\n    return TileJSON;\n}(TileImage));\nexport default TileJSON;\n//# sourceMappingURL=TileJSON.js.map","/**\n * @module ol/geom/flat/textpath\n */\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @return {Array<Array<*>>} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(flatCoordinates, offset, end, stride, text, startM, maxAngle, scale, measureAndCacheTextWidth, font, cache) {\n    var result = [];\n    // Keep text upright\n    var reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n    var numChars = text.length;\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    offset += stride;\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    var segmentM = 0;\n    var segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    var angleChanged = false;\n    var index, previousAngle;\n    for (var i = 0; i < numChars; ++i) {\n        index = reverse ? numChars - i - 1 : i;\n        var char = text[index];\n        var charLength = scale * measureAndCacheTextWidth(font, char, cache);\n        var charM = startM + charLength / 2;\n        while (offset < end - stride && segmentM + segmentLength < charM) {\n            x1 = x2;\n            y1 = y2;\n            offset += stride;\n            x2 = flatCoordinates[offset];\n            y2 = flatCoordinates[offset + 1];\n            segmentM += segmentLength;\n            segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n        }\n        var segmentPos = charM - segmentM;\n        var angle = Math.atan2(y2 - y1, x2 - x1);\n        if (reverse) {\n            angle += angle > 0 ? -Math.PI : Math.PI;\n        }\n        if (previousAngle !== undefined) {\n            var delta = angle - previousAngle;\n            angleChanged = angleChanged || delta !== 0;\n            delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n            if (Math.abs(delta) > maxAngle) {\n                return null;\n            }\n        }\n        previousAngle = angle;\n        var interpolate = segmentPos / segmentLength;\n        var x = lerp(x1, x2, interpolate);\n        var y = lerp(y1, y2, interpolate);\n        result[index] = [x, y, charLength / 2, angle, char];\n        startM += charLength;\n    }\n    return angleChanged ? result : [[result[0][0], result[0][1], result[0][2], result[0][3], text]];\n}\n//# sourceMappingURL=textpath.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/Executor\n */\nimport { equals } from '../../array.js';\nimport { createEmpty, createOrUpdate, createOrUpdateEmpty, extend, intersects } from '../../extent.js';\nimport { lineStringLength } from '../../geom/flat/length.js';\nimport { drawTextOnPath } from '../../geom/flat/textpath.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { drawImage, defaultPadding, defaultTextBaseline } from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport { TEXT_ALIGN } from './TextBuilder.js';\nimport { create as createTransform, compose as composeTransform, apply as applyTransform, setFromArray as transformSetFromArray } from '../../transform.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { labelCache, defaultTextAlign, measureTextHeight, measureAndCacheTextWidth, measureTextWidths } from '../canvas.js';\nimport Disposable from '../../Disposable.js';\nimport RBush from 'rbush';\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, import(\"../canvas.js\").TextState>} textStates The text states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").FillState>} fillStates The fill states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").StrokeState>} strokeStates The stroke states (decluttering).\n */\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nvar tmpExtent = createEmpty();\n/**\n * @type {!import(\"../../transform.js\").Transform}\n */\nvar tmpTransform = createTransform();\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p4 = [];\nvar Executor = /** @class */ (function (_super) {\n    __extends(Executor, _super);\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} overlaps The replay can have overlapping geometries.\n     * @param {SerializableInstructions} instructions The serializable instructions\n     */\n    function Executor(resolution, pixelRatio, overlaps, instructions) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.overlaps = overlaps;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.pixelRatio = pixelRatio;\n        /**\n         * @protected\n         * @const\n         * @type {number}\n         */\n        _this.resolution = resolution;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.alignFill_;\n        /**\n         * @type {Array<*>}\n         */\n        _this.declutterItems = [];\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.instructions = instructions.instructions;\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.coordinates = instructions.coordinates;\n        /**\n         * @private\n         * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n         */\n        _this.coordinateCache_ = {};\n        /**\n         * @private\n         * @type {!import(\"../../transform.js\").Transform}\n         */\n        _this.renderedTransform_ = createTransform();\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.pixelCoordinates_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.viewRotation_ = 0;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").FillState>}\n         */\n        _this.fillStates = instructions.fillStates || {};\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n         */\n        _this.strokeStates = instructions.strokeStates || {};\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").TextState>}\n         */\n        _this.textStates = instructions.textStates || {};\n        /**\n         * @private\n         * @type {Object<string, Object<string, number>>}\n         */\n        _this.widths_ = {};\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    Executor.prototype.disposeInternal = function () {\n        labelCache.release(this);\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * @param {string} text Text.\n     * @param {string} textKey Text style key.\n     * @param {string} fillKey Fill style key.\n     * @param {string} strokeKey Stroke style key.\n     * @return {HTMLCanvasElement} Image.\n     */\n    Executor.prototype.getTextImage = function (text, textKey, fillKey, strokeKey) {\n        var label;\n        var key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n        if (!labelCache.containsKey(key)) {\n            var strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n            var fillState = fillKey ? this.fillStates[fillKey] : null;\n            var textState = this.textStates[textKey];\n            var pixelRatio = this.pixelRatio;\n            var scale = textState.scale * pixelRatio;\n            var align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n            var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n            var lines = text.split('\\n');\n            var numLines = lines.length;\n            var widths = [];\n            var width = measureTextWidths(textState.font, lines, widths);\n            var lineHeight = measureTextHeight(textState.font);\n            var height = lineHeight * numLines;\n            var renderWidth = width + strokeWidth;\n            var context = createCanvasContext2D(\n            // make canvas 2 pixels wider to account for italic text width measurement errors\n            Math.ceil((renderWidth + 2) * scale), Math.ceil((height + strokeWidth) * scale));\n            label = context.canvas;\n            labelCache.set(key, label);\n            if (scale != 1) {\n                context.scale(scale, scale);\n            }\n            context.font = textState.font;\n            if (strokeKey) {\n                context.strokeStyle = strokeState.strokeStyle;\n                context.lineWidth = strokeWidth;\n                context.lineCap = strokeState.lineCap;\n                context.lineJoin = strokeState.lineJoin;\n                context.miterLimit = strokeState.miterLimit;\n                if (context.setLineDash && strokeState.lineDash.length) {\n                    context.setLineDash(strokeState.lineDash);\n                    context.lineDashOffset = strokeState.lineDashOffset;\n                }\n            }\n            if (fillKey) {\n                context.fillStyle = fillState.fillStyle;\n            }\n            context.textBaseline = 'middle';\n            context.textAlign = 'center';\n            var leftRight = (0.5 - align);\n            var x = align * renderWidth + leftRight * strokeWidth;\n            var i = void 0;\n            if (strokeKey) {\n                for (i = 0; i < numLines; ++i) {\n                    context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n                }\n            }\n            if (fillKey) {\n                for (i = 0; i < numLines; ++i) {\n                    context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n                }\n            }\n        }\n        return labelCache.get(key, this);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n     * @param {Array<*>} fillInstruction Fill instruction.\n     * @param {Array<*>} strokeInstruction Stroke instruction.\n     */\n    Executor.prototype.replayTextBackground_ = function (context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n        context.beginPath();\n        context.moveTo.apply(context, p1);\n        context.lineTo.apply(context, p2);\n        context.lineTo.apply(context, p3);\n        context.lineTo.apply(context, p4);\n        context.lineTo.apply(context, p1);\n        if (fillInstruction) {\n            this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n            this.fill_(context);\n        }\n        if (strokeInstruction) {\n            this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n            context.stroke();\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n     * @param {number} anchorX Anchor X.\n     * @param {number} anchorY Anchor Y.\n     * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n     * @param {number} height Height.\n     * @param {number} opacity Opacity.\n     * @param {number} originX Origin X.\n     * @param {number} originY Origin Y.\n     * @param {number} rotation Rotation.\n     * @param {number} scale Scale.\n     * @param {boolean} snapToPixel Snap to pixel.\n     * @param {number} width Width.\n     * @param {Array<number>} padding Padding.\n     * @param {Array<*>} fillInstruction Fill instruction.\n     * @param {Array<*>} strokeInstruction Stroke instruction.\n     */\n    Executor.prototype.replayImage_ = function (context, x, y, image, anchorX, anchorY, declutterGroup, height, opacity, originX, originY, rotation, scale, snapToPixel, width, padding, fillInstruction, strokeInstruction) {\n        var fillStroke = fillInstruction || strokeInstruction;\n        anchorX *= scale;\n        anchorY *= scale;\n        x -= anchorX;\n        y -= anchorY;\n        var w = (width + originX > image.width) ? image.width - originX : width;\n        var h = (height + originY > image.height) ? image.height - originY : height;\n        var boxW = padding[3] + w * scale + padding[1];\n        var boxH = padding[0] + h * scale + padding[2];\n        var boxX = x - padding[3];\n        var boxY = y - padding[0];\n        if (fillStroke || rotation !== 0) {\n            p1[0] = p4[0] = boxX;\n            p1[1] = p2[1] = boxY;\n            p2[0] = p3[0] = boxX + boxW;\n            p3[1] = p4[1] = boxY + boxH;\n        }\n        var transform = null;\n        if (rotation !== 0) {\n            var centerX = x + anchorX;\n            var centerY = y + anchorY;\n            transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n            applyTransform(tmpTransform, p1);\n            applyTransform(tmpTransform, p2);\n            applyTransform(tmpTransform, p3);\n            applyTransform(tmpTransform, p4);\n            createOrUpdate(Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1]), tmpExtent);\n        }\n        else {\n            createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n        }\n        var canvas = context.canvas;\n        var strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n        var intersects = tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n            tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n        if (snapToPixel) {\n            x = Math.round(x);\n            y = Math.round(y);\n        }\n        if (declutterGroup) {\n            if (!intersects && declutterGroup[4] == 1) {\n                return;\n            }\n            extend(declutterGroup, tmpExtent);\n            var declutterArgs = intersects ?\n                [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n                null;\n            if (declutterArgs) {\n                if (fillStroke) {\n                    declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n                }\n                declutterGroup.push(declutterArgs);\n            }\n        }\n        else if (intersects) {\n            if (fillStroke) {\n                this.replayTextBackground_(context, p1, p2, p3, p4, \n                /** @type {Array<*>} */ (fillInstruction), \n                /** @type {Array<*>} */ (strokeInstruction));\n            }\n            drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     */\n    Executor.prototype.fill_ = function (context) {\n        if (this.alignFill_) {\n            var origin_1 = applyTransform(this.renderedTransform_, [0, 0]);\n            var repeatSize = 512 * this.pixelRatio;\n            context.save();\n            context.translate(origin_1[0] % repeatSize, origin_1[1] % repeatSize);\n            context.rotate(this.viewRotation_);\n        }\n        context.fill();\n        if (this.alignFill_) {\n            context.restore();\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {Array<*>} instruction Instruction.\n     */\n    Executor.prototype.setStrokeStyle_ = function (context, instruction) {\n        context.strokeStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n        context.lineWidth = /** @type {number} */ (instruction[2]);\n        context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n        context.miterLimit = /** @type {number} */ (instruction[5]);\n        if (context.setLineDash) {\n            context.lineDashOffset = /** @type {number} */ (instruction[7]);\n            context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {number} opacity Layer opacity.\n     * @param {?} declutterTree Declutter tree.\n     * @return {?} Declutter tree.\n     */\n    Executor.prototype.renderDeclutter = function (declutterGroup, feature, opacity, declutterTree) {\n        if (declutterGroup && declutterGroup.length > 5) {\n            var groupCount = declutterGroup[4];\n            if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n                /** @type {import(\"../../structs/RBush.js\").Entry} */\n                var box = {\n                    minX: /** @type {number} */ (declutterGroup[0]),\n                    minY: /** @type {number} */ (declutterGroup[1]),\n                    maxX: /** @type {number} */ (declutterGroup[2]),\n                    maxY: /** @type {number} */ (declutterGroup[3]),\n                    value: feature\n                };\n                if (!declutterTree) {\n                    declutterTree = new RBush(9);\n                }\n                if (!declutterTree.collides(box)) {\n                    declutterTree.insert(box);\n                    for (var j = 5, jj = declutterGroup.length; j < jj; ++j) {\n                        var declutterData = /** @type {Array} */ (declutterGroup[j]);\n                        var context = declutterData[0];\n                        var currentAlpha = context.globalAlpha;\n                        if (currentAlpha !== opacity) {\n                            context.globalAlpha = opacity;\n                        }\n                        if (declutterData.length > 11) {\n                            this.replayTextBackground_(declutterData[0], declutterData[13], declutterData[14], declutterData[15], declutterData[16], declutterData[11], declutterData[12]);\n                        }\n                        drawImage.apply(undefined, declutterData);\n                        if (currentAlpha !== opacity) {\n                            context.globalAlpha = currentAlpha;\n                        }\n                    }\n                }\n                declutterGroup.length = 5;\n                createOrUpdateEmpty(declutterGroup);\n            }\n        }\n        return declutterTree;\n    };\n    /**\n     * @private\n     * @param {string} text The text to draw.\n     * @param {string} textKey The key of the text state.\n     * @param {string} strokeKey The key for the stroke state.\n     * @param {string} fillKey The key for the fill state.\n     * @return {{label: HTMLCanvasElement, anchorX: number, anchorY: number}} The text image and its anchor.\n     */\n    Executor.prototype.drawTextImageWithPointPlacement_ = function (text, textKey, strokeKey, fillKey) {\n        var textState = this.textStates[textKey];\n        var label = this.getTextImage(text, textKey, fillKey, strokeKey);\n        var strokeState = this.strokeStates[strokeKey];\n        var pixelRatio = this.pixelRatio;\n        var align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n        var baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n        var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n        // Remove the 2 pixels we added in getTextImage() for the anchor\n        var width = label.width / pixelRatio - 2 * textState.scale;\n        var anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n        var anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n        return {\n            label: label,\n            anchorX: anchorX,\n            anchorY: anchorY\n        };\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {Array<*>} instructions Instructions array.\n     * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n     * @param {function(import(\"../../Feature.js\").FeatureLike): T|undefined} featureCallback Feature callback.\n     * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n     *     extent.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    Executor.prototype.execute_ = function (context, transform, instructions, snapToPixel, featureCallback, opt_hitExtent) {\n        this.declutterItems.length = 0;\n        /** @type {Array<number>} */\n        var pixelCoordinates;\n        if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n            pixelCoordinates = this.pixelCoordinates_;\n        }\n        else {\n            if (!this.pixelCoordinates_) {\n                this.pixelCoordinates_ = [];\n            }\n            pixelCoordinates = transform2D(this.coordinates, 0, this.coordinates.length, 2, transform, this.pixelCoordinates_);\n            transformSetFromArray(this.renderedTransform_, transform);\n        }\n        var i = 0; // instruction index\n        var ii = instructions.length; // end of instructions\n        var d = 0; // data index\n        var dd; // end of per-instruction data\n        var anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, declutterGroups, image, text, textKey;\n        var strokeKey, fillKey;\n        var pendingFill = 0;\n        var pendingStroke = 0;\n        var lastFillInstruction = null;\n        var lastStrokeInstruction = null;\n        var coordinateCache = this.coordinateCache_;\n        var viewRotation = this.viewRotation_;\n        var state = /** @type {import(\"../../render.js\").State} */ ({\n            context: context,\n            pixelRatio: this.pixelRatio,\n            resolution: this.resolution,\n            rotation: viewRotation\n        });\n        // When the batch size gets too big, performance decreases. 200 is a good\n        // balance between batch size and number of fill/stroke instructions.\n        var batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n        var /** @type {import(\"../../Feature.js\").FeatureLike} */ feature;\n        var x, y;\n        while (i < ii) {\n            var instruction = instructions[i];\n            var type = /** @type {CanvasInstruction} */ (instruction[0]);\n            switch (type) {\n                case CanvasInstruction.BEGIN_GEOMETRY:\n                    feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n                    if (!feature.getGeometry()) {\n                        i = /** @type {number} */ (instruction[2]);\n                    }\n                    else if (opt_hitExtent !== undefined && !intersects(opt_hitExtent, instruction[3])) {\n                        i = /** @type {number} */ (instruction[2]) + 1;\n                    }\n                    else {\n                        ++i;\n                    }\n                    break;\n                case CanvasInstruction.BEGIN_PATH:\n                    if (pendingFill > batchSize) {\n                        this.fill_(context);\n                        pendingFill = 0;\n                    }\n                    if (pendingStroke > batchSize) {\n                        context.stroke();\n                        pendingStroke = 0;\n                    }\n                    if (!pendingFill && !pendingStroke) {\n                        context.beginPath();\n                        prevX = prevY = NaN;\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.CIRCLE:\n                    d = /** @type {number} */ (instruction[1]);\n                    var x1 = pixelCoordinates[d];\n                    var y1 = pixelCoordinates[d + 1];\n                    var x2 = pixelCoordinates[d + 2];\n                    var y2 = pixelCoordinates[d + 3];\n                    var dx = x2 - x1;\n                    var dy = y2 - y1;\n                    var r = Math.sqrt(dx * dx + dy * dy);\n                    context.moveTo(x1 + r, y1);\n                    context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n                    ++i;\n                    break;\n                case CanvasInstruction.CLOSE_PATH:\n                    context.closePath();\n                    ++i;\n                    break;\n                case CanvasInstruction.CUSTOM:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = instruction[2];\n                    var geometry = /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n                    var renderer = instruction[4];\n                    var fn = instruction.length == 6 ? instruction[5] : undefined;\n                    state.geometry = geometry;\n                    state.feature = feature;\n                    if (!(i in coordinateCache)) {\n                        coordinateCache[i] = [];\n                    }\n                    var coords = coordinateCache[i];\n                    if (fn) {\n                        fn(pixelCoordinates, d, dd, 2, coords);\n                    }\n                    else {\n                        coords[0] = pixelCoordinates[d];\n                        coords[1] = pixelCoordinates[d + 1];\n                        coords.length = 2;\n                    }\n                    renderer(coords, state);\n                    ++i;\n                    break;\n                case CanvasInstruction.DRAW_IMAGE:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = /** @type {number} */ (instruction[2]);\n                    image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */ (instruction[3]);\n                    // Remaining arguments in DRAW_IMAGE are in alphabetical order\n                    anchorX = /** @type {number} */ (instruction[4]);\n                    anchorY = /** @type {number} */ (instruction[5]);\n                    declutterGroups = featureCallback ? null : instruction[6];\n                    var height = /** @type {number} */ (instruction[7]);\n                    var opacity = /** @type {number} */ (instruction[8]);\n                    var originX = /** @type {number} */ (instruction[9]);\n                    var originY = /** @type {number} */ (instruction[10]);\n                    var rotateWithView = /** @type {boolean} */ (instruction[11]);\n                    var rotation = /** @type {number} */ (instruction[12]);\n                    var scale = /** @type {number} */ (instruction[13]);\n                    var width = /** @type {number} */ (instruction[14]);\n                    if (!image && instruction.length >= 19) {\n                        // create label images\n                        text = /** @type {string} */ (instruction[18]);\n                        textKey = /** @type {string} */ (instruction[19]);\n                        strokeKey = /** @type {string} */ (instruction[20]);\n                        fillKey = /** @type {string} */ (instruction[21]);\n                        var labelWithAnchor = this.drawTextImageWithPointPlacement_(text, textKey, strokeKey, fillKey);\n                        image = instruction[3] = labelWithAnchor.label;\n                        var textOffsetX = /** @type {number} */ (instruction[22]);\n                        anchorX = instruction[4] = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n                        var textOffsetY = /** @type {number} */ (instruction[23]);\n                        anchorY = instruction[5] = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n                        height = instruction[7] = image.height;\n                        width = instruction[14] = image.width;\n                    }\n                    var geometryWidths = void 0;\n                    if (instruction.length > 24) {\n                        geometryWidths = /** @type {number} */ (instruction[24]);\n                    }\n                    var padding = void 0, backgroundFill = void 0, backgroundStroke = void 0;\n                    if (instruction.length > 16) {\n                        padding = /** @type {Array<number>} */ (instruction[15]);\n                        backgroundFill = /** @type {boolean} */ (instruction[16]);\n                        backgroundStroke = /** @type {boolean} */ (instruction[17]);\n                    }\n                    else {\n                        padding = defaultPadding;\n                        backgroundFill = backgroundStroke = false;\n                    }\n                    if (rotateWithView) {\n                        rotation += viewRotation;\n                    }\n                    var widthIndex = 0;\n                    var declutterGroupIndex = 0;\n                    for (; d < dd; d += 2) {\n                        if (geometryWidths && geometryWidths[widthIndex++] < width / this.pixelRatio) {\n                            continue;\n                        }\n                        if (declutterGroups) {\n                            var index = Math.floor(declutterGroupIndex);\n                            if (declutterGroups.length < index + 1) {\n                                declutterGroup = createEmpty();\n                                declutterGroup.push(declutterGroups[0][4]);\n                                declutterGroups.push(declutterGroup);\n                            }\n                            declutterGroup = declutterGroups[index];\n                        }\n                        this.replayImage_(context, pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY, declutterGroup, height, opacity, originX, originY, rotation, scale, snapToPixel, width, padding, backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null, backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n                        if (declutterGroup) {\n                            if (declutterGroupIndex === Math.floor(declutterGroupIndex)) {\n                                this.declutterItems.push(this, declutterGroup, feature);\n                            }\n                            declutterGroupIndex += 1 / declutterGroup[4];\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.DRAW_CHARS:\n                    var begin = /** @type {number} */ (instruction[1]);\n                    var end = /** @type {number} */ (instruction[2]);\n                    var baseline = /** @type {number} */ (instruction[3]);\n                    declutterGroup = featureCallback ? null : instruction[4];\n                    var overflow = /** @type {number} */ (instruction[5]);\n                    fillKey = /** @type {string} */ (instruction[6]);\n                    var maxAngle = /** @type {number} */ (instruction[7]);\n                    var measurePixelRatio = /** @type {number} */ (instruction[8]);\n                    var offsetY = /** @type {number} */ (instruction[9]);\n                    strokeKey = /** @type {string} */ (instruction[10]);\n                    var strokeWidth = /** @type {number} */ (instruction[11]);\n                    text = /** @type {string} */ (instruction[12]);\n                    textKey = /** @type {string} */ (instruction[13]);\n                    var pixelRatioScale = /** @type {number} */ (instruction[14]);\n                    var textState = this.textStates[textKey];\n                    var font = textState.font;\n                    var textScale = textState.scale * measurePixelRatio;\n                    var cachedWidths = void 0;\n                    if (font in this.widths_) {\n                        cachedWidths = this.widths_[font];\n                    }\n                    else {\n                        cachedWidths = this.widths_[font] = {};\n                    }\n                    var pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n                    var textLength = textScale * measureAndCacheTextWidth(font, text, cachedWidths);\n                    if (overflow || textLength <= pathLength) {\n                        var textAlign = this.textStates[textKey].textAlign;\n                        var startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n                        var parts = drawTextOnPath(pixelCoordinates, begin, end, 2, text, startM, maxAngle, textScale, measureAndCacheTextWidth, font, cachedWidths);\n                        if (parts) {\n                            var c = void 0, cc = void 0, chars = void 0, label = void 0, part = void 0;\n                            if (strokeKey) {\n                                for (c = 0, cc = parts.length; c < cc; ++c) {\n                                    part = parts[c]; // x, y, anchorX, rotation, chunk\n                                    chars = /** @type {string} */ (part[4]);\n                                    label = this.getTextImage(chars, textKey, '', strokeKey);\n                                    anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                                    anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                                    this.replayImage_(context, \n                                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label, anchorX, anchorY, declutterGroup, label.height, 1, 0, 0, \n                                    /** @type {number} */ (part[3]), pixelRatioScale, false, label.width, defaultPadding, null, null);\n                                }\n                            }\n                            if (fillKey) {\n                                for (c = 0, cc = parts.length; c < cc; ++c) {\n                                    part = parts[c]; // x, y, anchorX, rotation, chunk\n                                    chars = /** @type {string} */ (part[4]);\n                                    label = this.getTextImage(chars, textKey, fillKey, '');\n                                    anchorX = /** @type {number} */ (part[2]);\n                                    anchorY = baseline * label.height - offsetY;\n                                    this.replayImage_(context, \n                                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label, anchorX, anchorY, declutterGroup, label.height, 1, 0, 0, \n                                    /** @type {number} */ (part[3]), pixelRatioScale, false, label.width, defaultPadding, null, null);\n                                }\n                            }\n                        }\n                    }\n                    this.declutterItems.push(this, declutterGroup, feature);\n                    ++i;\n                    break;\n                case CanvasInstruction.END_GEOMETRY:\n                    if (featureCallback !== undefined) {\n                        feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n                        var result = featureCallback(feature);\n                        if (result) {\n                            return result;\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.FILL:\n                    if (batchSize) {\n                        pendingFill++;\n                    }\n                    else {\n                        this.fill_(context);\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.MOVE_TO_LINE_TO:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = /** @type {number} */ (instruction[2]);\n                    x = pixelCoordinates[d];\n                    y = pixelCoordinates[d + 1];\n                    roundX = (x + 0.5) | 0;\n                    roundY = (y + 0.5) | 0;\n                    if (roundX !== prevX || roundY !== prevY) {\n                        context.moveTo(x, y);\n                        prevX = roundX;\n                        prevY = roundY;\n                    }\n                    for (d += 2; d < dd; d += 2) {\n                        x = pixelCoordinates[d];\n                        y = pixelCoordinates[d + 1];\n                        roundX = (x + 0.5) | 0;\n                        roundY = (y + 0.5) | 0;\n                        if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n                            context.lineTo(x, y);\n                            prevX = roundX;\n                            prevY = roundY;\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.SET_FILL_STYLE:\n                    lastFillInstruction = instruction;\n                    this.alignFill_ = instruction[2];\n                    if (pendingFill) {\n                        this.fill_(context);\n                        pendingFill = 0;\n                        if (pendingStroke) {\n                            context.stroke();\n                            pendingStroke = 0;\n                        }\n                    }\n                    context.fillStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n                    ++i;\n                    break;\n                case CanvasInstruction.SET_STROKE_STYLE:\n                    lastStrokeInstruction = instruction;\n                    if (pendingStroke) {\n                        context.stroke();\n                        pendingStroke = 0;\n                    }\n                    this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n                    ++i;\n                    break;\n                case CanvasInstruction.STROKE:\n                    if (batchSize) {\n                        pendingStroke++;\n                    }\n                    else {\n                        context.stroke();\n                    }\n                    ++i;\n                    break;\n                default:\n                    ++i; // consume the instruction anyway, to avoid an infinite loop\n                    break;\n            }\n        }\n        if (pendingFill) {\n            this.fill_(context);\n        }\n        if (pendingStroke) {\n            context.stroke();\n        }\n        return undefined;\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n     */\n    Executor.prototype.execute = function (context, transform, viewRotation, snapToPixel) {\n        this.viewRotation_ = viewRotation;\n        this.execute_(context, transform, this.instructions, snapToPixel, undefined, undefined);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {function(import(\"../../Feature.js\").FeatureLike): T=} opt_featureCallback\n     *     Feature callback.\n     * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n     *     extent.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    Executor.prototype.executeHitDetection = function (context, transform, viewRotation, opt_featureCallback, opt_hitExtent) {\n        this.viewRotation_ = viewRotation;\n        return this.execute_(context, transform, this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n    };\n    return Executor;\n}(Disposable));\nexport default Executor;\n//# sourceMappingURL=Executor.js.map","/**\n * @module ol/render/canvas/ExecutorGroup\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { buffer, createEmpty, extendCoordinate } from '../../extent.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { isEmpty } from '../../obj.js';\nimport BuilderType from './BuilderType.js';\nimport { create as createTransform, compose as composeTransform } from '../../transform.js';\nimport Executor from './Executor.js';\nimport Disposable from '../../Disposable.js';\n/**\n * @const\n * @type {Array<BuilderType>}\n */\nvar ORDER = [\n    BuilderType.POLYGON,\n    BuilderType.CIRCLE,\n    BuilderType.LINE_STRING,\n    BuilderType.IMAGE,\n    BuilderType.TEXT,\n    BuilderType.DEFAULT\n];\nvar ExecutorGroup = /** @class */ (function (_super) {\n    __extends(ExecutorGroup, _super);\n    /**\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n     * `maxExtent` was set on the Buillder for this executor group, the same `maxExtent`\n     * should be set here, unless the target context does not exceet that extent (which\n     * can be the case when rendering to tiles).\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} overlaps The executor group can have overlapping geometries.\n     * @param {!Object<string, !Object<BuilderType, import(\"./Builder.js\").SerializableInstructions>>} allInstructions\n     * The serializable instructions.\n     * @param {number=} opt_renderBuffer Optional rendering buffer.\n     */\n    function ExecutorGroup(maxExtent, resolution, pixelRatio, overlaps, allInstructions, opt_renderBuffer) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overlaps_ = overlaps;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.renderBuffer_ = opt_renderBuffer;\n        /**\n         * @private\n         * @type {!Object<string, !Object<BuilderType, import(\"./Executor\").default>>}\n         */\n        _this.executorsByZIndex_ = {};\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        _this.hitDetectionContext_ = null;\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        _this.hitDetectionTransform_ = createTransform();\n        _this.createExecutors_(allInstructions);\n        return _this;\n    }\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     */\n    ExecutorGroup.prototype.clip = function (context, transform) {\n        var flatClipCoords = this.getClipCoords(transform);\n        context.beginPath();\n        context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n        context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n        context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n        context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n        context.clip();\n    };\n    /**\n     * Create executors and populate them using the provided instructions.\n     * @private\n     * @param {!Object<string, !Object<BuilderType, import(\"./Builder.js\").SerializableInstructions>>} allInstructions The serializable instructions\n     */\n    ExecutorGroup.prototype.createExecutors_ = function (allInstructions) {\n        for (var zIndex in allInstructions) {\n            var executors = this.executorsByZIndex_[zIndex];\n            if (executors === undefined) {\n                this.executorsByZIndex_[zIndex] = executors = {};\n            }\n            var instructionByZindex = allInstructions[zIndex];\n            for (var builderType in instructionByZindex) {\n                var instructions = instructionByZindex[builderType];\n                executors[builderType] = new Executor(this.resolution_, this.pixelRatio_, this.overlaps_, instructions);\n            }\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    ExecutorGroup.prototype.disposeInternal = function () {\n        for (var z in this.executorsByZIndex_) {\n            var executors = this.executorsByZIndex_[z];\n            for (var key in executors) {\n                executors[key].disposeInternal();\n            }\n        }\n        if (this.hitDetectionContext_) {\n            var canvas = this.hitDetectionContext_.canvas;\n            canvas.width = canvas.height = 0;\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * @param {Array<BuilderType>} executors Executors.\n     * @return {boolean} Has executors of the provided types.\n     */\n    ExecutorGroup.prototype.hasExecutors = function (executors) {\n        for (var zIndex in this.executorsByZIndex_) {\n            var candidates = this.executorsByZIndex_[zIndex];\n            for (var i = 0, ii = executors.length; i < ii; ++i) {\n                if (executors[i] in candidates) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../../Feature.js\").FeatureLike): T} callback Feature callback.\n     * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    ExecutorGroup.prototype.forEachFeatureAtCoordinate = function (coordinate, resolution, rotation, hitTolerance, callback, declutteredFeatures) {\n        hitTolerance = Math.round(hitTolerance);\n        var contextSize = hitTolerance * 2 + 1;\n        var transform = composeTransform(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);\n        if (!this.hitDetectionContext_) {\n            this.hitDetectionContext_ = createCanvasContext2D(contextSize, contextSize);\n        }\n        var context = this.hitDetectionContext_;\n        if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n            context.canvas.width = contextSize;\n            context.canvas.height = contextSize;\n        }\n        else {\n            context.clearRect(0, 0, contextSize, contextSize);\n        }\n        /**\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        var hitExtent;\n        if (this.renderBuffer_ !== undefined) {\n            hitExtent = createEmpty();\n            extendCoordinate(hitExtent, coordinate);\n            buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n        }\n        var mask = getCircleArray(hitTolerance);\n        var builderType;\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @return {?} Callback result.\n         */\n        function featureCallback(feature) {\n            var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n            for (var i_1 = 0; i_1 < contextSize; i_1++) {\n                for (var j_1 = 0; j_1 < contextSize; j_1++) {\n                    if (mask[i_1][j_1]) {\n                        if (imageData[(j_1 * contextSize + i_1) * 4 + 3] > 0) {\n                            var result_1 = void 0;\n                            if (!(declutteredFeatures && (builderType == BuilderType.IMAGE || builderType == BuilderType.TEXT)) ||\n                                declutteredFeatures.indexOf(feature) !== -1) {\n                                result_1 = callback(feature);\n                            }\n                            if (result_1) {\n                                return result_1;\n                            }\n                            else {\n                                context.clearRect(0, 0, contextSize, contextSize);\n                                return undefined;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        /** @type {Array<number>} */\n        var zs = Object.keys(this.executorsByZIndex_).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        var i, j, executors, executor, result;\n        for (i = zs.length - 1; i >= 0; --i) {\n            var zIndexKey = zs[i].toString();\n            executors = this.executorsByZIndex_[zIndexKey];\n            for (j = ORDER.length - 1; j >= 0; --j) {\n                builderType = ORDER[j];\n                executor = executors[builderType];\n                if (executor !== undefined) {\n                    result = executor.executeHitDetection(context, transform, rotation, featureCallback, hitExtent);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @return {Array<number>} Clip coordinates.\n     */\n    ExecutorGroup.prototype.getClipCoords = function (transform) {\n        var maxExtent = this.maxExtent_;\n        if (!maxExtent) {\n            return null;\n        }\n        var minX = maxExtent[0];\n        var minY = maxExtent[1];\n        var maxX = maxExtent[2];\n        var maxY = maxExtent[3];\n        var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n        transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n        return flatClipCoords;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    ExecutorGroup.prototype.isEmpty = function () {\n        return isEmpty(this.executorsByZIndex_);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n     * @param {Array<BuilderType>=} opt_builderTypes Ordered replay types to replay.\n     *     Default is {@link module:ol/render/replay~ORDER}\n     * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>=} opt_declutterReplays Declutter replays.\n     */\n    ExecutorGroup.prototype.execute = function (context, transform, viewRotation, snapToPixel, opt_builderTypes, opt_declutterReplays) {\n        /** @type {Array<number>} */\n        var zs = Object.keys(this.executorsByZIndex_).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        // setup clipping so that the parts of over-simplified geometries are not\n        // visible outside the current extent when panning\n        if (this.maxExtent_) {\n            context.save();\n            this.clip(context, transform);\n        }\n        var builderTypes = opt_builderTypes ? opt_builderTypes : ORDER;\n        var i, ii, j, jj, replays, replay;\n        for (i = 0, ii = zs.length; i < ii; ++i) {\n            var zIndexKey = zs[i].toString();\n            replays = this.executorsByZIndex_[zIndexKey];\n            for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n                var builderType = builderTypes[j];\n                replay = replays[builderType];\n                if (replay !== undefined) {\n                    if (opt_declutterReplays &&\n                        (builderType == BuilderType.IMAGE || builderType == BuilderType.TEXT)) {\n                        var declutter = opt_declutterReplays[zIndexKey];\n                        if (!declutter) {\n                            opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n                        }\n                        else {\n                            declutter.push(replay, transform.slice(0));\n                        }\n                    }\n                    else {\n                        replay.execute(context, transform, viewRotation, snapToPixel);\n                    }\n                }\n            }\n        }\n        if (this.maxExtent_) {\n            context.restore();\n        }\n    };\n    return ExecutorGroup;\n}(Disposable));\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nvar circleArrayCache = {\n    0: [[true]]\n};\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n    var i;\n    var radius = Math.floor(array.length / 2);\n    if (x >= radius) {\n        for (i = radius; i < x; i++) {\n            array[i][y] = true;\n        }\n    }\n    else if (x < radius) {\n        for (i = x + 1; i < radius; i++) {\n            array[i][y] = true;\n        }\n    }\n}\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n    if (circleArrayCache[radius] !== undefined) {\n        return circleArrayCache[radius];\n    }\n    var arraySize = radius * 2 + 1;\n    var arr = new Array(arraySize);\n    for (var i = 0; i < arraySize; i++) {\n        arr[i] = new Array(arraySize);\n    }\n    var x = radius;\n    var y = 0;\n    var error = 0;\n    while (x >= y) {\n        fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n        fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n        fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n        fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n        fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n        fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n        fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n        fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n        y++;\n        error += 1 + 2 * y;\n        if (2 * (error - x) + 1 > 0) {\n            x -= 1;\n            error += 1 - 2 * x;\n        }\n    }\n    circleArrayCache[radius] = arr;\n    return arr;\n}\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} opacity Opacity.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n * @param {Array<import(\"../../PluggableMap.js\").DeclutterItems>} declutterItems Declutter items.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, opacity, snapToPixel, declutterItems) {\n    var zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n    for (var z = 0, zz = zs.length; z < zz; ++z) {\n        var executorData = declutterReplays[zs[z].toString()];\n        var currentExecutor = void 0;\n        for (var i = 0, ii = executorData.length; i < ii;) {\n            var executor = executorData[i++];\n            if (executor !== currentExecutor) {\n                currentExecutor = executor;\n                declutterItems.push({\n                    items: executor.declutterItems,\n                    opacity: opacity\n                });\n            }\n            var transform = executorData[i++];\n            executor.execute(context, transform, rotation, snapToPixel);\n        }\n    }\n}\nexport default ExecutorGroup;\n//# sourceMappingURL=ExecutorGroup.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Overlay\n */\nimport MapEventType from './MapEventType.js';\nimport BaseObject, { getChangeEventType } from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport { CLASS_SELECTABLE } from './css.js';\nimport { removeNode, removeChildren, outerWidth, outerHeight } from './dom.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { containsExtent } from './extent.js';\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\n * calling `setPosition`, so that the overlay is entirely visible in the current\n * viewport.\n * @property {PanOptions} [autoPanAnimation] The\n * animation options used to pan the overlay into view. This animation is only\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\n * customize the animation.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n/**\n * @enum {string}\n * @protected\n */\nvar Property = {\n    ELEMENT: 'element',\n    MAP: 'map',\n    OFFSET: 'offset',\n    POSITION: 'position',\n    POSITIONING: 'positioning'\n};\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nvar Overlay = /** @class */ (function (_super) {\n    __extends(Overlay, _super);\n    /**\n     * @param {Options} options Overlay options.\n     */\n    function Overlay(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {Options}\n         */\n        _this.options = options;\n        /**\n         * @protected\n         * @type {number|string|undefined}\n         */\n        _this.id = options.id;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.insertFirst = options.insertFirst !== undefined ?\n            options.insertFirst : true;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = document.createElement('div');\n        _this.element.className = options.className !== undefined ?\n            options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n        _this.element.style.position = 'absolute';\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n        /**\n         * @protected\n         * @type {PanOptions}\n         */\n        _this.autoPanAnimation = options.autoPanAnimation || /** @type {PanOptions} */ ({});\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.autoPanMargin = options.autoPanMargin !== undefined ?\n            options.autoPanMargin : 20;\n        /**\n         * @protected\n         * @type {{bottom_: string,\n         *         left_: string,\n         *         right_: string,\n         *         top_: string,\n         *         visible: boolean}}\n         */\n        _this.rendered = {\n            bottom_: '',\n            left_: '',\n            right_: '',\n            top_: '',\n            visible: true\n        };\n        /**\n         * @protected\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.mapPostrenderListenerKey = null;\n        _this.addEventListener(getChangeEventType(Property.ELEMENT), _this.handleElementChanged);\n        _this.addEventListener(getChangeEventType(Property.MAP), _this.handleMapChanged);\n        _this.addEventListener(getChangeEventType(Property.OFFSET), _this.handleOffsetChanged);\n        _this.addEventListener(getChangeEventType(Property.POSITION), _this.handlePositionChanged);\n        _this.addEventListener(getChangeEventType(Property.POSITIONING), _this.handlePositioningChanged);\n        if (options.element !== undefined) {\n            _this.setElement(options.element);\n        }\n        _this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n        _this.setPositioning(options.positioning !== undefined ?\n            /** @type {OverlayPositioning} */ (options.positioning) :\n            OverlayPositioning.TOP_LEFT);\n        if (options.position !== undefined) {\n            _this.setPosition(options.position);\n        }\n        return _this;\n    }\n    /**\n     * Get the DOM element of this overlay.\n     * @return {HTMLElement|undefined} The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getElement = function () {\n        return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n    };\n    /**\n     * Get the overlay identifier which is set on constructor.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Overlay.prototype.getId = function () {\n        return this.id;\n    };\n    /**\n     * Get the map associated with this overlay.\n     * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getMap = function () {\n        return (\n        /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP)));\n    };\n    /**\n     * Get the offset of this overlay.\n     * @return {Array<number>} The offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getOffset = function () {\n        return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n    };\n    /**\n     * Get the current position of this overlay.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n     *     anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPosition = function () {\n        return (\n        /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION)));\n    };\n    /**\n     * Get the current positioning of this overlay.\n     * @return {OverlayPositioning} How the overlay is positioned\n     *     relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPositioning = function () {\n        return (\n        /** @type {OverlayPositioning} */ (this.get(Property.POSITIONING)));\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleElementChanged = function () {\n        removeChildren(this.element);\n        var element = this.getElement();\n        if (element) {\n            this.element.appendChild(element);\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleMapChanged = function () {\n        if (this.mapPostrenderListenerKey) {\n            removeNode(this.element);\n            unlistenByKey(this.mapPostrenderListenerKey);\n            this.mapPostrenderListenerKey = null;\n        }\n        var map = this.getMap();\n        if (map) {\n            this.mapPostrenderListenerKey = listen(map, MapEventType.POSTRENDER, this.render, this);\n            this.updatePixelPosition();\n            var container = this.stopEvent ?\n                map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n            if (this.insertFirst) {\n                container.insertBefore(this.element, container.childNodes[0] || null);\n            }\n            else {\n                container.appendChild(this.element);\n            }\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.render = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleOffsetChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositionChanged = function () {\n        this.updatePixelPosition();\n        if (this.get(Property.POSITION) && this.autoPan) {\n            this.panIntoView();\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositioningChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * Set the DOM element to be associated with this overlay.\n     * @param {HTMLElement|undefined} element The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setElement = function (element) {\n        this.set(Property.ELEMENT, element);\n    };\n    /**\n     * Set the map to be associated with this overlay.\n     * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setMap = function (map) {\n        this.set(Property.MAP, map);\n    };\n    /**\n     * Set the offset for this overlay.\n     * @param {Array<number>} offset Offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setOffset = function (offset) {\n        this.set(Property.OFFSET, offset);\n    };\n    /**\n     * Set the position for this overlay. If the position is `undefined` the\n     * overlay is hidden.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n     *     is anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPosition = function (position) {\n        this.set(Property.POSITION, position);\n    };\n    /**\n     * Pan the map so that the overlay is entirely visible in the current viewport\n     * (if necessary).\n     * @protected\n     */\n    Overlay.prototype.panIntoView = function () {\n        var map = this.getMap();\n        if (!map || !map.getTargetElement()) {\n            return;\n        }\n        var mapRect = this.getRect(map.getTargetElement(), map.getSize());\n        var element = this.getElement();\n        var overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n        var margin = this.autoPanMargin;\n        if (!containsExtent(mapRect, overlayRect)) {\n            // the overlay is not completely inside the viewport, so pan the map\n            var offsetLeft = overlayRect[0] - mapRect[0];\n            var offsetRight = mapRect[2] - overlayRect[2];\n            var offsetTop = overlayRect[1] - mapRect[1];\n            var offsetBottom = mapRect[3] - overlayRect[3];\n            var delta = [0, 0];\n            if (offsetLeft < 0) {\n                // move map to the left\n                delta[0] = offsetLeft - margin;\n            }\n            else if (offsetRight < 0) {\n                // move map to the right\n                delta[0] = Math.abs(offsetRight) + margin;\n            }\n            if (offsetTop < 0) {\n                // move map up\n                delta[1] = offsetTop - margin;\n            }\n            else if (offsetBottom < 0) {\n                // move map down\n                delta[1] = Math.abs(offsetBottom) + margin;\n            }\n            if (delta[0] !== 0 || delta[1] !== 0) {\n                var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenterInternal());\n                var centerPx = map.getPixelFromCoordinateInternal(center);\n                var newCenterPx = [\n                    centerPx[0] + delta[0],\n                    centerPx[1] + delta[1]\n                ];\n                map.getView().animateInternal({\n                    center: map.getCoordinateFromPixelInternal(newCenterPx),\n                    duration: this.autoPanAnimation.duration,\n                    easing: this.autoPanAnimation.easing\n                });\n            }\n        }\n    };\n    /**\n     * Get the extent of an element relative to the document\n     * @param {HTMLElement} element The element.\n     * @param {import(\"./size.js\").Size} size The size of the element.\n     * @return {import(\"./extent.js\").Extent} The extent.\n     * @protected\n     */\n    Overlay.prototype.getRect = function (element, size) {\n        var box = element.getBoundingClientRect();\n        var offsetX = box.left + window.pageXOffset;\n        var offsetY = box.top + window.pageYOffset;\n        return [\n            offsetX,\n            offsetY,\n            offsetX + size[0],\n            offsetY + size[1]\n        ];\n    };\n    /**\n     * Set the positioning for this overlay.\n     * @param {OverlayPositioning} positioning how the overlay is\n     *     positioned relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPositioning = function (positioning) {\n        this.set(Property.POSITIONING, positioning);\n    };\n    /**\n     * Modify the visibility of the element.\n     * @param {boolean} visible Element visibility.\n     * @protected\n     */\n    Overlay.prototype.setVisible = function (visible) {\n        if (this.rendered.visible !== visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.rendered.visible = visible;\n        }\n    };\n    /**\n     * Update pixel position.\n     * @protected\n     */\n    Overlay.prototype.updatePixelPosition = function () {\n        var map = this.getMap();\n        var position = this.getPosition();\n        if (!map || !map.isRendered() || !position) {\n            this.setVisible(false);\n            return;\n        }\n        var pixel = map.getPixelFromCoordinate(position);\n        var mapSize = map.getSize();\n        this.updateRenderedPosition(pixel, mapSize);\n    };\n    /**\n     * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n     * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n     * @protected\n     */\n    Overlay.prototype.updateRenderedPosition = function (pixel, mapSize) {\n        var style = this.element.style;\n        var offset = this.getOffset();\n        var positioning = this.getPositioning();\n        this.setVisible(true);\n        var offsetX = offset[0];\n        var offsetY = offset[1];\n        if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n            positioning == OverlayPositioning.CENTER_RIGHT ||\n            positioning == OverlayPositioning.TOP_RIGHT) {\n            if (this.rendered.left_ !== '') {\n                this.rendered.left_ = style.left = '';\n            }\n            var right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n            if (this.rendered.right_ != right) {\n                this.rendered.right_ = style.right = right;\n            }\n        }\n        else {\n            if (this.rendered.right_ !== '') {\n                this.rendered.right_ = style.right = '';\n            }\n            if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n                positioning == OverlayPositioning.CENTER_CENTER ||\n                positioning == OverlayPositioning.TOP_CENTER) {\n                offsetX -= this.element.offsetWidth / 2;\n            }\n            var left = Math.round(pixel[0] + offsetX) + 'px';\n            if (this.rendered.left_ != left) {\n                this.rendered.left_ = style.left = left;\n            }\n        }\n        if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n            positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.BOTTOM_RIGHT) {\n            if (this.rendered.top_ !== '') {\n                this.rendered.top_ = style.top = '';\n            }\n            var bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n            if (this.rendered.bottom_ != bottom) {\n                this.rendered.bottom_ = style.bottom = bottom;\n            }\n        }\n        else {\n            if (this.rendered.bottom_ !== '') {\n                this.rendered.bottom_ = style.bottom = '';\n            }\n            if (positioning == OverlayPositioning.CENTER_LEFT ||\n                positioning == OverlayPositioning.CENTER_CENTER ||\n                positioning == OverlayPositioning.CENTER_RIGHT) {\n                offsetY -= this.element.offsetHeight / 2;\n            }\n            var top_1 = Math.round(pixel[1] + offsetY) + 'px';\n            if (this.rendered.top_ != top_1) {\n                this.rendered.top_ = style.top = top_1;\n            }\n        }\n    };\n    /**\n     * returns the options this Overlay has been created with\n     * @return {Options} overlay options\n     */\n    Overlay.prototype.getOptions = function () {\n        return this.options;\n    };\n    return Overlay;\n}(BaseObject));\nexport default Overlay;\n//# sourceMappingURL=Overlay.js.map","/**\n * @module ol/OverlayPositioning\n */\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_CENTER: 'bottom-center',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER_LEFT: 'center-left',\n    CENTER_CENTER: 'center-center',\n    CENTER_RIGHT: 'center-right',\n    TOP_LEFT: 'top-left',\n    TOP_CENTER: 'top-center',\n    TOP_RIGHT: 'top-right'\n};\n//# sourceMappingURL=OverlayPositioning.js.map","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n/**\n * @module ol/sphere\n */\nimport { toRadians, toDegrees } from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the\n * [mean Earth radius](https://en.wikipedia.org/wiki/Earth_radius#Mean_radius)\n * for the WGS84 ellipsoid is used.\n */\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport var DEFAULT_RADIUS = 6371008.8;\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n    var radius = opt_radius || DEFAULT_RADIUS;\n    var lat1 = toRadians(c1[1]);\n    var lat2 = toRadians(c2[1]);\n    var deltaLatBy2 = (lat2 - lat1) / 2;\n    var deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n    var a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n        Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n            Math.cos(lat1) * Math.cos(lat2);\n    return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n    var length = 0;\n    for (var i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n        length += getDistance(coordinates[i], coordinates[i + 1], radius);\n    }\n    return length;\n}\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n    var options = opt_options || {};\n    var radius = options.radius || DEFAULT_RADIUS;\n    var projection = options.projection || 'EPSG:3857';\n    var type = geometry.getType();\n    if (type !== GeometryType.GEOMETRY_COLLECTION) {\n        geometry = geometry.clone().transform(projection, 'EPSG:4326');\n    }\n    var length = 0;\n    var coordinates, coords, i, ii, j, jj;\n    switch (type) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT: {\n            break;\n        }\n        case GeometryType.LINE_STRING:\n        case GeometryType.LINEAR_RING: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            length = getLengthInternal(coordinates, radius);\n            break;\n        }\n        case GeometryType.MULTI_LINE_STRING:\n        case GeometryType.POLYGON: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                length += getLengthInternal(coordinates[i], radius);\n            }\n            break;\n        }\n        case GeometryType.MULTI_POLYGON: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                coords = coordinates[i];\n                for (j = 0, jj = coords.length; j < jj; ++j) {\n                    length += getLengthInternal(coords[j], radius);\n                }\n            }\n            break;\n        }\n        case GeometryType.GEOMETRY_COLLECTION: {\n            var geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n            for (i = 0, ii = geometries.length; i < ii; ++i) {\n                length += getLength(geometries[i], opt_options);\n            }\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return length;\n}\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n    var area = 0;\n    var len = coordinates.length;\n    var x1 = coordinates[len - 1][0];\n    var y1 = coordinates[len - 1][1];\n    for (var i = 0; i < len; i++) {\n        var x2 = coordinates[i][0];\n        var y2 = coordinates[i][1];\n        area += toRadians(x2 - x1) *\n            (2 + Math.sin(toRadians(y1)) +\n                Math.sin(toRadians(y2)));\n        x1 = x2;\n        y1 = y2;\n    }\n    return area * radius * radius / 2.0;\n}\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n    var options = opt_options || {};\n    var radius = options.radius || DEFAULT_RADIUS;\n    var projection = options.projection || 'EPSG:3857';\n    var type = geometry.getType();\n    if (type !== GeometryType.GEOMETRY_COLLECTION) {\n        geometry = geometry.clone().transform(projection, 'EPSG:4326');\n    }\n    var area = 0;\n    var coordinates, coords, i, ii, j, jj;\n    switch (type) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n        case GeometryType.LINE_STRING:\n        case GeometryType.MULTI_LINE_STRING:\n        case GeometryType.LINEAR_RING: {\n            break;\n        }\n        case GeometryType.POLYGON: {\n            coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (geometry).getCoordinates();\n            area = Math.abs(getAreaInternal(coordinates[0], radius));\n            for (i = 1, ii = coordinates.length; i < ii; ++i) {\n                area -= Math.abs(getAreaInternal(coordinates[i], radius));\n            }\n            break;\n        }\n        case GeometryType.MULTI_POLYGON: {\n            coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n            for (i = 0, ii = coordinates.length; i < ii; ++i) {\n                coords = coordinates[i];\n                area += Math.abs(getAreaInternal(coords[0], radius));\n                for (j = 1, jj = coords.length; j < jj; ++j) {\n                    area -= Math.abs(getAreaInternal(coords[j], radius));\n                }\n            }\n            break;\n        }\n        case GeometryType.GEOMETRY_COLLECTION: {\n            var geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n            for (i = 0, ii = geometries.length; i < ii; ++i) {\n                area += getArea(geometries[i], opt_options);\n            }\n            break;\n        }\n        default: {\n            throw new Error('Unsupported geometry type: ' + type);\n        }\n    }\n    return area;\n}\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n    var radius = opt_radius || DEFAULT_RADIUS;\n    var lat1 = toRadians(c1[1]);\n    var lon1 = toRadians(c1[0]);\n    var dByR = distance / radius;\n    var lat = Math.asin(Math.sin(lat1) * Math.cos(dByR) +\n        Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n    var lon = lon1 + Math.atan2(Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1), Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n    return [toDegrees(lon), toDegrees(lat)];\n}\n//# sourceMappingURL=sphere.js.map","/**\n * @module ol/tilegrid/TileGrid\n */\nimport { DEFAULT_TILE_SIZE } from './common.js';\nimport { assert } from '../asserts.js';\nimport TileRange, { createOrUpdate as createOrUpdateTileRange } from '../TileRange.js';\nimport { isSorted, linearFindNearest } from '../array.js';\nimport { createOrUpdate, getTopLeft } from '../extent.js';\nimport { clamp } from '../math.js';\nimport { toSize } from '../size.js';\nimport { createOrUpdate as createOrUpdateTileCoord } from '../tilecoord.js';\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nvar tmpTileCoord = [0, 0, 0];\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and upwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and upwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Sizes.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nvar TileGrid = /** @class */ (function () {\n    /**\n     * @param {Options} options Tile grid options.\n     */\n    function TileGrid(options) {\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n        /**\n         * @private\n         * @type {!Array<number>}\n         */\n        this.resolutions_ = options.resolutions;\n        assert(isSorted(this.resolutions_, function (a, b) {\n            return b - a;\n        }, true), 17); // `resolutions` must be sorted in descending order\n        // check if we've got a consistent zoom factor and origin\n        var zoomFactor;\n        if (!options.origins) {\n            for (var i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n                if (!zoomFactor) {\n                    zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n                }\n                else {\n                    if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n                        zoomFactor = undefined;\n                        break;\n                    }\n                }\n            }\n        }\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zoomFactor_ = zoomFactor;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.maxZoom = this.resolutions_.length - 1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        this.origin_ = options.origin !== undefined ? options.origin : null;\n        /**\n         * @private\n         * @type {Array<import(\"../coordinate.js\").Coordinate>}\n         */\n        this.origins_ = null;\n        if (options.origins !== undefined) {\n            this.origins_ = options.origins;\n            assert(this.origins_.length == this.resolutions_.length, 20); // Number of `origins` and `resolutions` must be equal\n        }\n        var extent = options.extent;\n        if (extent !== undefined &&\n            !this.origin_ && !this.origins_) {\n            this.origin_ = getTopLeft(extent);\n        }\n        assert((!this.origin_ && this.origins_) || (this.origin_ && !this.origins_), 18); // Either `origin` or `origins` must be configured, never both\n        /**\n         * @private\n         * @type {Array<number|import(\"../size.js\").Size>}\n         */\n        this.tileSizes_ = null;\n        if (options.tileSizes !== undefined) {\n            this.tileSizes_ = options.tileSizes;\n            assert(this.tileSizes_.length == this.resolutions_.length, 19); // Number of `tileSizes` and `resolutions` must be equal\n        }\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.tileSize_ = options.tileSize !== undefined ?\n            options.tileSize :\n            !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n        assert((!this.tileSize_ && this.tileSizes_) ||\n            (this.tileSize_ && !this.tileSizes_), 22); // Either `tileSize` or `tileSizes` must be configured, never both\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = extent !== undefined ? extent : null;\n        /**\n         * @private\n         * @type {Array<import(\"../TileRange.js\").default>}\n         */\n        this.fullTileRanges_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.tmpSize_ = [0, 0];\n        if (options.sizes !== undefined) {\n            this.fullTileRanges_ = options.sizes.map(function (size, z) {\n                var tileRange = new TileRange(Math.min(0, size[0]), Math.max(size[0] - 1, -1), Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n                return tileRange;\n            }, this);\n        }\n        else if (extent) {\n            this.calculateTileRanges_(extent);\n        }\n    }\n    /**\n     * Call a function with each tile coordinate for a given extent and zoom level.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} zoom Integer zoom level.\n     * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.forEachTileCoord = function (extent, zoom, callback) {\n        var tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n        for (var i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n            for (var j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n                callback([zoom, i, j]);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {boolean} Callback succeeded.\n     */\n    TileGrid.prototype.forEachTileCoordParentTileRange = function (tileCoord, callback, opt_tileRange, opt_extent) {\n        var tileRange, x, y;\n        var tileCoordExtent = null;\n        var z = tileCoord[0] - 1;\n        if (this.zoomFactor_ === 2) {\n            x = tileCoord[1];\n            y = tileCoord[2];\n        }\n        else {\n            tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n        }\n        while (z >= this.minZoom) {\n            if (this.zoomFactor_ === 2) {\n                x = Math.floor(x / 2);\n                y = Math.floor(y / 2);\n                tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n            }\n            else {\n                tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n            }\n            if (callback(z, tileRange)) {\n                return true;\n            }\n            --z;\n        }\n        return false;\n    };\n    /**\n     * Get the extent for this tile grid, if it was configured.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the maximum zoom level for the grid.\n     * @return {number} Max zoom.\n     * @api\n     */\n    TileGrid.prototype.getMaxZoom = function () {\n        return this.maxZoom;\n    };\n    /**\n     * Get the minimum zoom level for the grid.\n     * @return {number} Min zoom.\n     * @api\n     */\n    TileGrid.prototype.getMinZoom = function () {\n        return this.minZoom;\n    };\n    /**\n     * Get the origin for the grid at the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {import(\"../coordinate.js\").Coordinate} Origin.\n     * @api\n     */\n    TileGrid.prototype.getOrigin = function (z) {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        else {\n            return this.origins_[z];\n        }\n    };\n    /**\n     * Get the resolution for the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {number} Resolution.\n     * @api\n     */\n    TileGrid.prototype.getResolution = function (z) {\n        return this.resolutions_[z];\n    };\n    /**\n     * Get the list of resolutions for the tile grid.\n     * @return {Array<number>} Resolutions.\n     * @api\n     */\n    TileGrid.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileCoordChildTileRange = function (tileCoord, opt_tileRange, opt_extent) {\n        if (tileCoord[0] < this.maxZoom) {\n            if (this.zoomFactor_ === 2) {\n                var minX = tileCoord[1] * 2;\n                var minY = tileCoord[2] * 2;\n                return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n            }\n            var tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n            return this.getTileRangeForExtentAndZ(tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n        }\n        return null;\n    };\n    /**\n     * Get the extent for a tile range.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    TileGrid.prototype.getTileRangeExtent = function (z, tileRange, opt_extent) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n        var maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n        var minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n        var maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get a tile range for the given extent and integer zoom level.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileRangeForExtentAndZ = function (extent, z, opt_tileRange) {\n        var tileCoord = tmpTileCoord;\n        this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n        var minX = tileCoord[1];\n        var minY = tileCoord[2];\n        this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n        return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n     */\n    TileGrid.prototype.getTileCoordCenter = function (tileCoord) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        return [\n            origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n            origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution\n        ];\n    };\n    /**\n     * Get the extent of a tile coordinate.\n     *\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordExtent = function (tileCoord, opt_extent) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        var minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n        var minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n        var maxX = minX + tileSize[0] * resolution;\n        var maxY = minY + tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get the tile coordinate for the given map coordinate and resolution.  This\n     * method considers that coordinates that intersect tile boundaries should be\n     * assigned the higher tile coordinate.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndResolution = function (coordinate, resolution, opt_tileCoord) {\n        return this.getTileCoordForXYAndResolution_(coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n    };\n    /**\n     * Note that this method should not be called for resolutions that correspond\n     * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {number} resolution Resolution (for a non-integer zoom level).\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndResolution_ = function (x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n        var z = this.getZForResolution(resolution);\n        var scale = resolution / this.getResolution(z);\n        var origin = this.getOrigin(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = scale * xFromOrigin / tileSize[0];\n        var tileCoordY = scale * yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n     * they should have separate implementations.  This method is for integer zoom\n     * levels.  The other method should only be called for resolutions corresponding\n     * to non-integer zoom levels.\n     * @param {number} x Map x coordinate.\n     * @param {number} y Map y coordinate.\n     * @param {number} z Integer zoom level.\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndZ_ = function (x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = xFromOrigin / tileSize[0];\n        var tileCoordY = yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Get a tile coordinate given a map coordinate and zoom level.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} z Zoom level.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndZ = function (coordinate, z, opt_tileCoord) {\n        return this.getTileCoordForXYAndZ_(coordinate[0], coordinate[1], z, false, opt_tileCoord);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {number} Tile resolution.\n     */\n    TileGrid.prototype.getTileCoordResolution = function (tileCoord) {\n        return this.resolutions_[tileCoord[0]];\n    };\n    /**\n     * Get the tile size for a zoom level. The type of the return value matches the\n     * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n     * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n     * @param {number} z Z.\n     * @return {number|import(\"../size.js\").Size} Tile size.\n     * @api\n     */\n    TileGrid.prototype.getTileSize = function (z) {\n        if (this.tileSize_) {\n            return this.tileSize_;\n        }\n        else {\n            return this.tileSizes_[z];\n        }\n    };\n    /**\n     * @param {number} z Zoom level.\n     * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n     */\n    TileGrid.prototype.getFullTileRange = function (z) {\n        if (!this.fullTileRanges_) {\n            return null;\n        }\n        else {\n            return this.fullTileRanges_[z];\n        }\n    };\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number=} opt_direction If 0, the nearest resolution will be used.\n     *     If 1, the nearest lower resolution will be used. If -1, the nearest\n     *     higher resolution will be used. Default is 0.\n     * @return {number} Z.\n     * @api\n     */\n    TileGrid.prototype.getZForResolution = function (resolution, opt_direction) {\n        var z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n        return clamp(z, this.minZoom, this.maxZoom);\n    };\n    /**\n     * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n     * @private\n     */\n    TileGrid.prototype.calculateTileRanges_ = function (extent) {\n        var length = this.resolutions_.length;\n        var fullTileRanges = new Array(length);\n        for (var z = this.minZoom; z < length; ++z) {\n            fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n        }\n        this.fullTileRanges_ = fullTileRanges;\n    };\n    return TileGrid;\n}());\nexport default TileGrid;\n//# sourceMappingURL=TileGrid.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Circle\n */\nimport { createOrUpdate, forEachCorner, intersects } from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { deflateCoordinate } from './flat/deflate.js';\nimport { rotate, translate } from './flat/transform.js';\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    /**\n     * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n     *     For internal use, flat coordinates in combination with `opt_layout` and no\n     *     `opt_radius` are also accepted.\n     * @param {number=} opt_radius Radius.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     */\n    function Circle(center, opt_radius, opt_layout) {\n        var _this = _super.call(this) || this;\n        if (opt_layout !== undefined && opt_radius === undefined) {\n            _this.setFlatCoordinates(opt_layout, center);\n        }\n        else {\n            var radius = opt_radius ? opt_radius : 0;\n            _this.setCenterAndRadius(center, radius, opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Circle} Clone.\n     * @override\n     * @api\n     */\n    Circle.prototype.clone = function () {\n        return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        var flatCoordinates = this.flatCoordinates;\n        var dx = x - flatCoordinates[0];\n        var dy = y - flatCoordinates[1];\n        var squaredDistance = dx * dx + dy * dy;\n        if (squaredDistance < minSquaredDistance) {\n            if (squaredDistance === 0) {\n                for (var i = 0; i < this.stride; ++i) {\n                    closestPoint[i] = flatCoordinates[i];\n                }\n            }\n            else {\n                var delta = this.getRadius() / Math.sqrt(squaredDistance);\n                closestPoint[0] = flatCoordinates[0] + delta * dx;\n                closestPoint[1] = flatCoordinates[1] + delta * dy;\n                for (var i = 2; i < this.stride; ++i) {\n                    closestPoint[i] = flatCoordinates[i];\n                }\n            }\n            closestPoint.length = this.stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.containsXY = function (x, y) {\n        var flatCoordinates = this.flatCoordinates;\n        var dx = x - flatCoordinates[0];\n        var dy = y - flatCoordinates[1];\n        return dx * dx + dy * dy <= this.getRadiusSquared_();\n    };\n    /**\n     * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n     * @return {import(\"../coordinate.js\").Coordinate} Center.\n     * @api\n     */\n    Circle.prototype.getCenter = function () {\n        return this.flatCoordinates.slice(0, this.stride);\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.computeExtent = function (extent) {\n        var flatCoordinates = this.flatCoordinates;\n        var radius = flatCoordinates[this.stride] - flatCoordinates[0];\n        return createOrUpdate(flatCoordinates[0] - radius, flatCoordinates[1] - radius, flatCoordinates[0] + radius, flatCoordinates[1] + radius, extent);\n    };\n    /**\n     * Return the radius of the circle.\n     * @return {number} Radius.\n     * @api\n     */\n    Circle.prototype.getRadius = function () {\n        return Math.sqrt(this.getRadiusSquared_());\n    };\n    /**\n     * @private\n     * @return {number} Radius squared.\n     */\n    Circle.prototype.getRadiusSquared_ = function () {\n        var dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n        var dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n        return dx * dx + dy * dy;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.getType = function () {\n        return GeometryType.CIRCLE;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.intersectsExtent = function (extent) {\n        var circleExtent = this.getExtent();\n        if (intersects(extent, circleExtent)) {\n            var center = this.getCenter();\n            if (extent[0] <= center[0] && extent[2] >= center[0]) {\n                return true;\n            }\n            if (extent[1] <= center[1] && extent[3] >= center[1]) {\n                return true;\n            }\n            return forEachCorner(extent, this.intersectsCoordinate.bind(this));\n        }\n        return false;\n    };\n    /**\n     * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n     * @param {import(\"../coordinate.js\").Coordinate} center Center.\n     * @api\n     */\n    Circle.prototype.setCenter = function (center) {\n        var stride = this.stride;\n        var radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n        var flatCoordinates = center.slice();\n        flatCoordinates[stride] = flatCoordinates[0] + radius;\n        for (var i = 1; i < stride; ++i) {\n            flatCoordinates[stride + i] = center[i];\n        }\n        this.setFlatCoordinates(this.layout, flatCoordinates);\n        this.changed();\n    };\n    /**\n     * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n     * number) of the circle.\n     * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n     * @param {number} radius Radius.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     * @api\n     */\n    Circle.prototype.setCenterAndRadius = function (center, radius, opt_layout) {\n        this.setLayout(opt_layout, center, 0);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        /** @type {Array<number>} */\n        var flatCoordinates = this.flatCoordinates;\n        var offset = deflateCoordinate(flatCoordinates, 0, center, this.stride);\n        flatCoordinates[offset++] = flatCoordinates[0] + radius;\n        for (var i = 1, ii = this.stride; i < ii; ++i) {\n            flatCoordinates[offset++] = flatCoordinates[i];\n        }\n        flatCoordinates.length = offset;\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.getCoordinates = function () {\n        return null;\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.setCoordinates = function (coordinates, opt_layout) { };\n    /**\n     * Set the radius of the circle. The radius is in the units of the projection.\n     * @param {number} radius Radius.\n     * @api\n     */\n    Circle.prototype.setRadius = function (radius) {\n        this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.rotate = function (angle, anchor) {\n        var center = this.getCenter();\n        var stride = this.getStride();\n        this.setCenter(rotate(center, 0, center.length, stride, angle, anchor, center));\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.translate = function (deltaX, deltaY) {\n        var center = this.getCenter();\n        var stride = this.getStride();\n        this.setCenter(translate(center, 0, center.length, stride, deltaX, deltaY, center));\n        this.changed();\n    };\n    return Circle;\n}(SimpleGeometry));\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/interaction/DragAndDrop\n */\n// FIXME should handle all geo-referenced data, not just vector data\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { TRUE } from '../functions.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Interaction from './Interaction.js';\nimport { get as getProjection } from '../proj.js';\n/**\n * @typedef {Object} Options\n * @property {Array<typeof import(\"../format/Feature.js\").default>} [formatConstructors] Format constructors.\n * @property {import(\"../source/Vector.js\").default} [source] Optional vector source where features will be added.  If a source is provided\n * all existing features will be removed and new features will be added when\n * they are dropped on the target.  If you want to add features to a vector\n * source without removing the existing features (append only), instead of\n * providing the source option listen for the \"addfeatures\" event.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Target projection. By default, the map's view's projection is used.\n * @property {HTMLElement} [target] The element that is used as the drop target, default is the viewport element.\n */\n/**\n * @enum {string}\n */\nvar DragAndDropEventType = {\n    /**\n     * Triggered when features are added\n     * @event DragAndDropEvent#addfeatures\n     * @api\n     */\n    ADD_FEATURES: 'addfeatures'\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragAndDrop~DragAndDrop} instances are instances\n * of this type.\n */\nvar DragAndDropEvent = /** @class */ (function (_super) {\n    __extends(DragAndDropEvent, _super);\n    /**\n     * @param {DragAndDropEventType} type Type.\n     * @param {File} file File.\n     * @param {Array<import(\"../Feature.js\").default>=} opt_features Features.\n     * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n     */\n    function DragAndDropEvent(type, file, opt_features, opt_projection) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The features parsed from dropped data.\n         * @type {Array<import(\"../Feature.js\").FeatureLike>|undefined}\n         * @api\n         */\n        _this.features = opt_features;\n        /**\n         * The dropped file.\n         * @type {File}\n         * @api\n         */\n        _this.file = file;\n        /**\n         * The feature projection.\n         * @type {import(\"../proj/Projection.js\").default|undefined}\n         * @api\n         */\n        _this.projection = opt_projection;\n        return _this;\n    }\n    return DragAndDropEvent;\n}(Event));\n/**\n * @classdesc\n * Handles input of vector data by drag and drop.\n * @api\n *\n * @fires DragAndDropEvent\n */\nvar DragAndDrop = /** @class */ (function (_super) {\n    __extends(DragAndDrop, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function DragAndDrop(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            handleEvent: TRUE\n        }) || this;\n        /**\n         * @private\n         * @type {Array<typeof import(\"../format/Feature.js\").default>}\n         */\n        _this.formatConstructors_ = options.formatConstructors ?\n            options.formatConstructors : [];\n        /**\n         * @private\n         * @type {import(\"../proj/Projection.js\").default}\n         */\n        _this.projection_ = options.projection ?\n            getProjection(options.projection) : null;\n        /**\n         * @private\n         * @type {?Array<import(\"../events.js\").EventsKey>}\n         */\n        _this.dropListenKeys_ = null;\n        /**\n         * @private\n         * @type {import(\"../source/Vector.js\").default}\n         */\n        _this.source_ = options.source || null;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.target = options.target ? options.target : null;\n        return _this;\n    }\n    /**\n     * @param {File} file File.\n     * @param {Event} event Load event.\n     * @private\n     */\n    DragAndDrop.prototype.handleResult_ = function (file, event) {\n        var result = event.target.result;\n        var map = this.getMap();\n        var projection = this.projection_;\n        if (!projection) {\n            var view = map.getView();\n            projection = view.getProjection();\n        }\n        var formatConstructors = this.formatConstructors_;\n        var features = [];\n        for (var i = 0, ii = formatConstructors.length; i < ii; ++i) {\n            var format = new formatConstructors[i]();\n            features = this.tryReadFeatures_(format, result, {\n                featureProjection: projection\n            });\n            if (features && features.length > 0) {\n                break;\n            }\n        }\n        if (this.source_) {\n            this.source_.clear();\n            this.source_.addFeatures(features);\n        }\n        this.dispatchEvent(new DragAndDropEvent(DragAndDropEventType.ADD_FEATURES, file, features, projection));\n    };\n    /**\n     * @private\n     */\n    DragAndDrop.prototype.registerListeners_ = function () {\n        var map = this.getMap();\n        if (map) {\n            var dropArea = this.target ? this.target : map.getViewport();\n            this.dropListenKeys_ = [\n                listen(dropArea, EventType.DROP, handleDrop, this),\n                listen(dropArea, EventType.DRAGENTER, handleStop, this),\n                listen(dropArea, EventType.DRAGOVER, handleStop, this),\n                listen(dropArea, EventType.DROP, handleStop, this)\n            ];\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    DragAndDrop.prototype.setActive = function (active) {\n        if (!this.getActive() && active) {\n            this.registerListeners_();\n        }\n        if (this.getActive() && !active) {\n            this.unregisterListeners_();\n        }\n        _super.prototype.setActive.call(this, active);\n    };\n    /**\n     * @inheritDoc\n     */\n    DragAndDrop.prototype.setMap = function (map) {\n        this.unregisterListeners_();\n        _super.prototype.setMap.call(this, map);\n        if (this.getActive()) {\n            this.registerListeners_();\n        }\n    };\n    /**\n     * @param {import(\"../format/Feature.js\").default} format Format.\n     * @param {string} text Text.\n     * @param {import(\"../format/Feature.js\").ReadOptions} options Read options.\n     * @private\n     * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n     */\n    DragAndDrop.prototype.tryReadFeatures_ = function (format, text, options) {\n        try {\n            return format.readFeatures(text, options);\n        }\n        catch (e) {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    DragAndDrop.prototype.unregisterListeners_ = function () {\n        if (this.dropListenKeys_) {\n            this.dropListenKeys_.forEach(unlistenByKey);\n            this.dropListenKeys_ = null;\n        }\n    };\n    return DragAndDrop;\n}(Interaction));\n/**\n * @param {DragEvent} event Event.\n * @this {DragAndDrop}\n */\nfunction handleDrop(event) {\n    var files = event.dataTransfer.files;\n    for (var i = 0, ii = files.length; i < ii; ++i) {\n        var file = files.item(i);\n        var reader = new FileReader();\n        reader.addEventListener(EventType.LOAD, this.handleResult_.bind(this, file));\n        reader.readAsText(file);\n    }\n}\n/**\n * @param {DragEvent} event Event.\n */\nfunction handleStop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'copy';\n}\nexport default DragAndDrop;\n//# sourceMappingURL=DragAndDrop.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' + path +\n            '/doc/errors/#' + code + ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport { fromKey, getKey } from './tilecoord.js';\nvar TileCache = /** @class */ (function (_super) {\n    __extends(TileCache, _super);\n    /**\n     * @param {number=} opt_highWaterMark High water mark.\n     */\n    function TileCache(opt_highWaterMark) {\n        return _super.call(this, opt_highWaterMark) || this;\n    }\n    /**\n     * @param {!Object<string, import(\"./TileRange.js\").default>} usedTiles Used tiles.\n     */\n    TileCache.prototype.expireCache = function (usedTiles) {\n        while (this.canExpireCache()) {\n            var tile = this.peekLast();\n            if (tile.getKey() in usedTiles) {\n                break;\n            }\n            else {\n                this.pop().dispose();\n            }\n        }\n    };\n    /**\n     * Prune all tiles from the cache that don't have the same z as the newest tile.\n     */\n    TileCache.prototype.pruneExceptNewestZ = function () {\n        if (this.getCount() === 0) {\n            return;\n        }\n        var key = this.peekFirstKey();\n        var tileCoord = fromKey(key);\n        var z = tileCoord[0];\n        this.forEach(function (tile) {\n            if (tile.tileCoord[0] !== z) {\n                this.remove(getKey(tile.tileCoord));\n                tile.dispose();\n            }\n        }.bind(this));\n    };\n    return TileCache;\n}(LRUCache));\nexport default TileCache;\n//# sourceMappingURL=TileCache.js.map","/**\n * @module ol/structs/LRUCache\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { assert } from '../asserts.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\n/**\n * @typedef {Object} Entry\n * @property {string} key_\n * @property {Object} newer\n * @property {Object} older\n * @property {*} value_\n */\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires import(\"../events/Event.js\").default\n * @template T\n */\nvar LRUCache = /** @class */ (function (_super) {\n    __extends(LRUCache, _super);\n    /**\n     * @param {number=} opt_highWaterMark High water mark.\n     */\n    function LRUCache(opt_highWaterMark) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {number}\n         */\n        _this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.count_ = 0;\n        /**\n         * @private\n         * @type {!Object<string, Entry>}\n         */\n        _this.entries_ = {};\n        /**\n         * @private\n         * @type {?Entry}\n         */\n        _this.oldest_ = null;\n        /**\n         * @private\n         * @type {?Entry}\n         */\n        _this.newest_ = null;\n        return _this;\n    }\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    LRUCache.prototype.canExpireCache = function () {\n        return this.getCount() > this.highWaterMark;\n    };\n    /**\n     * FIXME empty description for jsdoc\n     */\n    LRUCache.prototype.clear = function () {\n        this.count_ = 0;\n        this.entries_ = {};\n        this.oldest_ = null;\n        this.newest_ = null;\n        this.dispatchEvent(EventType.CLEAR);\n    };\n    /**\n     * @param {string} key Key.\n     * @return {boolean} Contains key.\n     */\n    LRUCache.prototype.containsKey = function (key) {\n        return this.entries_.hasOwnProperty(key);\n    };\n    /**\n     * @param {function(T, string, LRUCache<T>): ?} f The function\n     *     to call for every entry from the oldest to the newer. This function takes\n     *     3 arguments (the entry value, the entry key and the LRUCache object).\n     *     The return value is ignored.\n     */\n    LRUCache.prototype.forEach = function (f) {\n        var entry = this.oldest_;\n        while (entry) {\n            f(entry.value_, entry.key_, this);\n            entry = entry.newer;\n        }\n    };\n    /**\n     * @param {string} key Key.\n     * @param {*=} opt_options Options (reserverd for subclasses).\n     * @return {T} Value.\n     */\n    LRUCache.prototype.get = function (key, opt_options) {\n        var entry = this.entries_[key];\n        assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n        if (entry === this.newest_) {\n            return entry.value_;\n        }\n        else if (entry === this.oldest_) {\n            this.oldest_ = /** @type {Entry} */ (this.oldest_.newer);\n            this.oldest_.older = null;\n        }\n        else {\n            entry.newer.older = entry.older;\n            entry.older.newer = entry.newer;\n        }\n        entry.newer = null;\n        entry.older = this.newest_;\n        this.newest_.newer = entry;\n        this.newest_ = entry;\n        return entry.value_;\n    };\n    /**\n     * Remove an entry from the cache.\n     * @param {string} key The entry key.\n     * @return {T} The removed entry.\n     */\n    LRUCache.prototype.remove = function (key) {\n        var entry = this.entries_[key];\n        assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n        if (entry === this.newest_) {\n            this.newest_ = /** @type {Entry} */ (entry.older);\n            if (this.newest_) {\n                this.newest_.newer = null;\n            }\n        }\n        else if (entry === this.oldest_) {\n            this.oldest_ = /** @type {Entry} */ (entry.newer);\n            if (this.oldest_) {\n                this.oldest_.older = null;\n            }\n        }\n        else {\n            entry.newer.older = entry.older;\n            entry.older.newer = entry.newer;\n        }\n        delete this.entries_[key];\n        --this.count_;\n        return entry.value_;\n    };\n    /**\n     * @return {number} Count.\n     */\n    LRUCache.prototype.getCount = function () {\n        return this.count_;\n    };\n    /**\n     * @return {Array<string>} Keys.\n     */\n    LRUCache.prototype.getKeys = function () {\n        var keys = new Array(this.count_);\n        var i = 0;\n        var entry;\n        for (entry = this.newest_; entry; entry = entry.older) {\n            keys[i++] = entry.key_;\n        }\n        return keys;\n    };\n    /**\n     * @return {Array<T>} Values.\n     */\n    LRUCache.prototype.getValues = function () {\n        var values = new Array(this.count_);\n        var i = 0;\n        var entry;\n        for (entry = this.newest_; entry; entry = entry.older) {\n            values[i++] = entry.value_;\n        }\n        return values;\n    };\n    /**\n     * @return {T} Last value.\n     */\n    LRUCache.prototype.peekLast = function () {\n        return this.oldest_.value_;\n    };\n    /**\n     * @return {string} Last key.\n     */\n    LRUCache.prototype.peekLastKey = function () {\n        return this.oldest_.key_;\n    };\n    /**\n     * Get the key of the newest item in the cache.  Throws if the cache is empty.\n     * @return {string} The newest key.\n     */\n    LRUCache.prototype.peekFirstKey = function () {\n        return this.newest_.key_;\n    };\n    /**\n     * @return {T} value Value.\n     */\n    LRUCache.prototype.pop = function () {\n        var entry = this.oldest_;\n        delete this.entries_[entry.key_];\n        if (entry.newer) {\n            entry.newer.older = null;\n        }\n        this.oldest_ = /** @type {Entry} */ (entry.newer);\n        if (!this.oldest_) {\n            this.newest_ = null;\n        }\n        --this.count_;\n        return entry.value_;\n    };\n    /**\n     * @param {string} key Key.\n     * @param {T} value Value.\n     */\n    LRUCache.prototype.replace = function (key, value) {\n        this.get(key); // update `newest_`\n        this.entries_[key].value_ = value;\n    };\n    /**\n     * @param {string} key Key.\n     * @param {T} value Value.\n     */\n    LRUCache.prototype.set = function (key, value) {\n        assert(!(key in this.entries_), 16); // Tried to set a value for a key that is used already\n        var entry = {\n            key_: key,\n            newer: null,\n            older: this.newest_,\n            value_: value\n        };\n        if (!this.newest_) {\n            this.oldest_ = entry;\n        }\n        else {\n            this.newest_.newer = entry;\n        }\n        this.newest_ = entry;\n        this.entries_[key] = entry;\n        ++this.count_;\n    };\n    /**\n     * Set a maximum number of entries for the cache.\n     * @param {number} size Cache size.\n     * @api\n     */\n    LRUCache.prototype.setSize = function (size) {\n        this.highWaterMark = size;\n    };\n    return LRUCache;\n}(EventTarget));\nexport default LRUCache;\n//# sourceMappingURL=LRUCache.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport { getUid } from '../../util.js';\nimport { fromUserExtent } from '../../proj.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport { createEmpty, equals, getIntersection, getTopLeft } from '../../extent.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport { apply as applyTransform, compose as composeTransform, makeInverse, toString as transformToString } from '../../transform.js';\nimport { numberSafeCompareFunction } from '../../array.js';\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n */\nvar CanvasTileLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasTileLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default} tileLayer Tile layer.\n     */\n    function CanvasTileLayerRenderer(tileLayer) {\n        var _this = _super.call(this, tileLayer) || this;\n        /**\n         * Rendered extent has changed since the previous `renderFrame()` call\n         * @type {boolean}\n         */\n        _this.extentChanged = true;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.renderedExtent_ = null;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.renderedRevision;\n        /**\n         * @protected\n         * @type {!Array<import(\"../../Tile.js\").default>}\n         */\n        _this.renderedTiles = [];\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.newTiles_ = false;\n        /**\n         * @protected\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.tmpExtent = createEmpty();\n        /**\n         * @private\n         * @type {import(\"../../TileRange.js\").default}\n         */\n        _this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n        return _this;\n    }\n    /**\n     * @protected\n     * @param {import(\"../../Tile.js\").default} tile Tile.\n     * @return {boolean} Tile is drawable.\n     */\n    CanvasTileLayerRenderer.prototype.isDrawableTile = function (tile) {\n        var tileLayer = this.getLayer();\n        var tileState = tile.getState();\n        var useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n        return tileState == TileState.LOADED ||\n            tileState == TileState.EMPTY ||\n            tileState == TileState.ERROR && !useInterimTilesOnError;\n    };\n    /**\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {!import(\"../../Tile.js\").default} Tile.\n     */\n    CanvasTileLayerRenderer.prototype.getTile = function (z, x, y, frameState) {\n        var pixelRatio = frameState.pixelRatio;\n        var projection = frameState.viewState.projection;\n        var tileLayer = this.getLayer();\n        var tileSource = tileLayer.getSource();\n        var tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n        if (tile.getState() == TileState.ERROR) {\n            if (!tileLayer.getUseInterimTilesOnError()) {\n                // When useInterimTilesOnError is false, we consider the error tile as loaded.\n                tile.setState(TileState.LOADED);\n            }\n            else if (tileLayer.getPreload() > 0) {\n                // Preloaded tiles for lower resolutions might have finished loading.\n                this.newTiles_ = true;\n            }\n        }\n        if (!this.isDrawableTile(tile)) {\n            tile = tile.getInterimTile();\n        }\n        return tile;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTileLayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (this.isDrawableTile(tile)) {\n            return _super.prototype.loadedTileCallback.call(this, tiles, zoom, tile);\n        }\n        return false;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTileLayerRenderer.prototype.prepareFrame = function (frameState) {\n        return !!this.getLayer().getSource();\n    };\n    /**\n     * TODO: File a TypeScript issue about inheritDoc not being followed\n     * all the way.  Without this explicit return type, the VectorTileLayer\n     * renderFrame function does not pass.\n     *\n     * @inheritDoc\n     * @returns {HTMLElement} The rendered element.\n     */\n    CanvasTileLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var viewResolution = viewState.resolution;\n        var viewCenter = viewState.center;\n        var rotation = viewState.rotation;\n        var pixelRatio = frameState.pixelRatio;\n        var tileLayer = this.getLayer();\n        var tileSource = tileLayer.getSource();\n        var sourceRevision = tileSource.getRevision();\n        var tileGrid = tileSource.getTileGridForProjection(projection);\n        var z = tileGrid.getZForResolution(viewResolution, tileSource.zDirection);\n        var tileResolution = tileGrid.getResolution(z);\n        var extent = frameState.extent;\n        var layerExtent = layerState.extent && fromUserExtent(layerState.extent, projection);\n        if (layerExtent) {\n            extent = getIntersection(extent, fromUserExtent(layerState.extent, projection));\n        }\n        var tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n        // desired dimensions of the canvas in pixels\n        var width = Math.round(frameState.size[0] * tilePixelRatio);\n        var height = Math.round(frameState.size[1] * tilePixelRatio);\n        if (rotation) {\n            var size = Math.round(Math.sqrt(width * width + height * height));\n            width = height = size;\n        }\n        var dx = tileResolution * width / 2 / tilePixelRatio;\n        var dy = tileResolution * height / 2 / tilePixelRatio;\n        var canvasExtent = [\n            viewCenter[0] - dx,\n            viewCenter[1] - dy,\n            viewCenter[0] + dx,\n            viewCenter[1] + dy\n        ];\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n        /**\n         * @type {Object<number, Object<string, import(\"../../Tile.js\").default>>}\n         */\n        var tilesToDrawByZ = {};\n        tilesToDrawByZ[z] = {};\n        var findLoadedTiles = this.createLoadedTileFinder(tileSource, projection, tilesToDrawByZ);\n        var tmpExtent = this.tmpExtent;\n        var tmpTileRange = this.tmpTileRange_;\n        this.newTiles_ = false;\n        for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n            for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n                var tile = this.getTile(z, x, y, frameState);\n                if (this.isDrawableTile(tile)) {\n                    var uid = getUid(this);\n                    if (tile.getState() == TileState.LOADED) {\n                        tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n                        var inTransition = tile.inTransition(uid);\n                        if (!this.newTiles_ && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n                            this.newTiles_ = true;\n                        }\n                    }\n                    if (tile.getAlpha(uid, frameState.time) === 1) {\n                        // don't look for alt tiles if alpha is 1\n                        continue;\n                    }\n                }\n                var childTileRange = tileGrid.getTileCoordChildTileRange(tile.tileCoord, tmpTileRange, tmpExtent);\n                var covered = false;\n                if (childTileRange) {\n                    covered = findLoadedTiles(z + 1, childTileRange);\n                }\n                if (!covered) {\n                    tileGrid.forEachTileCoordParentTileRange(tile.tileCoord, findLoadedTiles, tmpTileRange, tmpExtent);\n                }\n            }\n        }\n        var canvasScale = tileResolution / viewResolution;\n        // set forward and inverse pixel transforms\n        composeTransform(this.pixelTransform, frameState.size[0] / 2, frameState.size[1] / 2, 1 / tilePixelRatio, 1 / tilePixelRatio, rotation, -width / 2, -height / 2);\n        this.useContainer(target, this.pixelTransform, layerState.opacity);\n        var context = this.context;\n        var canvas = context.canvas;\n        makeInverse(this.inversePixelTransform, this.pixelTransform);\n        // set scale transform for calculating tile positions on the canvas\n        composeTransform(this.tempTransform_, width / 2, height / 2, canvasScale, canvasScale, 0, -width / 2, -height / 2);\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n        }\n        else if (!this.containerReused) {\n            context.clearRect(0, 0, width, height);\n        }\n        if (layerExtent) {\n            this.clipUnrotated(context, frameState, layerExtent);\n        }\n        this.preRender(context, frameState);\n        this.renderedTiles.length = 0;\n        /** @type {Array<number>} */\n        var zs = Object.keys(tilesToDrawByZ).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        var clips, clipZs, currentClip;\n        if (layerState.opacity === 1 && (!this.containerReused || tileSource.getOpaque(frameState.viewState.projection))) {\n            zs = zs.reverse();\n        }\n        else {\n            clips = [];\n            clipZs = [];\n        }\n        for (var i = zs.length - 1; i >= 0; --i) {\n            var currentZ = zs[i];\n            var currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n            var currentResolution = tileGrid.getResolution(currentZ);\n            var currentScale = currentResolution / tileResolution;\n            var dx_1 = currentTilePixelSize[0] * currentScale * canvasScale;\n            var dy_1 = currentTilePixelSize[1] * currentScale * canvasScale;\n            var originTileCoord = tileGrid.getTileCoordForCoordAndZ(getTopLeft(canvasExtent), currentZ);\n            var originTileExtent = tileGrid.getTileCoordExtent(originTileCoord);\n            var origin_1 = applyTransform(this.tempTransform_, [\n                tilePixelRatio * (originTileExtent[0] - canvasExtent[0]) / tileResolution,\n                tilePixelRatio * (canvasExtent[3] - originTileExtent[3]) / tileResolution\n            ]);\n            var tileGutter = tilePixelRatio * tileSource.getGutterForProjection(projection);\n            var tilesToDraw = tilesToDrawByZ[currentZ];\n            for (var tileCoordKey in tilesToDraw) {\n                var tile = /** @type {import(\"../../ImageTile.js\").default} */ (tilesToDraw[tileCoordKey]);\n                var tileCoord = tile.tileCoord;\n                // Calculate integer positions and sizes so that tiles align\n                var floatX = (origin_1[0] - (originTileCoord[1] - tileCoord[1]) * dx_1);\n                var nextX = Math.round(floatX + dx_1);\n                var floatY = (origin_1[1] - (originTileCoord[2] - tileCoord[2]) * dy_1);\n                var nextY = Math.round(floatY + dy_1);\n                var x = Math.round(floatX);\n                var y = Math.round(floatY);\n                var w = nextX - x;\n                var h = nextY - y;\n                var transition = z === currentZ;\n                var inTransition = transition && tile.getAlpha(getUid(this), frameState.time) !== 1;\n                if (!inTransition) {\n                    if (clips) {\n                        // Clip mask for regions in this tile that already filled by a higher z tile\n                        context.save();\n                        currentClip = [x, y, x + w, y, x + w, y + h, x, y + h];\n                        for (var i_1 = 0, ii = clips.length; i_1 < ii; ++i_1) {\n                            if (z !== currentZ && currentZ < clipZs[i_1]) {\n                                var clip = clips[i_1];\n                                context.beginPath();\n                                // counter-clockwise (outer ring) for current tile\n                                context.moveTo(currentClip[0], currentClip[1]);\n                                context.lineTo(currentClip[2], currentClip[3]);\n                                context.lineTo(currentClip[4], currentClip[5]);\n                                context.lineTo(currentClip[6], currentClip[7]);\n                                // clockwise (inner ring) for higher z tile\n                                context.moveTo(clip[6], clip[7]);\n                                context.lineTo(clip[4], clip[5]);\n                                context.lineTo(clip[2], clip[3]);\n                                context.lineTo(clip[0], clip[1]);\n                                context.clip();\n                            }\n                        }\n                        clips.push(currentClip);\n                        clipZs.push(currentZ);\n                    }\n                    else {\n                        context.clearRect(x, y, w, h);\n                    }\n                }\n                this.drawTileImage(tile, frameState, x, y, w, h, tileGutter, transition, layerState.opacity);\n                if (clips && !inTransition) {\n                    context.restore();\n                }\n                this.renderedTiles.push(tile);\n                this.updateUsedTiles(frameState.usedTiles, tileSource, tile);\n            }\n        }\n        this.renderedRevision = sourceRevision;\n        this.renderedResolution = tileResolution;\n        this.extentChanged = !this.renderedExtent_ || !equals(this.renderedExtent_, canvasExtent);\n        this.renderedExtent_ = canvasExtent;\n        this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio, projection, extent, z, tileLayer.getPreload());\n        this.updateCacheSize_(frameState, tileSource);\n        this.scheduleExpireCache(frameState, tileSource);\n        this.postRender(context, frameState);\n        if (layerState.extent) {\n            context.restore();\n        }\n        var canvasTransform = transformToString(this.pixelTransform);\n        if (canvasTransform !== canvas.style.transform) {\n            canvas.style.transform = canvasTransform;\n        }\n        return this.container;\n    };\n    /**\n     * @param {import(\"../../ImageTile.js\").default} tile Tile.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} x Left of the tile.\n     * @param {number} y Top of the tile.\n     * @param {number} w Width of the tile.\n     * @param {number} h Height of the tile.\n     * @param {number} gutter Tile gutter.\n     * @param {boolean} transition Apply an alpha transition.\n     * @param {number} opacity Opacity.\n     */\n    CanvasTileLayerRenderer.prototype.drawTileImage = function (tile, frameState, x, y, w, h, gutter, transition, opacity) {\n        var image = this.getTileImage(tile);\n        if (!image) {\n            return;\n        }\n        var uid = getUid(this);\n        var tileAlpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n        var alpha = opacity * tileAlpha;\n        var alphaChanged = alpha !== this.context.globalAlpha;\n        if (alphaChanged) {\n            this.context.save();\n            this.context.globalAlpha = alpha;\n        }\n        this.context.drawImage(image, gutter, gutter, image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n        if (alphaChanged) {\n            this.context.restore();\n        }\n        if (tileAlpha !== 1) {\n            frameState.animate = true;\n        }\n        else if (transition) {\n            tile.endTransition(uid);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTileLayerRenderer.prototype.getImage = function () {\n        var context = this.context;\n        return context ? context.canvas : null;\n    };\n    /**\n     * Get the image from a tile.\n     * @param {import(\"../../ImageTile.js\").default} tile Tile.\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.getTileImage = function (tile) {\n        return tile.getImage();\n    };\n    /**\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.scheduleExpireCache = function (frameState, tileSource) {\n        if (tileSource.canExpireCache()) {\n            /**\n             * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n             * @param {import(\"../../PluggableMap.js\").default} map Map.\n             * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n             */\n            var postRenderFunction = function (tileSource, map, frameState) {\n                var tileSourceKey = getUid(tileSource);\n                if (tileSourceKey in frameState.usedTiles) {\n                    tileSource.expireCache(frameState.viewState.projection, frameState.usedTiles[tileSourceKey]);\n                }\n            }.bind(null, tileSource);\n            frameState.postRenderFunctions.push(\n            /** @type {import(\"../../PluggableMap.js\").PostRenderFunction} */ (postRenderFunction));\n        }\n    };\n    /**\n     * @param {!Object<string, !Object<string, boolean>>} usedTiles Used tiles.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @param {import('../../Tile.js').default} tile Tile.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.updateUsedTiles = function (usedTiles, tileSource, tile) {\n        // FIXME should we use tilesToDrawByZ instead?\n        var tileSourceKey = getUid(tileSource);\n        if (!(tileSourceKey in usedTiles)) {\n            usedTiles[tileSourceKey] = {};\n        }\n        usedTiles[tileSourceKey][tile.getKey()] = true;\n    };\n    /**\n     * Check if the cache is big enough, and increase its size if necessary.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @private\n     */\n    CanvasTileLayerRenderer.prototype.updateCacheSize_ = function (frameState, tileSource) {\n        var tileSourceKey = getUid(tileSource);\n        var size = 0;\n        if (tileSourceKey in frameState.usedTiles) {\n            size += Object.keys(frameState.usedTiles[tileSourceKey]).length;\n        }\n        if (tileSourceKey in frameState.wantedTiles) {\n            size += Object.keys(frameState.wantedTiles[tileSourceKey]).length;\n        }\n        var tileCache = tileSource.tileCache;\n        if (tileCache.highWaterMark < size) {\n            tileCache.highWaterMark = size;\n        }\n    };\n    /**\n     * Manage tile pyramid.\n     * This function performs a number of functions related to the tiles at the\n     * current zoom and lower zoom levels:\n     * - registers idle tiles in frameState.wantedTiles so that they are not\n     *   discarded by the tile queue\n     * - enqueues missing tiles\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n     * @param {import(\"../../tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n     * @param {import(\"../../extent.js\").Extent} extent Extent.\n     * @param {number} currentZ Current Z.\n     * @param {number} preload Load low resolution tiles up to 'preload' levels.\n     * @param {function(import(\"../../Tile.js\").default)=} opt_tileCallback Tile callback.\n     * @protected\n     */\n    CanvasTileLayerRenderer.prototype.manageTilePyramid = function (frameState, tileSource, tileGrid, pixelRatio, projection, extent, currentZ, preload, opt_tileCallback) {\n        var tileSourceKey = getUid(tileSource);\n        if (!(tileSourceKey in frameState.wantedTiles)) {\n            frameState.wantedTiles[tileSourceKey] = {};\n        }\n        var wantedTiles = frameState.wantedTiles[tileSourceKey];\n        var tileQueue = frameState.tileQueue;\n        var minZoom = tileGrid.getMinZoom();\n        var tile, tileRange, tileResolution, x, y, z;\n        for (z = minZoom; z <= currentZ; ++z) {\n            tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n            tileResolution = tileGrid.getResolution(z);\n            for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n                for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n                    if (currentZ - z <= preload) {\n                        tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n                        if (tile.getState() == TileState.IDLE) {\n                            wantedTiles[tile.getKey()] = true;\n                            if (!tileQueue.isKeyQueued(tile.getKey())) {\n                                tileQueue.enqueue([tile, tileSourceKey,\n                                    tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n                            }\n                        }\n                        if (opt_tileCallback !== undefined) {\n                            opt_tileCallback(tile);\n                        }\n                    }\n                    else {\n                        tileSource.useTile(z, x, y, projection);\n                    }\n                }\n            }\n        }\n    };\n    return CanvasTileLayerRenderer;\n}(CanvasLayerRenderer));\n/**\n * @function\n * @return {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\nexport default CanvasTileLayerRenderer;\n//# sourceMappingURL=TileLayer.js.map","/**\n * @module ol/render/Event\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Event from '../events/Event.js';\nvar RenderEvent = /** @class */ (function (_super) {\n    __extends(RenderEvent, _super);\n    /**\n     * @param {import(\"./EventType.js\").default} type Type.\n     * @param {import(\"../transform.js\").Transform=} opt_inversePixelTransform Transform for\n     *     CSS pixels to rendered pixels.\n     * @param {import(\"../PluggableMap.js\").FrameState=} opt_frameState Frame state.\n     * @param {?CanvasRenderingContext2D=} opt_context Context.\n     */\n    function RenderEvent(type, opt_inversePixelTransform, opt_frameState, opt_context) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * Transform from CSS pixels (relative to the top-left corner of the map viewport)\n         * to rendered pixels on this event's `context`.\n         * @type {import(\"../transform.js\").Transform|undefined}\n         * @api\n         */\n        _this.inversePixelTransform = opt_inversePixelTransform;\n        /**\n         * An object representing the current render frame state.\n         * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n         * @api\n         */\n        _this.frameState = opt_frameState;\n        /**\n         * Canvas context. Only available when a Canvas renderer is used, null\n         * otherwise.\n         * @type {CanvasRenderingContext2D|null|undefined}\n         * @api\n         */\n        _this.context = opt_context;\n        return _this;\n    }\n    return RenderEvent;\n}(Event));\nexport default RenderEvent;\n//# sourceMappingURL=Event.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Base\n */\nimport { abstract } from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport { clamp } from '../math.js';\nimport { assign } from '../obj.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /** @class */ (function (_super) {\n    __extends(BaseLayer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function BaseLayer(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = assign({}, options);\n        properties[LayerProperty.OPACITY] =\n            options.opacity !== undefined ? options.opacity : 1;\n        assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n        properties[LayerProperty.VISIBLE] =\n            options.visible !== undefined ? options.visible : true;\n        properties[LayerProperty.Z_INDEX] = options.zIndex;\n        properties[LayerProperty.MAX_RESOLUTION] =\n            options.maxResolution !== undefined ? options.maxResolution : Infinity;\n        properties[LayerProperty.MIN_RESOLUTION] =\n            options.minResolution !== undefined ? options.minResolution : 0;\n        properties[LayerProperty.MIN_ZOOM] =\n            options.minZoom !== undefined ? options.minZoom : -Infinity;\n        properties[LayerProperty.MAX_ZOOM] =\n            options.maxZoom !== undefined ? options.maxZoom : Infinity;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.className_ = properties.className !== undefined ? options.className : 'ol-layer';\n        delete properties.className;\n        _this.setProperties(properties);\n        /**\n         * @type {import(\"./Layer.js\").State}\n         * @private\n         */\n        _this.state_ = null;\n        return _this;\n    }\n    /**\n     * @return {string} CSS class name.\n     */\n    BaseLayer.prototype.getClassName = function () {\n        return this.className_;\n    };\n    /**\n     * This method is not meant to be called by layers or layer renderers because the state\n     * is incorrect if the layer is included in a layer group.\n     *\n     * @param {boolean=} opt_managed Layer is managed.\n     * @return {import(\"./Layer.js\").State} Layer state.\n     */\n    BaseLayer.prototype.getLayerState = function (opt_managed) {\n        /** @type {import(\"./Layer.js\").State} */\n        var state = this.state_ || /** @type {?} */ ({\n            layer: this,\n            managed: opt_managed === undefined ? true : opt_managed,\n            hasOverlay: false\n        });\n        state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n        state.sourceState = this.getSourceState();\n        state.visible = this.getVisible();\n        state.extent = this.getExtent();\n        state.zIndex = this.getZIndex() || (state.managed === false ? Infinity : 0);\n        state.maxResolution = this.getMaxResolution();\n        state.minResolution = Math.max(this.getMinResolution(), 0);\n        state.minZoom = this.getMinZoom();\n        state.maxZoom = this.getMaxZoom();\n        this.state_ = state;\n        return state;\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n     *     modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    BaseLayer.prototype.getLayersArray = function (opt_array) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n     *     states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    BaseLayer.prototype.getLayerStatesArray = function (opt_states) {\n        return abstract();\n    };\n    /**\n     * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n     * will be visible regardless of extent.\n     * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getExtent = function () {\n        return (\n        /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT)));\n    };\n    /**\n     * Return the maximum resolution of the layer.\n     * @return {number} The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n    };\n    /**\n     * Return the minimum resolution of the layer.\n     * @return {number} The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n    };\n    /**\n     * Return the minimum zoom level of the layer.\n     * @return {number} The minimum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n    };\n    /**\n     * Return the maximum zoom level of the layer.\n     * @return {number} The maximum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n    };\n    /**\n     * Return the opacity of the layer (between 0 and 1).\n     * @return {number} The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getOpacity = function () {\n        return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n    };\n    /**\n     * @abstract\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    BaseLayer.prototype.getSourceState = function () {\n        return abstract();\n    };\n    /**\n     * Return the visibility of the layer (`true` or `false`).\n     * @return {boolean} The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getVisible = function () {\n        return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n    };\n    /**\n     * Return the Z-index of the layer, which is used to order layers before\n     * rendering. The default Z-index is 0.\n     * @return {number} The Z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getZIndex = function () {\n        return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n    };\n    /**\n     * Set the extent at which the layer is visible.  If `undefined`, the layer\n     * will be visible at all extents.\n     * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setExtent = function (extent) {\n        this.set(LayerProperty.EXTENT, extent);\n    };\n    /**\n     * Set the maximum resolution at which the layer is visible.\n     * @param {number} maxResolution The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxResolution = function (maxResolution) {\n        this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n    };\n    /**\n     * Set the minimum resolution at which the layer is visible.\n     * @param {number} minResolution The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinResolution = function (minResolution) {\n        this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n    };\n    /**\n     * Set the maximum zoom (exclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} maxZoom The maximum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxZoom = function (maxZoom) {\n        this.set(LayerProperty.MAX_ZOOM, maxZoom);\n    };\n    /**\n     * Set the minimum zoom (inclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} minZoom The minimum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinZoom = function (minZoom) {\n        this.set(LayerProperty.MIN_ZOOM, minZoom);\n    };\n    /**\n     * Set the opacity of the layer, allowed values range from 0 to 1.\n     * @param {number} opacity The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setOpacity = function (opacity) {\n        assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n        this.set(LayerProperty.OPACITY, opacity);\n    };\n    /**\n     * Set the visibility of the layer (`true` or `false`).\n     * @param {boolean} visible The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setVisible = function (visible) {\n        this.set(LayerProperty.VISIBLE, visible);\n    };\n    /**\n     * Set Z-index of the layer, which is used to order layers before rendering.\n     * The default Z-index is 0.\n     * @param {number} zindex The z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setZIndex = function (zindex) {\n        this.set(LayerProperty.Z_INDEX, zindex);\n    };\n    return BaseLayer;\n}(BaseObject));\nexport default BaseLayer;\n//# sourceMappingURL=Base.js.map","/**\n * @module ol/reproj/Triangulation\n */\nimport { boundingExtent, createEmpty, extendCoordinate, getBottomLeft, getBottomRight, getTopLeft, getTopRight, getWidth, intersects } from '../extent.js';\nimport { modulo } from '../math.js';\nimport { getTransform } from '../proj.js';\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target\n */\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nvar MAX_SUBDIVISION = 10;\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nvar MAX_TRIANGLE_WIDTH = 0.25;\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nvar Triangulation = /** @class */ (function () {\n    /**\n     * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n     * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n     * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n     * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n     * @param {number} errorThreshold Acceptable error (in source units).\n     */\n    function Triangulation(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold) {\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         * @private\n         */\n        this.sourceProj_ = sourceProj;\n        /**\n         * @type {import(\"../proj/Projection.js\").default}\n         * @private\n         */\n        this.targetProj_ = targetProj;\n        /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n        var transformInvCache = {};\n        var transformInv = getTransform(this.targetProj_, this.sourceProj_);\n        /**\n         * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n         * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n         * @private\n         */\n        this.transformInv_ = function (c) {\n            var key = c[0] + '/' + c[1];\n            if (!transformInvCache[key]) {\n                transformInvCache[key] = transformInv(c);\n            }\n            return transformInvCache[key];\n        };\n        /**\n         * @type {import(\"../extent.js\").Extent}\n         * @private\n         */\n        this.maxSourceExtent_ = maxSourceExtent;\n        /**\n         * @type {number}\n         * @private\n         */\n        this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n        /**\n         * @type {Array<Triangle>}\n         * @private\n         */\n        this.triangles_ = [];\n        /**\n         * Indicates that the triangulation crosses edge of the source projection.\n         * @type {boolean}\n         * @private\n         */\n        this.wrapsXInSource_ = false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n            !!maxSourceExtent &&\n            !!this.sourceProj_.getExtent() &&\n            (getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent()));\n        /**\n         * @type {?number}\n         * @private\n         */\n        this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n            getWidth(this.sourceProj_.getExtent()) : null;\n        /**\n         * @type {?number}\n         * @private\n         */\n        this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n            getWidth(this.targetProj_.getExtent()) : null;\n        var destinationTopLeft = getTopLeft(targetExtent);\n        var destinationTopRight = getTopRight(targetExtent);\n        var destinationBottomRight = getBottomRight(targetExtent);\n        var destinationBottomLeft = getBottomLeft(targetExtent);\n        var sourceTopLeft = this.transformInv_(destinationTopLeft);\n        var sourceTopRight = this.transformInv_(destinationTopRight);\n        var sourceBottomRight = this.transformInv_(destinationBottomRight);\n        var sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n        this.addQuad_(destinationTopLeft, destinationTopRight, destinationBottomRight, destinationBottomLeft, sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft, MAX_SUBDIVISION);\n        if (this.wrapsXInSource_) {\n            var leftBound_1 = Infinity;\n            this.triangles_.forEach(function (triangle, i, arr) {\n                leftBound_1 = Math.min(leftBound_1, triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n            });\n            // Shift triangles to be as close to `leftBound` as possible\n            // (if the distance is more than `worldWidth / 2` it can be closer.\n            this.triangles_.forEach(function (triangle) {\n                if (Math.max(triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]) - leftBound_1 > this.sourceWorldWidth_ / 2) {\n                    var newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n                        [triangle.source[1][0], triangle.source[1][1]],\n                        [triangle.source[2][0], triangle.source[2][1]]];\n                    if ((newTriangle[0][0] - leftBound_1) > this.sourceWorldWidth_ / 2) {\n                        newTriangle[0][0] -= this.sourceWorldWidth_;\n                    }\n                    if ((newTriangle[1][0] - leftBound_1) > this.sourceWorldWidth_ / 2) {\n                        newTriangle[1][0] -= this.sourceWorldWidth_;\n                    }\n                    if ((newTriangle[2][0] - leftBound_1) > this.sourceWorldWidth_ / 2) {\n                        newTriangle[2][0] -= this.sourceWorldWidth_;\n                    }\n                    // Rarely (if the extent contains both the dateline and prime meridian)\n                    // the shift can in turn break some triangles.\n                    // Detect this here and don't shift in such cases.\n                    var minX = Math.min(newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n                    var maxX = Math.max(newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n                    if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n                        triangle.source = newTriangle;\n                    }\n                }\n            }.bind(this));\n        }\n        transformInvCache = {};\n    }\n    /**\n     * Adds triangle to the triangulation.\n     * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n     * @private\n     */\n    Triangulation.prototype.addTriangle_ = function (a, b, c, aSrc, bSrc, cSrc) {\n        this.triangles_.push({\n            source: [aSrc, bSrc, cSrc],\n            target: [a, b, c]\n        });\n    };\n    /**\n     * Adds quad (points in clock-wise order) to the triangulation\n     * (and reprojects the vertices) if valid.\n     * Performs quad subdivision if needed to increase precision.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n     * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n     * @private\n     */\n    Triangulation.prototype.addQuad_ = function (a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n        var sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n        var sourceCoverageX = this.sourceWorldWidth_ ?\n            getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n        var sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n        // when the quad is wrapped in the source projection\n        // it covers most of the projection extent, but not fully\n        var wrapsX = this.sourceProj_.canWrapX() &&\n            sourceCoverageX > 0.5 && sourceCoverageX < 1;\n        var needsSubdivision = false;\n        if (maxSubdivision > 0) {\n            if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n                var targetQuadExtent = boundingExtent([a, b, c, d]);\n                var targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n                needsSubdivision = targetCoverageX > MAX_TRIANGLE_WIDTH ||\n                    needsSubdivision;\n            }\n            if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n                needsSubdivision = sourceCoverageX > MAX_TRIANGLE_WIDTH ||\n                    needsSubdivision;\n            }\n        }\n        if (!needsSubdivision && this.maxSourceExtent_) {\n            if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n                // whole quad outside source projection extent -> ignore\n                return;\n            }\n        }\n        if (!needsSubdivision) {\n            if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n                !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n                !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n                !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n                if (maxSubdivision > 0) {\n                    needsSubdivision = true;\n                }\n                else {\n                    return;\n                }\n            }\n        }\n        if (maxSubdivision > 0) {\n            if (!needsSubdivision) {\n                var center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n                var centerSrc = this.transformInv_(center);\n                var dx = void 0;\n                if (wrapsX) {\n                    var centerSrcEstimX = (modulo(aSrc[0], sourceWorldWidth) +\n                        modulo(cSrc[0], sourceWorldWidth)) / 2;\n                    dx = centerSrcEstimX -\n                        modulo(centerSrc[0], sourceWorldWidth);\n                }\n                else {\n                    dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n                }\n                var dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n                var centerSrcErrorSquared = dx * dx + dy * dy;\n                needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n            }\n            if (needsSubdivision) {\n                if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n                    // split horizontally (top & bottom)\n                    var bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n                    var bcSrc = this.transformInv_(bc);\n                    var da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n                    var daSrc = this.transformInv_(da);\n                    this.addQuad_(a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n                    this.addQuad_(da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n                }\n                else {\n                    // split vertically (left & right)\n                    var ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n                    var abSrc = this.transformInv_(ab);\n                    var cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n                    var cdSrc = this.transformInv_(cd);\n                    this.addQuad_(a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n                    this.addQuad_(ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n                }\n                return;\n            }\n        }\n        if (wrapsX) {\n            if (!this.canWrapXInSource_) {\n                return;\n            }\n            this.wrapsXInSource_ = true;\n        }\n        this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n        this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n    };\n    /**\n     * Calculates extent of the 'source' coordinates from all the triangles.\n     *\n     * @return {import(\"../extent.js\").Extent} Calculated extent.\n     */\n    Triangulation.prototype.calculateSourceExtent = function () {\n        var extent = createEmpty();\n        this.triangles_.forEach(function (triangle, i, arr) {\n            var src = triangle.source;\n            extendCoordinate(extent, src[0]);\n            extendCoordinate(extent, src[1]);\n            extendCoordinate(extent, src[2]);\n        });\n        return extent;\n    };\n    /**\n     * @return {Array<Triangle>} Array of the calculated triangles.\n     */\n    Triangulation.prototype.getTriangles = function () {\n        return this.triangles_;\n    };\n    return Triangulation;\n}());\nexport default Triangulation;\n//# sourceMappingURL=Triangulation.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/ImageBase\n */\nimport { abstract } from './util.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n/**\n * @abstract\n */\nvar ImageBase = /** @class */ (function (_super) {\n    __extends(ImageBase, _super);\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./ImageState.js\").default} state State.\n     */\n    function ImageBase(extent, resolution, pixelRatio, state) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {import(\"./extent.js\").Extent}\n         */\n        _this.extent = extent;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.pixelRatio_ = pixelRatio;\n        /**\n         * @protected\n         * @type {number|undefined}\n         */\n        _this.resolution = resolution;\n        /**\n         * @protected\n         * @type {import(\"./ImageState.js\").default}\n         */\n        _this.state = state;\n        return _this;\n    }\n    /**\n     * @protected\n     */\n    ImageBase.prototype.changed = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @return {import(\"./extent.js\").Extent} Extent.\n     */\n    ImageBase.prototype.getExtent = function () {\n        return this.extent;\n    };\n    /**\n     * @abstract\n     * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n     */\n    ImageBase.prototype.getImage = function () {\n        return abstract();\n    };\n    /**\n     * @return {number} PixelRatio.\n     */\n    ImageBase.prototype.getPixelRatio = function () {\n        return this.pixelRatio_;\n    };\n    /**\n     * @return {number} Resolution.\n     */\n    ImageBase.prototype.getResolution = function () {\n        return /** @type {number} */ (this.resolution);\n    };\n    /**\n     * @return {import(\"./ImageState.js\").default} State.\n     */\n    ImageBase.prototype.getState = function () {\n        return this.state;\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageBase.prototype.load = function () {\n        abstract();\n    };\n    return ImageBase;\n}(EventTarget));\nexport default ImageBase;\n//# sourceMappingURL=ImageBase.js.map","/**\n * @module ol/source/TileWMS\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DEFAULT_WMS_VERSION } from './common.js';\nimport { assert } from '../asserts.js';\nimport { buffer, createEmpty } from '../extent.js';\nimport { assign } from '../obj.js';\nimport { modulo } from '../math.js';\nimport { get as getProjection, transform, transformExtent } from '../proj.js';\nimport { calculateSourceResolution } from '../reproj.js';\nimport { toSize, buffer as bufferSize, scale as scaleSize } from '../size.js';\nimport TileImage from './TileImage.js';\nimport WMSServerType from './WMSServerType.js';\nimport { hash as tileCoordHash } from '../tilecoord.js';\nimport { compareVersions } from '../string.js';\nimport { appendParams } from '../uri.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See http://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used..\n * @property {import(\"./WMSServerType.js\").default|string} [serverType]\n * The type of the remote WMS server. Currently only used when `hidpi` is\n * `true`.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n * @api\n */\nvar TileWMS = /** @class */ (function (_super) {\n    __extends(TileWMS, _super);\n    /**\n     * @param {Options=} [opt_options] Tile WMS options.\n     */\n    function TileWMS(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : /** @type {Options} */ ({});\n        var params = options.params || {};\n        var transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            opaque: !transparent,\n            projection: options.projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileClass: options.tileClass,\n            tileGrid: options.tileGrid,\n            tileLoadFunction: options.tileLoadFunction,\n            tileUrlFunction: tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition\n        }) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n        /**\n         * @private\n         * @type {!Object}\n         */\n        _this.params_ = params;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.v13_ = true;\n        /**\n         * @private\n         * @type {import(\"./WMSServerType.js\").default|undefined}\n         */\n        _this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.tmpExtent_ = createEmpty();\n        _this.updateV13_();\n        _this.setKey(_this.getKeyForParams_());\n        return _this;\n    }\n    /**\n     * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n     * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n     * constructed.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n     * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n     *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n     *     in the `LAYERS` parameter will be used. `VERSION` should not be\n     *     specified here.\n     * @return {string|undefined} GetFeatureInfo URL.\n     * @api\n     */\n    TileWMS.prototype.getFeatureInfoUrl = function (coordinate, resolution, projection, params) {\n        var projectionObj = getProjection(projection);\n        var sourceProjectionObj = this.getProjection();\n        var tileGrid = this.getTileGrid();\n        if (!tileGrid) {\n            tileGrid = this.getTileGridForProjection(projectionObj);\n        }\n        var z = tileGrid.getZForResolution(resolution, this.zDirection);\n        var tileCoord = tileGrid.getTileCoordForCoordAndZ(coordinate, z);\n        if (tileGrid.getResolutions().length <= tileCoord[0]) {\n            return undefined;\n        }\n        var tileResolution = tileGrid.getResolution(tileCoord[0]);\n        var tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n        var tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n        var gutter = this.gutter_;\n        if (gutter !== 0) {\n            tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n            tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n        }\n        if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n            tileResolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n            tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n            coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n        }\n        var baseParams = {\n            'SERVICE': 'WMS',\n            'VERSION': DEFAULT_WMS_VERSION,\n            'REQUEST': 'GetFeatureInfo',\n            'FORMAT': 'image/png',\n            'TRANSPARENT': true,\n            'QUERY_LAYERS': this.params_['LAYERS']\n        };\n        assign(baseParams, this.params_, params);\n        var x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n        var y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n        baseParams[this.v13_ ? 'I' : 'X'] = x;\n        baseParams[this.v13_ ? 'J' : 'Y'] = y;\n        return this.getRequestUrl_(tileCoord, tileSize, tileExtent, 1, sourceProjectionObj || projectionObj, baseParams);\n    };\n    /**\n     * Return the GetLegendGraphic URL, optionally optimized for the passed\n     * resolution and possibly including any passed specific parameters. Returns\n     * `undefined` if the GetLegendGraphic URL cannot be constructed.\n     *\n     * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n     *     will not be calculated and included in URL.\n     * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n     *     request is generated for this wms layer, else it will try to use the\n     *     configured wms layer. Default `FORMAT` is `image/png`.\n     *     `VERSION` should not be specified here.\n     * @return {string|undefined} GetLegendGraphic URL.\n     * @api\n     */\n    TileWMS.prototype.getLegendUrl = function (resolution, params) {\n        if (this.urls[0] === undefined) {\n            return undefined;\n        }\n        var baseParams = {\n            'SERVICE': 'WMS',\n            'VERSION': DEFAULT_WMS_VERSION,\n            'REQUEST': 'GetLegendGraphic',\n            'FORMAT': 'image/png'\n        };\n        if (params === undefined || params['LAYER'] === undefined) {\n            var layers = this.params_.LAYERS;\n            var isSingleLayer = !Array.isArray(layers) || layers.length === 1;\n            if (!isSingleLayer) {\n                return undefined;\n            }\n            baseParams['LAYER'] = layers;\n        }\n        if (resolution !== undefined) {\n            var mpu = this.getProjection() ? this.getProjection().getMetersPerUnit() : 1;\n            var dpi = 25.4 / 0.28;\n            var inchesPerMeter = 39.37;\n            baseParams['SCALE'] = resolution * mpu * inchesPerMeter * dpi;\n        }\n        assign(baseParams, params);\n        return appendParams(/** @type {string} */ (this.urls[0]), baseParams);\n    };\n    /**\n     * @inheritDoc\n     */\n    TileWMS.prototype.getGutter = function () {\n        return this.gutter_;\n    };\n    /**\n     * Get the user-provided params, i.e. those passed to the constructor through\n     * the \"params\" option, and possibly updated using the updateParams method.\n     * @return {Object} Params.\n     * @api\n     */\n    TileWMS.prototype.getParams = function () {\n        return this.params_;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../size.js\").Size} tileSize Tile size.\n     * @param {import(\"../extent.js\").Extent} tileExtent Tile extent.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {Object} params Params.\n     * @return {string|undefined} Request URL.\n     * @private\n     */\n    TileWMS.prototype.getRequestUrl_ = function (tileCoord, tileSize, tileExtent, pixelRatio, projection, params) {\n        var urls = this.urls;\n        if (!urls) {\n            return undefined;\n        }\n        params['WIDTH'] = tileSize[0];\n        params['HEIGHT'] = tileSize[1];\n        params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n        if (!('STYLES' in this.params_)) {\n            params['STYLES'] = '';\n        }\n        if (pixelRatio != 1) {\n            switch (this.serverType_) {\n                case WMSServerType.GEOSERVER:\n                    var dpi = (90 * pixelRatio + 0.5) | 0;\n                    if ('FORMAT_OPTIONS' in params) {\n                        params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n                    }\n                    else {\n                        params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n                    }\n                    break;\n                case WMSServerType.MAPSERVER:\n                    params['MAP_RESOLUTION'] = 90 * pixelRatio;\n                    break;\n                case WMSServerType.CARMENTA_SERVER:\n                case WMSServerType.QGIS:\n                    params['DPI'] = 90 * pixelRatio;\n                    break;\n                default:\n                    assert(false, 52); // Unknown `serverType` configured\n                    break;\n            }\n        }\n        var axisOrientation = projection.getAxisOrientation();\n        var bbox = tileExtent;\n        if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n            var tmp = void 0;\n            tmp = tileExtent[0];\n            bbox[0] = tileExtent[1];\n            bbox[1] = tmp;\n            tmp = tileExtent[2];\n            bbox[2] = tileExtent[3];\n            bbox[3] = tmp;\n        }\n        params['BBOX'] = bbox.join(',');\n        var url;\n        if (urls.length == 1) {\n            url = urls[0];\n        }\n        else {\n            var index = modulo(tileCoordHash(tileCoord), urls.length);\n            url = urls[index];\n        }\n        return appendParams(url, params);\n    };\n    /**\n     * @inheritDoc\n     */\n    TileWMS.prototype.getTilePixelRatio = function (pixelRatio) {\n        return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n            /** @type {number} */ (pixelRatio);\n    };\n    /**\n     * @private\n     * @return {string} The key for the current params.\n     */\n    TileWMS.prototype.getKeyForParams_ = function () {\n        var i = 0;\n        var res = [];\n        for (var key in this.params_) {\n            res[i++] = key + '-' + this.params_[key];\n        }\n        return res.join('/');\n    };\n    /**\n     * Update the user-provided params.\n     * @param {Object} params Params.\n     * @api\n     */\n    TileWMS.prototype.updateParams = function (params) {\n        assign(this.params_, params);\n        this.updateV13_();\n        this.setKey(this.getKeyForParams_());\n    };\n    /**\n     * @private\n     */\n    TileWMS.prototype.updateV13_ = function () {\n        var version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n        this.v13_ = compareVersions(version, '1.3') >= 0;\n    };\n    return TileWMS;\n}(TileImage));\n/**\n * @param {import(\"../tilecoord.js\").TileCoord} tileCoord The tile coordinate\n * @param {number} pixelRatio The pixel ratio\n * @param {import(\"../proj/Projection.js\").default} projection The projection\n * @return {string|undefined} The tile URL\n * @this {TileWMS}\n */\nfunction tileUrlFunction(tileCoord, pixelRatio, projection) {\n    var tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n        tileGrid = this.getTileGridForProjection(projection);\n    }\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n        return undefined;\n    }\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n        pixelRatio = 1;\n    }\n    var tileResolution = tileGrid.getResolution(tileCoord[0]);\n    var tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    var tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n    var gutter = this.gutter_;\n    if (gutter !== 0) {\n        tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n        tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n    if (pixelRatio != 1) {\n        tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n    }\n    var baseParams = {\n        'SERVICE': 'WMS',\n        'VERSION': DEFAULT_WMS_VERSION,\n        'REQUEST': 'GetMap',\n        'FORMAT': 'image/png',\n        'TRANSPARENT': true\n    };\n    assign(baseParams, this.params_);\n    return this.getRequestUrl_(tileCoord, tileSize, tileExtent, pixelRatio, projection, baseParams);\n}\nexport default TileWMS;\n//# sourceMappingURL=TileWMS.js.map","/**\n * @module ol/source/ImageStatic\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ImageWrapper from '../Image.js';\nimport ImageState from '../ImageState.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport EventType from '../events/EventType.js';\nimport { intersects, getHeight, getWidth } from '../extent.js';\nimport { get as getProjection } from '../proj.js';\nimport ImageSource, { defaultImageLoadFunction } from './Image.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} [imageExtent] Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {import(\"../size.js\").Size} [imageSize] Size of the image in pixels. Usually the image size is auto-detected, so this\n * only needs to be set if auto-detection fails for some reason.\n * @property {string} url Image URL.\n */\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nvar Static = /** @class */ (function (_super) {\n    __extends(Static, _super);\n    /**\n     * @param {Options} options ImageStatic options.\n     */\n    function Static(options) {\n        var _this = this;\n        var crossOrigin = options.crossOrigin !== undefined ?\n            options.crossOrigin : null;\n        var /** @type {import(\"../Image.js\").LoadFunction} */ imageLoadFunction = options.imageLoadFunction !== undefined ?\n            options.imageLoadFunction : defaultImageLoadFunction;\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            projection: getProjection(options.projection)\n        }) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.url_ = options.url;\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        _this.imageExtent_ = options.imageExtent;\n        /**\n         * @private\n         * @type {import(\"../Image.js\").default}\n         */\n        _this.image_ = new ImageWrapper(_this.imageExtent_, undefined, 1, _this.url_, crossOrigin, imageLoadFunction);\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.imageSize_ = options.imageSize ? options.imageSize : null;\n        _this.image_.addEventListener(EventType.CHANGE, _this.handleImageChange.bind(_this));\n        return _this;\n    }\n    /**\n     * Returns the image extent\n     * @return {import(\"../extent.js\").Extent} image extent.\n     * @api\n     */\n    Static.prototype.getImageExtent = function () {\n        return this.imageExtent_;\n    };\n    /**\n     * @inheritDoc\n     */\n    Static.prototype.getImageInternal = function (extent, resolution, pixelRatio, projection) {\n        if (intersects(extent, this.image_.getExtent())) {\n            return this.image_;\n        }\n        return null;\n    };\n    /**\n     * Return the URL used for this image source.\n     * @return {string} URL.\n     * @api\n     */\n    Static.prototype.getUrl = function () {\n        return this.url_;\n    };\n    /**\n     * @inheritDoc\n     */\n    Static.prototype.handleImageChange = function (evt) {\n        if (this.image_.getState() == ImageState.LOADED) {\n            var imageExtent = this.image_.getExtent();\n            var image = this.image_.getImage();\n            var imageWidth = void 0, imageHeight = void 0;\n            if (this.imageSize_) {\n                imageWidth = this.imageSize_[0];\n                imageHeight = this.imageSize_[1];\n            }\n            else {\n                imageWidth = image.width;\n                imageHeight = image.height;\n            }\n            var resolution = getHeight(imageExtent) / imageHeight;\n            var targetWidth = Math.ceil(getWidth(imageExtent) / resolution);\n            if (targetWidth != imageWidth) {\n                var context = createCanvasContext2D(targetWidth, imageHeight);\n                var canvas = context.canvas;\n                context.drawImage(image, 0, 0, imageWidth, imageHeight, 0, 0, canvas.width, canvas.height);\n                this.image_.setImage(canvas);\n            }\n        }\n        _super.prototype.handleImageChange.call(this, evt);\n    };\n    return Static;\n}(ImageSource));\nexport default Static;\n//# sourceMappingURL=ImageStatic.js.map","(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = global || self, global.RBush = factory());\n}(this, function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { linearRingsContainsXY } from './contains.js';\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset, ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n    var i, ii, x, x1, x2, y1, y2;\n    var y = flatCenters[flatCentersOffset + 1];\n    /** @type {Array<number>} */\n    var intersections = [];\n    // Calculate intersections with the horizontal line\n    for (var r = 0, rr = ends.length; r < rr; ++r) {\n        var end = ends[r];\n        x1 = flatCoordinates[end - stride];\n        y1 = flatCoordinates[end - stride + 1];\n        for (i = offset; i < end; i += stride) {\n            x2 = flatCoordinates[i];\n            y2 = flatCoordinates[i + 1];\n            if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n                x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n                intersections.push(x);\n            }\n            x1 = x2;\n            y1 = y2;\n        }\n    }\n    // Find the longest segment of the horizontal line that has its center point\n    // inside the linear ring.\n    var pointX = NaN;\n    var maxSegmentLength = -Infinity;\n    intersections.sort(numberSafeCompareFunction);\n    x1 = intersections[0];\n    for (i = 1, ii = intersections.length; i < ii; ++i) {\n        x2 = intersections[i];\n        var segmentLength = Math.abs(x2 - x1);\n        if (segmentLength > maxSegmentLength) {\n            x = (x1 + x2) / 2;\n            if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n                pointX = x;\n                maxSegmentLength = segmentLength;\n            }\n        }\n        x1 = x2;\n    }\n    if (isNaN(pointX)) {\n        // There is no horizontal line that has its center point inside the linear\n        // ring.  Use the center of the the linear ring's extent.\n        pointX = flatCenters[flatCentersOffset];\n    }\n    if (opt_dest) {\n        opt_dest.push(pointX, y, maxSegmentLength);\n        return opt_dest;\n    }\n    else {\n        return [pointX, y, maxSegmentLength];\n    }\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n    var interiorPoints = [];\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        interiorPoints = getInteriorPointOfArray(flatCoordinates, offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n        offset = ends[ends.length - 1];\n    }\n    return interiorPoints;\n}\n//# sourceMappingURL=interiorpoint.js.map","/**\n * @module ol/geom/flat/segments\n */\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback) {\n    var point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    var point2 = [];\n    var ret;\n    for (; (offset + stride) < end; offset += stride) {\n        point2[0] = flatCoordinates[offset + stride];\n        point2[1] = flatCoordinates[offset + stride + 1];\n        ret = callback(point1, point2);\n        if (ret) {\n            return ret;\n        }\n        point1[0] = point2[0];\n        point1[1] = point2[1];\n    }\n    return false;\n}\n//# sourceMappingURL=segments.js.map","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nvar ImageStyle = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function ImageStyle(options) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.opacity_ = options.opacity;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.scale_ = options.scale;\n    }\n    /**\n     * Clones the style.\n     * @return {ImageStyle} The cloned style.\n     * @api\n     */\n    ImageStyle.prototype.clone = function () {\n        return new ImageStyle({\n            opacity: this.getOpacity(),\n            scale: this.getScale(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView()\n        });\n    };\n    /**\n     * Get the symbolizer opacity.\n     * @return {number} Opacity.\n     * @api\n     */\n    ImageStyle.prototype.getOpacity = function () {\n        return this.opacity_;\n    };\n    /**\n     * Determine whether the symbolizer rotates with the map.\n     * @return {boolean} Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the symoblizer rotation.\n     * @return {number} Rotation.\n     * @api\n     */\n    ImageStyle.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the symbolizer scale.\n     * @return {number} Scale.\n     * @api\n     */\n    ImageStyle.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @abstract\n     * @return {Array<number>} Anchor.\n     */\n    ImageStyle.prototype.getAnchor = function () {\n        return abstract();\n    };\n    /**\n     * Get the image element for the symbolizer.\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getHitDetectionImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    ImageStyle.prototype.getImageState = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    ImageStyle.prototype.getImageSize = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n     */\n    ImageStyle.prototype.getHitDetectionImageSize = function () {\n        return abstract();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @abstract\n     * @return {Array<number>} Origin.\n     */\n    ImageStyle.prototype.getOrigin = function () {\n        return abstract();\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size.\n     */\n    ImageStyle.prototype.getSize = function () {\n        return abstract();\n    };\n    /**\n     * Set the opacity.\n     *\n     * @param {number} opacity Opacity.\n     * @api\n     */\n    ImageStyle.prototype.setOpacity = function (opacity) {\n        this.opacity_ = opacity;\n    };\n    /**\n     * Set whether to rotate the style with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number} rotation Rotation.\n     * @api\n     */\n    ImageStyle.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number} scale Scale.\n     * @api\n     */\n    ImageStyle.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.listenImageChange = function (listener) {\n        abstract();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageStyle.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.unlistenImageChange = function (listener) {\n        abstract();\n    };\n    return ImageStyle;\n}());\nexport default ImageStyle;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/style/TextPlacement\n */\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n    POINT: 'point',\n    LINE: 'line'\n};\n//# sourceMappingURL=TextPlacement.js.map","/**\n * @module ol/render/VectorContext\n */\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nvar VectorContext = /** @class */ (function () {\n    function VectorContext() {\n    }\n    /**\n     * Render a geometry with a custom renderer.\n     *\n     * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {Function} renderer Renderer.\n     */\n    VectorContext.prototype.drawCustom = function (geometry, feature, renderer) { };\n    /**\n     * Render a geometry.\n     *\n     * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n     */\n    VectorContext.prototype.drawGeometry = function (geometry) { };\n    /**\n     * Set the rendering style.\n     *\n     * @param {import(\"../style/Style.js\").default} style The rendering style.\n     */\n    VectorContext.prototype.setStyle = function (style) { };\n    /**\n     * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     */\n    VectorContext.prototype.drawCircle = function (circleGeometry, feature) { };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"../style/Style.js\").default} style Style.\n     */\n    VectorContext.prototype.drawFeature = function (feature, style) { };\n    /**\n     * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     */\n    VectorContext.prototype.drawGeometryCollection = function (geometryCollectionGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawLineString = function (lineStringGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawMultiPoint = function (multiPointGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawPoint = function (pointGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawPolygon = function (polygonGeometry, feature) { };\n    /**\n     * @param {import(\"../geom/Geometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     */\n    VectorContext.prototype.drawText = function (geometry, feature) { };\n    /**\n     * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n     * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n     */\n    VectorContext.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) { };\n    /**\n     * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n     * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n     */\n    VectorContext.prototype.setImageStyle = function (imageStyle, opt_declutterGroup) { };\n    /**\n     * @param {import(\"../style/Text.js\").default} textStyle Text style.\n     * @param {import(\"./canvas.js\").DeclutterGroups=} opt_declutterGroups Declutter.\n     */\n    VectorContext.prototype.setTextStyle = function (textStyle, opt_declutterGroups) { };\n    return VectorContext;\n}());\nexport default VectorContext;\n//# sourceMappingURL=VectorContext.js.map","/**\n * @module ol/geom/flat/length\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length = 0;\n    for (var i = offset + stride; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n        x1 = x2;\n        y1 = y2;\n    }\n    return length;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n    var perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n    var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n    var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n    perimeter += Math.sqrt(dx * dx + dy * dy);\n    return perimeter;\n}\n//# sourceMappingURL=length.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction } from '../style/Style.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder'\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @extends {Layer<VectorSourceType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ = options.renderBuffer !== undefined ?\n            options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n            options.updateWhileAnimating : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n            options.updateWhileInteracting : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return (\n        /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER)));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike}\n     *     Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If it is `undefined` the default style is used. If\n     * it is `null` the layer has no style (a `null` style), so only features\n     * that have their own styles will be rendered in the layer. See\n     * {@link module:ol/style} for information on the default style.\n     * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (style) {\n        this.style_ = style !== undefined ? style : createDefaultStyle;\n        this.styleFunction_ = style === null ?\n            undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n    var script = document.createElement('script');\n    var key = 'olc_' + getUid(callback);\n    function cleanup() {\n        delete window[key];\n        script.parentNode.removeChild(script);\n    }\n    script.async = true;\n    script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n        (opt_callbackParam || 'callback') + '=' + key;\n    var timer = setTimeout(function () {\n        cleanup();\n        if (opt_errback) {\n            opt_errback();\n        }\n    }, 10000);\n    window[key] = function (data) {\n        clearTimeout(timer);\n        cleanup();\n        callback(data);\n    };\n    document.getElementsByTagName('head')[0].appendChild(script);\n}\n//# sourceMappingURL=net.js.map","/**\n * @module ol/source/XYZ\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport TileImage from './TileImage.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=18] Optional max zoom level.\n * @property {number} [minZoom=0] Optional min zoom level.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if url or urls are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number} [zDirection=0] Indicate which resolution should be used\n * by a renderer if the view resolution does not match any resolution of the tile source.\n * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n * will be used. If -1, the nearest higher resolution will be used.\n */\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link module:ol/source/TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n * @api\n */\nvar XYZ = /** @class */ (function (_super) {\n    __extends(XYZ, _super);\n    /**\n     * @param {Options=} opt_options XYZ options.\n     */\n    function XYZ(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        var projection = options.projection !== undefined ?\n            options.projection : 'EPSG:3857';\n        var tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n            createXYZ({\n                extent: extentFromProjection(projection),\n                maxZoom: options.maxZoom,\n                minZoom: options.minZoom,\n                tileSize: options.tileSize\n            });\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            opaque: options.opaque,\n            projection: projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileGrid: tileGrid,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: options.tileUrlFunction,\n            url: options.url,\n            urls: options.urls,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n            zDirection: options.zDirection\n        }) || this;\n        return _this;\n    }\n    return XYZ;\n}(TileImage));\nexport default XYZ;\n//# sourceMappingURL=XYZ.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/JSONFeature\n */\nimport { abstract } from '../util.js';\nimport FeatureFormat from './Feature.js';\nimport FormatType from './FormatType.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\nvar JSONFeature = /** @class */ (function (_super) {\n    __extends(JSONFeature, _super);\n    function JSONFeature() {\n        return _super.call(this) || this;\n    }\n    /**\n     * @inheritDoc\n     */\n    JSONFeature.prototype.getType = function () {\n        return FormatType.JSON;\n    };\n    /**\n     * Read a feature.  Only works for a single feature. Use `readFeatures` to\n     * read a feature collection.\n     *\n     * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     * @api\n     */\n    JSONFeature.prototype.readFeature = function (source, opt_options) {\n        return this.readFeatureFromObject(getObject(source), this.getReadOptions(source, opt_options));\n    };\n    /**\n     * Read all features.  Works with both a single feature and a feature\n     * collection.\n     *\n     * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     * @api\n     */\n    JSONFeature.prototype.readFeatures = function (source, opt_options) {\n        return this.readFeaturesFromObject(getObject(source), this.getReadOptions(source, opt_options));\n    };\n    /**\n     * @abstract\n     * @param {Object} object Object.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @protected\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    JSONFeature.prototype.readFeatureFromObject = function (object, opt_options) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Object} object Object.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @protected\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    JSONFeature.prototype.readFeaturesFromObject = function (object, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read a geometry.\n     *\n     * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     * @api\n     */\n    JSONFeature.prototype.readGeometry = function (source, opt_options) {\n        return this.readGeometryFromObject(getObject(source), this.getReadOptions(source, opt_options));\n    };\n    /**\n     * @abstract\n     * @param {Object} object Object.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @protected\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    JSONFeature.prototype.readGeometryFromObject = function (object, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read the projection.\n     *\n     * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     * @api\n     */\n    JSONFeature.prototype.readProjection = function (source) {\n        return this.readProjectionFromObject(getObject(source));\n    };\n    /**\n     * @abstract\n     * @param {Object} object Object.\n     * @protected\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    JSONFeature.prototype.readProjectionFromObject = function (object) {\n        return abstract();\n    };\n    /**\n     * Encode a feature as string.\n     *\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Encoded feature.\n     * @api\n     */\n    JSONFeature.prototype.writeFeature = function (feature, opt_options) {\n        return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n    };\n    /**\n     * @abstract\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {Object} Object.\n     */\n    JSONFeature.prototype.writeFeatureObject = function (feature, opt_options) {\n        return abstract();\n    };\n    /**\n     * Encode an array of features as string.\n     *\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Encoded features.\n     * @api\n     */\n    JSONFeature.prototype.writeFeatures = function (features, opt_options) {\n        return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {Object} Object.\n     */\n    JSONFeature.prototype.writeFeaturesObject = function (features, opt_options) {\n        return abstract();\n    };\n    /**\n     * Encode a geometry as string.\n     *\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Encoded geometry.\n     * @api\n     */\n    JSONFeature.prototype.writeGeometry = function (geometry, opt_options) {\n        return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n    };\n    /**\n     * @abstract\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {Object} Object.\n     */\n    JSONFeature.prototype.writeGeometryObject = function (geometry, opt_options) {\n        return abstract();\n    };\n    return JSONFeature;\n}(FeatureFormat));\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n    if (typeof source === 'string') {\n        var object = JSON.parse(source);\n        return object ? /** @type {Object} */ (object) : null;\n    }\n    else if (source !== null) {\n        return source;\n    }\n    else {\n        return null;\n    }\n}\nexport default JSONFeature;\n//# sourceMappingURL=JSONFeature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/XMLFeature\n */\nimport { abstract } from '../util.js';\nimport { extend } from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport { isDocument, parse } from '../xml.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @abstract\n */\nvar XMLFeature = /** @class */ (function (_super) {\n    __extends(XMLFeature, _super);\n    function XMLFeature() {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {XMLSerializer}\n         * @private\n         */\n        _this.xmlSerializer_ = new XMLSerializer();\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    XMLFeature.prototype.getType = function () {\n        return FormatType.XML;\n    };\n    /**\n     * Read a single feature.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     * @api\n     */\n    XMLFeature.prototype.readFeature = function (source, opt_options) {\n        if (!source) {\n            return null;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readFeatureFromDocument(doc, opt_options);\n        }\n        else if (isDocument(source)) {\n            return this.readFeatureFromDocument(/** @type {Document} */ (source), opt_options);\n        }\n        else {\n            return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    XMLFeature.prototype.readFeatureFromDocument = function (doc, opt_options) {\n        var features = this.readFeaturesFromDocument(doc, opt_options);\n        if (features.length > 0) {\n            return features[0];\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @param {Node} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    XMLFeature.prototype.readFeatureFromNode = function (node, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Read all features from a feature collection.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     * @api\n     */\n    XMLFeature.prototype.readFeatures = function (source, opt_options) {\n        if (!source) {\n            return [];\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readFeaturesFromDocument(doc, opt_options);\n        }\n        else if (isDocument(source)) {\n            return this.readFeaturesFromDocument(\n            /** @type {Document} */ (source), opt_options);\n        }\n        else {\n            return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @protected\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    XMLFeature.prototype.readFeaturesFromDocument = function (doc, opt_options) {\n        /** @type {Array<import(\"../Feature.js\").default>} */\n        var features = [];\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                extend(features, this.readFeaturesFromNode(n, opt_options));\n            }\n        }\n        return features;\n    };\n    /**\n     * @abstract\n     * @param {Node} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @protected\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    XMLFeature.prototype.readFeaturesFromNode = function (node, opt_options) {\n        return abstract();\n    };\n    /**\n     * @inheritDoc\n     */\n    XMLFeature.prototype.readGeometry = function (source, opt_options) {\n        if (!source) {\n            return null;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readGeometryFromDocument(doc, opt_options);\n        }\n        else if (isDocument(source)) {\n            return this.readGeometryFromDocument(\n            /** @type {Document} */ (source), opt_options);\n        }\n        else {\n            return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @protected\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    XMLFeature.prototype.readGeometryFromDocument = function (doc, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * @param {Node} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n     * @protected\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    XMLFeature.prototype.readGeometryFromNode = function (node, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Read the projection from the source.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     * @api\n     */\n    XMLFeature.prototype.readProjection = function (source) {\n        if (!source) {\n            return null;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readProjectionFromDocument(doc);\n        }\n        else if (isDocument(source)) {\n            return this.readProjectionFromDocument(/** @type {Document} */ (source));\n        }\n        else {\n            return this.readProjectionFromNode(/** @type {Node} */ (source));\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @protected\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    XMLFeature.prototype.readProjectionFromDocument = function (doc) {\n        return this.dataProjection;\n    };\n    /**\n     * @param {Node} node Node.\n     * @protected\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    XMLFeature.prototype.readProjectionFromNode = function (node) {\n        return this.dataProjection;\n    };\n    /**\n     * @inheritDoc\n     */\n    XMLFeature.prototype.writeFeature = function (feature, opt_options) {\n        var node = this.writeFeatureNode(feature, opt_options);\n        return this.xmlSerializer_.serializeToString(node);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n     * @protected\n     * @return {Node} Node.\n     */\n    XMLFeature.prototype.writeFeatureNode = function (feature, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * Encode an array of features as string.\n     *\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Result.\n     * @api\n     */\n    XMLFeature.prototype.writeFeatures = function (features, opt_options) {\n        var node = this.writeFeaturesNode(features, opt_options);\n        return this.xmlSerializer_.serializeToString(node);\n    };\n    /**\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n     * @return {Node} Node.\n     */\n    XMLFeature.prototype.writeFeaturesNode = function (features, opt_options) {\n        return null; // not implemented\n    };\n    /**\n     * @inheritDoc\n     */\n    XMLFeature.prototype.writeGeometry = function (geometry, opt_options) {\n        var node = this.writeGeometryNode(geometry, opt_options);\n        return this.xmlSerializer_.serializeToString(node);\n    };\n    /**\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n     * @return {Node} Node.\n     */\n    XMLFeature.prototype.writeGeometryNode = function (geometry, opt_options) {\n        return null; // not implemented\n    };\n    return XMLFeature;\n}(FeatureFormat));\nexport default XMLFeature;\n//# sourceMappingURL=XMLFeature.js.map","/**\n * @module ol/tilegrid/WMTS\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { find } from '../array.js';\nimport { get as getProjection } from '../proj.js';\nimport TileGrid from './TileGrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles\n * outside this extent will be requested by {@link module:ol/source/Tile} sources.\n * When no `origin` or `origins` are configured, the `origin` will be set to the\n * top-left corner of the extent.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e.\n * where the `x` and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left\n * to right and upwards. If not specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins,\n * i.e. where the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If\n * given, the array length should match the length of the `resolutions` array, i.e.\n * each resolution can have a different origin. Tile coordinates increase left to\n * right and upwards. If not specified, `extent` or `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each\n * resolution needs to match the zoom level. This means that even if a `minZoom`\n * is configured, the resolutions array will have a length of `maxZoom + 1`\n * @property {!Array<string>} matrixIds matrix IDs. The length of this array needs\n * to match the length of the `resolutions` array.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. The values here are the `TileMatrixWidth` and\n * `TileMatrixHeight` advertised in the GetCapabilities response of the WMTS, and\n * define the grid's extent together with the `origin`.\n * An `extent` can be configured in addition, and will further limit the extent for\n * which tile requests are made by sources. If the bottom-left corner of\n * the `extent` is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. The length of\n * this array needs to match the length of the `resolutions` array.\n * @property {Array<number>} [widths] Number of tile columns that cover the grid's\n * extent for each zoom level. Only required when used with a source that has `wrapX`\n * set to `true`, and only when the grid's origin differs from the one of the\n * projection's extent. The array length has to match the length of the `resolutions`\n * array, i.e. each resolution will have a matching entry here.\n */\n/**\n * @classdesc\n * Set the grid pattern for sources accessing WMTS tiled-image servers.\n * @api\n */\nvar WMTSTileGrid = /** @class */ (function (_super) {\n    __extends(WMTSTileGrid, _super);\n    /**\n     * @param {Options} options WMTS options.\n     */\n    function WMTSTileGrid(options) {\n        var _this = _super.call(this, {\n            extent: options.extent,\n            origin: options.origin,\n            origins: options.origins,\n            resolutions: options.resolutions,\n            tileSize: options.tileSize,\n            tileSizes: options.tileSizes,\n            sizes: options.sizes\n        }) || this;\n        /**\n         * @private\n         * @type {!Array<string>}\n         */\n        _this.matrixIds_ = options.matrixIds;\n        return _this;\n    }\n    /**\n     * @param {number} z Z.\n     * @return {string} MatrixId..\n     */\n    WMTSTileGrid.prototype.getMatrixId = function (z) {\n        return this.matrixIds_[z];\n    };\n    /**\n     * Get the list of matrix identifiers.\n     * @return {Array<string>} MatrixIds.\n     * @api\n     */\n    WMTSTileGrid.prototype.getMatrixIds = function () {\n        return this.matrixIds_;\n    };\n    return WMTSTileGrid;\n}(TileGrid));\nexport default WMTSTileGrid;\n/**\n * Create a tile grid from a WMTS capabilities matrix set and an\n * optional TileMatrixSetLimits.\n * @param {Object} matrixSet An object representing a matrixSet in the\n *     capabilities document.\n * @param {import(\"../extent.js\").Extent=} opt_extent An optional extent to restrict the tile\n *     ranges the server provides.\n * @param {Array<Object>=} opt_matrixLimits An optional object representing\n *     the available matrices for tileGrid.\n * @return {WMTSTileGrid} WMTS tileGrid instance.\n * @api\n */\nexport function createFromCapabilitiesMatrixSet(matrixSet, opt_extent, opt_matrixLimits) {\n    /** @type {!Array<number>} */\n    var resolutions = [];\n    /** @type {!Array<string>} */\n    var matrixIds = [];\n    /** @type {!Array<import(\"../coordinate.js\").Coordinate>} */\n    var origins = [];\n    /** @type {!Array<import(\"../size.js\").Size>} */\n    var tileSizes = [];\n    /** @type {!Array<import(\"../size.js\").Size>} */\n    var sizes = [];\n    var matrixLimits = opt_matrixLimits !== undefined ? opt_matrixLimits : [];\n    var supportedCRSPropName = 'SupportedCRS';\n    var matrixIdsPropName = 'TileMatrix';\n    var identifierPropName = 'Identifier';\n    var scaleDenominatorPropName = 'ScaleDenominator';\n    var topLeftCornerPropName = 'TopLeftCorner';\n    var tileWidthPropName = 'TileWidth';\n    var tileHeightPropName = 'TileHeight';\n    var code = matrixSet[supportedCRSPropName];\n    var projection = getProjection(code.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n        getProjection(code);\n    var metersPerUnit = projection.getMetersPerUnit();\n    // swap origin x and y coordinates if axis orientation is lat/long\n    var switchOriginXY = projection.getAxisOrientation().substr(0, 2) == 'ne';\n    matrixSet[matrixIdsPropName].sort(function (a, b) {\n        return b[scaleDenominatorPropName] - a[scaleDenominatorPropName];\n    });\n    matrixSet[matrixIdsPropName].forEach(function (elt) {\n        var matrixAvailable;\n        // use of matrixLimits to filter TileMatrices from GetCapabilities\n        // TileMatrixSet from unavailable matrix levels.\n        if (matrixLimits.length > 0) {\n            matrixAvailable = find(matrixLimits, function (elt_ml) {\n                if (elt[identifierPropName] == elt_ml[matrixIdsPropName]) {\n                    return true;\n                }\n                // Fallback for tileMatrix identifiers that don't get prefixed\n                // by their tileMatrixSet identifiers.\n                if (elt[identifierPropName].indexOf(':') === -1) {\n                    return matrixSet[identifierPropName] + ':' + elt[identifierPropName] === elt_ml[matrixIdsPropName];\n                }\n                return false;\n            });\n        }\n        else {\n            matrixAvailable = true;\n        }\n        if (matrixAvailable) {\n            matrixIds.push(elt[identifierPropName]);\n            var resolution = elt[scaleDenominatorPropName] * 0.28E-3 / metersPerUnit;\n            var tileWidth = elt[tileWidthPropName];\n            var tileHeight = elt[tileHeightPropName];\n            if (switchOriginXY) {\n                origins.push([elt[topLeftCornerPropName][1],\n                    elt[topLeftCornerPropName][0]]);\n            }\n            else {\n                origins.push(elt[topLeftCornerPropName]);\n            }\n            resolutions.push(resolution);\n            tileSizes.push(tileWidth == tileHeight ?\n                tileWidth : [tileWidth, tileHeight]);\n            sizes.push([elt['MatrixWidth'], elt['MatrixHeight']]);\n        }\n    });\n    return new WMTSTileGrid({\n        extent: opt_extent,\n        origins: origins,\n        resolutions: resolutions,\n        matrixIds: matrixIds,\n        tileSizes: tileSizes,\n        sizes: sizes\n    });\n}\n//# sourceMappingURL=WMTS.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/ImageBuilder\n */\nimport CanvasInstruction from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nvar CanvasImageBuilder = /** @class */ (function (_super) {\n    __extends(CanvasImageBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasImageBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").DeclutterGroups}\n         */\n        _this.declutterGroups_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.image_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.anchorX_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.anchorY_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.height_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.opacity_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.originX_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.originY_ = undefined;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.rotateWithView_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.rotation_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.scale_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.width_ = undefined;\n        return _this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} My end.\n     */\n    CanvasImageBuilder.prototype.drawCoordinates_ = function (flatCoordinates, offset, end, stride) {\n        return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.drawPoint = function (pointGeometry, feature) {\n        if (!this.image_) {\n            return;\n        }\n        this.beginGeometry(pointGeometry, feature);\n        var flatCoordinates = pointGeometry.getFlatCoordinates();\n        var stride = pointGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        var myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.instructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_ * this.pixelRatio, this.width_\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_, this.width_\n        ]);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.drawMultiPoint = function (multiPointGeometry, feature) {\n        if (!this.image_) {\n            return;\n        }\n        this.beginGeometry(multiPointGeometry, feature);\n        var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n        var stride = multiPointGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        var myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.instructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_ * this.pixelRatio, this.width_\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_, this.width_\n        ]);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.finish = function () {\n        this.reverseHitDetectionInstructions();\n        // FIXME this doesn't really protect us against further calls to draw*Geometry\n        this.anchorX_ = undefined;\n        this.anchorY_ = undefined;\n        this.hitDetectionImage_ = null;\n        this.image_ = null;\n        this.height_ = undefined;\n        this.scale_ = undefined;\n        this.opacity_ = undefined;\n        this.originX_ = undefined;\n        this.originY_ = undefined;\n        this.rotateWithView_ = undefined;\n        this.rotation_ = undefined;\n        this.width_ = undefined;\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.setImageStyle = function (imageStyle, declutterGroups) {\n        var anchor = imageStyle.getAnchor();\n        var size = imageStyle.getSize();\n        var hitDetectionImage = imageStyle.getHitDetectionImage(1);\n        var image = imageStyle.getImage(1);\n        var origin = imageStyle.getOrigin();\n        this.anchorX_ = anchor[0];\n        this.anchorY_ = anchor[1];\n        this.declutterGroups_ = /** @type {import(\"../canvas.js\").DeclutterGroups} */ (declutterGroups);\n        this.hitDetectionImage_ = hitDetectionImage;\n        this.image_ = image;\n        this.height_ = size[1];\n        this.opacity_ = imageStyle.getOpacity();\n        this.originX_ = origin[0];\n        this.originY_ = origin[1];\n        this.rotateWithView_ = imageStyle.getRotateWithView();\n        this.rotation_ = imageStyle.getRotation();\n        this.scale_ = imageStyle.getScale();\n        this.width_ = size[0];\n    };\n    return CanvasImageBuilder;\n}(CanvasBuilder));\nexport default CanvasImageBuilder;\n//# sourceMappingURL=ImageBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasInstruction, { strokeInstruction, beginPathInstruction } from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nvar CanvasLineStringBuilder = /** @class */ (function (_super) {\n    __extends(CanvasLineStringBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasLineStringBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} end.\n     */\n    CanvasLineStringBuilder.prototype.drawFlatCoordinates_ = function (flatCoordinates, offset, end, stride) {\n        var myBegin = this.coordinates.length;\n        var myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n        var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n        this.instructions.push(moveToLineToInstruction);\n        this.hitDetectionInstructions.push(moveToLineToInstruction);\n        return end;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasLineStringBuilder.prototype.drawLineString = function (lineStringGeometry, feature) {\n        var state = this.state;\n        var strokeStyle = state.strokeStyle;\n        var lineWidth = state.lineWidth;\n        if (strokeStyle === undefined || lineWidth === undefined) {\n            return;\n        }\n        this.updateStrokeStyle(state, this.applyStroke);\n        this.beginGeometry(lineStringGeometry, feature);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n            state.miterLimit, state.lineDash, state.lineDashOffset\n        ], beginPathInstruction);\n        var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n        var stride = lineStringGeometry.getStride();\n        this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.hitDetectionInstructions.push(strokeInstruction);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasLineStringBuilder.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {\n        var state = this.state;\n        var strokeStyle = state.strokeStyle;\n        var lineWidth = state.lineWidth;\n        if (strokeStyle === undefined || lineWidth === undefined) {\n            return;\n        }\n        this.updateStrokeStyle(state, this.applyStroke);\n        this.beginGeometry(multiLineStringGeometry, feature);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n            state.miterLimit, state.lineDash, state.lineDashOffset\n        ], beginPathInstruction);\n        var ends = multiLineStringGeometry.getEnds();\n        var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n        var stride = multiLineStringGeometry.getStride();\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n        }\n        this.hitDetectionInstructions.push(strokeInstruction);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasLineStringBuilder.prototype.finish = function () {\n        var state = this.state;\n        if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n            this.instructions.push(strokeInstruction);\n        }\n        this.reverseHitDetectionInstructions();\n        this.state = null;\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @inheritDoc.\n     */\n    CanvasLineStringBuilder.prototype.applyStroke = function (state) {\n        if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n            this.instructions.push(strokeInstruction);\n            state.lastStroke = this.coordinates.length;\n        }\n        state.lastStroke = 0;\n        _super.prototype.applyStroke.call(this, state);\n        this.instructions.push(beginPathInstruction);\n    };\n    return CanvasLineStringBuilder;\n}(CanvasBuilder));\nexport default CanvasLineStringBuilder;\n//# sourceMappingURL=LineStringBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/PolygonBuilder\n */\nimport { snap } from '../../geom/flat/simplify.js';\nimport { defaultFillStyle } from '../canvas.js';\nimport CanvasInstruction, { fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction } from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nvar CanvasPolygonBuilder = /** @class */ (function (_super) {\n    __extends(CanvasPolygonBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasPolygonBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} End.\n     */\n    CanvasPolygonBuilder.prototype.drawFlatCoordinatess_ = function (flatCoordinates, offset, ends, stride) {\n        var state = this.state;\n        var fill = state.fillStyle !== undefined;\n        var stroke = state.strokeStyle !== undefined;\n        var numEnds = ends.length;\n        this.instructions.push(beginPathInstruction);\n        this.hitDetectionInstructions.push(beginPathInstruction);\n        for (var i = 0; i < numEnds; ++i) {\n            var end = ends[i];\n            var myBegin = this.coordinates.length;\n            var myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n            var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n            this.instructions.push(moveToLineToInstruction);\n            this.hitDetectionInstructions.push(moveToLineToInstruction);\n            if (stroke) {\n                // Performance optimization: only call closePath() when we have a stroke.\n                // Otherwise the ring is closed already (see appendFlatCoordinates above).\n                this.instructions.push(closePathInstruction);\n                this.hitDetectionInstructions.push(closePathInstruction);\n            }\n            offset = end;\n        }\n        if (fill) {\n            this.instructions.push(fillInstruction);\n            this.hitDetectionInstructions.push(fillInstruction);\n        }\n        if (stroke) {\n            this.instructions.push(strokeInstruction);\n            this.hitDetectionInstructions.push(strokeInstruction);\n        }\n        return offset;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.drawCircle = function (circleGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(circleGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n                state.miterLimit, state.lineDash, state.lineDashOffset\n            ]);\n        }\n        var flatCoordinates = circleGeometry.getFlatCoordinates();\n        var stride = circleGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        this.appendFlatCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n        var circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n        this.instructions.push(beginPathInstruction, circleInstruction);\n        this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n        if (state.fillStyle !== undefined) {\n            this.instructions.push(fillInstruction);\n            this.hitDetectionInstructions.push(fillInstruction);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.instructions.push(strokeInstruction);\n            this.hitDetectionInstructions.push(strokeInstruction);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.drawPolygon = function (polygonGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(polygonGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n                state.miterLimit, state.lineDash, state.lineDashOffset\n            ]);\n        }\n        var ends = polygonGeometry.getEnds();\n        var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n        var stride = polygonGeometry.getStride();\n        this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(multiPolygonGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n                state.miterLimit, state.lineDash, state.lineDashOffset\n            ]);\n        }\n        var endss = multiPolygonGeometry.getEndss();\n        var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n        var stride = multiPolygonGeometry.getStride();\n        var offset = 0;\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n            offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.finish = function () {\n        this.reverseHitDetectionInstructions();\n        this.state = null;\n        // We want to preserve topology when drawing polygons.  Polygons are\n        // simplified using quantization and point elimination. However, we might\n        // have received a mix of quantized and non-quantized geometries, so ensure\n        // that all are quantized by quantizing all coordinates in the batch.\n        var tolerance = this.tolerance;\n        if (tolerance !== 0) {\n            var coordinates = this.coordinates;\n            for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n                coordinates[i] = snap(coordinates[i], tolerance);\n            }\n        }\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @private\n     */\n    CanvasPolygonBuilder.prototype.setFillStrokeStyles_ = function () {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        if (fillStyle !== undefined) {\n            this.updateFillStyle(state, this.createFill);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.updateStrokeStyle(state, this.applyStroke);\n        }\n    };\n    return CanvasPolygonBuilder;\n}(CanvasBuilder));\nexport default CanvasPolygonBuilder;\n//# sourceMappingURL=PolygonBuilder.js.map","/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport { createEmpty } from '../../extent.js';\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"./BuilderType\").default, typeof Builder>}\n */\nvar BATCH_CONSTRUCTORS = {\n    'Circle': PolygonBuilder,\n    'Default': Builder,\n    'Image': ImageBuilder,\n    'LineString': LineStringBuilder,\n    'Polygon': PolygonBuilder,\n    'Text': TextBuilder\n};\nvar BuilderGroup = /** @class */ (function () {\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} declutter Decluttering enabled.\n     */\n    function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio, declutter) {\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.declutter_ = declutter;\n        /**\n         * @type {import(\"../canvas.js\").DeclutterGroups}\n         * @private\n         */\n        this.declutterGroups_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.tolerance_ = tolerance;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {!Object<string, !Object<import(\"./BuilderType\").default, Builder>>}\n         */\n        this.buildersByZIndex_ = {};\n    }\n    /**\n     * @param {boolean} group Group with previous builder.\n     * @return {import(\"../canvas\").DeclutterGroups} The resulting instruction groups.\n     */\n    BuilderGroup.prototype.addDeclutter = function (group) {\n        var declutter = null;\n        if (this.declutter_) {\n            if (group) {\n                declutter = this.declutterGroups_;\n                /** @type {number} */ (declutter[0][4])++;\n            }\n            else {\n                declutter = this.declutterGroups_ = [createEmpty()];\n                declutter[0].push(1);\n            }\n        }\n        return declutter;\n    };\n    /**\n     * @return {!Object<string, !Object<import(\"./BuilderType\").default, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n     */\n    BuilderGroup.prototype.finish = function () {\n        var builderInstructions = {};\n        for (var zKey in this.buildersByZIndex_) {\n            builderInstructions[zKey] = builderInstructions[zKey] || {};\n            var builders = this.buildersByZIndex_[zKey];\n            for (var builderKey in builders) {\n                var builderInstruction = builders[builderKey].finish();\n                builderInstructions[zKey][builderKey] = builderInstruction;\n            }\n        }\n        return builderInstructions;\n    };\n    /**\n     * @param {number|undefined} zIndex Z index.\n     * @param {import(\"./BuilderType.js\").default} builderType Replay type.\n     * @return {import(\"../VectorContext.js\").default} Replay.\n     */\n    BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n        var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n        var replays = this.buildersByZIndex_[zIndexKey];\n        if (replays === undefined) {\n            replays = {};\n            this.buildersByZIndex_[zIndexKey] = replays;\n        }\n        var replay = replays[builderType];\n        if (replay === undefined) {\n            var Constructor = BATCH_CONSTRUCTORS[builderType];\n            replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n            replays[builderType] = replay;\n        }\n        return replay;\n    };\n    return BuilderGroup;\n}());\nexport default BuilderGroup;\n//# sourceMappingURL=BuilderGroup.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/source/Tile\n */\nimport { abstract } from '../util.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport Event from '../events/Event.js';\nimport { equivalent } from '../proj.js';\nimport { toSize, scale as scaleSize } from '../size.js';\nimport Source from './Source.js';\nimport { getKeyZXY, withinExtentAndZ } from '../tilecoord.js';\nimport { wrapX, getForProjection as getTileGridForProjection } from '../tilegrid.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {number} [tilePixelRatio]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n * @property {number} [zDirection=0]\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @abstract\n * @api\n */\nvar TileSource = /** @class */ (function (_super) {\n    __extends(TileSource, _super);\n    /**\n     * @param {Options} options SourceTile source options.\n     */\n    function TileSource(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            attributionsCollapsible: options.attributionsCollapsible,\n            projection: options.projection,\n            state: options.state,\n            wrapX: options.wrapX\n        }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n            options.tilePixelRatio : 1;\n        /**\n         * @protected\n         * @type {import(\"../tilegrid/TileGrid.js\").default}\n         */\n        _this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n        var cacheSize = options.cacheSize;\n        if (cacheSize === undefined) {\n            var tileSize = [256, 256];\n            var tileGrid = options.tileGrid;\n            if (tileGrid) {\n                toSize(tileGrid.getTileSize(tileGrid.getMinZoom()), tileSize);\n            }\n            var canUseScreen = typeof screen !== 'undefined';\n            var width = canUseScreen ? (screen.availWidth || screen.width) : 1920;\n            var height = canUseScreen ? (screen.availHeight || screen.height) : 1080;\n            cacheSize = 4 * Math.ceil(width / tileSize[0]) * Math.ceil(height / tileSize[1]);\n        }\n        /**\n         * @protected\n         * @type {import(\"../TileCache.js\").default}\n         */\n        _this.tileCache = new TileCache(cacheSize);\n        /**\n         * @protected\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.tmpSize = [0, 0];\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.key_ = options.key || '';\n        /**\n         * @protected\n         * @type {import(\"../Tile.js\").Options}\n         */\n        _this.tileOptions = { transition: options.transition };\n        /**\n         * zDirection hint, read by the renderer. Indicates which resolution should be used\n         * by a renderer if the views resolution does not match any resolution of the tile source.\n         * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n         * will be used. If -1, the nearest higher resolution will be used.\n         * @type {number}\n         */\n        _this.zDirection = options.zDirection ? options.zDirection : 0;\n        return _this;\n    }\n    /**\n     * @return {boolean} Can expire cache.\n     */\n    TileSource.prototype.canExpireCache = function () {\n        return this.tileCache.canExpireCache();\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {!Object<string, import(\"../TileRange.js\").default>} usedTiles Used tiles.\n     */\n    TileSource.prototype.expireCache = function (projection, usedTiles) {\n        var tileCache = this.getTileCacheForProjection(projection);\n        if (tileCache) {\n            tileCache.expireCache(usedTiles);\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @param {number} z Zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {function(import(\"../Tile.js\").default):(boolean|void)} callback Called with each\n     *     loaded tile.  If the callback returns `false`, the tile will not be\n     *     considered loaded.\n     * @return {boolean} The tile range is fully covered with loaded tiles.\n     */\n    TileSource.prototype.forEachLoadedTile = function (projection, z, tileRange, callback) {\n        var tileCache = this.getTileCacheForProjection(projection);\n        if (!tileCache) {\n            return false;\n        }\n        var covered = true;\n        var tile, tileCoordKey, loaded;\n        for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n            for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n                tileCoordKey = getKeyZXY(z, x, y);\n                loaded = false;\n                if (tileCache.containsKey(tileCoordKey)) {\n                    tile = /** @type {!import(\"../Tile.js\").default} */ (tileCache.get(tileCoordKey));\n                    loaded = tile.getState() === TileState.LOADED;\n                    if (loaded) {\n                        loaded = (callback(tile) !== false);\n                    }\n                }\n                if (!loaded) {\n                    covered = false;\n                }\n            }\n        }\n        return covered;\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {number} Gutter.\n     */\n    TileSource.prototype.getGutterForProjection = function (projection) {\n        return 0;\n    };\n    /**\n     * Return the key to be used for all tiles in the source.\n     * @return {string} The key for all tiles.\n     * @protected\n     */\n    TileSource.prototype.getKey = function () {\n        return this.key_;\n    };\n    /**\n     * Set the value to be used as the key for all tiles in the source.\n     * @param {string} key The key for tiles.\n     * @protected\n     */\n    TileSource.prototype.setKey = function (key) {\n        if (this.key_ !== key) {\n            this.key_ = key;\n            this.changed();\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {boolean} Opaque.\n     */\n    TileSource.prototype.getOpaque = function (projection) {\n        return this.opaque_;\n    };\n    /**\n     * @inheritDoc\n     */\n    TileSource.prototype.getResolutions = function () {\n        return this.tileGrid.getResolutions();\n    };\n    /**\n     * @abstract\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!import(\"../Tile.js\").default} Tile.\n     */\n    TileSource.prototype.getTile = function (z, x, y, pixelRatio, projection) {\n        return abstract();\n    };\n    /**\n     * Return the tile grid of the tile source.\n     * @return {import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n     * @api\n     */\n    TileSource.prototype.getTileGrid = function () {\n        return this.tileGrid;\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n     */\n    TileSource.prototype.getTileGridForProjection = function (projection) {\n        if (!this.tileGrid) {\n            return getTileGridForProjection(projection);\n        }\n        else {\n            return this.tileGrid;\n        }\n    };\n    /**\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../TileCache.js\").default} Tile cache.\n     * @protected\n     */\n    TileSource.prototype.getTileCacheForProjection = function (projection) {\n        var thisProj = this.getProjection();\n        if (thisProj && !equivalent(thisProj, projection)) {\n            return null;\n        }\n        else {\n            return this.tileCache;\n        }\n    };\n    /**\n     * Get the tile pixel ratio for this source. Subclasses may override this\n     * method, which is meant to return a supported pixel ratio that matches the\n     * provided `pixelRatio` as close as possible.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {number} Tile pixel ratio.\n     */\n    TileSource.prototype.getTilePixelRatio = function (pixelRatio) {\n        return this.tilePixelRatio_;\n    };\n    /**\n     * @param {number} z Z.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {import(\"../size.js\").Size} Tile size.\n     */\n    TileSource.prototype.getTilePixelSize = function (z, pixelRatio, projection) {\n        var tileGrid = this.getTileGridForProjection(projection);\n        var tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n        var tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n        if (tilePixelRatio == 1) {\n            return tileSize;\n        }\n        else {\n            return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n        }\n    };\n    /**\n     * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n     * is outside the resolution and extent range of the tile grid, `null` will be\n     * returned.\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n     *     null if no tile URL should be created for the passed `tileCoord`.\n     */\n    TileSource.prototype.getTileCoordForTileUrlFunction = function (tileCoord, opt_projection) {\n        var projection = opt_projection !== undefined ?\n            opt_projection : this.getProjection();\n        var tileGrid = this.getTileGridForProjection(projection);\n        if (this.getWrapX() && projection.isGlobal()) {\n            tileCoord = wrapX(tileGrid, tileCoord, projection);\n        }\n        return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n    };\n    /**\n     * Remove all cached tiles from the source. The next render cycle will fetch new tiles.\n     * @api\n     */\n    TileSource.prototype.clear = function () {\n        this.tileCache.clear();\n    };\n    /**\n     * @inheritDoc\n     */\n    TileSource.prototype.refresh = function () {\n        this.clear();\n        _super.prototype.refresh.call(this);\n    };\n    /**\n     * Marks a tile coord as being used, without triggering a load.\n     * @abstract\n     * @param {number} z Tile coordinate z.\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    TileSource.prototype.useTile = function (z, x, y, projection) { };\n    return TileSource;\n}(Source));\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nvar TileSourceEvent = /** @class */ (function (_super) {\n    __extends(TileSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Tile.js\").default} tile The tile.\n     */\n    function TileSourceEvent(type, tile) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The tile related to the event.\n         * @type {import(\"../Tile.js\").default}\n         * @api\n         */\n        _this.tile = tile;\n        return _this;\n    }\n    return TileSourceEvent;\n}(Event));\nexport { TileSourceEvent };\nexport default TileSource;\n//# sourceMappingURL=Tile.js.map","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.proj4 = factory());\n}(this, (function () { 'use strict';\n\n\tvar globals = function(defs) {\n\t  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n\t  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n\t  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n\t  defs.WGS84 = defs['EPSG:4326'];\n\t  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n\t  defs.GOOGLE = defs['EPSG:3857'];\n\t  defs['EPSG:900913'] = defs['EPSG:3857'];\n\t  defs['EPSG:102113'] = defs['EPSG:3857'];\n\t};\n\n\tvar PJD_3PARAM = 1;\n\tvar PJD_7PARAM = 2;\n\tvar PJD_WGS84 = 4; // WGS84 or equivalent\n\tvar PJD_NODATUM = 5; // WGS84 or equivalent\n\tvar SEC_TO_RAD = 4.84813681109535993589914102357e-6;\n\tvar HALF_PI = Math.PI/2;\n\t// ellipoid pj_set_ell.c\n\tvar SIXTH = 0.1666666666666666667;\n\t/* 1/6 */\n\tvar RA4 = 0.04722222222222222222;\n\t/* 17/360 */\n\tvar RA6 = 0.02215608465608465608;\n\tvar EPSLN = 1.0e-10;\n\t// you'd think you could use Number.EPSILON above but that makes\n\t// Mollweide get into an infinate loop.\n\n\tvar D2R = 0.01745329251994329577;\n\tvar R2D = 57.29577951308232088;\n\tvar FORTPI = Math.PI/4;\n\tvar TWO_PI = Math.PI * 2;\n\t// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n\t// degree range by a tiny amount don't get wrapped. This prevents points that\n\t// have drifted from their original location along the 180th meridian (due to\n\t// floating point error) from changing their sign.\n\tvar SPI = 3.14159265359;\n\n\tvar exports$1 = {};\n\texports$1.greenwich = 0.0; //\"0dE\",\n\texports$1.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\n\texports$1.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\n\texports$1.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\n\texports$1.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\n\texports$1.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\n\texports$1.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\n\texports$1.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\n\texports$1.ferro = -17.666666666667; //\"17d40'W\",\n\texports$1.brussels = 4.367975; //\"4d22'4.71\\\"E\",\n\texports$1.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\n\texports$1.athens = 23.7163375; //\"23d42'58.815\\\"E\",\n\texports$1.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n\n\tvar units = {\n\t  ft: {to_meter: 0.3048},\n\t  'us-ft': {to_meter: 1200 / 3937}\n\t};\n\n\tvar ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction match(obj, key) {\n\t  if (obj[key]) {\n\t    return obj[key];\n\t  }\n\t  var keys = Object.keys(obj);\n\t  var lkey = key.toLowerCase().replace(ignoredChar, '');\n\t  var i = -1;\n\t  var testkey, processedKey;\n\t  while (++i < keys.length) {\n\t    testkey = keys[i];\n\t    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n\t    if (processedKey === lkey) {\n\t      return obj[testkey];\n\t    }\n\t  }\n\t}\n\n\tvar parseProj = function(defData) {\n\t  var self = {};\n\t  var paramObj = defData.split('+').map(function(v) {\n\t    return v.trim();\n\t  }).filter(function(a) {\n\t    return a;\n\t  }).reduce(function(p, a) {\n\t    var split = a.split('=');\n\t    split.push(true);\n\t    p[split[0].toLowerCase()] = split[1];\n\t    return p;\n\t  }, {});\n\t  var paramName, paramVal, paramOutname;\n\t  var params = {\n\t    proj: 'projName',\n\t    datum: 'datumCode',\n\t    rf: function(v) {\n\t      self.rf = parseFloat(v);\n\t    },\n\t    lat_0: function(v) {\n\t      self.lat0 = v * D2R;\n\t    },\n\t    lat_1: function(v) {\n\t      self.lat1 = v * D2R;\n\t    },\n\t    lat_2: function(v) {\n\t      self.lat2 = v * D2R;\n\t    },\n\t    lat_ts: function(v) {\n\t      self.lat_ts = v * D2R;\n\t    },\n\t    lon_0: function(v) {\n\t      self.long0 = v * D2R;\n\t    },\n\t    lon_1: function(v) {\n\t      self.long1 = v * D2R;\n\t    },\n\t    lon_2: function(v) {\n\t      self.long2 = v * D2R;\n\t    },\n\t    alpha: function(v) {\n\t      self.alpha = parseFloat(v) * D2R;\n\t    },\n\t    lonc: function(v) {\n\t      self.longc = v * D2R;\n\t    },\n\t    x_0: function(v) {\n\t      self.x0 = parseFloat(v);\n\t    },\n\t    y_0: function(v) {\n\t      self.y0 = parseFloat(v);\n\t    },\n\t    k_0: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    k: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    a: function(v) {\n\t      self.a = parseFloat(v);\n\t    },\n\t    b: function(v) {\n\t      self.b = parseFloat(v);\n\t    },\n\t    r_a: function() {\n\t      self.R_A = true;\n\t    },\n\t    zone: function(v) {\n\t      self.zone = parseInt(v, 10);\n\t    },\n\t    south: function() {\n\t      self.utmSouth = true;\n\t    },\n\t    towgs84: function(v) {\n\t      self.datum_params = v.split(\",\").map(function(a) {\n\t        return parseFloat(a);\n\t      });\n\t    },\n\t    to_meter: function(v) {\n\t      self.to_meter = parseFloat(v);\n\t    },\n\t    units: function(v) {\n\t      self.units = v;\n\t      var unit = match(units, v);\n\t      if (unit) {\n\t        self.to_meter = unit.to_meter;\n\t      }\n\t    },\n\t    from_greenwich: function(v) {\n\t      self.from_greenwich = v * D2R;\n\t    },\n\t    pm: function(v) {\n\t      var pm = match(exports$1, v);\n\t      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n\t    },\n\t    nadgrids: function(v) {\n\t      if (v === '@null') {\n\t        self.datumCode = 'none';\n\t      }\n\t      else {\n\t        self.nadgrids = v;\n\t      }\n\t    },\n\t    axis: function(v) {\n\t      var legalAxis = \"ewnsud\";\n\t      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n\t        self.axis = v;\n\t      }\n\t    }\n\t  };\n\t  for (paramName in paramObj) {\n\t    paramVal = paramObj[paramName];\n\t    if (paramName in params) {\n\t      paramOutname = params[paramName];\n\t      if (typeof paramOutname === 'function') {\n\t        paramOutname(paramVal);\n\t      }\n\t      else {\n\t        self[paramOutname] = paramVal;\n\t      }\n\t    }\n\t    else {\n\t      self[paramName] = paramVal;\n\t    }\n\t  }\n\t  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n\t    self.datumCode = self.datumCode.toLowerCase();\n\t  }\n\t  return self;\n\t};\n\n\tvar NEUTRAL = 1;\n\tvar KEYWORD = 2;\n\tvar NUMBER = 3;\n\tvar QUOTED = 4;\n\tvar AFTERQUOTE = 5;\n\tvar ENDED = -1;\n\tvar whitespace = /\\s/;\n\tvar latin = /[A-Za-z]/;\n\tvar keyword = /[A-Za-z84]/;\n\tvar endThings = /[,\\]]/;\n\tvar digets = /[\\d\\.E\\-\\+]/;\n\t// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction Parser(text) {\n\t  if (typeof text !== 'string') {\n\t    throw new Error('not a string');\n\t  }\n\t  this.text = text.trim();\n\t  this.level = 0;\n\t  this.place = 0;\n\t  this.root = null;\n\t  this.stack = [];\n\t  this.currentObject = null;\n\t  this.state = NEUTRAL;\n\t}\n\tParser.prototype.readCharicter = function() {\n\t  var char = this.text[this.place++];\n\t  if (this.state !== QUOTED) {\n\t    while (whitespace.test(char)) {\n\t      if (this.place >= this.text.length) {\n\t        return;\n\t      }\n\t      char = this.text[this.place++];\n\t    }\n\t  }\n\t  switch (this.state) {\n\t    case NEUTRAL:\n\t      return this.neutral(char);\n\t    case KEYWORD:\n\t      return this.keyword(char)\n\t    case QUOTED:\n\t      return this.quoted(char);\n\t    case AFTERQUOTE:\n\t      return this.afterquote(char);\n\t    case NUMBER:\n\t      return this.number(char);\n\t    case ENDED:\n\t      return;\n\t  }\n\t};\n\tParser.prototype.afterquote = function(char) {\n\t  if (char === '\"') {\n\t    this.word += '\"';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = this.word.trim();\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n\t};\n\tParser.prototype.afterItem = function(char) {\n\t  if (char === ',') {\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t    }\n\t    this.word = null;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (char === ']') {\n\t    this.level--;\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t      this.word = null;\n\t    }\n\t    this.state = NEUTRAL;\n\t    this.currentObject = this.stack.pop();\n\t    if (!this.currentObject) {\n\t      this.state = ENDED;\n\t    }\n\n\t    return;\n\t  }\n\t};\n\tParser.prototype.number = function(char) {\n\t  if (digets.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = parseFloat(this.word);\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n\t};\n\tParser.prototype.quoted = function(char) {\n\t  if (char === '\"') {\n\t    this.state = AFTERQUOTE;\n\t    return;\n\t  }\n\t  this.word += char;\n\t  return;\n\t};\n\tParser.prototype.keyword = function(char) {\n\t  if (keyword.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (char === '[') {\n\t    var newObjects = [];\n\t    newObjects.push(this.word);\n\t    this.level++;\n\t    if (this.root === null) {\n\t      this.root = newObjects;\n\t    } else {\n\t      this.currentObject.push(newObjects);\n\t    }\n\t    this.stack.push(this.currentObject);\n\t    this.currentObject = newObjects;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n\t};\n\tParser.prototype.neutral = function(char) {\n\t  if (latin.test(char)) {\n\t    this.word = char;\n\t    this.state = KEYWORD;\n\t    return;\n\t  }\n\t  if (char === '\"') {\n\t    this.word = '';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (digets.test(char)) {\n\t    this.word = char;\n\t    this.state = NUMBER;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n\t};\n\tParser.prototype.output = function() {\n\t  while (this.place < this.text.length) {\n\t    this.readCharicter();\n\t  }\n\t  if (this.state === ENDED) {\n\t    return this.root;\n\t  }\n\t  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n\t};\n\n\tfunction parseString(txt) {\n\t  var parser = new Parser(txt);\n\t  return parser.output();\n\t}\n\n\tfunction mapit(obj, key, value) {\n\t  if (Array.isArray(key)) {\n\t    value.unshift(key);\n\t    key = null;\n\t  }\n\t  var thing = key ? {} : obj;\n\n\t  var out = value.reduce(function(newObj, item) {\n\t    sExpr(item, newObj);\n\t    return newObj\n\t  }, thing);\n\t  if (key) {\n\t    obj[key] = out;\n\t  }\n\t}\n\n\tfunction sExpr(v, obj) {\n\t  if (!Array.isArray(v)) {\n\t    obj[v] = true;\n\t    return;\n\t  }\n\t  var key = v.shift();\n\t  if (key === 'PARAMETER') {\n\t    key = v.shift();\n\t  }\n\t  if (v.length === 1) {\n\t    if (Array.isArray(v[0])) {\n\t      obj[key] = {};\n\t      sExpr(v[0], obj[key]);\n\t      return;\n\t    }\n\t    obj[key] = v[0];\n\t    return;\n\t  }\n\t  if (!v.length) {\n\t    obj[key] = true;\n\t    return;\n\t  }\n\t  if (key === 'TOWGS84') {\n\t    obj[key] = v;\n\t    return;\n\t  }\n\t  if (!Array.isArray(key)) {\n\t    obj[key] = {};\n\t  }\n\n\t  var i;\n\t  switch (key) {\n\t    case 'UNIT':\n\t    case 'PRIMEM':\n\t    case 'VERT_DATUM':\n\t      obj[key] = {\n\t        name: v[0].toLowerCase(),\n\t        convert: v[1]\n\t      };\n\t      if (v.length === 3) {\n\t        sExpr(v[2], obj[key]);\n\t      }\n\t      return;\n\t    case 'SPHEROID':\n\t    case 'ELLIPSOID':\n\t      obj[key] = {\n\t        name: v[0],\n\t        a: v[1],\n\t        rf: v[2]\n\t      };\n\t      if (v.length === 4) {\n\t        sExpr(v[3], obj[key]);\n\t      }\n\t      return;\n\t    case 'PROJECTEDCRS':\n\t    case 'PROJCRS':\n\t    case 'GEOGCS':\n\t    case 'GEOCCS':\n\t    case 'PROJCS':\n\t    case 'LOCAL_CS':\n\t    case 'GEODCRS':\n\t    case 'GEODETICCRS':\n\t    case 'GEODETICDATUM':\n\t    case 'EDATUM':\n\t    case 'ENGINEERINGDATUM':\n\t    case 'VERT_CS':\n\t    case 'VERTCRS':\n\t    case 'VERTICALCRS':\n\t    case 'COMPD_CS':\n\t    case 'COMPOUNDCRS':\n\t    case 'ENGINEERINGCRS':\n\t    case 'ENGCRS':\n\t    case 'FITTED_CS':\n\t    case 'LOCAL_DATUM':\n\t    case 'DATUM':\n\t      v[0] = ['name', v[0]];\n\t      mapit(obj, key, v);\n\t      return;\n\t    default:\n\t      i = -1;\n\t      while (++i < v.length) {\n\t        if (!Array.isArray(v[i])) {\n\t          return sExpr(v, obj[key]);\n\t        }\n\t      }\n\t      return mapit(obj, key, v);\n\t  }\n\t}\n\n\tvar D2R$1 = 0.01745329251994329577;\n\tfunction rename(obj, params) {\n\t  var outName = params[0];\n\t  var inName = params[1];\n\t  if (!(outName in obj) && (inName in obj)) {\n\t    obj[outName] = obj[inName];\n\t    if (params.length === 3) {\n\t      obj[outName] = params[2](obj[outName]);\n\t    }\n\t  }\n\t}\n\n\tfunction d2r(input) {\n\t  return input * D2R$1;\n\t}\n\n\tfunction cleanWKT(wkt) {\n\t  if (wkt.type === 'GEOGCS') {\n\t    wkt.projName = 'longlat';\n\t  } else if (wkt.type === 'LOCAL_CS') {\n\t    wkt.projName = 'identity';\n\t    wkt.local = true;\n\t  } else {\n\t    if (typeof wkt.PROJECTION === 'object') {\n\t      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n\t    } else {\n\t      wkt.projName = wkt.PROJECTION;\n\t    }\n\t  }\n\t  if (wkt.UNIT) {\n\t    wkt.units = wkt.UNIT.name.toLowerCase();\n\t    if (wkt.units === 'metre') {\n\t      wkt.units = 'meter';\n\t    }\n\t    if (wkt.UNIT.convert) {\n\t      if (wkt.type === 'GEOGCS') {\n\t        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n\t          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n\t        }\n\t      } else {\n\t        wkt.to_meter = wkt.UNIT.convert, 10;\n\t      }\n\t    }\n\t  }\n\t  var geogcs = wkt.GEOGCS;\n\t  if (wkt.type === 'GEOGCS') {\n\t    geogcs = wkt;\n\t  }\n\t  if (geogcs) {\n\t    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n\t    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n\t    //}\n\t    if (geogcs.DATUM) {\n\t      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n\t    } else {\n\t      wkt.datumCode = geogcs.name.toLowerCase();\n\t    }\n\t    if (wkt.datumCode.slice(0, 2) === 'd_') {\n\t      wkt.datumCode = wkt.datumCode.slice(2);\n\t    }\n\t    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n\t      wkt.datumCode = 'nzgd49';\n\t    }\n\t    if (wkt.datumCode === 'wgs_1984') {\n\t      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n\t        wkt.sphere = true;\n\t      }\n\t      wkt.datumCode = 'wgs84';\n\t    }\n\t    if (wkt.datumCode.slice(-6) === '_ferro') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n\t    }\n\t    if (wkt.datumCode.slice(-8) === '_jakarta') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n\t    }\n\t    if (~wkt.datumCode.indexOf('belge')) {\n\t      wkt.datumCode = 'rnb72';\n\t    }\n\t    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n\t      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n\t      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n\t        wkt.ellps = 'intl';\n\t      }\n\n\t      wkt.a = geogcs.DATUM.SPHEROID.a;\n\t      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n\t    }\n\n\t    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n\t      wkt.datum_params = geogcs.DATUM.TOWGS84;\n\t    }\n\t    if (~wkt.datumCode.indexOf('osgb_1936')) {\n\t      wkt.datumCode = 'osgb36';\n\t    }\n\t    if (~wkt.datumCode.indexOf('osni_1952')) {\n\t      wkt.datumCode = 'osni52';\n\t    }\n\t    if (~wkt.datumCode.indexOf('tm65')\n\t      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n\t      wkt.datumCode = 'ire65';\n\t    }\n\t    if (wkt.datumCode === 'ch1903+') {\n\t      wkt.datumCode = 'ch1903';\n\t    }\n\t    if (~wkt.datumCode.indexOf('israel')) {\n\t      wkt.datumCode = 'isr93';\n\t    }\n\t  }\n\t  if (wkt.b && !isFinite(wkt.b)) {\n\t    wkt.b = wkt.a;\n\t  }\n\n\t  function toMeter(input) {\n\t    var ratio = wkt.to_meter || 1;\n\t    return input * ratio;\n\t  }\n\t  var renamer = function(a) {\n\t    return rename(wkt, a);\n\t  };\n\t  var list = [\n\t    ['standard_parallel_1', 'Standard_Parallel_1'],\n\t    ['standard_parallel_2', 'Standard_Parallel_2'],\n\t    ['false_easting', 'False_Easting'],\n\t    ['false_northing', 'False_Northing'],\n\t    ['central_meridian', 'Central_Meridian'],\n\t    ['latitude_of_origin', 'Latitude_Of_Origin'],\n\t    ['latitude_of_origin', 'Central_Parallel'],\n\t    ['scale_factor', 'Scale_Factor'],\n\t    ['k0', 'scale_factor'],\n\t    ['latitude_of_center', 'Latitude_Of_Center'],\n\t    ['latitude_of_center', 'Latitude_of_center'],\n\t    ['lat0', 'latitude_of_center', d2r],\n\t    ['longitude_of_center', 'Longitude_Of_Center'],\n\t    ['longitude_of_center', 'Longitude_of_center'],\n\t    ['longc', 'longitude_of_center', d2r],\n\t    ['x0', 'false_easting', toMeter],\n\t    ['y0', 'false_northing', toMeter],\n\t    ['long0', 'central_meridian', d2r],\n\t    ['lat0', 'latitude_of_origin', d2r],\n\t    ['lat0', 'standard_parallel_1', d2r],\n\t    ['lat1', 'standard_parallel_1', d2r],\n\t    ['lat2', 'standard_parallel_2', d2r],\n\t    ['azimuth', 'Azimuth'],\n\t    ['alpha', 'azimuth', d2r],\n\t    ['srsCode', 'name']\n\t  ];\n\t  list.forEach(renamer);\n\t  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n\t    wkt.long0 = wkt.longc;\n\t  }\n\t  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n\t    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n\t    wkt.lat_ts = wkt.lat1;\n\t  }\n\t}\n\tvar wkt = function(wkt) {\n\t  var lisp = parseString(wkt);\n\t  var type = lisp.shift();\n\t  var name = lisp.shift();\n\t  lisp.unshift(['name', name]);\n\t  lisp.unshift(['type', type]);\n\t  var obj = {};\n\t  sExpr(lisp, obj);\n\t  cleanWKT(obj);\n\t  return obj;\n\t};\n\n\tfunction defs(name) {\n\t  /*global console*/\n\t  var that = this;\n\t  if (arguments.length === 2) {\n\t    var def = arguments[1];\n\t    if (typeof def === 'string') {\n\t      if (def.charAt(0) === '+') {\n\t        defs[name] = parseProj(arguments[1]);\n\t      }\n\t      else {\n\t        defs[name] = wkt(arguments[1]);\n\t      }\n\t    } else {\n\t      defs[name] = def;\n\t    }\n\t  }\n\t  else if (arguments.length === 1) {\n\t    if (Array.isArray(name)) {\n\t      return name.map(function(v) {\n\t        if (Array.isArray(v)) {\n\t          defs.apply(that, v);\n\t        }\n\t        else {\n\t          defs(v);\n\t        }\n\t      });\n\t    }\n\t    else if (typeof name === 'string') {\n\t      if (name in defs) {\n\t        return defs[name];\n\t      }\n\t    }\n\t    else if ('EPSG' in name) {\n\t      defs['EPSG:' + name.EPSG] = name;\n\t    }\n\t    else if ('ESRI' in name) {\n\t      defs['ESRI:' + name.ESRI] = name;\n\t    }\n\t    else if ('IAU2000' in name) {\n\t      defs['IAU2000:' + name.IAU2000] = name;\n\t    }\n\t    else {\n\t      console.log(name);\n\t    }\n\t    return;\n\t  }\n\n\n\t}\n\tglobals(defs);\n\n\tfunction testObj(code){\n\t  return typeof code === 'string';\n\t}\n\tfunction testDef(code){\n\t  return code in defs;\n\t}\n\t var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\n\tfunction testWKT(code){\n\t  return codeWords.some(function (word) {\n\t    return code.indexOf(word) > -1;\n\t  });\n\t}\n\tvar codes = ['3857', '900913', '3785', '102113'];\n\tfunction checkMercator(item) {\n\t  var auth = match(item, 'authority');\n\t  if (!auth) {\n\t    return;\n\t  }\n\t  var code = match(auth, 'epsg');\n\t  return code && codes.indexOf(code) > -1;\n\t}\n\tfunction checkProjStr(item) {\n\t  var ext = match(item, 'extension');\n\t  if (!ext) {\n\t    return;\n\t  }\n\t  return match(ext, 'proj4');\n\t}\n\tfunction testProj(code){\n\t  return code[0] === '+';\n\t}\n\tfunction parse(code){\n\t  if (testObj(code)) {\n\t    //check to see if this is a WKT string\n\t    if (testDef(code)) {\n\t      return defs[code];\n\t    }\n\t    if (testWKT(code)) {\n\t      var out = wkt(code);\n\t      // test of spetial case, due to this being a very common and often malformed\n\t      if (checkMercator(out)) {\n\t        return defs['EPSG:3857'];\n\t      }\n\t      var maybeProjStr = checkProjStr(out);\n\t      if (maybeProjStr) {\n\t        return parseProj(maybeProjStr);\n\t      }\n\t      return out;\n\t    }\n\t    if (testProj(code)) {\n\t      return parseProj(code);\n\t    }\n\t  }else{\n\t    return code;\n\t  }\n\t}\n\n\tvar extend = function(destination, source) {\n\t  destination = destination || {};\n\t  var value, property;\n\t  if (!source) {\n\t    return destination;\n\t  }\n\t  for (property in source) {\n\t    value = source[property];\n\t    if (value !== undefined) {\n\t      destination[property] = value;\n\t    }\n\t  }\n\t  return destination;\n\t};\n\n\tvar msfnz = function(eccent, sinphi, cosphi) {\n\t  var con = eccent * sinphi;\n\t  return cosphi / (Math.sqrt(1 - con * con));\n\t};\n\n\tvar sign = function(x) {\n\t  return x<0 ? -1 : 1;\n\t};\n\n\tvar adjust_lon = function(x) {\n\t  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n\t};\n\n\tvar tsfnz = function(eccent, phi, sinphi) {\n\t  var con = eccent * sinphi;\n\t  var com = 0.5 * eccent;\n\t  con = Math.pow(((1 - con) / (1 + con)), com);\n\t  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n\t};\n\n\tvar phi2z = function(eccent, ts) {\n\t  var eccnth = 0.5 * eccent;\n\t  var con, dphi;\n\t  var phi = HALF_PI - 2 * Math.atan(ts);\n\t  for (var i = 0; i <= 15; i++) {\n\t    con = eccent * Math.sin(phi);\n\t    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\t  //console.log(\"phi2z has NoConvergence\");\n\t  return -9999;\n\t};\n\n\tfunction init() {\n\t  var con = this.b / this.a;\n\t  this.es = 1 - con * con;\n\t  if(!('x0' in this)){\n\t    this.x0 = 0;\n\t  }\n\t  if(!('y0' in this)){\n\t    this.y0 = 0;\n\t  }\n\t  this.e = Math.sqrt(this.es);\n\t  if (this.lat_ts) {\n\t    if (this.sphere) {\n\t      this.k0 = Math.cos(this.lat_ts);\n\t    }\n\t    else {\n\t      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (!this.k0) {\n\t      if (this.k) {\n\t        this.k0 = this.k;\n\t      }\n\t      else {\n\t        this.k0 = 1;\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/* Mercator forward equations--mapping lat,long to x,y\n\t  --------------------------------------------------*/\n\n\tfunction forward(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  // convert to radians\n\t  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n\t    return null;\n\t  }\n\n\t  var x, y;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    return null;\n\t  }\n\t  else {\n\t    if (this.sphere) {\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n\t    }\n\t    else {\n\t      var sinphi = Math.sin(lat);\n\t      var ts = tsfnz(this.e, lat, sinphi);\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 - this.a * this.k0 * Math.log(ts);\n\t    }\n\t    p.x = x;\n\t    p.y = y;\n\t    return p;\n\t  }\n\t}\n\n\t/* Mercator inverse equations--mapping x,y to lat/long\n\t  --------------------------------------------------*/\n\tfunction inverse(p) {\n\n\t  var x = p.x - this.x0;\n\t  var y = p.y - this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n\t  }\n\t  else {\n\t    var ts = Math.exp(-y / (this.a * this.k0));\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$1 = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\n\tvar merc = {\n\t  init: init,\n\t  forward: forward,\n\t  inverse: inverse,\n\t  names: names$1\n\t};\n\n\tfunction init$1() {\n\t  //no-op for longlat\n\t}\n\n\tfunction identity(pt) {\n\t  return pt;\n\t}\n\tvar names$2 = [\"longlat\", \"identity\"];\n\tvar longlat = {\n\t  init: init$1,\n\t  forward: identity,\n\t  inverse: identity,\n\t  names: names$2\n\t};\n\n\tvar projs = [merc, longlat];\n\tvar names = {};\n\tvar projStore = [];\n\n\tfunction add(proj, i) {\n\t  var len = projStore.length;\n\t  if (!proj.names) {\n\t    console.log(i);\n\t    return true;\n\t  }\n\t  projStore[len] = proj;\n\t  proj.names.forEach(function(n) {\n\t    names[n.toLowerCase()] = len;\n\t  });\n\t  return this;\n\t}\n\n\tfunction get(name) {\n\t  if (!name) {\n\t    return false;\n\t  }\n\t  var n = name.toLowerCase();\n\t  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n\t    return projStore[names[n]];\n\t  }\n\t}\n\n\tfunction start() {\n\t  projs.forEach(add);\n\t}\n\tvar projections = {\n\t  start: start,\n\t  add: add,\n\t  get: get\n\t};\n\n\tvar exports$2 = {};\n\texports$2.MERIT = {\n\t  a: 6378137.0,\n\t  rf: 298.257,\n\t  ellipseName: \"MERIT 1983\"\n\t};\n\n\texports$2.SGS85 = {\n\t  a: 6378136.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Soviet Geodetic System 85\"\n\t};\n\n\texports$2.GRS80 = {\n\t  a: 6378137.0,\n\t  rf: 298.257222101,\n\t  ellipseName: \"GRS 1980(IUGG, 1980)\"\n\t};\n\n\texports$2.IAU76 = {\n\t  a: 6378140.0,\n\t  rf: 298.257,\n\t  ellipseName: \"IAU 1976\"\n\t};\n\n\texports$2.airy = {\n\t  a: 6377563.396,\n\t  b: 6356256.910,\n\t  ellipseName: \"Airy 1830\"\n\t};\n\n\texports$2.APL4 = {\n\t  a: 6378137,\n\t  rf: 298.25,\n\t  ellipseName: \"Appl. Physics. 1965\"\n\t};\n\n\texports$2.NWL9D = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Naval Weapons Lab., 1965\"\n\t};\n\n\texports$2.mod_airy = {\n\t  a: 6377340.189,\n\t  b: 6356034.446,\n\t  ellipseName: \"Modified Airy\"\n\t};\n\n\texports$2.andrae = {\n\t  a: 6377104.43,\n\t  rf: 300.0,\n\t  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n\t};\n\n\texports$2.aust_SA = {\n\t  a: 6378160.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Australian Natl & S. Amer. 1969\"\n\t};\n\n\texports$2.GRS67 = {\n\t  a: 6378160.0,\n\t  rf: 298.2471674270,\n\t  ellipseName: \"GRS 67(IUGG 1967)\"\n\t};\n\n\texports$2.bessel = {\n\t  a: 6377397.155,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841\"\n\t};\n\n\texports$2.bess_nam = {\n\t  a: 6377483.865,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841 (Namibia)\"\n\t};\n\n\texports$2.clrk66 = {\n\t  a: 6378206.4,\n\t  b: 6356583.8,\n\t  ellipseName: \"Clarke 1866\"\n\t};\n\n\texports$2.clrk80 = {\n\t  a: 6378249.145,\n\t  rf: 293.4663,\n\t  ellipseName: \"Clarke 1880 mod.\"\n\t};\n\n\texports$2.clrk58 = {\n\t  a: 6378293.645208759,\n\t  rf: 294.2606763692654,\n\t  ellipseName: \"Clarke 1858\"\n\t};\n\n\texports$2.CPM = {\n\t  a: 6375738.7,\n\t  rf: 334.29,\n\t  ellipseName: \"Comm. des Poids et Mesures 1799\"\n\t};\n\n\texports$2.delmbr = {\n\t  a: 6376428.0,\n\t  rf: 311.5,\n\t  ellipseName: \"Delambre 1810 (Belgium)\"\n\t};\n\n\texports$2.engelis = {\n\t  a: 6378136.05,\n\t  rf: 298.2566,\n\t  ellipseName: \"Engelis 1985\"\n\t};\n\n\texports$2.evrst30 = {\n\t  a: 6377276.345,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1830\"\n\t};\n\n\texports$2.evrst48 = {\n\t  a: 6377304.063,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1948\"\n\t};\n\n\texports$2.evrst56 = {\n\t  a: 6377301.243,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1956\"\n\t};\n\n\texports$2.evrst69 = {\n\t  a: 6377295.664,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1969\"\n\t};\n\n\texports$2.evrstSS = {\n\t  a: 6377298.556,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest (Sabah & Sarawak)\"\n\t};\n\n\texports$2.fschr60 = {\n\t  a: 6378166.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer (Mercury Datum) 1960\"\n\t};\n\n\texports$2.fschr60m = {\n\t  a: 6378155.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1960\"\n\t};\n\n\texports$2.fschr68 = {\n\t  a: 6378150.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1968\"\n\t};\n\n\texports$2.helmert = {\n\t  a: 6378200.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Helmert 1906\"\n\t};\n\n\texports$2.hough = {\n\t  a: 6378270.0,\n\t  rf: 297.0,\n\t  ellipseName: \"Hough\"\n\t};\n\n\texports$2.intl = {\n\t  a: 6378388.0,\n\t  rf: 297.0,\n\t  ellipseName: \"International 1909 (Hayford)\"\n\t};\n\n\texports$2.kaula = {\n\t  a: 6378163.0,\n\t  rf: 298.24,\n\t  ellipseName: \"Kaula 1961\"\n\t};\n\n\texports$2.lerch = {\n\t  a: 6378139.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Lerch 1979\"\n\t};\n\n\texports$2.mprts = {\n\t  a: 6397300.0,\n\t  rf: 191.0,\n\t  ellipseName: \"Maupertius 1738\"\n\t};\n\n\texports$2.new_intl = {\n\t  a: 6378157.5,\n\t  b: 6356772.2,\n\t  ellipseName: \"New International 1967\"\n\t};\n\n\texports$2.plessis = {\n\t  a: 6376523.0,\n\t  rf: 6355863.0,\n\t  ellipseName: \"Plessis 1817 (France)\"\n\t};\n\n\texports$2.krass = {\n\t  a: 6378245.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Krassovsky, 1942\"\n\t};\n\n\texports$2.SEasia = {\n\t  a: 6378155.0,\n\t  b: 6356773.3205,\n\t  ellipseName: \"Southeast Asia\"\n\t};\n\n\texports$2.walbeck = {\n\t  a: 6376896.0,\n\t  b: 6355834.8467,\n\t  ellipseName: \"Walbeck\"\n\t};\n\n\texports$2.WGS60 = {\n\t  a: 6378165.0,\n\t  rf: 298.3,\n\t  ellipseName: \"WGS 60\"\n\t};\n\n\texports$2.WGS66 = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"WGS 66\"\n\t};\n\n\texports$2.WGS7 = {\n\t  a: 6378135.0,\n\t  rf: 298.26,\n\t  ellipseName: \"WGS 72\"\n\t};\n\n\tvar WGS84 = exports$2.WGS84 = {\n\t  a: 6378137.0,\n\t  rf: 298.257223563,\n\t  ellipseName: \"WGS 84\"\n\t};\n\n\texports$2.sphere = {\n\t  a: 6370997.0,\n\t  b: 6370997.0,\n\t  ellipseName: \"Normal Sphere (r=6370997)\"\n\t};\n\n\tfunction eccentricity(a, b, rf, R_A) {\n\t  var a2 = a * a; // used in geocentric\n\t  var b2 = b * b; // used in geocentric\n\t  var es = (a2 - b2) / a2; // e ^ 2\n\t  var e = 0;\n\t  if (R_A) {\n\t    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n\t    a2 = a * a;\n\t    es = 0;\n\t  } else {\n\t    e = Math.sqrt(es); // eccentricity\n\t  }\n\t  var ep2 = (a2 - b2) / b2; // used in geocentric\n\t  return {\n\t    es: es,\n\t    e: e,\n\t    ep2: ep2\n\t  };\n\t}\n\tfunction sphere(a, b, rf, ellps, sphere) {\n\t  if (!a) { // do we have an ellipsoid?\n\t    var ellipse = match(exports$2, ellps);\n\t    if (!ellipse) {\n\t      ellipse = WGS84;\n\t    }\n\t    a = ellipse.a;\n\t    b = ellipse.b;\n\t    rf = ellipse.rf;\n\t  }\n\n\t  if (rf && !b) {\n\t    b = (1.0 - 1.0 / rf) * a;\n\t  }\n\t  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n\t    sphere = true;\n\t    b = a;\n\t  }\n\t  return {\n\t    a: a,\n\t    b: b,\n\t    rf: rf,\n\t    sphere: sphere\n\t  };\n\t}\n\n\tvar exports$3 = {};\n\texports$3.wgs84 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"WGS84\",\n\t  datumName: \"WGS84\"\n\t};\n\n\texports$3.ch1903 = {\n\t  towgs84: \"674.374,15.056,405.346\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"swiss\"\n\t};\n\n\texports$3.ggrs87 = {\n\t  towgs84: \"-199.87,74.79,246.62\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"Greek_Geodetic_Reference_System_1987\"\n\t};\n\n\texports$3.nad83 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"North_American_Datum_1983\"\n\t};\n\n\texports$3.nad27 = {\n\t  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n\t  ellipse: \"clrk66\",\n\t  datumName: \"North_American_Datum_1927\"\n\t};\n\n\texports$3.potsdam = {\n\t  towgs84: \"606.0,23.0,413.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n\t};\n\n\texports$3.carthage = {\n\t  towgs84: \"-263.0,6.0,431.0\",\n\t  ellipse: \"clark80\",\n\t  datumName: \"Carthage 1934 Tunisia\"\n\t};\n\n\texports$3.hermannskogel = {\n\t  towgs84: \"653.0,-212.0,449.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Hermannskogel\"\n\t};\n\n\texports$3.osni52 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Irish National\"\n\t};\n\n\texports$3.ire65 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"mod_airy\",\n\t  datumName: \"Ireland 1965\"\n\t};\n\n\texports$3.rassadiran = {\n\t  towgs84: \"-133.63,-157.5,-158.62\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Rassadiran\"\n\t};\n\n\texports$3.nzgd49 = {\n\t  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n\t  ellipse: \"intl\",\n\t  datumName: \"New Zealand Geodetic Datum 1949\"\n\t};\n\n\texports$3.osgb36 = {\n\t  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Airy 1830\"\n\t};\n\n\texports$3.s_jtsk = {\n\t  towgs84: \"589,76,480\",\n\t  ellipse: 'bessel',\n\t  datumName: 'S-JTSK (Ferro)'\n\t};\n\n\texports$3.beduaram = {\n\t  towgs84: '-106,-87,188',\n\t  ellipse: 'clrk80',\n\t  datumName: 'Beduaram'\n\t};\n\n\texports$3.gunung_segara = {\n\t  towgs84: '-403,684,41',\n\t  ellipse: 'bessel',\n\t  datumName: 'Gunung Segara Jakarta'\n\t};\n\n\texports$3.rnb72 = {\n\t  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Reseau National Belge 1972\"\n\t};\n\n\tfunction datum(datumCode, datum_params, a, b, es, ep2) {\n\t  var out = {};\n\n\t  if (datumCode === undefined || datumCode === 'none') {\n\t    out.datum_type = PJD_NODATUM;\n\t  } else {\n\t    out.datum_type = PJD_WGS84;\n\t  }\n\n\t  if (datum_params) {\n\t    out.datum_params = datum_params.map(parseFloat);\n\t    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n\t      out.datum_type = PJD_3PARAM;\n\t    }\n\t    if (out.datum_params.length > 3) {\n\t      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n\t        out.datum_type = PJD_7PARAM;\n\t        out.datum_params[3] *= SEC_TO_RAD;\n\t        out.datum_params[4] *= SEC_TO_RAD;\n\t        out.datum_params[5] *= SEC_TO_RAD;\n\t        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n\t      }\n\t    }\n\t  }\n\n\t  out.a = a; //datum object also uses these values\n\t  out.b = b;\n\t  out.es = es;\n\t  out.ep2 = ep2;\n\t  return out;\n\t}\n\n\tfunction Projection(srsCode,callback) {\n\t  if (!(this instanceof Projection)) {\n\t    return new Projection(srsCode);\n\t  }\n\t  callback = callback || function(error){\n\t    if(error){\n\t      throw error;\n\t    }\n\t  };\n\t  var json = parse(srsCode);\n\t  if(typeof json !== 'object'){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  var ourProj = Projection.projections.get(json.projName);\n\t  if(!ourProj){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  if (json.datumCode && json.datumCode !== 'none') {\n\t    var datumDef = match(exports$3, json.datumCode);\n\t    if (datumDef) {\n\t      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n\t      json.ellps = datumDef.ellipse;\n\t      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n\t    }\n\t  }\n\t  json.k0 = json.k0 || 1.0;\n\t  json.axis = json.axis || 'enu';\n\t  json.ellps = json.ellps || 'wgs84';\n\t  var sphere_ = sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n\t  var ecc = eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n\t  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n\t  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n\t  extend(this, ourProj); // transfer all the methods from the projection\n\n\t  // copy the 4 things over we calulated in deriveConstants.sphere\n\t  this.a = sphere_.a;\n\t  this.b = sphere_.b;\n\t  this.rf = sphere_.rf;\n\t  this.sphere = sphere_.sphere;\n\n\t  // copy the 3 things we calculated in deriveConstants.eccentricity\n\t  this.es = ecc.es;\n\t  this.e = ecc.e;\n\t  this.ep2 = ecc.ep2;\n\n\t  // add in the datum object\n\t  this.datum = datumObj;\n\n\t  // init the projection\n\t  this.init();\n\n\t  // legecy callback from back in the day when it went to spatialreference.org\n\t  callback(null, this);\n\n\t}\n\tProjection.projections = projections;\n\tProjection.projections.start();\n\n\t'use strict';\n\tfunction compareDatums(source, dest) {\n\t  if (source.datum_type !== dest.datum_type) {\n\t    return false; // false, datums are not equal\n\t  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n\t    // the tolerance for es is to ensure that GRS80 and WGS84\n\t    // are considered identical\n\t    return false;\n\t  } else if (source.datum_type === PJD_3PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n\t  } else if (source.datum_type === PJD_7PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n\t  } else {\n\t    return true; // datums are equal\n\t  }\n\t} // cs_compare_datums()\n\n\t/*\n\t * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n\t * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n\t * according to the current ellipsoid parameters.\n\t *\n\t *    Latitude  : Geodetic latitude in radians                     (input)\n\t *    Longitude : Geodetic longitude in radians                    (input)\n\t *    Height    : Geodetic height, in meters                       (input)\n\t *    X         : Calculated Geocentric X coordinate, in meters    (output)\n\t *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n\t *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n\t *\n\t */\n\tfunction geodeticToGeocentric(p, es, a) {\n\t  var Longitude = p.x;\n\t  var Latitude = p.y;\n\t  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n\t  var Rn; /*  Earth radius at location  */\n\t  var Sin_Lat; /*  Math.sin(Latitude)  */\n\t  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n\t  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n\t  /*\n\t   ** Don't blow up if Latitude is just a little out of the value\n\t   ** range as it may just be a rounding issue.  Also removed longitude\n\t   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n\t   */\n\t  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n\t    Latitude = -HALF_PI;\n\t  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n\t    Latitude = HALF_PI;\n\t  } else if (Latitude < -HALF_PI) {\n\t    /* Latitude out of range */\n\t    //..reportError('geocent:lat out of range:' + Latitude);\n\t    return { x: -Infinity, y: -Infinity, z: p.z };\n\t  } else if (Latitude > HALF_PI) {\n\t    /* Latitude out of range */\n\t    return { x: Infinity, y: Infinity, z: p.z };\n\t  }\n\n\t  if (Longitude > Math.PI) {\n\t    Longitude -= (2 * Math.PI);\n\t  }\n\t  Sin_Lat = Math.sin(Latitude);\n\t  Cos_Lat = Math.cos(Latitude);\n\t  Sin2_Lat = Sin_Lat * Sin_Lat;\n\t  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n\t  return {\n\t    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n\t    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n\t    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n\t  };\n\t} // cs_geodetic_to_geocentric()\n\n\tfunction geocentricToGeodetic(p, es, a, b) {\n\t  /* local defintions and variables */\n\t  /* end-criterium of loop, accuracy of sin(Latitude) */\n\t  var genau = 1e-12;\n\t  var genau2 = (genau * genau);\n\t  var maxiter = 30;\n\n\t  var P; /* distance between semi-minor axis and location */\n\t  var RR; /* distance between center and location */\n\t  var CT; /* sin of geocentric latitude */\n\t  var ST; /* cos of geocentric latitude */\n\t  var RX;\n\t  var RK;\n\t  var RN; /* Earth radius at location */\n\t  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n\t  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n\t  var CPHI; /* cos of searched geodetic latitude */\n\t  var SPHI; /* sin of searched geodetic latitude */\n\t  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n\t  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n\t  var X = p.x;\n\t  var Y = p.y;\n\t  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n\t  var Longitude;\n\t  var Latitude;\n\t  var Height;\n\n\t  P = Math.sqrt(X * X + Y * Y);\n\t  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n\t  /*      special cases for latitude and longitude */\n\t  if (P / a < genau) {\n\n\t    /*  special case, if P=0. (X=0., Y=0.) */\n\t    Longitude = 0.0;\n\n\t    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n\t     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n\t    if (RR / a < genau) {\n\t      Latitude = HALF_PI;\n\t      Height = -b;\n\t      return {\n\t        x: p.x,\n\t        y: p.y,\n\t        z: p.z\n\t      };\n\t    }\n\t  } else {\n\t    /*  ellipsoidal (geodetic) longitude\n\t     *  interval: -PI < Longitude <= +PI */\n\t    Longitude = Math.atan2(Y, X);\n\t  }\n\n\t  /* --------------------------------------------------------------\n\t   * Following iterative algorithm was developped by\n\t   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n\t   * Internet: www.ife.uni-hannover.de\n\t   * Iterative computation of CPHI,SPHI and Height.\n\t   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n\t   * 2*10**-7 arcsec.\n\t   * --------------------------------------------------------------\n\t   */\n\t  CT = Z / RR;\n\t  ST = P / RR;\n\t  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n\t  CPHI0 = ST * (1.0 - es) * RX;\n\t  SPHI0 = CT * RX;\n\t  iter = 0;\n\n\t  /* loop to find sin(Latitude) resp. Latitude\n\t   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n\t  do {\n\t    iter++;\n\t    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n\t    /*  ellipsoidal (geodetic) height */\n\t    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n\t    RK = es * RN / (RN + Height);\n\t    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n\t    CPHI = ST * (1.0 - RK) * RX;\n\t    SPHI = CT * RX;\n\t    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n\t    CPHI0 = CPHI;\n\t    SPHI0 = SPHI;\n\t  }\n\t  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n\t  /*      ellipsoidal (geodetic) latitude */\n\t  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n\t  return {\n\t    x: Longitude,\n\t    y: Latitude,\n\t    z: Height\n\t  };\n\t} // cs_geocentric_to_geodetic()\n\n\t/****************************************************************/\n\t// pj_geocentic_to_wgs84( p )\n\t//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n\t/** point object, nothing fancy, just allows values to be\n\t    passed back and forth by reference rather than by value.\n\t    Other point classes may be used as long as they have\n\t    x and y properties, which will get modified in the transform method.\n\t*/\n\tfunction geocentricToWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x + datum_params[0],\n\t      y: p.y + datum_params[1],\n\t      z: p.z + datum_params[2],\n\t    };\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n\t      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n\t      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n\t    };\n\t  }\n\t} // cs_geocentric_to_wgs84\n\n\t/****************************************************************/\n\t// pj_geocentic_from_wgs84()\n\t//  coordinate system definition,\n\t//  point to transform in geocentric coordinates (x,y,z)\n\tfunction geocentricFromWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x - datum_params[0],\n\t      y: p.y - datum_params[1],\n\t      z: p.z - datum_params[2],\n\t    };\n\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    var x_tmp = (p.x - Dx_BF) / M_BF;\n\t    var y_tmp = (p.y - Dy_BF) / M_BF;\n\t    var z_tmp = (p.z - Dz_BF) / M_BF;\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\n\t    return {\n\t      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n\t      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n\t      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n\t    };\n\t  } //cs_geocentric_from_wgs84()\n\t}\n\n\tfunction checkParams(type) {\n\t  return (type === PJD_3PARAM || type === PJD_7PARAM);\n\t}\n\n\tvar datum_transform = function(source, dest, point) {\n\t  // Short cut if the datums are identical.\n\t  if (compareDatums(source, dest)) {\n\t    return point; // in this case, zero is sucess,\n\t    // whereas cs_compare_datums returns 1 to indicate TRUE\n\t    // confusing, should fix this\n\t  }\n\n\t  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n\t  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n\t    return point;\n\t  }\n\n\t  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n\t  // Do we need to go through geocentric coordinates?\n\t  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n\t    return point;\n\t  }\n\n\t  // Convert to geocentric coordinates.\n\t  point = geodeticToGeocentric(point, source.es, source.a);\n\t  // Convert between datums\n\t  if (checkParams(source.datum_type)) {\n\t    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n\t  }\n\t  if (checkParams(dest.datum_type)) {\n\t    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n\t  }\n\t  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n\t};\n\n\tvar adjust_axis = function(crs, denorm, point) {\n\t  var xin = point.x,\n\t    yin = point.y,\n\t    zin = point.z || 0.0;\n\t  var v, t, i;\n\t  var out = {};\n\t  for (i = 0; i < 3; i++) {\n\t    if (denorm && i === 2 && point.z === undefined) {\n\t      continue;\n\t    }\n\t    if (i === 0) {\n\t      v = xin;\n\t      t = 'x';\n\t    }\n\t    else if (i === 1) {\n\t      v = yin;\n\t      t = 'y';\n\t    }\n\t    else {\n\t      v = zin;\n\t      t = 'z';\n\t    }\n\t    switch (crs.axis[i]) {\n\t    case 'e':\n\t      out[t] = v;\n\t      break;\n\t    case 'w':\n\t      out[t] = -v;\n\t      break;\n\t    case 'n':\n\t      out[t] = v;\n\t      break;\n\t    case 's':\n\t      out[t] = -v;\n\t      break;\n\t    case 'u':\n\t      if (point[t] !== undefined) {\n\t        out.z = v;\n\t      }\n\t      break;\n\t    case 'd':\n\t      if (point[t] !== undefined) {\n\t        out.z = -v;\n\t      }\n\t      break;\n\t    default:\n\t      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n\t      return null;\n\t    }\n\t  }\n\t  return out;\n\t};\n\n\tvar toPoint = function (array){\n\t  var out = {\n\t    x: array[0],\n\t    y: array[1]\n\t  };\n\t  if (array.length>2) {\n\t    out.z = array[2];\n\t  }\n\t  if (array.length>3) {\n\t    out.m = array[3];\n\t  }\n\t  return out;\n\t};\n\n\tvar checkSanity = function (point) {\n\t  checkCoord(point.x);\n\t  checkCoord(point.y);\n\t};\n\tfunction checkCoord(num) {\n\t  if (typeof Number.isFinite === 'function') {\n\t    if (Number.isFinite(num)) {\n\t      return;\n\t    }\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t}\n\n\tfunction checkNotWGS(source, dest) {\n\t  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n\t}\n\n\tfunction transform(source, dest, point) {\n\t  var wgs84;\n\t  if (Array.isArray(point)) {\n\t    point = toPoint(point);\n\t  }\n\t  checkSanity(point);\n\t  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n\t  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n\t    wgs84 = new Projection('WGS84');\n\t    point = transform(source, wgs84, point);\n\t    source = wgs84;\n\t  }\n\t  // DGR, 2010/11/12\n\t  if (source.axis !== 'enu') {\n\t    point = adjust_axis(source, false, point);\n\t  }\n\t  // Transform source points to long/lat, if they aren't already.\n\t  if (source.projName === 'longlat') {\n\t    point = {\n\t      x: point.x * D2R,\n\t      y: point.y * D2R\n\t    };\n\t  }\n\t  else {\n\t    if (source.to_meter) {\n\t      point = {\n\t        x: point.x * source.to_meter,\n\t        y: point.y * source.to_meter\n\t      };\n\t    }\n\t    point = source.inverse(point); // Convert Cartesian to longlat\n\t  }\n\t  // Adjust for the prime meridian if necessary\n\t  if (source.from_greenwich) {\n\t    point.x += source.from_greenwich;\n\t  }\n\n\t  // Convert datums if needed, and if possible.\n\t  point = datum_transform(source.datum, dest.datum, point);\n\n\t  // Adjust for the prime meridian if necessary\n\t  if (dest.from_greenwich) {\n\t    point = {\n\t      x: point.x - dest.from_greenwich,\n\t      y: point.y\n\t    };\n\t  }\n\n\t  if (dest.projName === 'longlat') {\n\t    // convert radians to decimal degrees\n\t    point = {\n\t      x: point.x * R2D,\n\t      y: point.y * R2D\n\t    };\n\t  } else { // else project\n\t    point = dest.forward(point);\n\t    if (dest.to_meter) {\n\t      point = {\n\t        x: point.x / dest.to_meter,\n\t        y: point.y / dest.to_meter\n\t      };\n\t    }\n\t  }\n\n\t  // DGR, 2010/11/12\n\t  if (dest.axis !== 'enu') {\n\t    return adjust_axis(dest, true, point);\n\t  }\n\n\t  return point;\n\t}\n\n\tvar wgs84 = Projection('WGS84');\n\n\tfunction transformer(from, to, coords) {\n\t  var transformedArray, out, keys;\n\t  if (Array.isArray(coords)) {\n\t    transformedArray = transform(from, to, coords);\n\t    if (coords.length === 3) {\n\t      return [transformedArray.x, transformedArray.y, transformedArray.z];\n\t    }\n\t    else {\n\t      return [transformedArray.x, transformedArray.y];\n\t    }\n\t  }\n\t  else {\n\t    out = transform(from, to, coords);\n\t    keys = Object.keys(coords);\n\t    if (keys.length === 2) {\n\t      return out;\n\t    }\n\t    keys.forEach(function (key) {\n\t      if (key === 'x' || key === 'y') {\n\t        return;\n\t      }\n\t      out[key] = coords[key];\n\t    });\n\t    return out;\n\t  }\n\t}\n\n\tfunction checkProj(item) {\n\t  if (item instanceof Projection) {\n\t    return item;\n\t  }\n\t  if (item.oProj) {\n\t    return item.oProj;\n\t  }\n\t  return Projection(item);\n\t}\n\tfunction proj4$1(fromProj, toProj, coord) {\n\t  fromProj = checkProj(fromProj);\n\t  var single = false;\n\t  var obj;\n\t  if (typeof toProj === 'undefined') {\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n\t    coord = toProj;\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  toProj = checkProj(toProj);\n\t  if (coord) {\n\t    return transformer(fromProj, toProj, coord);\n\t  }\n\t  else {\n\t    obj = {\n\t      forward: function(coords) {\n\t        return transformer(fromProj, toProj, coords);\n\t      },\n\t      inverse: function(coords) {\n\t        return transformer(toProj, fromProj, coords);\n\t      }\n\t    };\n\t    if (single) {\n\t      obj.oProj = toProj;\n\t    }\n\t    return obj;\n\t  }\n\t}\n\n\t/**\n\t * UTM zones are grouped, and assigned to one of a group of 6\n\t * sets.\n\t *\n\t * {int} @private\n\t */\n\tvar NUM_100K_SETS = 6;\n\n\t/**\n\t * The column letters (for easting) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n\t/**\n\t * The row letters (for northing) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\n\tvar A = 65; // A\n\tvar I = 73; // I\n\tvar O = 79; // O\n\tvar V = 86; // V\n\tvar Z = 90; // Z\n\tvar mgrs = {\n\t  forward: forward$1,\n\t  inverse: inverse$1,\n\t  toPoint: toPoint$1\n\t};\n\t/**\n\t * Conversion of lat/lon to MGRS.\n\t *\n\t * @param {object} ll Object literal with lat and lon properties on a\n\t *     WGS84 ellipsoid.\n\t * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n\t *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n\t * @return {string} the MGRS string for the given location and accuracy.\n\t */\n\tfunction forward$1(ll, accuracy) {\n\t  accuracy = accuracy || 5; // default accuracy 1m\n\t  return encode(LLtoUTM({\n\t    lat: ll[1],\n\t    lon: ll[0]\n\t  }), accuracy);\n\t}\n\n\t/**\n\t * Conversion of MGRS to lat/lon.\n\t *\n\t * @param {string} mgrs MGRS string.\n\t * @return {array} An array with left (longitude), bottom (latitude), right\n\t *     (longitude) and top (latitude) values in WGS84, representing the\n\t *     bounding box for the provided MGRS reference.\n\t */\n\tfunction inverse$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n\t  }\n\t  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n\t}\n\n\tfunction toPoint$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat];\n\t  }\n\t  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n\t}\n\t/**\n\t * Conversion from degrees to radians.\n\t *\n\t * @private\n\t * @param {number} deg the angle in degrees.\n\t * @return {number} the angle in radians.\n\t */\n\tfunction degToRad(deg) {\n\t  return (deg * (Math.PI / 180.0));\n\t}\n\n\t/**\n\t * Conversion from radians to degrees.\n\t *\n\t * @private\n\t * @param {number} rad the angle in radians.\n\t * @return {number} the angle in degrees.\n\t */\n\tfunction radToDeg(rad) {\n\t  return (180.0 * (rad / Math.PI));\n\t}\n\n\t/**\n\t * Converts a set of Longitude and Latitude co-ordinates to UTM\n\t * using the WGS84 ellipsoid.\n\t *\n\t * @private\n\t * @param {object} ll Object literal with lat and lon properties\n\t *     representing the WGS84 coordinate to be converted.\n\t * @return {object} Object literal containing the UTM value with easting,\n\t *     northing, zoneNumber and zoneLetter properties, and an optional\n\t *     accuracy property in digits. Returns null if the conversion failed.\n\t */\n\tfunction LLtoUTM(ll) {\n\t  var Lat = ll.lat;\n\t  var Long = ll.lon;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var k0 = 0.9996;\n\t  var LongOrigin;\n\t  var eccPrimeSquared;\n\t  var N, T, C, A, M;\n\t  var LatRad = degToRad(Lat);\n\t  var LongRad = degToRad(Long);\n\t  var LongOriginRad;\n\t  var ZoneNumber;\n\t  // (int)\n\t  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n\t  //Make sure the longitude 180.00 is in Zone 60\n\t  if (Long === 180) {\n\t    ZoneNumber = 60;\n\t  }\n\n\t  // Special zone for Norway\n\t  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n\t    ZoneNumber = 32;\n\t  }\n\n\t  // Special zones for Svalbard\n\t  if (Lat >= 72.0 && Lat < 84.0) {\n\t    if (Long >= 0.0 && Long < 9.0) {\n\t      ZoneNumber = 31;\n\t    }\n\t    else if (Long >= 9.0 && Long < 21.0) {\n\t      ZoneNumber = 33;\n\t    }\n\t    else if (Long >= 21.0 && Long < 33.0) {\n\t      ZoneNumber = 35;\n\t    }\n\t    else if (Long >= 33.0 && Long < 42.0) {\n\t      ZoneNumber = 37;\n\t    }\n\t  }\n\n\t  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n\t  // in middle of\n\t  // zone\n\t  LongOriginRad = degToRad(LongOrigin);\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n\t  T = Math.tan(LatRad) * Math.tan(LatRad);\n\t  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n\t  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n\t  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n\t  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n\t  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n\t  if (Lat < 0.0) {\n\t    UTMNorthing += 10000000.0; //10000000 meter offset for\n\t    // southern hemisphere\n\t  }\n\n\t  return {\n\t    northing: Math.round(UTMNorthing),\n\t    easting: Math.round(UTMEasting),\n\t    zoneNumber: ZoneNumber,\n\t    zoneLetter: getLetterDesignator(Lat)\n\t  };\n\t}\n\n\t/**\n\t * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n\t * class where the Zone can be specified as a single string eg.\"60N\" which\n\t * is then broken down into the ZoneNumber and ZoneLetter.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with northing, easting, zoneNumber\n\t *     and zoneLetter properties. If an optional accuracy property is\n\t *     provided (in meters), a bounding box will be returned instead of\n\t *     latitude and longitude.\n\t * @return {object} An object literal containing either lat and lon values\n\t *     (if no accuracy was provided), or top, right, bottom and left values\n\t *     for the bounding box calculated according to the provided accuracy.\n\t *     Returns null if the conversion failed.\n\t */\n\tfunction UTMtoLL(utm) {\n\n\t  var UTMNorthing = utm.northing;\n\t  var UTMEasting = utm.easting;\n\t  var zoneLetter = utm.zoneLetter;\n\t  var zoneNumber = utm.zoneNumber;\n\t  // check the ZoneNummber is valid\n\t  if (zoneNumber < 0 || zoneNumber > 60) {\n\t    return null;\n\t  }\n\n\t  var k0 = 0.9996;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var eccPrimeSquared;\n\t  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n\t  var N1, T1, C1, R1, D, M;\n\t  var LongOrigin;\n\t  var mu, phi1Rad;\n\n\t  // remove 500,000 meter offset for longitude\n\t  var x = UTMEasting - 500000.0;\n\t  var y = UTMNorthing;\n\n\t  // We must know somehow if we are in the Northern or Southern\n\t  // hemisphere, this is the only time we use the letter So even\n\t  // if the Zone letter isn't exactly correct it should indicate\n\t  // the hemisphere correctly\n\t  if (zoneLetter < 'N') {\n\t    y -= 10000000.0; // remove 10,000,000 meter offset used\n\t    // for southern hemisphere\n\t  }\n\n\t  // There are 60 zones with zone 1 being at West -180 to -174\n\t  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n\t  // in middle of\n\t  // zone\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  M = y / k0;\n\t  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n\t  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n\t  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n\t  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n\t  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n\t  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n\t  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n\t  D = x / (N1 * k0);\n\n\t  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n\t  lat = radToDeg(lat);\n\n\t  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n\t  lon = LongOrigin + radToDeg(lon);\n\n\t  var result;\n\t  if (utm.accuracy) {\n\t    var topRight = UTMtoLL({\n\t      northing: utm.northing + utm.accuracy,\n\t      easting: utm.easting + utm.accuracy,\n\t      zoneLetter: utm.zoneLetter,\n\t      zoneNumber: utm.zoneNumber\n\t    });\n\t    result = {\n\t      top: topRight.lat,\n\t      right: topRight.lon,\n\t      bottom: lat,\n\t      left: lon\n\t    };\n\t  }\n\t  else {\n\t    result = {\n\t      lat: lat,\n\t      lon: lon\n\t    };\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Calculates the MGRS letter designator for the given latitude.\n\t *\n\t * @private\n\t * @param {number} lat The latitude in WGS84 to get the letter designator\n\t *     for.\n\t * @return {char} The letter designator.\n\t */\n\tfunction getLetterDesignator(lat) {\n\t  //This is here as an error flag to show that the Latitude is\n\t  //outside MGRS limits\n\t  var LetterDesignator = 'Z';\n\n\t  if ((84 >= lat) && (lat >= 72)) {\n\t    LetterDesignator = 'X';\n\t  }\n\t  else if ((72 > lat) && (lat >= 64)) {\n\t    LetterDesignator = 'W';\n\t  }\n\t  else if ((64 > lat) && (lat >= 56)) {\n\t    LetterDesignator = 'V';\n\t  }\n\t  else if ((56 > lat) && (lat >= 48)) {\n\t    LetterDesignator = 'U';\n\t  }\n\t  else if ((48 > lat) && (lat >= 40)) {\n\t    LetterDesignator = 'T';\n\t  }\n\t  else if ((40 > lat) && (lat >= 32)) {\n\t    LetterDesignator = 'S';\n\t  }\n\t  else if ((32 > lat) && (lat >= 24)) {\n\t    LetterDesignator = 'R';\n\t  }\n\t  else if ((24 > lat) && (lat >= 16)) {\n\t    LetterDesignator = 'Q';\n\t  }\n\t  else if ((16 > lat) && (lat >= 8)) {\n\t    LetterDesignator = 'P';\n\t  }\n\t  else if ((8 > lat) && (lat >= 0)) {\n\t    LetterDesignator = 'N';\n\t  }\n\t  else if ((0 > lat) && (lat >= -8)) {\n\t    LetterDesignator = 'M';\n\t  }\n\t  else if ((-8 > lat) && (lat >= -16)) {\n\t    LetterDesignator = 'L';\n\t  }\n\t  else if ((-16 > lat) && (lat >= -24)) {\n\t    LetterDesignator = 'K';\n\t  }\n\t  else if ((-24 > lat) && (lat >= -32)) {\n\t    LetterDesignator = 'J';\n\t  }\n\t  else if ((-32 > lat) && (lat >= -40)) {\n\t    LetterDesignator = 'H';\n\t  }\n\t  else if ((-40 > lat) && (lat >= -48)) {\n\t    LetterDesignator = 'G';\n\t  }\n\t  else if ((-48 > lat) && (lat >= -56)) {\n\t    LetterDesignator = 'F';\n\t  }\n\t  else if ((-56 > lat) && (lat >= -64)) {\n\t    LetterDesignator = 'E';\n\t  }\n\t  else if ((-64 > lat) && (lat >= -72)) {\n\t    LetterDesignator = 'D';\n\t  }\n\t  else if ((-72 > lat) && (lat >= -80)) {\n\t    LetterDesignator = 'C';\n\t  }\n\t  return LetterDesignator;\n\t}\n\n\t/**\n\t * Encodes a UTM location as MGRS string.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with easting, northing,\n\t *     zoneLetter, zoneNumber\n\t * @param {number} accuracy Accuracy in digits (1-5).\n\t * @return {string} MGRS string for the given UTM location.\n\t */\n\tfunction encode(utm, accuracy) {\n\t  // prepend with leading zeroes\n\t  var seasting = \"00000\" + utm.easting,\n\t    snorthing = \"00000\" + utm.northing;\n\n\t  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n\t}\n\n\t/**\n\t * Get the two letter 100k designator for a given UTM easting,\n\t * northing and zone number value.\n\t *\n\t * @private\n\t * @param {number} easting\n\t * @param {number} northing\n\t * @param {number} zoneNumber\n\t * @return the two letter 100k designator for the given UTM location.\n\t */\n\tfunction get100kID(easting, northing, zoneNumber) {\n\t  var setParm = get100kSetForZone(zoneNumber);\n\t  var setColumn = Math.floor(easting / 100000);\n\t  var setRow = Math.floor(northing / 100000) % 20;\n\t  return getLetter100kID(setColumn, setRow, setParm);\n\t}\n\n\t/**\n\t * Given a UTM zone number, figure out the MGRS 100K set it is in.\n\t *\n\t * @private\n\t * @param {number} i An UTM zone number.\n\t * @return {number} the 100k set the UTM zone is in.\n\t */\n\tfunction get100kSetForZone(i) {\n\t  var setParm = i % NUM_100K_SETS;\n\t  if (setParm === 0) {\n\t    setParm = NUM_100K_SETS;\n\t  }\n\n\t  return setParm;\n\t}\n\n\t/**\n\t * Get the two-letter MGRS 100k designator given information\n\t * translated from the UTM northing, easting and zone number.\n\t *\n\t * @private\n\t * @param {number} column the column index as it relates to the MGRS\n\t *        100k set spreadsheet, created from the UTM easting.\n\t *        Values are 1-8.\n\t * @param {number} row the row index as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM northing value. Values\n\t *        are from 0-19.\n\t * @param {number} parm the set block, as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM zone. Values are from\n\t *        1-60.\n\t * @return two letter MGRS 100k code.\n\t */\n\tfunction getLetter100kID(column, row, parm) {\n\t  // colOrigin and rowOrigin are the letters at the origin of the set\n\t  var index = parm - 1;\n\t  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n\t  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n\t  // colInt and rowInt are the letters to build to return\n\t  var colInt = colOrigin + column - 1;\n\t  var rowInt = rowOrigin + row;\n\t  var rollover = false;\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t    rollover = true;\n\t  }\n\n\t  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n\t    colInt++;\n\t  }\n\n\t  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n\t    colInt++;\n\n\t    if (colInt === I) {\n\t      colInt++;\n\t    }\n\t  }\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t    rollover = true;\n\t  }\n\t  else {\n\t    rollover = false;\n\t  }\n\n\t  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n\t    rowInt++;\n\t  }\n\n\t  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n\t    rowInt++;\n\n\t    if (rowInt === I) {\n\t      rowInt++;\n\t    }\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t  }\n\n\t  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n\t  return twoLetter;\n\t}\n\n\t/**\n\t * Decode the UTM parameters from a MGRS string.\n\t *\n\t * @private\n\t * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n\t * @return {object} An object literal with easting, northing, zoneLetter,\n\t *     zoneNumber and accuracy (in meters) properties.\n\t */\n\tfunction decode(mgrsString) {\n\n\t  if (mgrsString && mgrsString.length === 0) {\n\t    throw (\"MGRSPoint coverting from nothing\");\n\t  }\n\n\t  var length = mgrsString.length;\n\n\t  var hunK = null;\n\t  var sb = \"\";\n\t  var testChar;\n\t  var i = 0;\n\n\t  // get Zone number\n\t  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n\t    if (i >= 2) {\n\t      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t    }\n\t    sb += testChar;\n\t    i++;\n\t  }\n\n\t  var zoneNumber = parseInt(sb, 10);\n\n\t  if (i === 0 || i + 3 > length) {\n\t    // A good MGRS string has to be 4-5 digits long,\n\t    // ##AAA/#AAA at least.\n\t    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t  }\n\n\t  var zoneLetter = mgrsString.charAt(i++);\n\n\t  // Should we check the zone letter here? Why not.\n\t  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n\t    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n\t  }\n\n\t  hunK = mgrsString.substring(i, i += 2);\n\n\t  var set = get100kSetForZone(zoneNumber);\n\n\t  var east100k = getEastingFromChar(hunK.charAt(0), set);\n\t  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n\t  // We have a bug where the northing may be 2000000 too low.\n\t  // How\n\t  // do we know when to roll over?\n\n\t  while (north100k < getMinNorthing(zoneLetter)) {\n\t    north100k += 2000000;\n\t  }\n\n\t  // calculate the char index for easting/northing separator\n\t  var remainder = length - i;\n\n\t  if (remainder % 2 !== 0) {\n\t    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n\t  }\n\n\t  var sep = remainder / 2;\n\n\t  var sepEasting = 0.0;\n\t  var sepNorthing = 0.0;\n\t  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n\t  if (sep > 0) {\n\t    accuracyBonus = 100000.0 / Math.pow(10, sep);\n\t    sepEastingString = mgrsString.substring(i, i + sep);\n\t    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n\t    sepNorthingString = mgrsString.substring(i + sep);\n\t    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n\t  }\n\n\t  easting = sepEasting + east100k;\n\t  northing = sepNorthing + north100k;\n\n\t  return {\n\t    easting: easting,\n\t    northing: northing,\n\t    zoneLetter: zoneLetter,\n\t    zoneNumber: zoneNumber,\n\t    accuracy: accuracyBonus\n\t  };\n\t}\n\n\t/**\n\t * Given the first letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the easting value that\n\t * should be added to the other, secondary easting value.\n\t *\n\t * @private\n\t * @param {char} e The first letter from a two-letter MGRS 100k zone.\n\t * @param {number} set The MGRS table set for the zone number.\n\t * @return {number} The easting value for the given letter and set.\n\t */\n\tfunction getEastingFromChar(e, set) {\n\t  // colOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n\t  var eastingValue = 100000.0;\n\t  var rewindMarker = false;\n\n\t  while (curCol !== e.charCodeAt(0)) {\n\t    curCol++;\n\t    if (curCol === I) {\n\t      curCol++;\n\t    }\n\t    if (curCol === O) {\n\t      curCol++;\n\t    }\n\t    if (curCol > Z) {\n\t      if (rewindMarker) {\n\t        throw (\"Bad character: \" + e);\n\t      }\n\t      curCol = A;\n\t      rewindMarker = true;\n\t    }\n\t    eastingValue += 100000.0;\n\t  }\n\n\t  return eastingValue;\n\t}\n\n\t/**\n\t * Given the second letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the northing value that\n\t * should be added to the other, secondary northing value. You have to\n\t * remember that Northings are determined from the equator, and the vertical\n\t * cycle of letters mean a 2000000 additional northing meters. This happens\n\t * approx. every 18 degrees of latitude. This method does *NOT* count any\n\t * additional northings. You have to figure out how many 2000000 meters need\n\t * to be added for the zone letter of the MGRS coordinate.\n\t *\n\t * @private\n\t * @param {char} n Second letter of the MGRS 100k zone\n\t * @param {number} set The MGRS table set number, which is dependent on the\n\t *     UTM zone number.\n\t * @return {number} The northing value for the given letter and set.\n\t */\n\tfunction getNorthingFromChar(n, set) {\n\n\t  if (n > 'V') {\n\t    throw (\"MGRSPoint given invalid Northing \" + n);\n\t  }\n\n\t  // rowOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n\t  var northingValue = 0.0;\n\t  var rewindMarker = false;\n\n\t  while (curRow !== n.charCodeAt(0)) {\n\t    curRow++;\n\t    if (curRow === I) {\n\t      curRow++;\n\t    }\n\t    if (curRow === O) {\n\t      curRow++;\n\t    }\n\t    // fixing a bug making whole application hang in this loop\n\t    // when 'n' is a wrong character\n\t    if (curRow > V) {\n\t      if (rewindMarker) { // making sure that this loop ends\n\t        throw (\"Bad character: \" + n);\n\t      }\n\t      curRow = A;\n\t      rewindMarker = true;\n\t    }\n\t    northingValue += 100000.0;\n\t  }\n\n\t  return northingValue;\n\t}\n\n\t/**\n\t * The function getMinNorthing returns the minimum northing value of a MGRS\n\t * zone.\n\t *\n\t * Ported from Geotrans' c Lattitude_Band_Value structure table.\n\t *\n\t * @private\n\t * @param {char} zoneLetter The MGRS zone to get the min northing for.\n\t * @return {number}\n\t */\n\tfunction getMinNorthing(zoneLetter) {\n\t  var northing;\n\t  switch (zoneLetter) {\n\t  case 'C':\n\t    northing = 1100000.0;\n\t    break;\n\t  case 'D':\n\t    northing = 2000000.0;\n\t    break;\n\t  case 'E':\n\t    northing = 2800000.0;\n\t    break;\n\t  case 'F':\n\t    northing = 3700000.0;\n\t    break;\n\t  case 'G':\n\t    northing = 4600000.0;\n\t    break;\n\t  case 'H':\n\t    northing = 5500000.0;\n\t    break;\n\t  case 'J':\n\t    northing = 6400000.0;\n\t    break;\n\t  case 'K':\n\t    northing = 7300000.0;\n\t    break;\n\t  case 'L':\n\t    northing = 8200000.0;\n\t    break;\n\t  case 'M':\n\t    northing = 9100000.0;\n\t    break;\n\t  case 'N':\n\t    northing = 0.0;\n\t    break;\n\t  case 'P':\n\t    northing = 800000.0;\n\t    break;\n\t  case 'Q':\n\t    northing = 1700000.0;\n\t    break;\n\t  case 'R':\n\t    northing = 2600000.0;\n\t    break;\n\t  case 'S':\n\t    northing = 3500000.0;\n\t    break;\n\t  case 'T':\n\t    northing = 4400000.0;\n\t    break;\n\t  case 'U':\n\t    northing = 5300000.0;\n\t    break;\n\t  case 'V':\n\t    northing = 6200000.0;\n\t    break;\n\t  case 'W':\n\t    northing = 7000000.0;\n\t    break;\n\t  case 'X':\n\t    northing = 7900000.0;\n\t    break;\n\t  default:\n\t    northing = -1.0;\n\t  }\n\t  if (northing >= 0.0) {\n\t    return northing;\n\t  }\n\t  else {\n\t    throw (\"Invalid zone letter: \" + zoneLetter);\n\t  }\n\n\t}\n\n\tfunction Point(x, y, z) {\n\t  if (!(this instanceof Point)) {\n\t    return new Point(x, y, z);\n\t  }\n\t  if (Array.isArray(x)) {\n\t    this.x = x[0];\n\t    this.y = x[1];\n\t    this.z = x[2] || 0.0;\n\t  } else if(typeof x === 'object') {\n\t    this.x = x.x;\n\t    this.y = x.y;\n\t    this.z = x.z || 0.0;\n\t  } else if (typeof x === 'string' && typeof y === 'undefined') {\n\t    var coords = x.split(',');\n\t    this.x = parseFloat(coords[0], 10);\n\t    this.y = parseFloat(coords[1], 10);\n\t    this.z = parseFloat(coords[2], 10) || 0.0;\n\t  } else {\n\t    this.x = x;\n\t    this.y = y;\n\t    this.z = z || 0.0;\n\t  }\n\t  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n\t}\n\n\tPoint.fromMGRS = function(mgrsStr) {\n\t  return new Point(toPoint$1(mgrsStr));\n\t};\n\tPoint.prototype.toMGRS = function(accuracy) {\n\t  return forward$1([this.x, this.y], accuracy);\n\t};\n\n\tvar version = \"2.5.0\";\n\n\tvar C00 = 1;\n\tvar C02 = 0.25;\n\tvar C04 = 0.046875;\n\tvar C06 = 0.01953125;\n\tvar C08 = 0.01068115234375;\n\tvar C22 = 0.75;\n\tvar C44 = 0.46875;\n\tvar C46 = 0.01302083333333333333;\n\tvar C48 = 0.00712076822916666666;\n\tvar C66 = 0.36458333333333333333;\n\tvar C68 = 0.00569661458333333333;\n\tvar C88 = 0.3076171875;\n\n\tvar pj_enfn = function(es) {\n\t  var en = [];\n\t  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n\t  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n\t  var t = es * es;\n\t  en[2] = t * (C44 - es * (C46 + es * C48));\n\t  t *= es;\n\t  en[3] = t * (C66 - es * C68);\n\t  en[4] = t * es * C88;\n\t  return en;\n\t};\n\n\tvar pj_mlfn = function(phi, sphi, cphi, en) {\n\t  cphi *= sphi;\n\t  sphi *= sphi;\n\t  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n\t};\n\n\tvar MAX_ITER = 20;\n\n\tvar pj_inv_mlfn = function(arg, es, en) {\n\t  var k = 1 / (1 - es);\n\t  var phi = arg;\n\t  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n\t    var s = Math.sin(phi);\n\t    var t = 1 - es * s * s;\n\t    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n\t    //phi -= t * (t * Math.sqrt(t)) * k;\n\t    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n\t    phi -= t;\n\t    if (Math.abs(t) < EPSLN) {\n\t      return phi;\n\t    }\n\t  }\n\t  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n\t  return phi;\n\t};\n\n\t// Heavily based on this tmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\n\tfunction init$2() {\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  if (this.es) {\n\t    this.en = pj_enfn(this.es);\n\t    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n\t  }\n\t}\n\n\t/**\n\t    Transverse Mercator Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$2(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var con;\n\t  var x, y;\n\t  var sin_phi = Math.sin(lat);\n\t  var cos_phi = Math.cos(lat);\n\n\t  if (!this.es) {\n\t    var b = cos_phi * Math.sin(delta_lon);\n\n\t    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n\t      return (93);\n\t    }\n\t    else {\n\t      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n\t      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n\t      b = Math.abs(y);\n\n\t      if (b >= 1) {\n\t        if ((b - 1) > EPSLN) {\n\t          return (93);\n\t        }\n\t        else {\n\t          y = 0;\n\t        }\n\t      }\n\t      else {\n\t        y = Math.acos(y);\n\t      }\n\n\t      if (lat < 0) {\n\t        y = -y;\n\t      }\n\n\t      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n\t    }\n\t  }\n\t  else {\n\t    var al = cos_phi * delta_lon;\n\t    var als = Math.pow(al, 2);\n\t    var c = this.ep2 * Math.pow(cos_phi, 2);\n\t    var cs = Math.pow(c, 2);\n\t    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n\t    var t = Math.pow(tq, 2);\n\t    var ts = Math.pow(t, 2);\n\t    con = 1 - this.es * Math.pow(sin_phi, 2);\n\t    al = al / Math.sqrt(con);\n\t    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n\t    x = this.a * (this.k0 * al * (1 +\n\t      als / 6 * (1 - t + c +\n\t      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n\t      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n\t      this.x0;\n\n\t    y = this.a * (this.k0 * (ml - this.ml0 +\n\t      sin_phi * delta_lon * al / 2 * (1 +\n\t      als / 12 * (5 - t + 9 * c + 4 * cs +\n\t      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n\t      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n\t      this.y0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\t/**\n\t    Transverse Mercator Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$2(p) {\n\t  var con, phi;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) * (1 / this.a);\n\t  var y = (p.y - this.y0) * (1 / this.a);\n\n\t  if (!this.es) {\n\t    var f = Math.exp(x / this.k0);\n\t    var g = 0.5 * (f - 1 / f);\n\t    var temp = this.lat0 + y / this.k0;\n\t    var h = Math.cos(temp);\n\t    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n\t    lat = Math.asin(con);\n\n\t    if (y < 0) {\n\t      lat = -lat;\n\t    }\n\n\t    if ((g === 0) && (h === 0)) {\n\t      lon = 0;\n\t    }\n\t    else {\n\t      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n\t    }\n\t  }\n\t  else { // ellipsoidal form\n\t    con = this.ml0 + y / this.k0;\n\t    phi = pj_inv_mlfn(con, this.es, this.en);\n\n\t    if (Math.abs(phi) < HALF_PI) {\n\t      var sin_phi = Math.sin(phi);\n\t      var cos_phi = Math.cos(phi);\n\t      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n\t      var c = this.ep2 * Math.pow(cos_phi, 2);\n\t      var cs = Math.pow(c, 2);\n\t      var t = Math.pow(tan_phi, 2);\n\t      var ts = Math.pow(t, 2);\n\t      con = 1 - this.es * Math.pow(sin_phi, 2);\n\t      var d = x * Math.sqrt(con) / this.k0;\n\t      var ds = Math.pow(d, 2);\n\t      con = con * tan_phi;\n\n\t      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n\t        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n\t        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n\t        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n\t      lon = adjust_lon(this.long0 + (d * (1 -\n\t        ds / 6 * (1 + 2 * t + c -\n\t        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n\t        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n\t    }\n\t    else {\n\t      lat = HALF_PI * sign(y);\n\t      lon = 0;\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$3 = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\n\tvar tmerc = {\n\t  init: init$2,\n\t  forward: forward$2,\n\t  inverse: inverse$2,\n\t  names: names$3\n\t};\n\n\tvar sinh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r - 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar hypot = function(x, y) {\n\t  x = Math.abs(x);\n\t  y = Math.abs(y);\n\t  var a = Math.max(x, y);\n\t  var b = Math.min(x, y) / (a ? a : 1);\n\n\t  return a * Math.sqrt(1 + Math.pow(b, 2));\n\t};\n\n\tvar log1py = function(x) {\n\t  var y = 1 + x;\n\t  var z = y - 1;\n\n\t  return z === 0 ? x : x * Math.log(y) / z;\n\t};\n\n\tvar asinhy = function(x) {\n\t  var y = Math.abs(x);\n\t  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n\t  return x < 0 ? -y : y;\n\t};\n\n\tvar gatg = function(pp, B) {\n\t  var cos_2B = 2 * Math.cos(2 * B);\n\t  var i = pp.length - 1;\n\t  var h1 = pp[i];\n\t  var h2 = 0;\n\t  var h;\n\n\t  while (--i >= 0) {\n\t    h = -h2 + cos_2B * h1 + pp[i];\n\t    h2 = h1;\n\t    h1 = h;\n\t  }\n\n\t  return (B + h * Math.sin(2 * B));\n\t};\n\n\tvar clens = function(pp, arg_r) {\n\t  var r = 2 * Math.cos(arg_r);\n\t  var i = pp.length - 1;\n\t  var hr1 = pp[i];\n\t  var hr2 = 0;\n\t  var hr;\n\n\t  while (--i >= 0) {\n\t    hr = -hr2 + r * hr1 + pp[i];\n\t    hr2 = hr1;\n\t    hr1 = hr;\n\t  }\n\n\t  return Math.sin(arg_r) * hr;\n\t};\n\n\tvar cosh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r + 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar clens_cmplx = function(pp, arg_r, arg_i) {\n\t  var sin_arg_r = Math.sin(arg_r);\n\t  var cos_arg_r = Math.cos(arg_r);\n\t  var sinh_arg_i = sinh(arg_i);\n\t  var cosh_arg_i = cosh(arg_i);\n\t  var r = 2 * cos_arg_r * cosh_arg_i;\n\t  var i = -2 * sin_arg_r * sinh_arg_i;\n\t  var j = pp.length - 1;\n\t  var hr = pp[j];\n\t  var hi1 = 0;\n\t  var hr1 = 0;\n\t  var hi = 0;\n\t  var hr2;\n\t  var hi2;\n\n\t  while (--j >= 0) {\n\t    hr2 = hr1;\n\t    hi2 = hi1;\n\t    hr1 = hr;\n\t    hi1 = hi;\n\t    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n\t    hi = -hi2 + i * hr1 + r * hi1;\n\t  }\n\n\t  r = sin_arg_r * cosh_arg_i;\n\t  i = cos_arg_r * sinh_arg_i;\n\n\t  return [r * hr - i * hi, r * hi + i * hr];\n\t};\n\n\t// Heavily based on this etmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\n\tfunction init$3() {\n\t  if (this.es === undefined || this.es <= 0) {\n\t    throw new Error('incorrect elliptical usage');\n\t  }\n\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  this.cgb = [];\n\t  this.cbg = [];\n\t  this.utg = [];\n\t  this.gtu = [];\n\n\t  var f = this.es / (1 + Math.sqrt(1 - this.es));\n\t  var n = f / (2 - f);\n\t  var np = n;\n\n\t  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n\t  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n\t  np = np * n;\n\t  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n\t  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n\t  np = np * n;\n\t  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n\t  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n\t  np = np * n;\n\t  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n\t  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n\t  np = np * n;\n\t  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n\t  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n\t  np = np * n;\n\t  this.cgb[5] = np * (601676 / 22275);\n\t  this.cbg[5] = np * (444337 / 155925);\n\n\t  np = Math.pow(n, 2);\n\t  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n\t  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n\t  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n\t  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n\t  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n\t  np = np * n;\n\t  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n\t  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n\t  np = np * n;\n\t  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n\t  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n\t  np = np * n;\n\t  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n\t  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n\t  np = np * n;\n\t  this.utg[5] = np * (-20648693 / 638668800);\n\t  this.gtu[5] = np * (212378941 / 319334400);\n\n\t  var Z = gatg(this.cbg, this.lat0);\n\t  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n\t}\n\n\tfunction forward$3(p) {\n\t  var Ce = adjust_lon(p.x - this.long0);\n\t  var Cn = p.y;\n\n\t  Cn = gatg(this.cbg, Cn);\n\t  var sin_Cn = Math.sin(Cn);\n\t  var cos_Cn = Math.cos(Cn);\n\t  var sin_Ce = Math.sin(Ce);\n\t  var cos_Ce = Math.cos(Ce);\n\n\t  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n\t  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n\t  Ce = asinhy(Math.tan(Ce));\n\n\t  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n\t  Cn = Cn + tmp[0];\n\t  Ce = Ce + tmp[1];\n\n\t  var x;\n\t  var y;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    x = this.a * (this.Qn * Ce) + this.x0;\n\t    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n\t  }\n\t  else {\n\t    x = Infinity;\n\t    y = Infinity;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\tfunction inverse$3(p) {\n\t  var Ce = (p.x - this.x0) * (1 / this.a);\n\t  var Cn = (p.y - this.y0) * (1 / this.a);\n\n\t  Cn = (Cn - this.Zb) / this.Qn;\n\t  Ce = Ce / this.Qn;\n\n\t  var lon;\n\t  var lat;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n\t    Cn = Cn + tmp[0];\n\t    Ce = Ce + tmp[1];\n\t    Ce = Math.atan(sinh(Ce));\n\n\t    var sin_Cn = Math.sin(Cn);\n\t    var cos_Cn = Math.cos(Cn);\n\t    var sin_Ce = Math.sin(Ce);\n\t    var cos_Ce = Math.cos(Ce);\n\n\t    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n\t    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n\t    lon = adjust_lon(Ce + this.long0);\n\t    lat = gatg(this.cgb, Cn);\n\t  }\n\t  else {\n\t    lon = Infinity;\n\t    lat = Infinity;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$4 = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\n\tvar etmerc = {\n\t  init: init$3,\n\t  forward: forward$3,\n\t  inverse: inverse$3,\n\t  names: names$4\n\t};\n\n\tvar adjust_zone = function(zone, lon) {\n\t  if (zone === undefined) {\n\t    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n\t    if (zone < 0) {\n\t      return 0;\n\t    } else if (zone > 60) {\n\t      return 60;\n\t    }\n\t  }\n\t  return zone;\n\t};\n\n\tvar dependsOn = 'etmerc';\n\tfunction init$4() {\n\t  var zone = adjust_zone(this.zone, this.long0);\n\t  if (zone === undefined) {\n\t    throw new Error('unknown utm zone');\n\t  }\n\t  this.lat0 = 0;\n\t  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n\t  this.x0 = 500000;\n\t  this.y0 = this.utmSouth ? 10000000 : 0;\n\t  this.k0 = 0.9996;\n\n\t  etmerc.init.apply(this);\n\t  this.forward = etmerc.forward;\n\t  this.inverse = etmerc.inverse;\n\t}\n\n\tvar names$5 = [\"Universal Transverse Mercator System\", \"utm\"];\n\tvar utm = {\n\t  init: init$4,\n\t  names: names$5,\n\t  dependsOn: dependsOn\n\t};\n\n\tvar srat = function(esinp, exp) {\n\t  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n\t};\n\n\tvar MAX_ITER$1 = 20;\n\tfunction init$6() {\n\t  var sphi = Math.sin(this.lat0);\n\t  var cphi = Math.cos(this.lat0);\n\t  cphi *= cphi;\n\t  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n\t  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n\t  this.phic0 = Math.asin(sphi / this.C);\n\t  this.ratexp = 0.5 * this.C * this.e;\n\t  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n\t}\n\n\tfunction forward$5(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n\t  p.x = this.C * lon;\n\t  return p;\n\t}\n\n\tfunction inverse$5(p) {\n\t  var DEL_TOL = 1e-14;\n\t  var lon = p.x / this.C;\n\t  var lat = p.y;\n\t  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n\t  for (var i = MAX_ITER$1; i > 0; --i) {\n\t    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n\t    if (Math.abs(lat - p.y) < DEL_TOL) {\n\t      break;\n\t    }\n\t    p.y = lat;\n\t  }\n\t  /* convergence failed */\n\t  if (!i) {\n\t    return null;\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$7 = [\"gauss\"];\n\tvar gauss = {\n\t  init: init$6,\n\t  forward: forward$5,\n\t  inverse: inverse$5,\n\t  names: names$7\n\t};\n\n\tfunction init$5() {\n\t  gauss.init.apply(this);\n\t  if (!this.rc) {\n\t    return;\n\t  }\n\t  this.sinc0 = Math.sin(this.phic0);\n\t  this.cosc0 = Math.cos(this.phic0);\n\t  this.R2 = 2 * this.rc;\n\t  if (!this.title) {\n\t    this.title = \"Oblique Stereographic Alternative\";\n\t  }\n\t}\n\n\tfunction forward$4(p) {\n\t  var sinc, cosc, cosl, k;\n\t  p.x = adjust_lon(p.x - this.long0);\n\t  gauss.forward.apply(this, [p]);\n\t  sinc = Math.sin(p.y);\n\t  cosc = Math.cos(p.y);\n\t  cosl = Math.cos(p.x);\n\t  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n\t  p.x = k * cosc * Math.sin(p.x);\n\t  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n\t  p.x = this.a * p.x + this.x0;\n\t  p.y = this.a * p.y + this.y0;\n\t  return p;\n\t}\n\n\tfunction inverse$4(p) {\n\t  var sinc, cosc, lon, lat, rho;\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\t  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    var c = 2 * Math.atan2(rho, this.R2);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\t    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n\t    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  gauss.inverse.apply(this, [p]);\n\t  p.x = adjust_lon(p.x + this.long0);\n\t  return p;\n\t}\n\n\tvar names$6 = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\n\tvar sterea = {\n\t  init: init$5,\n\t  forward: forward$4,\n\t  inverse: inverse$4,\n\t  names: names$6\n\t};\n\n\tfunction ssfn_(phit, sinphi, eccen) {\n\t  sinphi *= eccen;\n\t  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n\t}\n\n\tfunction init$7() {\n\t  this.coslat0 = Math.cos(this.lat0);\n\t  this.sinlat0 = Math.sin(this.lat0);\n\t  if (this.sphere) {\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        //North pole\n\t        //trace('stere:north pole');\n\t        this.con = 1;\n\t      }\n\t      else {\n\t        //South pole\n\t        //trace('stere:south pole');\n\t        this.con = -1;\n\t      }\n\t    }\n\t    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n\t    }\n\t    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n\t    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n\t    this.cosX0 = Math.cos(this.X0);\n\t    this.sinX0 = Math.sin(this.X0);\n\t  }\n\t}\n\n\t// Stereographic forward equations--mapping lat,long to x,y\n\tfunction forward$6(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinlat = Math.sin(lat);\n\t  var coslat = Math.cos(lat);\n\t  var A, X, sinX, cosX, ts, rh;\n\t  var dlon = adjust_lon(lon - this.long0);\n\n\t  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n\t    //case of the origine point\n\t    //trace('stere:this is the origin point');\n\t    p.x = NaN;\n\t    p.y = NaN;\n\t    return p;\n\t  }\n\t  if (this.sphere) {\n\t    //trace('stere:sphere case');\n\t    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n\t    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n\t    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n\t    return p;\n\t  }\n\t  else {\n\t    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n\t    cosX = Math.cos(X);\n\t    sinX = Math.sin(X);\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n\t      rh = 2 * this.a * this.k0 * ts / this.cons;\n\t      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n\t      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n\t      //trace(p.toString());\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sinlat0) < EPSLN) {\n\t      //Eq\n\t      //trace('stere:equateur');\n\t      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n\t      p.y = A * sinX;\n\t    }\n\t    else {\n\t      //other case\n\t      //trace('stere:normal case');\n\t      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n\t      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n\t    }\n\t    p.x = A * cosX * Math.sin(dlon) + this.x0;\n\t  }\n\t  //trace(p.toString());\n\t  return p;\n\t}\n\n\t//* Stereographic inverse equations--mapping x,y to lat/long\n\tfunction inverse$6(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat, ts, ce, Chi;\n\t  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  if (this.sphere) {\n\t    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n\t    lon = this.long0;\n\t    lat = this.lat0;\n\t    if (rh <= EPSLN) {\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n\t    if (Math.abs(this.coslat0) < EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      }\n\t      else {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      }\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (rh <= EPSLN) {\n\t        lat = this.lat0;\n\t        lon = this.long0;\n\t        p.x = lon;\n\t        p.y = lat;\n\t        //trace(p.toString());\n\t        return p;\n\t      }\n\t      p.x *= this.con;\n\t      p.y *= this.con;\n\t      ts = rh * this.cons / (2 * this.a * this.k0);\n\t      lat = this.con * phi2z(this.e, ts);\n\t      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t    }\n\t    else {\n\t      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n\t      lon = this.long0;\n\t      if (rh <= EPSLN) {\n\t        Chi = this.X0;\n\t      }\n\t      else {\n\t        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n\t      }\n\t      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  //trace(p.toString());\n\t  return p;\n\n\t}\n\n\tvar names$8 = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\n\tvar stere = {\n\t  init: init$7,\n\t  forward: forward$6,\n\t  inverse: inverse$6,\n\t  names: names$8,\n\t  ssfn_: ssfn_\n\t};\n\n\t/*\n\t  references:\n\t    Formules et constantes pour le Calcul pour la\n\t    projection cylindrique conforme  axe oblique et pour la transformation entre\n\t    des systmes de rfrence.\n\t    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n\t  */\n\n\tfunction init$8() {\n\t  var phy0 = this.lat0;\n\t  this.lambda0 = this.long0;\n\t  var sinPhy0 = Math.sin(phy0);\n\t  var semiMajorAxis = this.a;\n\t  var invF = this.rf;\n\t  var flattening = 1 / invF;\n\t  var e2 = 2 * flattening - Math.pow(flattening, 2);\n\t  var e = this.e = Math.sqrt(e2);\n\t  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n\t  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n\t  this.b0 = Math.asin(sinPhy0 / this.alpha);\n\t  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n\t  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n\t  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n\t  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n\t}\n\n\tfunction forward$7(p) {\n\t  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n\t  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n\t  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n\t  // spheric latitude\n\t  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n\t  // spheric longitude\n\t  var I = this.alpha * (p.x - this.lambda0);\n\n\t  // psoeudo equatorial rotation\n\t  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n\t  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n\t  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n\t  p.x = this.R * rotI + this.x0;\n\t  return p;\n\t}\n\n\tfunction inverse$7(p) {\n\t  var Y = p.x - this.x0;\n\t  var X = p.y - this.y0;\n\n\t  var rotI = Y / this.R;\n\t  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n\t  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n\t  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n\t  var lambda = this.lambda0 + I / this.alpha;\n\n\t  var S = 0;\n\t  var phy = b;\n\t  var prevPhy = -1000;\n\t  var iteration = 0;\n\t  while (Math.abs(phy - prevPhy) > 0.0000001) {\n\t    if (++iteration > 20) {\n\t      //...reportError(\"omercFwdInfinity\");\n\t      return;\n\t    }\n\t    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n\t    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n\t    prevPhy = phy;\n\t    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n\t  }\n\n\t  p.x = lambda;\n\t  p.y = phy;\n\t  return p;\n\t}\n\n\tvar names$9 = [\"somerc\"];\n\tvar somerc = {\n\t  init: init$8,\n\t  forward: forward$7,\n\t  inverse: inverse$7,\n\t  names: names$9\n\t};\n\n\t/* Initialize the Oblique Mercator  projection\n\t    ------------------------------------------*/\n\tfunction init$9() {\n\t  this.no_off = this.no_off || false;\n\t  this.no_rot = this.no_rot || false;\n\n\t  if (isNaN(this.k0)) {\n\t    this.k0 = 1;\n\t  }\n\t  var sinlat = Math.sin(this.lat0);\n\t  var coslat = Math.cos(this.lat0);\n\t  var con = this.e * sinlat;\n\n\t  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n\t  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n\t  var t0 = tsfnz(this.e, this.lat0, sinlat);\n\t  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n\t  if (dl * dl < 1) {\n\t    dl = 1;\n\t  }\n\t  var fl;\n\t  var gl;\n\t  if (!isNaN(this.longc)) {\n\t    //Central point and azimuth method\n\n\t    if (this.lat0 >= 0) {\n\t      fl = dl + Math.sqrt(dl * dl - 1);\n\t    }\n\t    else {\n\t      fl = dl - Math.sqrt(dl * dl - 1);\n\t    }\n\t    this.el = fl * Math.pow(t0, this.bl);\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n\t    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n\t  }\n\t  else {\n\t    //2 points method\n\t    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n\t    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n\t    if (this.lat0 >= 0) {\n\t      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    else {\n\t      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    var hl = Math.pow(t1, this.bl);\n\t    var ll = Math.pow(t2, this.bl);\n\t    fl = this.el / hl;\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n\t    var pl = (ll - hl) / (ll + hl);\n\t    var dlon12 = adjust_lon(this.long1 - this.long2);\n\t    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n\t    this.long0 = adjust_lon(this.long0);\n\t    var dlon10 = adjust_lon(this.long1 - this.long0);\n\t    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n\t    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n\t  }\n\n\t  if (this.no_off) {\n\t    this.uc = 0;\n\t  }\n\t  else {\n\t    if (this.lat0 >= 0) {\n\t      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t    else {\n\t      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t  }\n\n\t}\n\n\t/* Oblique Mercator forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------------*/\n\tfunction forward$8(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var us, vs;\n\t  var con;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    if (lat > 0) {\n\t      con = -1;\n\t    }\n\t    else {\n\t      con = 1;\n\t    }\n\t    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n\t    us = -1 * con * HALF_PI * this.al / this.bl;\n\t  }\n\t  else {\n\t    var t = tsfnz(this.e, lat, Math.sin(lat));\n\t    var ql = this.el / Math.pow(t, this.bl);\n\t    var sl = 0.5 * (ql - 1 / ql);\n\t    var tl = 0.5 * (ql + 1 / ql);\n\t    var vl = Math.sin(this.bl * (dlon));\n\t    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n\t    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n\t      vs = Number.POSITIVE_INFINITY;\n\t    }\n\t    else {\n\t      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n\t    }\n\t    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n\t      us = this.al * this.bl * (dlon);\n\t    }\n\t    else {\n\t      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n\t    }\n\t  }\n\n\t  if (this.no_rot) {\n\t    p.x = this.x0 + us;\n\t    p.y = this.y0 + vs;\n\t  }\n\t  else {\n\n\t    us -= this.uc;\n\t    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n\t    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n\t  }\n\t  return p;\n\t}\n\n\tfunction inverse$8(p) {\n\t  var us, vs;\n\t  if (this.no_rot) {\n\t    vs = p.y - this.y0;\n\t    us = p.x - this.x0;\n\t  }\n\t  else {\n\t    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n\t    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n\t    us += this.uc;\n\t  }\n\t  var qp = Math.exp(-1 * this.bl * vs / this.al);\n\t  var sp = 0.5 * (qp - 1 / qp);\n\t  var tp = 0.5 * (qp + 1 / qp);\n\t  var vp = Math.sin(this.bl * us / this.al);\n\t  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n\t  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n\t  if (Math.abs(up - 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = HALF_PI;\n\t  }\n\t  else if (Math.abs(up + 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = -1 * HALF_PI;\n\t  }\n\t  else {\n\t    p.y = phi2z(this.e, ts);\n\t    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n\t  }\n\t  return p;\n\t}\n\n\tvar names$10 = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\n\tvar omerc = {\n\t  init: init$9,\n\t  forward: forward$8,\n\t  inverse: inverse$8,\n\t  names: names$10\n\t};\n\n\tfunction init$10() {\n\n\t  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n\t  //double c_lat;                   /* center latitude                      */\n\t  //double c_lon;                   /* center longitude                     */\n\t  //double lat1;                    /* first standard parallel              */\n\t  //double lat2;                    /* second standard parallel             */\n\t  //double r_maj;                   /* major axis                           */\n\t  //double r_min;                   /* minor axis                           */\n\t  //double false_east;              /* x offset in meters                   */\n\t  //double false_north;             /* y offset in meters                   */\n\n\t  if (!this.lat2) {\n\t    this.lat2 = this.lat1;\n\t  } //if lat2 is not defined\n\t  if (!this.k0) {\n\t    this.k0 = 1;\n\t  }\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\n\t  var temp = this.b / this.a;\n\t  this.e = Math.sqrt(1 - temp * temp);\n\n\t  var sin1 = Math.sin(this.lat1);\n\t  var cos1 = Math.cos(this.lat1);\n\t  var ms1 = msfnz(this.e, sin1, cos1);\n\t  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n\t  var sin2 = Math.sin(this.lat2);\n\t  var cos2 = Math.cos(this.lat2);\n\t  var ms2 = msfnz(this.e, sin2, cos2);\n\t  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n\t  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n\t  }\n\t  else {\n\t    this.ns = sin1;\n\t  }\n\t  if (isNaN(this.ns)) {\n\t    this.ns = sin1;\n\t  }\n\t  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n\t  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n\t  if (!this.title) {\n\t    this.title = \"Lambert Conformal Conic\";\n\t  }\n\t}\n\n\t// Lambert Conformal conic forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$9(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  // singular cases :\n\t  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n\t    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n\t  }\n\n\t  var con = Math.abs(Math.abs(lat) - HALF_PI);\n\t  var ts, rh1;\n\t  if (con > EPSLN) {\n\t    ts = tsfnz(this.e, lat, Math.sin(lat));\n\t    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n\t  }\n\t  else {\n\t    con = lat * this.ns;\n\t    if (con <= 0) {\n\t      return null;\n\t    }\n\t    rh1 = 0;\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n\t  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n\t  return p;\n\t}\n\n\t// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$9(p) {\n\n\t  var rh1, con, ts;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) / this.k0;\n\t  var y = (this.rh - (p.y - this.y0) / this.k0);\n\t  if (this.ns > 0) {\n\t    rh1 = Math.sqrt(x * x + y * y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(x * x + y * y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2((con * x), (con * y));\n\t  }\n\t  if ((rh1 !== 0) || (this.ns > 0)) {\n\t    con = 1 / this.ns;\n\t    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  else {\n\t    lat = -HALF_PI;\n\t  }\n\t  lon = adjust_lon(theta / this.ns + this.long0);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$11 = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\n\tvar lcc = {\n\t  init: init$10,\n\t  forward: forward$9,\n\t  inverse: inverse$9,\n\t  names: names$11\n\t};\n\n\tfunction init$11() {\n\t  this.a = 6377397.155;\n\t  this.es = 0.006674372230614;\n\t  this.e = Math.sqrt(this.es);\n\t  if (!this.lat0) {\n\t    this.lat0 = 0.863937979737193;\n\t  }\n\t  if (!this.long0) {\n\t    this.long0 = 0.7417649320975901 - 0.308341501185665;\n\t  }\n\t  /* if scale not set default to 0.9999 */\n\t  if (!this.k0) {\n\t    this.k0 = 0.9999;\n\t  }\n\t  this.s45 = 0.785398163397448; /* 45 */\n\t  this.s90 = 2 * this.s45;\n\t  this.fi0 = this.lat0;\n\t  this.e2 = this.es;\n\t  this.e = Math.sqrt(this.e2);\n\t  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n\t  this.uq = 1.04216856380474;\n\t  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n\t  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n\t  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n\t  this.k1 = this.k0;\n\t  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n\t  this.s0 = 1.37008346281555;\n\t  this.n = Math.sin(this.s0);\n\t  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n\t  this.ad = this.s90 - this.uq;\n\t}\n\n\t/* ellipsoid */\n\t/* calculate xy from lat/lon */\n\t/* Constants, identical to inverse transform function */\n\tfunction forward$10(p) {\n\t  var gfi, u, deltav, s, d, eps, ro;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  /* Transformation */\n\t  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n\t  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n\t  deltav = -delta_lon * this.alfa;\n\t  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n\t  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n\t  eps = this.n * d;\n\t  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n\t  p.y = ro * Math.cos(eps) / 1;\n\t  p.x = ro * Math.sin(eps) / 1;\n\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  return (p);\n\t}\n\n\t/* calculate lat/lon from xy */\n\tfunction inverse$10(p) {\n\t  var u, deltav, s, d, eps, ro, fi1;\n\t  var ok;\n\n\t  /* Transformation */\n\t  /* revert y, x*/\n\t  var tmp = p.x;\n\t  p.x = p.y;\n\t  p.y = tmp;\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  eps = Math.atan2(p.y, p.x);\n\t  d = eps / Math.sin(this.s0);\n\t  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n\t  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n\t  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n\t  p.x = this.long0 - deltav / this.alfa;\n\t  fi1 = u;\n\t  ok = 0;\n\t  var iter = 0;\n\t  do {\n\t    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n\t    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n\t      ok = 1;\n\t    }\n\t    fi1 = p.y;\n\t    iter += 1;\n\t  } while (ok === 0 && iter < 15);\n\t  if (iter >= 15) {\n\t    return null;\n\t  }\n\n\t  return (p);\n\t}\n\n\tvar names$12 = [\"Krovak\", \"krovak\"];\n\tvar krovak = {\n\t  init: init$11,\n\t  forward: forward$10,\n\t  inverse: inverse$10,\n\t  names: names$12\n\t};\n\n\tvar mlfn = function(e0, e1, e2, e3, phi) {\n\t  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n\t};\n\n\tvar e0fn = function(x) {\n\t  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n\t};\n\n\tvar e1fn = function(x) {\n\t  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n\t};\n\n\tvar e2fn = function(x) {\n\t  return (0.05859375 * x * x * (1 + 0.75 * x));\n\t};\n\n\tvar e3fn = function(x) {\n\t  return (x * x * x * (35 / 3072));\n\t};\n\n\tvar gN = function(a, e, sinphi) {\n\t  var temp = e * sinphi;\n\t  return a / Math.sqrt(1 - temp * temp);\n\t};\n\n\tvar adjust_lat = function(x) {\n\t  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n\t};\n\n\tvar imlfn = function(ml, e0, e1, e2, e3) {\n\t  var phi;\n\t  var dphi;\n\n\t  phi = ml / e0;\n\t  for (var i = 0; i < 15; i++) {\n\t    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n\t  return NaN;\n\t};\n\n\tfunction init$12() {\n\t  if (!this.sphere) {\n\t    this.e0 = e0fn(this.es);\n\t    this.e1 = e1fn(this.es);\n\t    this.e2 = e2fn(this.es);\n\t    this.e3 = e3fn(this.es);\n\t    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  }\n\t}\n\n\t/* Cassini forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$11(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\t  lam = adjust_lon(lam - this.long0);\n\n\t  if (this.sphere) {\n\t    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n\t    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n\t  }\n\t  else {\n\t    //ellipsoid\n\t    var sinphi = Math.sin(phi);\n\t    var cosphi = Math.cos(phi);\n\t    var nl = gN(this.a, this.e, sinphi);\n\t    var tl = Math.tan(phi) * Math.tan(phi);\n\t    var al = lam * Math.cos(phi);\n\t    var asq = al * al;\n\t    var cl = this.es * cosphi * cosphi / (1 - this.es);\n\t    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n\t    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n\t    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n\t  }\n\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$11(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var phi, lam;\n\n\t  if (this.sphere) {\n\t    var dd = y + this.lat0;\n\t    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n\t    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n\t  }\n\t  else {\n\t    /* ellipsoid */\n\t    var ml1 = this.ml0 / this.a + y;\n\t    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n\t    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n\t      p.x = this.long0;\n\t      p.y = HALF_PI;\n\t      if (y < 0) {\n\t        p.y *= -1;\n\t      }\n\t      return p;\n\t    }\n\t    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n\t    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n\t    var tl1 = Math.pow(Math.tan(phi1), 2);\n\t    var dl = x * this.a / nl1;\n\t    var dsq = dl * dl;\n\t    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n\t    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n\t  }\n\n\t  p.x = adjust_lon(lam + this.long0);\n\t  p.y = adjust_lat(phi);\n\t  return p;\n\n\t}\n\n\tvar names$13 = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\n\tvar cass = {\n\t  init: init$12,\n\t  forward: forward$11,\n\t  inverse: inverse$11,\n\t  names: names$13\n\t};\n\n\tvar qsfnz = function(eccent, sinphi) {\n\t  var con;\n\t  if (eccent > 1.0e-7) {\n\t    con = eccent * sinphi;\n\t    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n\t  }\n\t  else {\n\t    return (2 * sinphi);\n\t  }\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\tvar S_POLE = 1;\n\n\tvar N_POLE = 2;\n\tvar EQUIT = 3;\n\tvar OBLIQ = 4;\n\n\t/* Initialize the Lambert Azimuthal Equal Area projection\n\t  ------------------------------------------------------*/\n\tfunction init$13() {\n\t  var t = Math.abs(this.lat0);\n\t  if (Math.abs(t - HALF_PI) < EPSLN) {\n\t    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n\t  }\n\t  else if (Math.abs(t) < EPSLN) {\n\t    this.mode = this.EQUIT;\n\t  }\n\t  else {\n\t    this.mode = this.OBLIQ;\n\t  }\n\t  if (this.es > 0) {\n\t    var sinphi;\n\n\t    this.qp = qsfnz(this.e, 1);\n\t    this.mmf = 0.5 / (1 - this.es);\n\t    this.apa = authset(this.es);\n\t    switch (this.mode) {\n\t    case this.N_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.S_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.EQUIT:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      this.dd = 1 / this.rq;\n\t      this.xmf = 1;\n\t      this.ymf = 0.5 * this.qp;\n\t      break;\n\t    case this.OBLIQ:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      sinphi = Math.sin(this.lat0);\n\t      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n\t      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n\t      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n\t      this.ymf = (this.xmf = this.rq) / this.dd;\n\t      this.xmf *= this.dd;\n\t      break;\n\t    }\n\t  }\n\t  else {\n\t    if (this.mode === this.OBLIQ) {\n\t      this.sinph0 = Math.sin(this.lat0);\n\t      this.cosph0 = Math.cos(this.lat0);\n\t    }\n\t  }\n\t}\n\n\t/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$12(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\n\t  lam = adjust_lon(lam - this.long0);\n\t  if (this.sphere) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    coslam = Math.cos(lam);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n\t      if (y <= EPSLN) {\n\t        return null;\n\t      }\n\t      y = Math.sqrt(2 / y);\n\t      x = y * cosphi * Math.sin(lam);\n\t      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        coslam = -coslam;\n\t      }\n\t      if (Math.abs(phi + this.phi0) < EPSLN) {\n\t        return null;\n\t      }\n\t      y = FORTPI - phi * 0.5;\n\t      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n\t      x = y * Math.sin(lam);\n\t      y *= coslam;\n\t    }\n\t  }\n\t  else {\n\t    sinb = 0;\n\t    cosb = 0;\n\t    b = 0;\n\t    coslam = Math.cos(lam);\n\t    sinlam = Math.sin(lam);\n\t    sinphi = Math.sin(phi);\n\t    q = qsfnz(this.e, sinphi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinb = q / this.qp;\n\t      cosb = Math.sqrt(1 - sinb * sinb);\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n\t      break;\n\t    case this.EQUIT:\n\t      b = 1 + cosb * coslam;\n\t      break;\n\t    case this.N_POLE:\n\t      b = HALF_PI + phi;\n\t      q = this.qp - q;\n\t      break;\n\t    case this.S_POLE:\n\t      b = phi - HALF_PI;\n\t      q = this.qp + q;\n\t      break;\n\t    }\n\t    if (Math.abs(b) < EPSLN) {\n\t      return null;\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t    case this.EQUIT:\n\t      b = Math.sqrt(2 / b);\n\t      if (this.mode === this.OBLIQ) {\n\t        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n\t      }\n\t      else {\n\t        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n\t      }\n\t      x = this.xmf * b * cosb * sinlam;\n\t      break;\n\t    case this.N_POLE:\n\t    case this.S_POLE:\n\t      if (q >= 0) {\n\t        x = (b = Math.sqrt(q)) * sinlam;\n\t        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n\t      }\n\t      else {\n\t        x = y = 0;\n\t      }\n\t      break;\n\t    }\n\t  }\n\n\t  p.x = this.a * x + this.x0;\n\t  p.y = this.a * y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$12(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var lam, phi, cCe, sCe, q, rho, ab;\n\t  if (this.sphere) {\n\t    var cosz = 0,\n\t      rh, sinz = 0;\n\n\t    rh = Math.sqrt(x * x + y * y);\n\t    phi = rh * 0.5;\n\t    if (phi > 1) {\n\t      return null;\n\t    }\n\t    phi = 2 * Math.asin(phi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinz = Math.sin(phi);\n\t      cosz = Math.cos(phi);\n\t    }\n\t    switch (this.mode) {\n\t    case this.EQUIT:\n\t      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n\t      x *= sinz;\n\t      y = cosz * rh;\n\t      break;\n\t    case this.OBLIQ:\n\t      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n\t      x *= sinz * this.cosph0;\n\t      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n\t      break;\n\t    case this.N_POLE:\n\t      y = -y;\n\t      phi = HALF_PI - phi;\n\t      break;\n\t    case this.S_POLE:\n\t      phi -= HALF_PI;\n\t      break;\n\t    }\n\t    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n\t  }\n\t  else {\n\t    ab = 0;\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      x /= this.dd;\n\t      y *= this.dd;\n\t      rho = Math.sqrt(x * x + y * y);\n\t      if (rho < EPSLN) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n\t      cCe = Math.cos(sCe);\n\t      x *= (sCe = Math.sin(sCe));\n\t      if (this.mode === this.OBLIQ) {\n\t        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n\t        q = this.qp * ab;\n\t        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n\t      }\n\t      else {\n\t        ab = y * sCe / rho;\n\t        q = this.qp * ab;\n\t        y = rho * cCe;\n\t      }\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        y = -y;\n\t      }\n\t      q = (x * x + y * y);\n\t      if (!q) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      ab = 1 - q / this.qp;\n\t      if (this.mode === this.S_POLE) {\n\t        ab = -ab;\n\t      }\n\t    }\n\t    lam = Math.atan2(x, y);\n\t    phi = authlat(Math.asin(ab), this.apa);\n\t  }\n\n\t  p.x = adjust_lon(this.long0 + lam);\n\t  p.y = phi;\n\t  return p;\n\t}\n\n\t/* determine latitude from authalic latitude */\n\tvar P00 = 0.33333333333333333333;\n\n\tvar P01 = 0.17222222222222222222;\n\tvar P02 = 0.10257936507936507936;\n\tvar P10 = 0.06388888888888888888;\n\tvar P11 = 0.06640211640211640211;\n\tvar P20 = 0.01641501294219154443;\n\n\tfunction authset(es) {\n\t  var t;\n\t  var APA = [];\n\t  APA[0] = es * P00;\n\t  t = es * es;\n\t  APA[0] += t * P01;\n\t  APA[1] = t * P10;\n\t  t *= es;\n\t  APA[0] += t * P02;\n\t  APA[1] += t * P11;\n\t  APA[2] = t * P20;\n\t  return APA;\n\t}\n\n\tfunction authlat(beta, APA) {\n\t  var t = beta + beta;\n\t  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n\t}\n\n\tvar names$14 = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\n\tvar laea = {\n\t  init: init$13,\n\t  forward: forward$12,\n\t  inverse: inverse$12,\n\t  names: names$14,\n\t  S_POLE: S_POLE,\n\t  N_POLE: N_POLE,\n\t  EQUIT: EQUIT,\n\t  OBLIQ: OBLIQ\n\t};\n\n\tvar asinz = function(x) {\n\t  if (Math.abs(x) > 1) {\n\t    x = (x > 1) ? 1 : -1;\n\t  }\n\t  return Math.asin(x);\n\t};\n\n\tfunction init$14() {\n\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e3 = Math.sqrt(this.es);\n\n\t  this.sin_po = Math.sin(this.lat1);\n\t  this.cos_po = Math.cos(this.lat1);\n\t  this.t1 = this.sin_po;\n\t  this.con = this.sin_po;\n\t  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat2);\n\t  this.cos_po = Math.cos(this.lat2);\n\t  this.t2 = this.sin_po;\n\t  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat0);\n\t  this.cos_po = Math.cos(this.lat0);\n\t  this.t3 = this.sin_po;\n\t  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n\t  }\n\t  else {\n\t    this.ns0 = this.con;\n\t  }\n\t  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n\t  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n\t}\n\n\t/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n\t  -------------------------------------------------------------------*/\n\tfunction forward$13(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  this.sin_phi = Math.sin(lat);\n\t  this.cos_phi = Math.cos(lat);\n\n\t  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n\t  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n\t  var theta = this.ns0 * adjust_lon(lon - this.long0);\n\t  var x = rh1 * Math.sin(theta) + this.x0;\n\t  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$13(p) {\n\t  var rh1, qs, con, theta, lon, lat;\n\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  if (this.ns0 >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\t  con = rh1 * this.ns0 / this.a;\n\t  if (this.sphere) {\n\t    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n\t  }\n\t  else {\n\t    qs = (this.c - con * con) / this.ns0;\n\t    lat = this.phi1z(this.e3, qs);\n\t  }\n\n\t  lon = adjust_lon(theta / this.ns0 + this.long0);\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\t/* Function to compute phi1, the latitude for the inverse of the\n\t   Albers Conical Equal-Area projection.\n\t-------------------------------------------*/\n\tfunction phi1z(eccent, qs) {\n\t  var sinphi, cosphi, con, com, dphi;\n\t  var phi = asinz(0.5 * qs);\n\t  if (eccent < EPSLN) {\n\t    return phi;\n\t  }\n\n\t  var eccnts = eccent * eccent;\n\t  for (var i = 1; i <= 25; i++) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    con = eccent * sinphi;\n\t    com = 1 - con * con;\n\t    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi = phi + dphi;\n\t    if (Math.abs(dphi) <= 1e-7) {\n\t      return phi;\n\t    }\n\t  }\n\t  return null;\n\t}\n\n\tvar names$15 = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\n\tvar aea = {\n\t  init: init$14,\n\t  forward: forward$13,\n\t  inverse: inverse$13,\n\t  names: names$15,\n\t  phi1z: phi1z\n\t};\n\n\t/*\n\t  reference:\n\t    Wolfram Mathworld \"Gnomonic Projection\"\n\t    http://mathworld.wolfram.com/GnomonicProjection.html\n\t    Accessed: 12th November 2009\n\t  */\n\tfunction init$15() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t  // Approximation for projecting points to the horizon (infinity)\n\t  this.infinity_dist = 1000 * this.a;\n\t  this.rc = 1;\n\t}\n\n\t/* Gnomonic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$14(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g;\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n\t  }\n\t  else {\n\n\t    // Point is in the opposing hemisphere and is unprojectable\n\t    // We still need to return a reasonable point, so we project\n\t    // to infinity, on a bearing\n\t    // equivalent to the northern hemisphere equivalent\n\t    // This is a reasonable approximation for short shapes and lines that\n\t    // straddle the horizon.\n\n\t    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$14(p) {\n\t  var rh; /* Rho */\n\t  var sinc, cosc;\n\t  var c;\n\t  var lon, lat;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\n\t  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    c = Math.atan2(rh, this.rc);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\n\t    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n\t    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n\t    lon = adjust_lon(this.long0 + lon);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$16 = [\"gnom\"];\n\tvar gnom = {\n\t  init: init$15,\n\t  forward: forward$14,\n\t  inverse: inverse$14,\n\t  names: names$16\n\t};\n\n\tvar iqsfnz = function(eccent, q) {\n\t  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n\t  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n\t    if (q < 0) {\n\t      return (-1 * HALF_PI);\n\t    }\n\t    else {\n\t      return HALF_PI;\n\t    }\n\t  }\n\t  //var phi = 0.5* q/(1-eccent*eccent);\n\t  var phi = Math.asin(0.5 * q);\n\t  var dphi;\n\t  var sin_phi;\n\t  var cos_phi;\n\t  var con;\n\t  for (var i = 0; i < 30; i++) {\n\t    sin_phi = Math.sin(phi);\n\t    cos_phi = Math.cos(phi);\n\t    con = eccent * sin_phi;\n\t    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n\t  return NaN;\n\t};\n\n\t/*\n\t  reference:\n\t    \"Cartographic Projection Procedures for the UNIX Environment-\n\t    A User's Manual\" by Gerald I. Evenden,\n\t    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n\t*/\n\tfunction init$16() {\n\t  //no-op\n\t  if (!this.sphere) {\n\t    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t  }\n\t}\n\n\t/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$15(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  if (this.sphere) {\n\t    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n\t    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n\t  }\n\t  else {\n\t    var qs = qsfnz(this.e, Math.sin(lat));\n\t    x = this.x0 + this.a * this.k0 * dlon;\n\t    y = this.y0 + this.a * qs * 0.5 / this.k0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$15(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n\t    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n\t  }\n\t  else {\n\t    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n\t    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$17 = [\"cea\"];\n\tvar cea = {\n\t  init: init$16,\n\t  forward: forward$15,\n\t  inverse: inverse$15,\n\t  names: names$17\n\t};\n\n\tfunction init$17() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n\t  this.rc = Math.cos(this.lat_ts);\n\t}\n\n\t// forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$16(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var dlat = adjust_lat(lat - this.lat0);\n\t  p.x = this.x0 + (this.a * dlon * this.rc);\n\t  p.y = this.y0 + (this.a * dlat);\n\t  return p;\n\t}\n\n\t// inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$16(p) {\n\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n\t  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n\t  return p;\n\t}\n\n\tvar names$18 = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\n\tvar eqc = {\n\t  init: init$17,\n\t  forward: forward$16,\n\t  inverse: inverse$16,\n\t  names: names$18\n\t};\n\n\tvar MAX_ITER$2 = 20;\n\n\tfunction init$18() {\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\t  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n\t}\n\n\t/* Polyconic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$17(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y, el;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  el = dlon * Math.sin(lat);\n\t  if (this.sphere) {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.a * this.lat0;\n\t    }\n\t    else {\n\t      x = this.a * Math.sin(el) / Math.tan(lat);\n\t      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.ml0;\n\t    }\n\t    else {\n\t      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n\t      x = nl * Math.sin(el);\n\t      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n\t    }\n\n\t  }\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$17(p) {\n\t  var lon, lat, x, y, i;\n\t  var al, bl;\n\t  var phi, dphi;\n\t  x = p.x - this.x0;\n\t  y = p.y - this.y0;\n\n\t  if (this.sphere) {\n\t    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n\t      lon = adjust_lon(x / this.a + this.long0);\n\t      lat = 0;\n\t    }\n\t    else {\n\t      al = this.lat0 + y / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var tanphi;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        tanphi = Math.tan(phi);\n\t        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n\t        phi += dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\t      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(y + this.ml0) <= EPSLN) {\n\t      lat = 0;\n\t      lon = adjust_lon(this.long0 + x / this.a);\n\t    }\n\t    else {\n\n\t      al = (this.ml0 + y) / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var cl, mln, mlnp, ma;\n\t      var con;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        con = this.e * Math.sin(phi);\n\t        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n\t        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\t        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n\t        ma = mln / this.a;\n\t        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n\t        phi -= dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\n\t      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n\t      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n\t      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$19 = [\"Polyconic\", \"poly\"];\n\tvar poly = {\n\t  init: init$18,\n\t  forward: forward$17,\n\t  inverse: inverse$17,\n\t  names: names$19\n\t};\n\n\t/*\n\t  reference\n\t    Department of Land and Survey Technical Circular 1973/32\n\t      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n\t    OSG Technical Report 4.1\n\t      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n\t  */\n\n\t/**\n\t * iterations: Number of iterations to refine inverse transform.\n\t *     0 -> km accuracy\n\t *     1 -> m accuracy -- suitable for most mapping applications\n\t *     2 -> mm accuracy\n\t */\n\n\n\tfunction init$19() {\n\t  this.A = [];\n\t  this.A[1] = 0.6399175073;\n\t  this.A[2] = -0.1358797613;\n\t  this.A[3] = 0.063294409;\n\t  this.A[4] = -0.02526853;\n\t  this.A[5] = 0.0117879;\n\t  this.A[6] = -0.0055161;\n\t  this.A[7] = 0.0026906;\n\t  this.A[8] = -0.001333;\n\t  this.A[9] = 0.00067;\n\t  this.A[10] = -0.00034;\n\n\t  this.B_re = [];\n\t  this.B_im = [];\n\t  this.B_re[1] = 0.7557853228;\n\t  this.B_im[1] = 0;\n\t  this.B_re[2] = 0.249204646;\n\t  this.B_im[2] = 0.003371507;\n\t  this.B_re[3] = -0.001541739;\n\t  this.B_im[3] = 0.041058560;\n\t  this.B_re[4] = -0.10162907;\n\t  this.B_im[4] = 0.01727609;\n\t  this.B_re[5] = -0.26623489;\n\t  this.B_im[5] = -0.36249218;\n\t  this.B_re[6] = -0.6870983;\n\t  this.B_im[6] = -1.1651967;\n\n\t  this.C_re = [];\n\t  this.C_im = [];\n\t  this.C_re[1] = 1.3231270439;\n\t  this.C_im[1] = 0;\n\t  this.C_re[2] = -0.577245789;\n\t  this.C_im[2] = -0.007809598;\n\t  this.C_re[3] = 0.508307513;\n\t  this.C_im[3] = -0.112208952;\n\t  this.C_re[4] = -0.15094762;\n\t  this.C_im[4] = 0.18200602;\n\t  this.C_re[5] = 1.01418179;\n\t  this.C_im[5] = 1.64497696;\n\t  this.C_re[6] = 1.9660549;\n\t  this.C_im[6] = 2.5127645;\n\n\t  this.D = [];\n\t  this.D[1] = 1.5627014243;\n\t  this.D[2] = 0.5185406398;\n\t  this.D[3] = -0.03333098;\n\t  this.D[4] = -0.1052906;\n\t  this.D[5] = -0.0368594;\n\t  this.D[6] = 0.007317;\n\t  this.D[7] = 0.01220;\n\t  this.D[8] = 0.00394;\n\t  this.D[9] = -0.0013;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$18(p) {\n\t  var n;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lat = lat - this.lat0;\n\t  var delta_lon = lon - this.long0;\n\n\t  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n\t  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n\t  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n\t  var d_lambda = delta_lon;\n\t  var d_phi_n = 1; // d_phi^0\n\n\t  var d_psi = 0;\n\t  for (n = 1; n <= 10; n++) {\n\t    d_phi_n = d_phi_n * d_phi;\n\t    d_psi = d_psi + this.A[n] * d_phi_n;\n\t  }\n\n\t  // 2. Calculate theta\n\t  var th_re = d_psi;\n\t  var th_im = d_lambda;\n\n\t  // 3. Calculate z\n\t  var th_n_re = 1;\n\t  var th_n_im = 0; // theta^0\n\t  var th_n_re1;\n\t  var th_n_im1;\n\n\t  var z_re = 0;\n\t  var z_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t    th_n_re = th_n_re1;\n\t    th_n_im = th_n_im1;\n\t    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n\t    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n\t  }\n\n\t  // 4. Calculate easting and northing\n\t  p.x = (z_im * this.a) + this.x0;\n\t  p.y = (z_re * this.a) + this.y0;\n\n\t  return p;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$18(p) {\n\t  var n;\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  var delta_x = x - this.x0;\n\t  var delta_y = y - this.y0;\n\n\t  // 1. Calculate z\n\t  var z_re = delta_y / this.a;\n\t  var z_im = delta_x / this.a;\n\n\t  // 2a. Calculate theta - first approximation gives km accuracy\n\t  var z_n_re = 1;\n\t  var z_n_im = 0; // z^0\n\t  var z_n_re1;\n\t  var z_n_im1;\n\n\t  var th_re = 0;\n\t  var th_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n\t    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n\t    z_n_re = z_n_re1;\n\t    z_n_im = z_n_im1;\n\t    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n\t    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n\t  }\n\n\t  // 2b. Iterate to refine the accuracy of the calculation\n\t  //        0 iterations gives km accuracy\n\t  //        1 iteration gives m accuracy -- good enough for most mapping applications\n\t  //        2 iterations bives mm accuracy\n\t  for (var i = 0; i < this.iterations; i++) {\n\t    var th_n_re = th_re;\n\t    var th_n_im = th_im;\n\t    var th_n_re1;\n\t    var th_n_im1;\n\n\t    var num_re = z_re;\n\t    var num_im = z_im;\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    th_n_re = 1;\n\t    th_n_im = 0;\n\t    var den_re = this.B_re[1];\n\t    var den_im = this.B_im[1];\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    // Complex division\n\t    var den2 = den_re * den_re + den_im * den_im;\n\t    th_re = (num_re * den_re + num_im * den_im) / den2;\n\t    th_im = (num_im * den_re - num_re * den_im) / den2;\n\t  }\n\n\t  // 3. Calculate d_phi              ...                                    // and d_lambda\n\t  var d_psi = th_re;\n\t  var d_lambda = th_im;\n\t  var d_psi_n = 1; // d_psi^0\n\n\t  var d_phi = 0;\n\t  for (n = 1; n <= 9; n++) {\n\t    d_psi_n = d_psi_n * d_psi;\n\t    d_phi = d_phi + this.D[n] * d_psi_n;\n\t  }\n\n\t  // 4. Calculate latitude and longitude\n\t  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n\t  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n\t  var lon = this.long0 + d_lambda;\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$20 = [\"New_Zealand_Map_Grid\", \"nzmg\"];\n\tvar nzmg = {\n\t  init: init$19,\n\t  forward: forward$18,\n\t  inverse: inverse$18,\n\t  names: names$20\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\n\t/* Initialize the Miller Cylindrical projection\n\t  -------------------------------------------*/\n\tfunction init$20() {\n\t  //no-op\n\t}\n\n\t/* Miller Cylindrical forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$19(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x = this.x0 + this.a * dlon;\n\t  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$19(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\n\t  var lon = adjust_lon(this.long0 + p.x / this.a);\n\t  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$21 = [\"Miller_Cylindrical\", \"mill\"];\n\tvar mill = {\n\t  init: init$20,\n\t  forward: forward$19,\n\t  inverse: inverse$19,\n\t  names: names$21\n\t};\n\n\tvar MAX_ITER$3 = 20;\n\tfunction init$21() {\n\t  /* Place parameters in static storage for common use\n\t    -------------------------------------------------*/\n\n\n\t  if (!this.sphere) {\n\t    this.en = pj_enfn(this.es);\n\t  }\n\t  else {\n\t    this.n = 1;\n\t    this.m = 0;\n\t    this.es = 0;\n\t    this.C_y = Math.sqrt((this.m + 1) / this.n);\n\t    this.C_x = this.C_y / (this.m + 1);\n\t  }\n\n\t}\n\n\t/* Sinusoidal forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------*/\n\tfunction forward$20(p) {\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t    -----------------*/\n\t  lon = adjust_lon(lon - this.long0);\n\n\t  if (this.sphere) {\n\t    if (!this.m) {\n\t      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n\t    }\n\t    else {\n\t      var k = this.n * Math.sin(lat);\n\t      for (var i = MAX_ITER$3; i; --i) {\n\t        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n\t        lat -= V;\n\t        if (Math.abs(V) < EPSLN) {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n\t    y = this.a * this.C_y * lat;\n\n\t  }\n\t  else {\n\n\t    var s = Math.sin(lat);\n\t    var c = Math.cos(lat);\n\t    y = this.a * pj_mlfn(lat, s, c, this.en);\n\t    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$20(p) {\n\t  var lat, temp, lon, s;\n\n\t  p.x -= this.x0;\n\t  lon = p.x / this.a;\n\t  p.y -= this.y0;\n\t  lat = p.y / this.a;\n\n\t  if (this.sphere) {\n\t    lat /= this.C_y;\n\t    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n\t    if (this.m) {\n\t      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n\t    }\n\t    else if (this.n !== 1) {\n\t      lat = asinz(Math.sin(lat) / this.n);\n\t    }\n\t    lon = adjust_lon(lon + this.long0);\n\t    lat = adjust_lat(lat);\n\t  }\n\t  else {\n\t    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n\t    s = Math.abs(lat);\n\t    if (s < HALF_PI) {\n\t      s = Math.sin(lat);\n\t      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n\t      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n\t      lon = adjust_lon(temp);\n\t    }\n\t    else if ((s - EPSLN) < HALF_PI) {\n\t      lon = this.long0;\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$22 = [\"Sinusoidal\", \"sinu\"];\n\tvar sinu = {\n\t  init: init$21,\n\t  forward: forward$20,\n\t  inverse: inverse$20,\n\t  names: names$22\n\t};\n\n\tfunction init$22() {}\n\t/* Mollweide forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------*/\n\tfunction forward$21(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var theta = lat;\n\t  var con = Math.PI * Math.sin(lat);\n\n\t  /* Iterate using the Newton-Raphson method to find theta\n\t      -----------------------------------------------------*/\n\t  while (true) {\n\t    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n\t    theta += delta_theta;\n\t    if (Math.abs(delta_theta) < EPSLN) {\n\t      break;\n\t    }\n\t  }\n\t  theta /= 2;\n\n\t  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n\t       this is done here because of precision problems with \"cos(theta)\"\n\t       --------------------------------------------------------------------------*/\n\t  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n\t    delta_lon = 0;\n\t  }\n\t  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n\t  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$21(p) {\n\t  var theta;\n\t  var arg;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  arg = p.y / (1.4142135623731 * this.a);\n\n\t  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n\t       a number very close to one is used instead.\n\t       -------------------------------------------------------------------*/\n\t  if (Math.abs(arg) > 0.999999999999) {\n\t    arg = 0.999999999999;\n\t  }\n\t  theta = Math.asin(arg);\n\t  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n\t  if (lon < (-Math.PI)) {\n\t    lon = -Math.PI;\n\t  }\n\t  if (lon > Math.PI) {\n\t    lon = Math.PI;\n\t  }\n\t  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n\t  if (Math.abs(arg) > 1) {\n\t    arg = 1;\n\t  }\n\t  var lat = Math.asin(arg);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$23 = [\"Mollweide\", \"moll\"];\n\tvar moll = {\n\t  init: init$22,\n\t  forward: forward$21,\n\t  inverse: inverse$21,\n\t  names: names$23\n\t};\n\n\tfunction init$23() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.lat2 = this.lat2 || this.lat1;\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\n\t  this.sinphi = Math.sin(this.lat1);\n\t  this.cosphi = Math.cos(this.lat1);\n\n\t  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n\t  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n\t  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n\t    this.ns = this.sinphi;\n\t  }\n\t  else {\n\t    this.sinphi = Math.sin(this.lat2);\n\t    this.cosphi = Math.cos(this.lat2);\n\t    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n\t    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n\t    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n\t  }\n\t  this.g = this.ml1 + this.ms1 / this.ns;\n\t  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  this.rh = this.a * (this.g - this.ml0);\n\t}\n\n\t/* Equidistant Conic forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------*/\n\tfunction forward$22(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var rh1;\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  if (this.sphere) {\n\t    rh1 = this.a * (this.g - lat);\n\t  }\n\t  else {\n\t    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n\t    rh1 = this.a * (this.g - ml);\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  var x = this.x0 + rh1 * Math.sin(theta);\n\t  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$22(p) {\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  var con, rh1, lat, lon;\n\t  if (this.ns >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    lat = adjust_lat(this.g - rh1 / this.a);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    var ml = this.g - rh1 / this.a;\n\t    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\n\t}\n\n\tvar names$24 = [\"Equidistant_Conic\", \"eqdc\"];\n\tvar eqdc = {\n\t  init: init$23,\n\t  forward: forward$22,\n\t  inverse: inverse$22,\n\t  names: names$24\n\t};\n\n\t/* Initialize the Van Der Grinten projection\n\t  ----------------------------------------*/\n\tfunction init$24() {\n\t  //this.R = 6370997; //Radius of earth\n\t  this.R = this.a;\n\t}\n\n\tfunction forward$23(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  /* Forward equations\n\t    -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x, y;\n\n\t  if (Math.abs(lat) <= EPSLN) {\n\t    x = this.x0 + this.R * dlon;\n\t    y = this.y0;\n\t  }\n\t  var theta = asinz(2 * Math.abs(lat / Math.PI));\n\t  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n\t    x = this.x0;\n\t    if (lat >= 0) {\n\t      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n\t    }\n\t    else {\n\t      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n\t    }\n\t    //  return(OK);\n\t  }\n\t  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n\t  var asq = al * al;\n\t  var sinth = Math.sin(theta);\n\t  var costh = Math.cos(theta);\n\n\t  var g = costh / (sinth + costh - 1);\n\t  var gsq = g * g;\n\t  var m = g * (2 / sinth - 1);\n\t  var msq = m * m;\n\t  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n\t  if (dlon < 0) {\n\t    con = -con;\n\t  }\n\t  x = this.x0 + con;\n\t  //con = Math.abs(con / (Math.PI * this.R));\n\t  var q = asq + g;\n\t  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n\t  if (lat >= 0) {\n\t    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 + con;\n\t  }\n\t  else {\n\t    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 - con;\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Van Der Grinten inverse equations--mapping x,y to lat/long\n\t  ---------------------------------------------------------*/\n\tfunction inverse$23(p) {\n\t  var lon, lat;\n\t  var xx, yy, xys, c1, c2, c3;\n\t  var a1;\n\t  var m1;\n\t  var con;\n\t  var th1;\n\t  var d;\n\n\t  /* inverse equations\n\t    -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  con = Math.PI * this.R;\n\t  xx = p.x / con;\n\t  yy = p.y / con;\n\t  xys = xx * xx + yy * yy;\n\t  c1 = -Math.abs(yy) * (1 + xys);\n\t  c2 = c1 - 2 * yy * yy + xx * xx;\n\t  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n\t  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n\t  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n\t  m1 = 2 * Math.sqrt(-a1 / 3);\n\t  con = ((3 * d) / a1) / m1;\n\t  if (Math.abs(con) > 1) {\n\t    if (con >= 0) {\n\t      con = 1;\n\t    }\n\t    else {\n\t      con = -1;\n\t    }\n\t  }\n\t  th1 = Math.acos(con) / 3;\n\t  if (p.y >= 0) {\n\t    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\t  else {\n\t    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\n\t  if (Math.abs(xx) < EPSLN) {\n\t    lon = this.long0;\n\t  }\n\t  else {\n\t    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$25 = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\n\tvar vandg = {\n\t  init: init$24,\n\t  forward: forward$23,\n\t  inverse: inverse$23,\n\t  names: names$25\n\t};\n\n\tfunction init$25() {\n\t  this.sin_p12 = Math.sin(this.lat0);\n\t  this.cos_p12 = Math.cos(this.lat0);\n\t}\n\n\tfunction forward$24(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinphi = Math.sin(p.y);\n\t  var cosphi = Math.cos(p.y);\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n\t  if (this.sphere) {\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n\t      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n\t      c = Math.acos(cos_c);\n\t      kp = c / Math.sin(c);\n\t      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n\t      return p;\n\t    }\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n\t      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n\t      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //Default case\n\t      tanphi = sinphi / cosphi;\n\t      Nl1 = gN(this.a, this.e, this.sin_p12);\n\t      Nl = gN(this.a, this.e, sinphi);\n\t      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n\t      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n\t      if (Az === 0) {\n\t        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n\t        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else {\n\t        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n\t      }\n\t      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n\t      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n\t      GH = G * H;\n\t      Hs = H * H;\n\t      s2 = s * s;\n\t      s3 = s2 * s;\n\t      s4 = s3 * s;\n\t      s5 = s4 * s;\n\t      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n\t      p.x = this.x0 + c * Math.sin(Az);\n\t      p.y = this.y0 + c * Math.cos(Az);\n\t      return p;\n\t    }\n\t  }\n\n\n\t}\n\n\tfunction inverse$24(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n\t  if (this.sphere) {\n\t    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    if (rh > (2 * HALF_PI * this.a)) {\n\t      return;\n\t    }\n\t    z = rh / this.a;\n\n\t    sinz = Math.sin(z);\n\t    cosz = Math.cos(z);\n\n\t    lon = this.long0;\n\t    if (Math.abs(rh) <= EPSLN) {\n\t      lat = this.lat0;\n\t    }\n\t    else {\n\t      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n\t      con = Math.abs(this.lat0) - HALF_PI;\n\t      if (Math.abs(con) <= EPSLN) {\n\t        if (this.lat0 >= 0) {\n\t          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t        }\n\t        else {\n\t          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t        }\n\t      }\n\t      else {\n\t        /*con = cosz - this.sin_p12 * Math.sin(lat);\n\t        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n\t          //no-op, just keep the lon value as is\n\t        } else {\n\t          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n\t          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n\t        }*/\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n\t      }\n\t    }\n\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = Mlp - rh;\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = rh - Mlp;\n\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      Az = Math.atan2(p.x, p.y);\n\t      N1 = gN(this.a, this.e, this.sin_p12);\n\t      cosAz = Math.cos(Az);\n\t      tmp = this.e * this.cos_p12 * cosAz;\n\t      A = -tmp * tmp / (1 - this.es);\n\t      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n\t      D = rh / N1;\n\t      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n\t      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n\t      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n\t      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n\t      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t  }\n\n\t}\n\n\tvar names$26 = [\"Azimuthal_Equidistant\", \"aeqd\"];\n\tvar aeqd = {\n\t  init: init$25,\n\t  forward: forward$24,\n\t  inverse: inverse$24,\n\t  names: names$26\n\t};\n\n\tfunction init$26() {\n\t  //double temp;      /* temporary variable    */\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t}\n\n\t/* Orthographic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$25(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g, x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.a * ksp * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$25(p) {\n\t  var rh; /* height above ellipsoid      */\n\t  var z; /* angle          */\n\t  var sinz, cosz; /* sin of z and cos of z      */\n\t  var con;\n\t  var lon, lat;\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  z = asinz(rh / this.a);\n\n\t  sinz = Math.sin(z);\n\t  cosz = Math.cos(z);\n\n\t  lon = this.long0;\n\t  if (Math.abs(rh) <= EPSLN) {\n\t    lat = this.lat0;\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n\t  con = Math.abs(this.lat0) - HALF_PI;\n\t  if (Math.abs(con) <= EPSLN) {\n\t    if (this.lat0 >= 0) {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$27 = [\"ortho\"];\n\tvar ortho = {\n\t  init: init$26,\n\t  forward: forward$25,\n\t  inverse: inverse$25,\n\t  names: names$27\n\t};\n\n\t// QSC projection rewritten from the original PROJ4\n\t// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\n\t/* constants */\n\tvar FACE_ENUM = {\n\t    FRONT: 1,\n\t    RIGHT: 2,\n\t    BACK: 3,\n\t    LEFT: 4,\n\t    TOP: 5,\n\t    BOTTOM: 6\n\t};\n\n\tvar AREA_ENUM = {\n\t    AREA_0: 1,\n\t    AREA_1: 2,\n\t    AREA_2: 3,\n\t    AREA_3: 4\n\t};\n\n\tfunction init$27() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n\t  /* Determine the cube face from the center of projection. */\n\t  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n\t    this.face = FACE_ENUM.TOP;\n\t  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n\t    this.face = FACE_ENUM.BOTTOM;\n\t  } else if (Math.abs(this.long0) <= FORTPI) {\n\t    this.face = FACE_ENUM.FRONT;\n\t  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n\t    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n\t  } else {\n\t    this.face = FACE_ENUM.BACK;\n\t  }\n\n\t  /* Fill in useful values for the ellipsoid <-> sphere shift\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {\n\t    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n\t    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n\t  }\n\t}\n\n\t// QSC forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$26(p) {\n\t  var xy = {x: 0, y: 0};\n\t  var lat, lon;\n\t  var theta, phi;\n\t  var t, mu;\n\t  /* nu; */\n\t  var area = {value: 0};\n\n\t  // move lon according to projection's lon\n\t  p.x -= this.long0;\n\n\t  /* Convert the geodetic latitude to a geocentric latitude.\n\t   * This corresponds to the shift from the ellipsoid to the sphere\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {//if (P->es != 0) {\n\t    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n\t  } else {\n\t    lat = p.y;\n\t  }\n\n\t  /* Convert the input lat, lon into theta, phi as used by QSC.\n\t   * This depends on the cube face and the area on it.\n\t   * For the top and bottom face, we can compute theta and phi\n\t   * directly from phi, lam. For the other faces, we must use\n\t   * unit sphere cartesian coordinates as an intermediate step. */\n\t  lon = p.x; //lon = lp.lam;\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = HALF_PI - lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = lon - HALF_PI;\n\t    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n\t    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = lon + HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = lon;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = HALF_PI + lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = -lon + HALF_PI;\n\t    } else if (lon < FORTPI && lon >= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = -lon;\n\t    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = -lon - HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n\t    }\n\t  } else {\n\t    var q, r, s;\n\t    var sinlat, coslat;\n\t    var sinlon, coslon;\n\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lon = qsc_shift_lon_origin(lon, +SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n\t    }\n\t    sinlat = Math.sin(lat);\n\t    coslat = Math.cos(lat);\n\t    sinlon = Math.sin(lon);\n\t    coslon = Math.cos(lon);\n\t    q = coslat * coslon;\n\t    r = coslat * sinlon;\n\t    s = sinlat;\n\n\t    if (this.face === FACE_ENUM.FRONT) {\n\t      phi = Math.acos(q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n\t    } else if (this.face === FACE_ENUM.RIGHT) {\n\t      phi = Math.acos(r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      phi = Math.acos(-q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      phi = Math.acos(-r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n\t    } else {\n\t      /* Impossible */\n\t      phi = theta = 0;\n\t      area.value = AREA_ENUM.AREA_0;\n\t    }\n\t  }\n\n\t  /* Compute mu and nu for the area of definition.\n\t   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n\t   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n\t  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n\t  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n\t  /* Apply the result to the real area. */\n\t  if (area.value === AREA_ENUM.AREA_1) {\n\t    mu += HALF_PI;\n\t  } else if (area.value === AREA_ENUM.AREA_2) {\n\t    mu += SPI;\n\t  } else if (area.value === AREA_ENUM.AREA_3) {\n\t    mu += 1.5 * SPI;\n\t  }\n\n\t  /* Now compute x, y from mu and nu */\n\t  xy.x = t * Math.cos(mu);\n\t  xy.y = t * Math.sin(mu);\n\t  xy.x = xy.x * this.a + this.x0;\n\t  xy.y = xy.y * this.a + this.y0;\n\n\t  p.x = xy.x;\n\t  p.y = xy.y;\n\t  return p;\n\t}\n\n\t// QSC inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$26(p) {\n\t  var lp = {lam: 0, phi: 0};\n\t  var mu, nu, cosmu, tannu;\n\t  var tantheta, theta, cosphi, phi;\n\t  var t;\n\t  var area = {value: 0};\n\n\t  /* de-offset */\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  /* Convert the input x, y to the mu and nu angles as used by QSC.\n\t   * This depends on the area of the cube face. */\n\t  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n\t  mu = Math.atan2(p.y, p.x);\n\t  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n\t    area.value = AREA_ENUM.AREA_1;\n\t    mu -= HALF_PI;\n\t  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_2;\n\t    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n\t  } else {\n\t    area.value = AREA_ENUM.AREA_3;\n\t    mu += HALF_PI;\n\t  }\n\n\t  /* Compute phi and theta for the area of definition.\n\t   * The inverse projection is not described in the original paper, but some\n\t   * good hints can be found here (as of 2011-12-14):\n\t   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n\t   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n\t  t = (SPI / 12) * Math.tan(mu);\n\t  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n\t  theta = Math.atan(tantheta);\n\t  cosmu = Math.cos(mu);\n\t  tannu = Math.tan(nu);\n\t  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n\t  if (cosphi < -1) {\n\t    cosphi = -1;\n\t  } else if (cosphi > +1) {\n\t    cosphi = +1;\n\t  }\n\n\t  /* Apply the result to the real area on the cube face.\n\t   * For the top and bottom face, we can compute phi and lam directly.\n\t   * For the other faces, we must use unit sphere cartesian coordinates\n\t   * as an intermediate step. */\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = HALF_PI - phi;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = theta;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = phi - HALF_PI;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = -theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = -theta;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = -theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n\t    }\n\t  } else {\n\t    /* Compute phi and lam via cartesian unit sphere coordinates. */\n\t    var q, r, s;\n\t    q = cosphi;\n\t    t = q * q;\n\t    if (t >= 1) {\n\t      s = 0;\n\t    } else {\n\t      s = Math.sqrt(1 - t) * Math.sin(theta);\n\t    }\n\t    t += s * s;\n\t    if (t >= 1) {\n\t      r = 0;\n\t    } else {\n\t      r = Math.sqrt(1 - t);\n\t    }\n\t    /* Rotate q,r,s into the correct area. */\n\t    if (area.value === AREA_ENUM.AREA_1) {\n\t      t = r;\n\t      r = -s;\n\t      s = t;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      r = -r;\n\t      s = -s;\n\t    } else if (area.value === AREA_ENUM.AREA_3) {\n\t      t = r;\n\t      r = s;\n\t      s = -t;\n\t    }\n\t    /* Rotate q,r,s into the correct cube face. */\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      t = q;\n\t      q = -r;\n\t      r = t;\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      q = -q;\n\t      r = -r;\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      t = q;\n\t      q = r;\n\t      r = -t;\n\t    }\n\t    /* Now compute phi and lam from the unit sphere coordinates. */\n\t    lp.phi = Math.acos(-s) - HALF_PI;\n\t    lp.lam = Math.atan2(r, q);\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n\t    }\n\t  }\n\n\t  /* Apply the shift from the sphere to the ellipsoid as described\n\t   * in [LK12]. */\n\t  if (this.es !== 0) {\n\t    var invert_sign;\n\t    var tanphi, xa;\n\t    invert_sign = (lp.phi < 0 ? 1 : 0);\n\t    tanphi = Math.tan(lp.phi);\n\t    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n\t    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n\t    if (invert_sign) {\n\t      lp.phi = -lp.phi;\n\t    }\n\t  }\n\n\t  lp.lam += this.long0;\n\t  p.x = lp.lam;\n\t  p.y = lp.phi;\n\t  return p;\n\t}\n\n\t/* Helper function for forward projection: compute the theta angle\n\t * and determine the area number. */\n\tfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n\t  var theta;\n\t  if (phi < EPSLN) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t    theta = 0.0;\n\t  } else {\n\t    theta = Math.atan2(y, x);\n\t    if (Math.abs(theta) <= FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta -= HALF_PI;\n\t    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta += HALF_PI;\n\t    }\n\t  }\n\t  return theta;\n\t}\n\n\t/* Helper function: shift the longitude. */\n\tfunction qsc_shift_lon_origin(lon, offset) {\n\t  var slon = lon + offset;\n\t  if (slon < -SPI) {\n\t    slon += TWO_PI;\n\t  } else if (slon > +SPI) {\n\t    slon -= TWO_PI;\n\t  }\n\t  return slon;\n\t}\n\n\tvar names$28 = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\n\tvar qsc = {\n\t  init: init$27,\n\t  forward: forward$26,\n\t  inverse: inverse$26,\n\t  names: names$28\n\t};\n\n\t// Robinson projection\n\t// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n\t// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\n\tvar COEFS_X = [\n\t    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n\t    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n\t    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n\t    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n\t    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n\t    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n\t    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n\t    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n\t    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n\t    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n\t    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n\t    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n\t    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n\t    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n\t    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n\t    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n\t    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n\t    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n\t    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n\t];\n\n\tvar COEFS_Y = [\n\t    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n\t    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n\t    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n\t    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n\t    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n\t    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n\t    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n\t    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n\t    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n\t    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n\t    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n\t    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n\t    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n\t    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n\t    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n\t    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n\t    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n\t    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n\t    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n\t];\n\n\tvar FXC = 0.8487;\n\tvar FYC = 1.3523;\n\tvar C1 = R2D/5; // rad to 5-degree interval\n\tvar RC1 = 1/C1;\n\tvar NODES = 18;\n\n\tvar poly3_val = function(coefs, x) {\n\t    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n\t};\n\n\tvar poly3_der = function(coefs, x) {\n\t    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n\t};\n\n\tfunction newton_rapshon(f_df, start, max_err, iters) {\n\t    var x = start;\n\t    for (; iters; --iters) {\n\t        var upd = f_df(x);\n\t        x -= upd;\n\t        if (Math.abs(upd) < max_err) {\n\t            break;\n\t        }\n\t    }\n\t    return x;\n\t}\n\n\tfunction init$28() {\n\t    this.x0 = this.x0 || 0;\n\t    this.y0 = this.y0 || 0;\n\t    this.long0 = this.long0 || 0;\n\t    this.es = 0;\n\t    this.title = this.title || \"Robinson\";\n\t}\n\n\tfunction forward$27(ll) {\n\t    var lon = adjust_lon(ll.x - this.long0);\n\n\t    var dphi = Math.abs(ll.y);\n\t    var i = Math.floor(dphi * C1);\n\t    if (i < 0) {\n\t        i = 0;\n\t    } else if (i >= NODES) {\n\t        i = NODES - 1;\n\t    }\n\t    dphi = R2D * (dphi - RC1 * i);\n\t    var xy = {\n\t        x: poly3_val(COEFS_X[i], dphi) * lon,\n\t        y: poly3_val(COEFS_Y[i], dphi)\n\t    };\n\t    if (ll.y < 0) {\n\t        xy.y = -xy.y;\n\t    }\n\n\t    xy.x = xy.x * this.a * FXC + this.x0;\n\t    xy.y = xy.y * this.a * FYC + this.y0;\n\t    return xy;\n\t}\n\n\tfunction inverse$27(xy) {\n\t    var ll = {\n\t        x: (xy.x - this.x0) / (this.a * FXC),\n\t        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n\t    };\n\n\t    if (ll.y >= 1) { // pathologic case\n\t        ll.x /= COEFS_X[NODES][0];\n\t        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n\t    } else {\n\t        // find table interval\n\t        var i = Math.floor(ll.y * NODES);\n\t        if (i < 0) {\n\t            i = 0;\n\t        } else if (i >= NODES) {\n\t            i = NODES - 1;\n\t        }\n\t        for (;;) {\n\t            if (COEFS_Y[i][0] > ll.y) {\n\t                --i;\n\t            } else if (COEFS_Y[i+1][0] <= ll.y) {\n\t                ++i;\n\t            } else {\n\t                break;\n\t            }\n\t        }\n\t        // linear interpolation in 5 degree interval\n\t        var coefs = COEFS_Y[i];\n\t        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n\t        // find t so that poly3_val(coefs, t) = ll.y\n\t        t = newton_rapshon(function(x) {\n\t            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n\t        }, t, EPSLN, 100);\n\n\t        ll.x /= poly3_val(COEFS_X[i], t);\n\t        ll.y = (5 * i + t) * D2R;\n\t        if (xy.y < 0) {\n\t            ll.y = -ll.y;\n\t        }\n\t    }\n\n\t    ll.x = adjust_lon(ll.x + this.long0);\n\t    return ll;\n\t}\n\n\tvar names$29 = [\"Robinson\", \"robin\"];\n\tvar robin = {\n\t  init: init$28,\n\t  forward: forward$27,\n\t  inverse: inverse$27,\n\t  names: names$29\n\t};\n\n\tvar includedProjections = function(proj4){\n\t  proj4.Proj.projections.add(tmerc);\n\t  proj4.Proj.projections.add(etmerc);\n\t  proj4.Proj.projections.add(utm);\n\t  proj4.Proj.projections.add(sterea);\n\t  proj4.Proj.projections.add(stere);\n\t  proj4.Proj.projections.add(somerc);\n\t  proj4.Proj.projections.add(omerc);\n\t  proj4.Proj.projections.add(lcc);\n\t  proj4.Proj.projections.add(krovak);\n\t  proj4.Proj.projections.add(cass);\n\t  proj4.Proj.projections.add(laea);\n\t  proj4.Proj.projections.add(aea);\n\t  proj4.Proj.projections.add(gnom);\n\t  proj4.Proj.projections.add(cea);\n\t  proj4.Proj.projections.add(eqc);\n\t  proj4.Proj.projections.add(poly);\n\t  proj4.Proj.projections.add(nzmg);\n\t  proj4.Proj.projections.add(mill);\n\t  proj4.Proj.projections.add(sinu);\n\t  proj4.Proj.projections.add(moll);\n\t  proj4.Proj.projections.add(eqdc);\n\t  proj4.Proj.projections.add(vandg);\n\t  proj4.Proj.projections.add(aeqd);\n\t  proj4.Proj.projections.add(ortho);\n\t  proj4.Proj.projections.add(qsc);\n\t  proj4.Proj.projections.add(robin);\n\t};\n\n\tproj4$1.defaultDatum = 'WGS84'; //default datum\n\tproj4$1.Proj = Projection;\n\tproj4$1.WGS84 = new proj4$1.Proj('WGS84');\n\tproj4$1.Point = Point;\n\tproj4$1.toPoint = toPoint;\n\tproj4$1.defs = defs;\n\tproj4$1.transform = transform;\n\tproj4$1.mgrs = mgrs;\n\tproj4$1.version = version;\n\tincludedProjections(proj4$1);\n\n\treturn proj4$1;\n\n})));\n","/**\n * @module ol/source/BingMaps\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createFromTileUrlFunctions } from '../tileurlfunction.js';\nimport { applyTransform, intersects } from '../extent.js';\nimport { jsonp as requestJSONP } from '../net.js';\nimport { get as getProjection, getTransformFromProjections } from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport { createOrUpdate } from '../tilecoord.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\n/**\n * @param {import('../tilecoord.js').TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n    var z = tileCoord[0];\n    var digits = new Array(z);\n    var mask = 1 << (z - 1);\n    var i, charCode;\n    for (i = 0; i < z; ++i) {\n        // 48 is charCode for 0 - '0'.charCodeAt(0)\n        charCode = 48;\n        if (tileCoord[1] & mask) {\n            charCode += 1;\n        }\n        if (tileCoord[2] & mask) {\n            charCode += 2;\n        }\n        digits[i] = String.fromCharCode(charCode);\n        mask >>= 1;\n    }\n    return digits.join('');\n}\n/**\n * The attribution containing a link to the Microsoft Bing Maps Platform APIs\n * Terms Of Use.\n * @const\n * @type {string}\n */\nvar TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n    'href=\"https://www.microsoft.com/maps/product/terms.html\">' +\n    'Terms of Use</a>';\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at http://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n/**\n * @typedef {Object} BingMapsImageryMetadataResponse\n * @property {number} statusCode The response status code\n * @property {string} statusDescription The response status description\n * @property {string} authenticationResultCode The authentication result code\n * @property {Array<ResourceSet>} resourceSets The array of resource sets\n */\n/**\n * @typedef {Object} ResourceSet\n * @property {Array<Resource>} resources\n */\n/**\n * @typedef {Object} Resource\n * @property {number} imageHeight The image height\n * @property {number} imageWidth The image width\n * @property {number} zoomMin The minimum zoom level\n * @property {number} zoomMax The maximum zoom level\n * @property {string} imageUrl The image URL\n * @property {Array<string>} imageUrlSubdomains The image URL subdomains for rotation\n * @property {Array<ImageryProvider>} [imageryProviders] The array of ImageryProviders\n */\n/**\n * @typedef {Object} ImageryProvider\n * @property {Array<CoverageArea>} coverageAreas The coverage areas\n * @property {string} [attribution] The attribution\n */\n/**\n * @typedef {Object} CoverageArea\n * @property {number} zoomMin The minimum zoom\n * @property {number} zoomMax The maximum zoom\n * @property {Array<number>} bbox The coverage bounding box\n */\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nvar BingMaps = /** @class */ (function (_super) {\n    __extends(BingMaps, _super);\n    /**\n     * @param {Options} options Bing Maps options.\n     */\n    function BingMaps(options) {\n        var _this = this;\n        var hidpi = options.hidpi !== undefined ? options.hidpi : false;\n        _this = _super.call(this, {\n            cacheSize: options.cacheSize,\n            crossOrigin: 'anonymous',\n            opaque: true,\n            projection: getProjection('EPSG:3857'),\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            state: SourceState.LOADING,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: hidpi ? 2 : 1,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition\n        }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hidpi_ = hidpi;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.apiKey_ = options.key;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.imagerySet_ = options.imagerySet;\n        var url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n            _this.imagerySet_ +\n            '?uriScheme=https&include=ImageryProviders&key=' + _this.apiKey_ +\n            '&c=' + _this.culture_;\n        requestJSONP(url, _this.handleImageryMetadataResponse.bind(_this), undefined, 'jsonp');\n        return _this;\n    }\n    /**\n     * Get the api key used for this source.\n     *\n     * @return {string} The api key.\n     * @api\n     */\n    BingMaps.prototype.getApiKey = function () {\n        return this.apiKey_;\n    };\n    /**\n     * Get the imagery set associated with this source.\n     *\n     * @return {string} The imagery set.\n     * @api\n     */\n    BingMaps.prototype.getImagerySet = function () {\n        return this.imagerySet_;\n    };\n    /**\n     * @param {BingMapsImageryMetadataResponse} response Response.\n     */\n    BingMaps.prototype.handleImageryMetadataResponse = function (response) {\n        if (response.statusCode != 200 ||\n            response.statusDescription != 'OK' ||\n            response.authenticationResultCode != 'ValidCredentials' ||\n            response.resourceSets.length != 1 ||\n            response.resourceSets[0].resources.length != 1) {\n            this.setState(SourceState.ERROR);\n            return;\n        }\n        var resource = response.resourceSets[0].resources[0];\n        var maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n        var sourceProjection = this.getProjection();\n        var extent = extentFromProjection(sourceProjection);\n        var scale = this.hidpi_ ? 2 : 1;\n        var tileSize = resource.imageWidth == resource.imageHeight ?\n            resource.imageWidth / scale :\n            [resource.imageWidth / scale, resource.imageHeight / scale];\n        var tileGrid = createXYZ({\n            extent: extent,\n            minZoom: resource.zoomMin,\n            maxZoom: maxZoom,\n            tileSize: tileSize\n        });\n        this.tileGrid = tileGrid;\n        var culture = this.culture_;\n        var hidpi = this.hidpi_;\n        this.tileUrlFunction = createFromTileUrlFunctions(resource.imageUrlSubdomains.map(function (subdomain) {\n            /** @type {import('../tilecoord.js').TileCoord} */\n            var quadKeyTileCoord = [0, 0, 0];\n            var imageUrl = resource.imageUrl\n                .replace('{subdomain}', subdomain)\n                .replace('{culture}', culture);\n            return (\n            /**\n             * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n             * @param {number} pixelRatio Pixel ratio.\n             * @param {import(\"../proj/Projection.js\").default} projection Projection.\n             * @return {string|undefined} Tile URL.\n             */\n            function (tileCoord, pixelRatio, projection) {\n                if (!tileCoord) {\n                    return undefined;\n                }\n                else {\n                    createOrUpdate(tileCoord[0], tileCoord[1], tileCoord[2], quadKeyTileCoord);\n                    var url = imageUrl;\n                    if (hidpi) {\n                        url += '&dpi=d1&device=mobile';\n                    }\n                    return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n                }\n            });\n        }));\n        if (resource.imageryProviders) {\n            var transform_1 = getTransformFromProjections(getProjection('EPSG:4326'), this.getProjection());\n            this.setAttributions(function (frameState) {\n                var attributions = [];\n                var viewState = frameState.viewState;\n                var tileGrid = this.getTileGrid();\n                var z = tileGrid.getZForResolution(viewState.resolution, this.zDirection);\n                var tileCoord = tileGrid.getTileCoordForCoordAndZ(viewState.center, z);\n                var zoom = tileCoord[0];\n                resource.imageryProviders.map(function (imageryProvider) {\n                    var intersecting = false;\n                    var coverageAreas = imageryProvider.coverageAreas;\n                    for (var i = 0, ii = coverageAreas.length; i < ii; ++i) {\n                        var coverageArea = coverageAreas[i];\n                        if (zoom >= coverageArea.zoomMin && zoom <= coverageArea.zoomMax) {\n                            var bbox = coverageArea.bbox;\n                            var epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n                            var extent_1 = applyTransform(epsg4326Extent, transform_1);\n                            if (intersects(extent_1, frameState.extent)) {\n                                intersecting = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (intersecting) {\n                        attributions.push(imageryProvider.attribution);\n                    }\n                });\n                attributions.push(TOS_ATTRIBUTION);\n                return attributions;\n            }.bind(this));\n        }\n        this.setState(SourceState.READY);\n    };\n    return BingMaps;\n}(TileImage));\nexport default BingMaps;\n//# sourceMappingURL=BingMaps.js.map","/**\n * @module ol/proj/proj4\n */\nimport { addCoordinateTransforms, addProjection, addEquivalentProjections, get } from '../proj.js';\nimport { get as getTransform } from './transforms.js';\nimport Projection from './Projection.js';\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n    var projCodes = Object.keys(proj4.defs);\n    var len = projCodes.length;\n    var i, j;\n    for (i = 0; i < len; ++i) {\n        var code = projCodes[i];\n        if (!get(code)) {\n            var def = proj4.defs(code);\n            addProjection(new Projection({\n                code: code,\n                axisOrientation: def.axis,\n                metersPerUnit: def.to_meter,\n                units: def.units\n            }));\n        }\n    }\n    for (i = 0; i < len; ++i) {\n        var code1 = projCodes[i];\n        var proj1 = get(code1);\n        for (j = 0; j < len; ++j) {\n            var code2 = projCodes[j];\n            var proj2 = get(code2);\n            if (!getTransform(code1, code2)) {\n                if (proj4.defs[code1] === proj4.defs[code2]) {\n                    addEquivalentProjections([proj1, proj2]);\n                }\n                else {\n                    var transform = proj4(code1, code2);\n                    addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=proj4.js.map","/**\n * @module ol/source/Stamen\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ATTRIBUTION as OSM_ATTRIBUTION } from './OSM.js';\nimport XYZ from './XYZ.js';\n/**\n * @const\n * @type {Array<string>}\n */\nvar ATTRIBUTIONS = [\n    'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\n        ' 3.0</a>.',\n    OSM_ATTRIBUTION\n];\n/**\n * @type {Object<string, {extension: string, opaque: boolean}>}\n */\nvar LayerConfig = {\n    'terrain': {\n        extension: 'jpg',\n        opaque: true\n    },\n    'terrain-background': {\n        extension: 'jpg',\n        opaque: true\n    },\n    'terrain-labels': {\n        extension: 'png',\n        opaque: false\n    },\n    'terrain-lines': {\n        extension: 'png',\n        opaque: false\n    },\n    'toner-background': {\n        extension: 'png',\n        opaque: true\n    },\n    'toner': {\n        extension: 'png',\n        opaque: true\n    },\n    'toner-hybrid': {\n        extension: 'png',\n        opaque: false\n    },\n    'toner-labels': {\n        extension: 'png',\n        opaque: false\n    },\n    'toner-lines': {\n        extension: 'png',\n        opaque: false\n    },\n    'toner-lite': {\n        extension: 'png',\n        opaque: true\n    },\n    'watercolor': {\n        extension: 'jpg',\n        opaque: true\n    }\n};\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number}>}\n */\nvar ProviderConfig = {\n    'terrain': {\n        minZoom: 0,\n        maxZoom: 18\n    },\n    'toner': {\n        minZoom: 0,\n        maxZoom: 20\n    },\n    'watercolor': {\n        minZoom: 0,\n        maxZoom: 18\n    }\n};\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {string} layer Layer name.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n * @api\n */\nvar Stamen = /** @class */ (function (_super) {\n    __extends(Stamen, _super);\n    /**\n     * @param {Options} options Stamen options.\n     */\n    function Stamen(options) {\n        var _this = this;\n        var i = options.layer.indexOf('-');\n        var provider = i == -1 ? options.layer : options.layer.slice(0, i);\n        var providerConfig = ProviderConfig[provider];\n        var layerConfig = LayerConfig[options.layer];\n        var url = options.url !== undefined ? options.url :\n            'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\n                '/{z}/{x}/{y}.' + layerConfig.extension;\n        _this = _super.call(this, {\n            attributions: ATTRIBUTIONS,\n            cacheSize: options.cacheSize,\n            crossOrigin: 'anonymous',\n            maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n            minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n            opaque: layerConfig.opaque,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileLoadFunction: options.tileLoadFunction,\n            transition: options.transition,\n            url: url,\n            wrapX: options.wrapX\n        }) || this;\n        return _this;\n    }\n    return Stamen;\n}(XYZ));\nexport default Stamen;\n//# sourceMappingURL=Stamen.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport { includes } from '../array.js';\nimport { transformGeometryWithOptions } from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport { readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode } from './xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport { get as getProjection } from '../proj.js';\nimport { createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender, makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS, OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI } from '../xml.js';\n/**\n * @const\n * @type {Array<null|string>}\n */\nvar NAMESPACE_URIS = [\n    null,\n    'http://www.topografix.com/GPX/1/0',\n    'http://www.topografix.com/GPX/1/1'\n];\n/**\n * @const\n * @type {string}\n */\nvar SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nvar FEATURE_READER = {\n    'rte': readRte,\n    'trk': readTrk,\n    'wpt': readWpt\n};\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GPX_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar GPX_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n});\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nvar GPX = /** @class */ (function (_super) {\n    __extends(GPX, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function GPX(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @inheritDoc\n         */\n        _this.dataProjection = getProjection('EPSG:4326');\n        /**\n         * @type {function(Feature, Node): void|undefined}\n         * @private\n         */\n        _this.readExtensions_ = options.readExtensions;\n        return _this;\n    }\n    /**\n     * @param {Array<Feature>} features List of features.\n     * @private\n     */\n    GPX.prototype.handleReadExtensions_ = function (features) {\n        if (!features) {\n            features = [];\n        }\n        for (var i = 0, ii = features.length; i < ii; ++i) {\n            var feature = features[i];\n            if (this.readExtensions_) {\n                var extensionsNode = feature.get('extensionsNode_') || null;\n                this.readExtensions_(feature, extensionsNode);\n            }\n            feature.set('extensionsNode_', undefined);\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    GPX.prototype.readFeatureFromNode = function (node, opt_options) {\n        if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n            return null;\n        }\n        var featureReader = FEATURE_READER[node.localName];\n        if (!featureReader) {\n            return null;\n        }\n        var feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n        if (!feature) {\n            return null;\n        }\n        this.handleReadExtensions_([feature]);\n        return feature;\n    };\n    /**\n     * @inheritDoc\n     */\n    GPX.prototype.readFeaturesFromNode = function (node, opt_options) {\n        if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n            return [];\n        }\n        if (node.localName == 'gpx') {\n            /** @type {Array<Feature>} */\n            var features = pushParseAndPop([], GPX_PARSERS, node, [this.getReadOptions(node, opt_options)]);\n            if (features) {\n                this.handleReadExtensions_(features);\n                return features;\n            }\n            else {\n                return [];\n            }\n        }\n        return [];\n    };\n    /**\n     * Encode an array of features in the GPX format as an XML node.\n     * LineString geometries are output as routes (`<rte>`), and MultiLineString\n     * as tracks (`<trk>`).\n     *\n     * @param {Array<Feature>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n     * @return {Node} Node.\n     * @override\n     * @api\n     */\n    GPX.prototype.writeFeaturesNode = function (features, opt_options) {\n        opt_options = this.adaptOptions(opt_options);\n        //FIXME Serialize metadata\n        var gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n        var xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n        gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n        gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n        gpx.setAttribute('version', '1.1');\n        gpx.setAttribute('creator', 'OpenLayers');\n        pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({ node: gpx }), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n        return gpx;\n    };\n    return GPX;\n}(XMLFeature));\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar RTE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar RTEPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar TRK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar TRKSEG_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar TRKPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar WPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n});\n/**\n * @const\n * @type {Array<string>}\n */\nvar LINK_SEQUENCE = ['text', 'type'];\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar LINK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar RTE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar RTE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar RTEPT_TYPE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'ele', 'time'\n]);\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar TRK_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar TRK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n});\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar TRKSEG_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar WPT_TYPE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar WPT_TYPE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n});\n/**\n * @const\n * @type {Object<string, string>}\n */\nvar GEOMETRY_TYPE_TO_NODENAME = {\n    'Point': 'wpt',\n    'LineString': 'rte',\n    'MultiLineString': 'trk'\n};\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n    var geometry = /** @type {Feature} */ (value).getGeometry();\n    if (geometry) {\n        var nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n        if (nodeName) {\n            var parentNode = objectStack[objectStack.length - 1].node;\n            return createElementNS(parentNode.namespaceURI, nodeName);\n        }\n    }\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n    flatCoordinates.push(parseFloat(node.getAttribute('lon')), parseFloat(node.getAttribute('lat')));\n    if ('ele' in values) {\n        flatCoordinates.push(/** @type {number} */ (values['ele']));\n        delete values['ele'];\n        layoutOptions.hasZ = true;\n    }\n    else {\n        flatCoordinates.push(0);\n    }\n    if ('time' in values) {\n        flatCoordinates.push(/** @type {number} */ (values['time']));\n        delete values['time'];\n        layoutOptions.hasM = true;\n    }\n    else {\n        flatCoordinates.push(0);\n    }\n    return flatCoordinates;\n}\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>=} ends Ends.\n * @return {GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n    var layout = GeometryLayout.XY;\n    var stride = 2;\n    if (layoutOptions.hasZ && layoutOptions.hasM) {\n        layout = GeometryLayout.XYZM;\n        stride = 4;\n    }\n    else if (layoutOptions.hasZ) {\n        layout = GeometryLayout.XYZ;\n        stride = 3;\n    }\n    else if (layoutOptions.hasM) {\n        layout = GeometryLayout.XYM;\n        stride = 3;\n    }\n    if (stride !== 4) {\n        for (var i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n            flatCoordinates[i * stride] = flatCoordinates[i * 4];\n            flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n            if (layoutOptions.hasZ) {\n                flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n            }\n            if (layoutOptions.hasM) {\n                flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n            }\n        }\n        flatCoordinates.length = flatCoordinates.length / 4 * stride;\n        if (ends) {\n            for (var i = 0, ii = ends.length; i < ii; i++) {\n                ends[i] = ends[i] / 4 * stride;\n            }\n        }\n    }\n    return layout;\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n    var values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    var href = node.getAttribute('href');\n    if (href !== null) {\n        values['link'] = href;\n    }\n    parseNode(LINK_PARSERS, node, objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n    var values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    values['extensionsNode_'] = node;\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n    var values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n    if (values) {\n        var rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        var flatCoordinates = /** @type {Array<number>} */ (rteValues['flatCoordinates']);\n        var layoutOptions = /** @type {LayoutOptions} */ (rteValues['layoutOptions']);\n        appendCoordinate(flatCoordinates, layoutOptions, node, values);\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n    var values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n    if (values) {\n        var trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        var flatCoordinates = /** @type {Array<number>} */ (trkValues['flatCoordinates']);\n        var layoutOptions = /** @type {LayoutOptions} */ (trkValues['layoutOptions']);\n        appendCoordinate(flatCoordinates, layoutOptions, node, values);\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n    var values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    parseNode(TRKSEG_PARSERS, node, objectStack);\n    var flatCoordinates = /** @type {Array<number>} */ (values['flatCoordinates']);\n    var ends = /** @type {Array<number>} */ (values['ends']);\n    ends.push(flatCoordinates.length);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n    var options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n    var values = pushParseAndPop({\n        'flatCoordinates': [],\n        'layoutOptions': {}\n    }, RTE_PARSERS, node, objectStack);\n    if (!values) {\n        return undefined;\n    }\n    var flatCoordinates = /** @type {Array<number>} */ (values['flatCoordinates']);\n    delete values['flatCoordinates'];\n    var layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n    delete values['layoutOptions'];\n    var layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n    var geometry = new LineString(flatCoordinates, layout);\n    transformGeometryWithOptions(geometry, false, options);\n    var feature = new Feature(geometry);\n    feature.setProperties(values, true);\n    return feature;\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n    var options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n    var values = pushParseAndPop({\n        'flatCoordinates': [],\n        'ends': [],\n        'layoutOptions': {}\n    }, TRK_PARSERS, node, objectStack);\n    if (!values) {\n        return undefined;\n    }\n    var flatCoordinates = /** @type {Array<number>} */ (values['flatCoordinates']);\n    delete values['flatCoordinates'];\n    var ends = /** @type {Array<number>} */ (values['ends']);\n    delete values['ends'];\n    var layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n    delete values['layoutOptions'];\n    var layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n    var geometry = new MultiLineString(flatCoordinates, layout, ends);\n    transformGeometryWithOptions(geometry, false, options);\n    var feature = new Feature(geometry);\n    feature.setProperties(values, true);\n    return feature;\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n    var options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n    var values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n    if (!values) {\n        return undefined;\n    }\n    var layoutOptions = /** @type {LayoutOptions} */ ({});\n    var coordinates = appendCoordinate([], layoutOptions, node, values);\n    var layout = applyLayoutOptions(layoutOptions, coordinates);\n    var geometry = new Point(coordinates, layout);\n    transformGeometryWithOptions(geometry, false, options);\n    var feature = new Feature(geometry);\n    feature.setProperties(values, true);\n    return feature;\n}\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n    node.setAttribute('href', value);\n    var context = objectStack[objectStack.length - 1];\n    var properties = context['properties'];\n    var link = [\n        properties['linkText'],\n        properties['linkType']\n    ];\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({ node: node }), LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, link, objectStack, LINK_SEQUENCE);\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n    var context = objectStack[objectStack.length - 1];\n    var parentNode = context.node;\n    var namespaceURI = parentNode.namespaceURI;\n    var properties = context['properties'];\n    //FIXME Projection handling\n    node.setAttributeNS(null, 'lat', String(coordinate[1]));\n    node.setAttributeNS(null, 'lon', String(coordinate[0]));\n    var geometryLayout = context['geometryLayout'];\n    switch (geometryLayout) {\n        case GeometryLayout.XYZM:\n            if (coordinate[3] !== 0) {\n                properties['time'] = coordinate[3];\n            }\n        // fall through\n        case GeometryLayout.XYZ:\n            if (coordinate[2] !== 0) {\n                properties['ele'] = coordinate[2];\n            }\n            break;\n        case GeometryLayout.XYM:\n            if (coordinate[2] !== 0) {\n                properties['time'] = coordinate[2];\n            }\n            break;\n        default:\n        // pass\n    }\n    var orderedKeys = (node.nodeName == 'rtept') ?\n        RTEPT_TYPE_SEQUENCE[namespaceURI] :\n        WPT_TYPE_SEQUENCE[namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({ node: node, 'properties': properties }), WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n    var options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n    var properties = feature.getProperties();\n    var context = { node: node };\n    context['properties'] = properties;\n    var geometry = feature.getGeometry();\n    if (geometry.getType() == GeometryType.LINE_STRING) {\n        var lineString = /** @type {LineString} */ (transformGeometryWithOptions(geometry, true, options));\n        context['geometryLayout'] = lineString.getLayout();\n        properties['rtept'] = lineString.getCoordinates();\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n    var options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n    var properties = feature.getProperties();\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    var context = { node: node };\n    context['properties'] = properties;\n    var geometry = feature.getGeometry();\n    if (geometry.getType() == GeometryType.MULTI_LINE_STRING) {\n        var multiLineString = /** @type {MultiLineString} */ (transformGeometryWithOptions(geometry, true, options));\n        properties['trkseg'] = multiLineString.getLineStrings();\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @param {Node} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    var context = { node: node };\n    context['geometryLayout'] = lineString.getLayout();\n    context['properties'] = {};\n    pushSerializeAndPop(context, TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY, lineString.getCoordinates(), objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n    var options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n    var context = objectStack[objectStack.length - 1];\n    context['properties'] = feature.getProperties();\n    var geometry = feature.getGeometry();\n    if (geometry.getType() == GeometryType.POINT) {\n        var point = /** @type {Point} */ (transformGeometryWithOptions(geometry, true, options));\n        context['geometryLayout'] = point.getLayout();\n        writeWptType(node, point.getCoordinates(), objectStack);\n    }\n}\nexport default GPX;\n//# sourceMappingURL=GPX.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/KML\n */\nimport Feature from '../Feature.js';\nimport { extend, includes } from '../array.js';\nimport { assert } from '../asserts.js';\nimport { asArray } from '../color.js';\nimport { transformGeometryWithOptions } from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport { readDecimal, readBoolean, readString, writeStringTextNode, writeCDATASection, writeDecimalTextNode, writeBooleanTextNode } from './xsd.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport { toRadians } from '../math.js';\nimport { get as getProjection } from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport { createElementNS, getAllTextContent, isDocument, makeArrayExtender, makeArrayPusher, makeChildAppender, makeObjectPropertySetter, makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS, OBJECT_PROPERTY_NODE_FACTORY, parse, parseNode, pushParseAndPop, pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI } from '../xml.js';\n/**\n * @typedef {Object} Vec2\n * @property {number} x\n * @property {IconAnchorUnits} xunits\n * @property {number} y\n * @property {IconAnchorUnits} yunits\n * @property {IconOrigin} origin\n */\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array<number>} flatCoordinates\n * @property {Array<number>} whens\n */\n/**\n * @const\n * @type {Array<string>}\n */\nvar GX_NAMESPACE_URIS = [\n    'http://www.google.com/kml/ext/2.2'\n];\n/**\n * @const\n * @type {Array<null|string>}\n */\nvar NAMESPACE_URIS = [\n    null,\n    'http://earth.google.com/kml/2.0',\n    'http://earth.google.com/kml/2.1',\n    'http://earth.google.com/kml/2.2',\n    'http://www.opengis.net/kml/2.2'\n];\n/**\n * @const\n * @type {string}\n */\nvar SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n/**\n * @type {Object<string, IconAnchorUnits>}\n */\nvar ICON_ANCHOR_UNITS_MAP = {\n    'fraction': IconAnchorUnits.FRACTION,\n    'pixels': IconAnchorUnits.PIXELS,\n    'insetPixels': IconAnchorUnits.PIXELS\n};\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar PLACEMARK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI),\n    'visibility': makeObjectPropertySetter(readBoolean)\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'MultiTrack': makeObjectPropertySetter(readGxMultiTrack, 'geometry'),\n    'Track': makeObjectPropertySetter(readGxTrack, 'geometry')\n}));\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar NETWORK_LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean)\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n});\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar REGION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar KML_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'Document', 'Placemark'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar KML_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark)\n});\n/**\n * @type {import(\"../color.js\").Color}\n */\nvar DEFAULT_COLOR;\n/**\n * @type {Fill}\n */\nvar DEFAULT_FILL_STYLE = null;\n/**\n * Get the default fill style (or null if not yet set).\n * @return {Fill} The default fill style.\n */\nexport function getDefaultFillStyle() {\n    return DEFAULT_FILL_STYLE;\n}\n/**\n * @type {import(\"../size.js\").Size}\n */\nvar DEFAULT_IMAGE_STYLE_ANCHOR;\n/**\n * @type {IconAnchorUnits}\n */\nvar DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n/**\n * @type {IconAnchorUnits}\n */\nvar DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n/**\n * @type {import(\"../size.js\").Size}\n */\nvar DEFAULT_IMAGE_STYLE_SIZE;\n/**\n * @type {string}\n */\nvar DEFAULT_IMAGE_STYLE_SRC;\n/**\n * @type {number}\n */\nvar DEFAULT_IMAGE_SCALE_MULTIPLIER;\n/**\n * @type {import(\"../style/Image.js\").default}\n */\nvar DEFAULT_IMAGE_STYLE = null;\n/**\n * Get the default image style (or null if not yet set).\n * @return {import(\"../style/Image.js\").default} The default image style.\n */\nexport function getDefaultImageStyle() {\n    return DEFAULT_IMAGE_STYLE;\n}\n/**\n * @type {string}\n */\nvar DEFAULT_NO_IMAGE_STYLE;\n/**\n * @type {Stroke}\n */\nvar DEFAULT_STROKE_STYLE = null;\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {Stroke} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n    return DEFAULT_STROKE_STYLE;\n}\n/**\n * @type {Stroke}\n */\nvar DEFAULT_TEXT_STROKE_STYLE;\n/**\n * @type {Text}\n */\nvar DEFAULT_TEXT_STYLE = null;\n/**\n * Get the default text style (or null if not yet set).\n * @return {Text} The default text style.\n */\nexport function getDefaultTextStyle() {\n    return DEFAULT_TEXT_STYLE;\n}\n/**\n * @type {Style}\n */\nvar DEFAULT_STYLE = null;\n/**\n * Get the default style (or null if not yet set).\n * @return {Style} The default style.\n */\nexport function getDefaultStyle() {\n    return DEFAULT_STYLE;\n}\n/**\n * @type {Array<Style>}\n */\nvar DEFAULT_STYLE_ARRAY = null;\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array<Style>} The default style.\n */\nexport function getDefaultStyleArray() {\n    return DEFAULT_STYLE_ARRAY;\n}\nfunction createStyleDefaults() {\n    DEFAULT_COLOR = [255, 255, 255, 1];\n    DEFAULT_FILL_STYLE = new Fill({\n        color: DEFAULT_COLOR\n    });\n    DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2]; // FIXME maybe [8, 32] ?\n    DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n    DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n    DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n    DEFAULT_IMAGE_STYLE_SRC =\n        'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n    DEFAULT_IMAGE_SCALE_MULTIPLIER = 0.5;\n    DEFAULT_IMAGE_STYLE = new Icon({\n        anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n        anchorOrigin: IconOrigin.BOTTOM_LEFT,\n        anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n        anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n        crossOrigin: 'anonymous',\n        rotation: 0,\n        scale: DEFAULT_IMAGE_SCALE_MULTIPLIER,\n        size: DEFAULT_IMAGE_STYLE_SIZE,\n        src: DEFAULT_IMAGE_STYLE_SRC\n    });\n    DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n    DEFAULT_STROKE_STYLE = new Stroke({\n        color: DEFAULT_COLOR,\n        width: 1\n    });\n    DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n        color: [51, 51, 51, 1],\n        width: 2\n    });\n    DEFAULT_TEXT_STYLE = new Text({\n        font: 'bold 16px Helvetica',\n        fill: DEFAULT_FILL_STYLE,\n        stroke: DEFAULT_TEXT_STROKE_STYLE,\n        scale: 0.8\n    });\n    DEFAULT_STYLE = new Style({\n        fill: DEFAULT_FILL_STYLE,\n        image: DEFAULT_IMAGE_STYLE,\n        text: DEFAULT_TEXT_STYLE,\n        stroke: DEFAULT_STROKE_STYLE,\n        zIndex: 0\n    });\n    DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n}\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array<Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n */\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * {@link module:ol/format/KML~KML#readFeature} will read the first feature from\n * a KML source.\n *\n * MultiGeometries are converted into GeometryCollections if they are a mix of\n * geometry types, and into MultiPoint/MultiLineString/MultiPolygon if they are\n * all of the same type.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @api\n */\nvar KML = /** @class */ (function (_super) {\n    __extends(KML, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function KML(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        if (!DEFAULT_STYLE_ARRAY) {\n            createStyleDefaults();\n        }\n        /**\n         * @inheritDoc\n         */\n        _this.dataProjection = getProjection('EPSG:4326');\n        /**\n         * @private\n         * @type {Array<Style>}\n         */\n        _this.defaultStyle_ = options.defaultStyle ?\n            options.defaultStyle : DEFAULT_STYLE_ARRAY;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.extractStyles_ = options.extractStyles !== undefined ?\n            options.extractStyles : true;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.writeStyles_ = options.writeStyles !== undefined ?\n            options.writeStyles : true;\n        /**\n         * @private\n         * @type {!Object<string, (Array<Style>|string)>}\n         */\n        _this.sharedStyles_ = {};\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.showPointNames_ = options.showPointNames !== undefined ?\n            options.showPointNames : true;\n        return _this;\n    }\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     * @return {Array<Feature>|undefined} Features.\n     */\n    KML.prototype.readDocumentOrFolder_ = function (node, objectStack) {\n        // FIXME use scope somehow\n        var parsersNS = makeStructureNS(NAMESPACE_URIS, {\n            'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n            'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n            'Placemark': makeArrayPusher(this.readPlacemark_, this),\n            'Style': this.readSharedStyle_.bind(this),\n            'StyleMap': this.readSharedStyleMap_.bind(this)\n        });\n        /** @type {Array<Feature>} */\n        // @ts-ignore\n        var features = pushParseAndPop([], parsersNS, node, objectStack, this);\n        if (features) {\n            return features;\n        }\n        else {\n            return undefined;\n        }\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     * @return {Feature|undefined} Feature.\n     */\n    KML.prototype.readPlacemark_ = function (node, objectStack) {\n        var object = pushParseAndPop({ 'geometry': null }, PLACEMARK_PARSERS, node, objectStack);\n        if (!object) {\n            return undefined;\n        }\n        var feature = new Feature();\n        var id = node.getAttribute('id');\n        if (id !== null) {\n            feature.setId(id);\n        }\n        var options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n        var geometry = object['geometry'];\n        if (geometry) {\n            transformGeometryWithOptions(geometry, false, options);\n        }\n        feature.setGeometry(geometry);\n        delete object['geometry'];\n        if (this.extractStyles_) {\n            var style = object['Style'];\n            var styleUrl = object['styleUrl'];\n            var styleFunction = createFeatureStyleFunction(style, styleUrl, this.defaultStyle_, this.sharedStyles_, this.showPointNames_);\n            feature.setStyle(styleFunction);\n        }\n        delete object['Style'];\n        // we do not remove the styleUrl property from the object, so it\n        // gets stored on feature when setProperties is called\n        feature.setProperties(object, true);\n        return feature;\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     */\n    KML.prototype.readSharedStyle_ = function (node, objectStack) {\n        var id = node.getAttribute('id');\n        if (id !== null) {\n            var style = readStyle(node, objectStack);\n            if (style) {\n                var styleUri = void 0;\n                var baseURI = node.baseURI;\n                if (!baseURI || baseURI == 'about:blank') {\n                    baseURI = window.location.href;\n                }\n                if (baseURI) {\n                    var url = new URL('#' + id, baseURI);\n                    styleUri = url.href;\n                }\n                else {\n                    styleUri = '#' + id;\n                }\n                this.sharedStyles_[styleUri] = style;\n            }\n        }\n    };\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @private\n     */\n    KML.prototype.readSharedStyleMap_ = function (node, objectStack) {\n        var id = node.getAttribute('id');\n        if (id === null) {\n            return;\n        }\n        var styleMapValue = readStyleMapValue(node, objectStack);\n        if (!styleMapValue) {\n            return;\n        }\n        var styleUri;\n        var baseURI = node.baseURI;\n        if (!baseURI || baseURI == 'about:blank') {\n            baseURI = window.location.href;\n        }\n        if (baseURI) {\n            var url = new URL('#' + id, baseURI);\n            styleUri = url.href;\n        }\n        else {\n            styleUri = '#' + id;\n        }\n        this.sharedStyles_[styleUri] = styleMapValue;\n    };\n    /**\n     * @inheritDoc\n     */\n    KML.prototype.readFeatureFromNode = function (node, opt_options) {\n        if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n            return null;\n        }\n        var feature = this.readPlacemark_(node, [this.getReadOptions(node, opt_options)]);\n        if (feature) {\n            return feature;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    KML.prototype.readFeaturesFromNode = function (node, opt_options) {\n        if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n            return [];\n        }\n        var features;\n        var localName = node.localName;\n        if (localName == 'Document' || localName == 'Folder') {\n            features = this.readDocumentOrFolder_(node, [this.getReadOptions(node, opt_options)]);\n            if (features) {\n                return features;\n            }\n            else {\n                return [];\n            }\n        }\n        else if (localName == 'Placemark') {\n            var feature = this.readPlacemark_(node, [this.getReadOptions(node, opt_options)]);\n            if (feature) {\n                return [feature];\n            }\n            else {\n                return [];\n            }\n        }\n        else if (localName == 'kml') {\n            features = [];\n            for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n                var fs = this.readFeaturesFromNode(n, opt_options);\n                if (fs) {\n                    extend(features, fs);\n                }\n            }\n            return features;\n        }\n        else {\n            return [];\n        }\n    };\n    /**\n     * Read the name of the KML.\n     *\n     * @param {Document|Element|string} source Source.\n     * @return {string|undefined} Name.\n     * @api\n     */\n    KML.prototype.readName = function (source) {\n        if (!source) {\n            return undefined;\n        }\n        else if (typeof source === 'string') {\n            var doc = parse(source);\n            return this.readNameFromDocument(doc);\n        }\n        else if (isDocument(source)) {\n            return this.readNameFromDocument(/** @type {Document} */ (source));\n        }\n        else {\n            return this.readNameFromNode(/** @type {Element} */ (source));\n        }\n    };\n    /**\n     * @param {Document} doc Document.\n     * @return {string|undefined} Name.\n     */\n    KML.prototype.readNameFromDocument = function (doc) {\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                var name_1 = this.readNameFromNode(/** @type {Element} */ (n));\n                if (name_1) {\n                    return name_1;\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * @param {Element} node Node.\n     * @return {string|undefined} Name.\n     */\n    KML.prototype.readNameFromNode = function (node) {\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                n.localName == 'name') {\n                return readString(n);\n            }\n        }\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            var localName = n.localName;\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                (localName == 'Document' ||\n                    localName == 'Folder' ||\n                    localName == 'Placemark' ||\n                    localName == 'kml')) {\n                var name_2 = this.readNameFromNode(n);\n                if (name_2) {\n                    return name_2;\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Read the network links of the KML.\n     *\n     * @param {Document|Element|string} source Source.\n     * @return {Array<Object>} Network links.\n     * @api\n     */\n    KML.prototype.readNetworkLinks = function (source) {\n        var networkLinks = [];\n        if (typeof source === 'string') {\n            var doc = parse(source);\n            extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n        }\n        else if (isDocument(source)) {\n            extend(networkLinks, this.readNetworkLinksFromDocument(\n            /** @type {Document} */ (source)));\n        }\n        else {\n            extend(networkLinks, this.readNetworkLinksFromNode(\n            /** @type {Element} */ (source)));\n        }\n        return networkLinks;\n    };\n    /**\n     * @param {Document} doc Document.\n     * @return {Array<Object>} Network links.\n     */\n    KML.prototype.readNetworkLinksFromDocument = function (doc) {\n        var networkLinks = [];\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                extend(networkLinks, this.readNetworkLinksFromNode(/** @type {Element} */ (n)));\n            }\n        }\n        return networkLinks;\n    };\n    /**\n     * @param {Element} node Node.\n     * @return {Array<Object>} Network links.\n     */\n    KML.prototype.readNetworkLinksFromNode = function (node) {\n        var networkLinks = [];\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                n.localName == 'NetworkLink') {\n                var obj = pushParseAndPop({}, NETWORK_LINK_PARSERS, n, []);\n                networkLinks.push(obj);\n            }\n        }\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            var localName = n.localName;\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                (localName == 'Document' ||\n                    localName == 'Folder' ||\n                    localName == 'kml')) {\n                extend(networkLinks, this.readNetworkLinksFromNode(n));\n            }\n        }\n        return networkLinks;\n    };\n    /**\n     * Read the regions of the KML.\n     *\n     * @param {Document|Element|string} source Source.\n     * @return {Array<Object>} Regions.\n     * @api\n     */\n    KML.prototype.readRegion = function (source) {\n        var regions = [];\n        if (typeof source === 'string') {\n            var doc = parse(source);\n            extend(regions, this.readRegionFromDocument(doc));\n        }\n        else if (isDocument(source)) {\n            extend(regions, this.readRegionFromDocument(\n            /** @type {Document} */ (source)));\n        }\n        else {\n            extend(regions, this.readRegionFromNode(\n            /** @type {Element} */ (source)));\n        }\n        return regions;\n    };\n    /**\n     * @param {Document} doc Document.\n     * @return {Array<Object>} Region.\n     */\n    KML.prototype.readRegionFromDocument = function (doc) {\n        var regions = [];\n        for (var n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n            if (n.nodeType == Node.ELEMENT_NODE) {\n                extend(regions, this.readRegionFromNode(/** @type {Element} */ (n)));\n            }\n        }\n        return regions;\n    };\n    /**\n     * @param {Element} node Node.\n     * @return {Array<Object>} Region.\n     * @api\n     */\n    KML.prototype.readRegionFromNode = function (node) {\n        var regions = [];\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                n.localName == 'Region') {\n                var obj = pushParseAndPop({}, REGION_PARSERS, n, []);\n                regions.push(obj);\n            }\n        }\n        for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n            var localName = n.localName;\n            if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n                (localName == 'Document' ||\n                    localName == 'Folder' ||\n                    localName == 'kml')) {\n                extend(regions, this.readRegionFromNode(n));\n            }\n        }\n        return regions;\n    };\n    /**\n     * Encode an array of features in the KML format as an XML node. GeometryCollections,\n     * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n     *\n     * @param {Array<Feature>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n     * @return {Node} Node.\n     * @override\n     * @api\n     */\n    KML.prototype.writeFeaturesNode = function (features, opt_options) {\n        opt_options = this.adaptOptions(opt_options);\n        var kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n        var xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n        kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n        kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n        kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n        var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: kml };\n        /** @type {!Object<string, (Array<Feature>|Feature|undefined)>} */\n        var properties = {};\n        if (features.length > 1) {\n            properties['Document'] = features;\n        }\n        else if (features.length == 1) {\n            properties['Placemark'] = features[0];\n        }\n        var orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n        var values = makeSequence(properties, orderedKeys);\n        pushSerializeAndPop(context, KML_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys, this);\n        return kml;\n    };\n    return KML;\n}(XMLFeature));\n/**\n * @param {Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n    var textStyle = null;\n    var textOffset = [0, 0];\n    var textAlign = 'start';\n    if (foundStyle.getImage()) {\n        var imageSize = foundStyle.getImage().getImageSize();\n        if (imageSize === null) {\n            imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n        }\n        if (imageSize.length == 2) {\n            var imageScale = foundStyle.getImage().getScale();\n            // Offset the label to be centered to the right of the icon, if there is\n            // one.\n            textOffset[0] = imageScale * imageSize[0] / 2;\n            textOffset[1] = -imageScale * imageSize[1] / 2;\n            textAlign = 'left';\n        }\n    }\n    if (foundStyle.getText() !== null) {\n        // clone the text style, customizing it with name, alignments and offset.\n        // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n        var foundText = foundStyle.getText();\n        textStyle = foundText.clone();\n        textStyle.setFont(foundText.getFont() || DEFAULT_TEXT_STYLE.getFont());\n        textStyle.setScale(foundText.getScale() || DEFAULT_TEXT_STYLE.getScale());\n        textStyle.setFill(foundText.getFill() || DEFAULT_TEXT_STYLE.getFill());\n        textStyle.setStroke(foundText.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n    }\n    else {\n        textStyle = DEFAULT_TEXT_STYLE.clone();\n    }\n    textStyle.setText(name);\n    textStyle.setOffsetX(textOffset[0]);\n    textStyle.setOffsetY(textOffset[1]);\n    textStyle.setTextAlign(textAlign);\n    var nameStyle = new Style({\n        text: textStyle\n    });\n    return nameStyle;\n}\n/**\n * @param {Array<Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {import(\"../style/Style.js\").StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n    return (\n    /**\n     * @param {Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array<Style>} Style.\n     */\n    function (feature, resolution) {\n        var drawName = showPointNames;\n        /** @type {Style|undefined} */\n        var nameStyle;\n        var name = '';\n        if (drawName) {\n            var geometry = feature.getGeometry();\n            if (geometry) {\n                drawName = geometry.getType() === GeometryType.POINT;\n            }\n        }\n        if (drawName) {\n            name = /** @type {string} */ (feature.get('name'));\n            drawName = drawName && !!name;\n        }\n        if (style) {\n            if (drawName) {\n                nameStyle = createNameStyleFunction(style[0], name);\n                return style.concat(nameStyle);\n            }\n            return style;\n        }\n        if (styleUrl) {\n            var foundStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n            if (drawName) {\n                nameStyle = createNameStyleFunction(foundStyle[0], name);\n                return foundStyle.concat(nameStyle);\n            }\n            return foundStyle;\n        }\n        if (drawName) {\n            nameStyle = createNameStyleFunction(defaultStyle[0], name);\n            return defaultStyle.concat(nameStyle);\n        }\n        return defaultStyle;\n    });\n}\n/**\n * @param {Array<Style>|string|undefined} styleValue Style value.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array<Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n    if (Array.isArray(styleValue)) {\n        return styleValue;\n    }\n    else if (typeof styleValue === 'string') {\n        // KML files in the wild occasionally forget the leading `#` on styleUrls\n        // defined in the same document.  Add a leading `#` if it enables to find\n        // a style.\n        if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n            styleValue = '#' + styleValue;\n        }\n        return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n    }\n    else {\n        return defaultStyle;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {import(\"../color.js\").Color|undefined} Color.\n */\nfunction readColor(node) {\n    var s = getAllTextContent(node, false);\n    // The KML specification states that colors should not include a leading `#`\n    // but we tolerate them.\n    var m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n    if (m) {\n        var hexColor = m[1];\n        return [\n            parseInt(hexColor.substr(6, 2), 16),\n            parseInt(hexColor.substr(4, 2), 16),\n            parseInt(hexColor.substr(2, 2), 16),\n            parseInt(hexColor.substr(0, 2), 16) / 255\n        ];\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Node} node Node.\n * @return {Array<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n    var s = getAllTextContent(node, false);\n    var flatCoordinates = [];\n    // The KML specification states that coordinate tuples should not include\n    // spaces, but we tolerate them.\n    var re = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n    var m;\n    while ((m = re.exec(s))) {\n        var x = parseFloat(m[1]);\n        var y = parseFloat(m[2]);\n        var z = m[3] ? parseFloat(m[3]) : 0;\n        flatCoordinates.push(x, y, z);\n        s = s.substr(m[0].length);\n    }\n    if (s !== '') {\n        return undefined;\n    }\n    return flatCoordinates;\n}\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n    var s = getAllTextContent(node, false).trim();\n    var baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n        baseURI = window.location.href;\n    }\n    if (baseURI) {\n        var url = new URL(s, baseURI);\n        return url.href;\n    }\n    else {\n        return s;\n    }\n}\n/**\n * @param {Element} node Node.\n * @return {Vec2} Vec2.\n */\nfunction readVec2(node) {\n    var xunits = node.getAttribute('xunits');\n    var yunits = node.getAttribute('yunits');\n    var origin;\n    if (xunits !== 'insetPixels') {\n        if (yunits !== 'insetPixels') {\n            origin = IconOrigin.BOTTOM_LEFT;\n        }\n        else {\n            origin = IconOrigin.TOP_LEFT;\n        }\n    }\n    else {\n        if (yunits !== 'insetPixels') {\n            origin = IconOrigin.BOTTOM_RIGHT;\n        }\n        else {\n            origin = IconOrigin.TOP_RIGHT;\n        }\n    }\n    return {\n        x: parseFloat(node.getAttribute('x')),\n        xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n        y: parseFloat(node.getAttribute('y')),\n        yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n        origin: origin\n    };\n}\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n    return readDecimal(node);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar STYLE_MAP_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Pair': pairDataParser\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n    return pushParseAndPop(undefined, STYLE_MAP_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar ICON_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n    // FIXME refreshMode\n    // FIXME refreshInterval\n    // FIXME viewRefreshTime\n    // FIXME viewBoundScale\n    // FIXME viewFormat\n    // FIXME httpQuery\n    var object = pushParseAndPop({}, ICON_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    var IconObject = 'Icon' in object ? object['Icon'] : {};\n    var drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n    var src;\n    var href = /** @type {string|undefined} */ (IconObject['href']);\n    if (href) {\n        src = href;\n    }\n    else if (drawIcon) {\n        src = DEFAULT_IMAGE_STYLE_SRC;\n    }\n    var anchor, anchorXUnits, anchorYUnits;\n    var anchorOrigin = IconOrigin.BOTTOM_LEFT;\n    var hotSpot = /** @type {Vec2|undefined} */ (object['hotSpot']);\n    if (hotSpot) {\n        anchor = [hotSpot.x, hotSpot.y];\n        anchorXUnits = hotSpot.xunits;\n        anchorYUnits = hotSpot.yunits;\n        anchorOrigin = hotSpot.origin;\n    }\n    else if (src === DEFAULT_IMAGE_STYLE_SRC) {\n        anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n        anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n        anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n    }\n    else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n        anchor = [0.5, 0];\n        anchorXUnits = IconAnchorUnits.FRACTION;\n        anchorYUnits = IconAnchorUnits.FRACTION;\n    }\n    var offset;\n    var x = /** @type {number|undefined} */ (IconObject['x']);\n    var y = /** @type {number|undefined} */ (IconObject['y']);\n    if (x !== undefined && y !== undefined) {\n        offset = [x, y];\n    }\n    var size;\n    var w = /** @type {number|undefined} */ (IconObject['w']);\n    var h = /** @type {number|undefined} */ (IconObject['h']);\n    if (w !== undefined && h !== undefined) {\n        size = [w, h];\n    }\n    var rotation;\n    var heading = /** @type {number} */ (object['heading']);\n    if (heading !== undefined) {\n        rotation = toRadians(heading);\n    }\n    var scale = /** @type {number|undefined} */ (object['scale']);\n    if (drawIcon) {\n        if (src == DEFAULT_IMAGE_STYLE_SRC) {\n            size = DEFAULT_IMAGE_STYLE_SIZE;\n            if (scale === undefined) {\n                scale = DEFAULT_IMAGE_SCALE_MULTIPLIER;\n            }\n        }\n        var imageStyle = new Icon({\n            anchor: anchor,\n            anchorOrigin: anchorOrigin,\n            anchorXUnits: anchorXUnits,\n            anchorYUnits: anchorYUnits,\n            crossOrigin: 'anonymous',\n            offset: offset,\n            offsetOrigin: IconOrigin.BOTTOM_LEFT,\n            rotation: rotation,\n            scale: scale,\n            size: size,\n            src: src\n        });\n        styleObject['imageStyle'] = imageStyle;\n    }\n    else {\n        // handle the case when we explicitly want to draw no icon.\n        styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LABEL_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n    // FIXME colorMode\n    var object = pushParseAndPop({}, LABEL_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = objectStack[objectStack.length - 1];\n    var textStyle = new Text({\n        fill: new Fill({\n            color: /** @type {import(\"../color.js\").Color} */ ('color' in object ? object['color'] : DEFAULT_COLOR)\n        }),\n        scale: /** @type {number|undefined} */ (object['scale'])\n    });\n    styleObject['textStyle'] = textStyle;\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LINE_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n    // FIXME colorMode\n    // FIXME gx:outerColor\n    // FIXME gx:outerWidth\n    // FIXME gx:physicalWidth\n    // FIXME gx:labelVisibility\n    var object = pushParseAndPop({}, LINE_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = objectStack[objectStack.length - 1];\n    var strokeStyle = new Stroke({\n        color: /** @type {import(\"../color.js\").Color} */ ('color' in object ? object['color'] : DEFAULT_COLOR),\n        width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n    });\n    styleObject['strokeStyle'] = strokeStyle;\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar POLY_STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n    // FIXME colorMode\n    var object = pushParseAndPop({}, POLY_STYLE_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var styleObject = objectStack[objectStack.length - 1];\n    var fillStyle = new Fill({\n        color: /** @type {import(\"../color.js\").Color} */ ('color' in object ? object['color'] : DEFAULT_COLOR)\n    });\n    styleObject['fillStyle'] = fillStyle;\n    var fill = /** @type {boolean|undefined} */ (object['fill']);\n    if (fill !== undefined) {\n        styleObject['fill'] = fill;\n    }\n    var outline = /** @type {boolean|undefined} */ (object['outline']);\n    if (outline !== undefined) {\n        styleObject['outline'] = outline;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar FLAT_LINEAR_RING_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n    return pushParseAndPop(null, FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n    var gxTrackObject = /** @type {GxTrackObject} */ (objectStack[objectStack.length - 1]);\n    var flatCoordinates = gxTrackObject.flatCoordinates;\n    var s = getAllTextContent(node, false);\n    var re = /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n    var m = re.exec(s);\n    if (m) {\n        var x = parseFloat(m[1]);\n        var y = parseFloat(m[2]);\n        var z = parseFloat(m[3]);\n        flatCoordinates.push(x, y, z, 0);\n    }\n    else {\n        flatCoordinates.push(0, 0, 0, 0);\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n    var lineStrings = pushParseAndPop([], GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n    if (!lineStrings) {\n        return undefined;\n    }\n    return new MultiLineString(lineStrings);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GX_TRACK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'when': whenParser\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'coord': gxCoordParser\n}));\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n    var gxTrackObject = pushParseAndPop(\n    /** @type {GxTrackObject} */ ({\n        flatCoordinates: [],\n        whens: []\n    }), GX_TRACK_PARSERS, node, objectStack);\n    if (!gxTrackObject) {\n        return undefined;\n    }\n    var flatCoordinates = gxTrackObject.flatCoordinates;\n    var whens = gxTrackObject.whens;\n    for (var i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii; ++i) {\n        flatCoordinates[4 * i + 3] = whens[i];\n    }\n    return new LineString(flatCoordinates, GeometryLayout.XYZM);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar ICON_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'x': makeObjectPropertySetter(readDecimal),\n    'y': makeObjectPropertySetter(readDecimal),\n    'w': makeObjectPropertySetter(readDecimal),\n    'h': makeObjectPropertySetter(readDecimal)\n}));\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n    var iconObject = pushParseAndPop({}, ICON_PARSERS, node, objectStack);\n    if (iconObject) {\n        return iconObject;\n    }\n    else {\n        return null;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n    return pushParseAndPop(null, GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n    var properties = pushParseAndPop({}, EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatCoordinates = readFlatCoordinatesFromNode(node, objectStack);\n    if (flatCoordinates) {\n        var lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n        lineString.setProperties(properties, true);\n        return lineString;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n    var properties = pushParseAndPop({}, EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatCoordinates = readFlatCoordinatesFromNode(node, objectStack);\n    if (flatCoordinates) {\n        var polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, [flatCoordinates.length]);\n        polygon.setProperties(properties, true);\n        return polygon;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar MULTI_GEOMETRY_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n    var geometries = pushParseAndPop([], MULTI_GEOMETRY_PARSERS, node, objectStack);\n    if (!geometries) {\n        return null;\n    }\n    if (geometries.length === 0) {\n        return new GeometryCollection(geometries);\n    }\n    var multiGeometry;\n    var homogeneous = true;\n    var type = geometries[0].getType();\n    var geometry;\n    for (var i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        if (geometry.getType() != type) {\n            homogeneous = false;\n            break;\n        }\n    }\n    if (homogeneous) {\n        var layout = void 0;\n        var flatCoordinates = void 0;\n        if (type == GeometryType.POINT) {\n            var point = geometries[0];\n            layout = point.getLayout();\n            flatCoordinates = point.getFlatCoordinates();\n            for (var i = 1, ii = geometries.length; i < ii; ++i) {\n                geometry = geometries[i];\n                extend(flatCoordinates, geometry.getFlatCoordinates());\n            }\n            multiGeometry = new MultiPoint(flatCoordinates, layout);\n            setCommonGeometryProperties(multiGeometry, geometries);\n        }\n        else if (type == GeometryType.LINE_STRING) {\n            multiGeometry = new MultiLineString(geometries);\n            setCommonGeometryProperties(multiGeometry, geometries);\n        }\n        else if (type == GeometryType.POLYGON) {\n            multiGeometry = new MultiPolygon(geometries);\n            setCommonGeometryProperties(multiGeometry, geometries);\n        }\n        else if (type == GeometryType.GEOMETRY_COLLECTION) {\n            multiGeometry = new GeometryCollection(geometries);\n        }\n        else {\n            assert(false, 37); // Unknown geometry type found\n        }\n    }\n    else {\n        multiGeometry = new GeometryCollection(geometries);\n    }\n    return (\n    /** @type {import(\"../geom/Geometry.js\").default} */ (multiGeometry));\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n    var properties = pushParseAndPop({}, EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatCoordinates = readFlatCoordinatesFromNode(node, objectStack);\n    if (flatCoordinates) {\n        var point = new Point(flatCoordinates, GeometryLayout.XYZ);\n        point.setProperties(properties, true);\n        return point;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n    var properties = pushParseAndPop(/** @type {Object<string,*>} */ ({}), EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node, objectStack);\n    var flatLinearRings = pushParseAndPop([null], FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n    if (flatLinearRings && flatLinearRings[0]) {\n        var flatCoordinates = flatLinearRings[0];\n        var ends = [flatCoordinates.length];\n        for (var i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n            extend(flatCoordinates, flatLinearRings[i]);\n            ends.push(flatCoordinates.length);\n        }\n        var polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n        polygon.setProperties(properties, true);\n        return polygon;\n    }\n    else {\n        return undefined;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n    var styleObject = pushParseAndPop({}, STYLE_PARSERS, node, objectStack);\n    if (!styleObject) {\n        return null;\n    }\n    var fillStyle = /** @type {Fill} */ ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n    var fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n    if (fill !== undefined && !fill) {\n        fillStyle = null;\n    }\n    var imageStyle;\n    if ('imageStyle' in styleObject) {\n        if (styleObject['imageStyle'] != DEFAULT_NO_IMAGE_STYLE) {\n            imageStyle = styleObject['imageStyle'];\n        }\n    }\n    else {\n        imageStyle = DEFAULT_IMAGE_STYLE;\n    }\n    var textStyle = /** @type {Text} */ ('textStyle' in styleObject ?\n        styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n    var strokeStyle = /** @type {Stroke} */ ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : DEFAULT_STROKE_STYLE);\n    var outline = /** @type {boolean|undefined} */ (styleObject['outline']);\n    if (outline !== undefined && !outline) {\n        strokeStyle = null;\n    }\n    return [new Style({\n            fill: fillStyle,\n            image: imageStyle,\n            stroke: strokeStyle,\n            text: textStyle,\n            zIndex: undefined // FIXME\n        })];\n}\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {MultiPoint|MultiLineString|MultiPolygon} multiGeometry A multi-geometry.\n * @param {Array<import(\"../geom/Geometry.js\").default>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n    var ii = geometries.length;\n    var extrudes = new Array(geometries.length);\n    var tessellates = new Array(geometries.length);\n    var altitudeModes = new Array(geometries.length);\n    var hasExtrude, hasTessellate, hasAltitudeMode;\n    hasExtrude = hasTessellate = hasAltitudeMode = false;\n    for (var i = 0; i < ii; ++i) {\n        var geometry = geometries[i];\n        extrudes[i] = geometry.get('extrude');\n        tessellates[i] = geometry.get('tessellate');\n        altitudeModes[i] = geometry.get('altitudeMode');\n        hasExtrude = hasExtrude || extrudes[i] !== undefined;\n        hasTessellate = hasTessellate || tessellates[i] !== undefined;\n        hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n    }\n    if (hasExtrude) {\n        multiGeometry.set('extrude', extrudes);\n    }\n    if (hasTessellate) {\n        multiGeometry.set('tessellate', tessellates);\n    }\n    if (hasAltitudeMode) {\n        multiGeometry.set('altitudeMode', altitudeModes);\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar DATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n    var name = node.getAttribute('name');\n    parseNode(DATA_PARSERS, node, objectStack);\n    var featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    if (name && featureObject.displayName) {\n        featureObject[name] = {\n            value: featureObject.value,\n            displayName: featureObject.displayName,\n            toString: function () {\n                return featureObject.value;\n            }\n        };\n    }\n    else if (name !== null) {\n        featureObject[name] = featureObject.value;\n    }\n    else if (featureObject.displayName !== null) {\n        featureObject[featureObject.displayName] = featureObject.value;\n    }\n    delete featureObject['value'];\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar EXTENDED_DATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n    parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n    parseNode(REGION_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar PAIR_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n    var pairObject = pushParseAndPop({}, PAIR_PARSERS, node, objectStack);\n    if (!pairObject) {\n        return;\n    }\n    var key = /** @type {string|undefined} */ (pairObject['key']);\n    if (key && key == 'normal') {\n        var styleUrl = /** @type {string|undefined} */ (pairObject['styleUrl']);\n        if (styleUrl) {\n            objectStack[objectStack.length - 1] = styleUrl;\n        }\n        var style = /** @type {Style} */ (pairObject['Style']);\n        if (style) {\n            objectStack[objectStack.length - 1] = style;\n        }\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n    var styleMapValue = readStyleMapValue(node, objectStack);\n    if (!styleMapValue) {\n        return;\n    }\n    var placemarkObject = objectStack[objectStack.length - 1];\n    if (Array.isArray(styleMapValue)) {\n        placemarkObject['Style'] = styleMapValue;\n    }\n    else if (typeof styleMapValue === 'string') {\n        placemarkObject['styleUrl'] = styleMapValue;\n    }\n    else {\n        assert(false, 38); // `styleMapValue` has an unknown type\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar SCHEMA_DATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n    parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n    var name = node.getAttribute('name');\n    if (name !== null) {\n        var data = readString(node);\n        var featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n        featureObject[name] = data;\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LAT_LON_ALT_BOX_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n    var object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    var extent = [\n        parseFloat(object['west']),\n        parseFloat(object['south']),\n        parseFloat(object['east']),\n        parseFloat(object['north'])\n    ];\n    regionObject['extent'] = extent;\n    regionObject['altitudeMode'] = object['altitudeMode'];\n    regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n    regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LOD_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n    var object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n    if (!object) {\n        return;\n    }\n    var lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n    lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n    lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n    lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar INNER_BOUNDARY_IS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    var flatLinearRing = pushParseAndPop(undefined, INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n    if (flatLinearRing) {\n        var flatLinearRings = /** @type {Array<Array<number>>} */ (objectStack[objectStack.length - 1]);\n        flatLinearRings.push(flatLinearRing);\n    }\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n});\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n    /** @type {Array<number>|undefined} */\n    var flatLinearRing = pushParseAndPop(undefined, OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n    if (flatLinearRing) {\n        var flatLinearRings = /** @type {Array<Array<number>>} */ (objectStack[objectStack.length - 1]);\n        flatLinearRings[0] = flatLinearRing;\n    }\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n    parseNode(LINK_PARSERS, node, objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n    var gxTrackObject = /** @type {GxTrackObject} */ (objectStack[objectStack.length - 1]);\n    var whens = gxTrackObject.whens;\n    var s = getAllTextContent(node, false);\n    var when = Date.parse(s);\n    whens.push(isNaN(when) ? 0 : when);\n}\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {import(\"../color.js\").Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n    var rgba = asArray(color);\n    var opacity = (rgba.length == 4) ? rgba[3] : 1;\n    /** @type {Array<string|number>} */\n    var abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n    for (var i = 0; i < 4; ++i) {\n        var hex = Math.floor(/** @type {number} */ (abgr[i])).toString(16);\n        abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n    }\n    writeStringTextNode(node, abgr.join(''));\n}\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array<number>} coordinates Coordinates.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n    var context = objectStack[objectStack.length - 1];\n    var layout = context['layout'];\n    var stride = context['stride'];\n    var dimension;\n    if (layout == GeometryLayout.XY ||\n        layout == GeometryLayout.XYM) {\n        dimension = 2;\n    }\n    else if (layout == GeometryLayout.XYZ ||\n        layout == GeometryLayout.XYZM) {\n        dimension = 3;\n    }\n    else {\n        assert(false, 34); // Invalid geometry layout\n    }\n    var ii = coordinates.length;\n    var text = '';\n    if (ii > 0) {\n        text += coordinates[0];\n        for (var d = 1; d < dimension; ++d) {\n            text += ',' + coordinates[d];\n        }\n        for (var i = stride; i < ii; i += stride) {\n            text += ' ' + coordinates[i];\n            for (var d = 1; d < dimension; ++d) {\n                text += ',' + coordinates[i + d];\n            }\n        }\n    }\n    writeStringTextNode(node, text);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName)\n});\n/**\n * @param {Element} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n    node.setAttribute('name', pair.name);\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var value = pair.value;\n    if (typeof value == 'object') {\n        if (value !== null && value.displayName) {\n            pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n        }\n        if (value !== null && value.value) {\n            pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n        }\n    }\n    else {\n        pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n    }\n}\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n    writeCDATASection(node, name);\n}\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n    writeStringTextNode(node, value);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar DOCUMENT_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark)\n});\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nvar DOCUMENT_NODE_FACTORY = function (value, objectStack, opt_nodeName) {\n    var parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n/**\n * @param {Node} node Node.\n * @param {Array<Feature>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writeDocument(node, features, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    pushSerializeAndPop(context, DOCUMENT_SERIALIZERS, DOCUMENT_NODE_FACTORY, features, objectStack, undefined, this);\n}\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nvar DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var names = namesAndValues.names;\n    var values = namesAndValues.values;\n    var length = names.length;\n    for (var i = 0; i < length; i++) {\n        pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS, DATA_NODE_FACTORY, [{ name: names[i], value: values[i] }], objectStack);\n    }\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar ICON_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'href'\n], makeStructureNS(GX_NAMESPACE_URIS, [\n    'x', 'y', 'w', 'h'\n]));\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar ICON_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode)\n}, makeStructureNS(GX_NAMESPACE_URIS, {\n    'x': makeChildAppender(writeDecimalTextNode),\n    'y': makeChildAppender(writeDecimalTextNode),\n    'w': makeChildAppender(writeDecimalTextNode),\n    'h': makeChildAppender(writeDecimalTextNode)\n}));\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nvar GX_NODE_FACTORY = function (value, objectStack, opt_nodeName) {\n    return createElementNS(GX_NAMESPACE_URIS[0], 'gx:' + opt_nodeName);\n};\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(icon, orderedKeys);\n    pushSerializeAndPop(context, ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n    orderedKeys =\n        ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n    values = makeSequence(icon, orderedKeys);\n    pushSerializeAndPop(context, ICON_SERIALIZERS, GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar ICON_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar ICON_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode)\n});\n/**\n * @param {Node} node Node.\n * @param {import(\"../style/Icon.js\").default} style Icon style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var /** @type {Object<string, any>} */ properties = {};\n    var src = style.getSrc();\n    var size = style.getSize();\n    var iconImageSize = style.getImageSize();\n    var iconProperties = {\n        'href': src\n    };\n    if (size) {\n        iconProperties['w'] = size[0];\n        iconProperties['h'] = size[1];\n        var anchor = style.getAnchor(); // top-left\n        var origin_1 = style.getOrigin(); // top-left\n        if (origin_1 && iconImageSize && origin_1[0] !== 0 && origin_1[1] !== size[1]) {\n            iconProperties['x'] = origin_1[0];\n            iconProperties['y'] = iconImageSize[1] - (origin_1[1] + size[1]);\n        }\n        if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n            var /** @type {Vec2} */ hotSpot = {\n                x: anchor[0],\n                xunits: IconAnchorUnits.PIXELS,\n                y: size[1] - anchor[1],\n                yunits: IconAnchorUnits.PIXELS\n            };\n            properties['hotSpot'] = hotSpot;\n        }\n    }\n    properties['Icon'] = iconProperties;\n    var scale = style.getScale();\n    if (scale !== 1) {\n        properties['scale'] = scale;\n    }\n    var rotation = style.getRotation();\n    if (rotation !== 0) {\n        properties['heading'] = rotation; // 0-360\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar LABEL_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'color', 'scale'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar LABEL_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode)\n});\n/**\n * @param {Node} node Node.\n * @param {Text} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var properties = {};\n    var fill = style.getFill();\n    if (fill) {\n        properties['color'] = fill.getColor();\n    }\n    var scale = style.getScale();\n    if (scale && scale !== 1) {\n        properties['scale'] = scale;\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar LINE_STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'color', 'width'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar LINE_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode)\n});\n/**\n * @param {Node} node Node.\n * @param {Stroke} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var properties = {\n        'color': style.getColor(),\n        'width': style.getWidth()\n    };\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, string>}\n */\nvar GEOMETRY_TYPE_TO_NODENAME = {\n    'Point': 'Point',\n    'LineString': 'LineString',\n    'LinearRing': 'LinearRing',\n    'Polygon': 'Polygon',\n    'MultiPoint': 'MultiGeometry',\n    'MultiLineString': 'MultiGeometry',\n    'MultiPolygon': 'MultiGeometry',\n    'GeometryCollection': 'MultiGeometry'\n};\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nvar GEOMETRY_NODE_FACTORY = function (value, objectStack, opt_nodeName) {\n    if (value) {\n        var parentNode = objectStack[objectStack.length - 1].node;\n        return createElementNS(parentNode.namespaceURI, GEOMETRY_TYPE_TO_NODENAME[ /** @type {import(\"../geom/Geometry.js\").default} */(value).getType()]);\n    }\n};\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(writeMultiGeometry)\n});\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    var context = { node: node };\n    var type = geometry.getType();\n    /** @type {Array<import(\"../geom/Geometry.js\").default>} */\n    var geometries;\n    /** @type {function(*, Array<*>, string=): (Node|undefined)} */\n    var factory;\n    if (type == GeometryType.GEOMETRY_COLLECTION) {\n        geometries = /** @type {GeometryCollection} */ (geometry).getGeometries();\n        factory = GEOMETRY_NODE_FACTORY;\n    }\n    else if (type == GeometryType.MULTI_POINT) {\n        geometries = /** @type {MultiPoint} */ (geometry).getPoints();\n        factory = POINT_NODE_FACTORY;\n    }\n    else if (type == GeometryType.MULTI_LINE_STRING) {\n        geometries =\n            ( /** @type {MultiLineString} */(geometry)).getLineStrings();\n        factory = LINE_STRING_NODE_FACTORY;\n    }\n    else if (type == GeometryType.MULTI_POLYGON) {\n        geometries =\n            ( /** @type {MultiPolygon} */(geometry)).getPolygons();\n        factory = POLYGON_NODE_FACTORY;\n    }\n    else {\n        assert(false, 39); // Unknown geometry type\n    }\n    pushSerializeAndPop(context, MULTI_GEOMETRY_SERIALIZERS, factory, geometries, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar BOUNDARY_IS_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(writePrimitiveGeometry)\n});\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/LinearRing.js\").default} linearRing Linear ring.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    pushSerializeAndPop(context, BOUNDARY_IS_SERIALIZERS, LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar PLACEMARK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode)\n});\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar PLACEMARK_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n]);\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nvar EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    // set id\n    if (feature.getId()) {\n        node.setAttribute('id', /** @type {string} */ (feature.getId()));\n    }\n    // serialize properties (properties unknown to KML are not serialized)\n    var properties = feature.getProperties();\n    // don't export these to ExtendedData\n    var filter = { 'address': 1, 'description': 1, 'name': 1, 'open': 1,\n        'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1 };\n    filter[feature.getGeometryName()] = 1;\n    var keys = Object.keys(properties || {}).sort().filter(function (v) {\n        return !filter[v];\n    });\n    var styleFunction = feature.getStyleFunction();\n    if (styleFunction) {\n        // FIXME the styles returned by the style function are supposed to be\n        // resolution-independent here\n        var styles = styleFunction(feature, 0);\n        if (styles) {\n            var style = Array.isArray(styles) ? styles[0] : styles;\n            if (this.writeStyles_) {\n                properties['Style'] = style;\n            }\n            var textStyle = style.getText();\n            if (textStyle) {\n                properties['name'] = textStyle.getText();\n            }\n        }\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n    if (keys.length > 0) {\n        var sequence = makeSequence(properties, keys);\n        var namesAndValues = { names: keys, values: sequence };\n        pushSerializeAndPop(context, PLACEMARK_SERIALIZERS, EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n    }\n    // serialize geometry\n    var options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n    var geometry = feature.getGeometry();\n    if (geometry) {\n        geometry = transformGeometryWithOptions(geometry, true, options);\n    }\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS, GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode)\n});\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    context['layout'] = geometry.getLayout();\n    context['stride'] = geometry.getStride();\n    // serialize properties (properties unknown to KML are not serialized)\n    var properties = geometry.getProperties();\n    properties.coordinates = flatCoordinates;\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar POLYGON_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(writeBoundaryIs)\n});\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n/**\n * @param {Node} node Node.\n * @param {Polygon} polygon Polygon.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n    var linearRings = polygon.getLinearRings();\n    var outerRing = linearRings.shift();\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    // inner rings\n    pushSerializeAndPop(context, POLYGON_SERIALIZERS, INNER_BOUNDARY_NODE_FACTORY, linearRings, objectStack);\n    // outer ring\n    pushSerializeAndPop(context, POLYGON_SERIALIZERS, OUTER_BOUNDARY_NODE_FACTORY, [outerRing], objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar POLY_STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode)\n});\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar COLOR_NODE_FACTORY = makeSimpleNodeFactory('color');\n/**\n * @param {Node} node Node.\n * @param {Fill} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS, COLOR_NODE_FACTORY, [style.getColor()], objectStack);\n}\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n    // the Math is to remove any excess decimals created by float arithmetic\n    writeDecimalTextNode(node, Math.round(scale * 1e6) / 1e6);\n}\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar STYLE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n]);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar STYLE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle)\n});\n/**\n * @param {Node} node Node.\n * @param {Style} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeStyle(node, style, objectStack) {\n    var /** @type {import(\"../xml.js\").NodeStackItem} */ context = { node: node };\n    var properties = {};\n    var fillStyle = style.getFill();\n    var strokeStyle = style.getStroke();\n    var imageStyle = style.getImage();\n    var textStyle = style.getText();\n    if (imageStyle && typeof /** @type {?} */ (imageStyle).getSrc === 'function') {\n        properties['IconStyle'] = imageStyle;\n    }\n    if (textStyle) {\n        properties['LabelStyle'] = textStyle;\n    }\n    if (strokeStyle) {\n        properties['LineStyle'] = strokeStyle;\n    }\n    if (fillStyle) {\n        properties['PolyStyle'] = fillStyle;\n    }\n    var parentNode = objectStack[objectStack.length - 1].node;\n    var orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n    var values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, STYLE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n/**\n * @param {Element} node Node to append a TextNode with the Vec2 to.\n * @param {Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n    node.setAttribute('x', String(vec2.x));\n    node.setAttribute('y', String(vec2.y));\n    node.setAttribute('xunits', vec2.xunits);\n    node.setAttribute('yunits', vec2.yunits);\n}\nexport default KML;\n//# sourceMappingURL=KML.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/TopoJSON\n */\nimport Feature from '../Feature.js';\nimport { transformGeometryWithOptions } from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport { get as getProjection } from '../proj.js';\n/**\n * @typedef {import(\"topojson-specification\").Topology} TopoJSONTopology\n * @typedef {import(\"topojson-specification\").GeometryCollection} TopoJSONGeometryCollection\n * @typedef {import(\"topojson-specification\").GeometryObject} TopoJSONGeometry\n * @typedef {import(\"topojson-specification\").Point} TopoJSONPoint\n * @typedef {import(\"topojson-specification\").MultiPoint} TopoJSONMultiPoint\n * @typedef {import(\"topojson-specification\").LineString} TopoJSONLineString\n * @typedef {import(\"topojson-specification\").MultiLineString} TopoJSONMultiLineString\n * @typedef {import(\"topojson-specification\").Polygon} TopoJSONPolygon\n * @typedef {import(\"topojson-specification\").MultiPolygon} TopoJSONMultiPolygon\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {string} [layerName] Set the name of the TopoJSON topology\n * `objects`'s children as feature property with the specified name. This means\n * that when set to `'layer'`, a topology like\n * ```\n * {\n *   \"type\": \"Topology\",\n *   \"objects\": {\n *     \"example\": {\n *       \"type\": \"GeometryCollection\",\n *       \"geometries\": []\n *     }\n *   }\n * }\n * ```\n * will result in features that have a property `'layer'` set to `'example'`.\n * When not set, no property will be added to features.\n * @property {Array<string>} [layers] Names of the TopoJSON topology's\n * `objects`'s children to read features from.  If not provided, features will\n * be read from all children.\n */\n/**\n * @classdesc\n * Feature format for reading data in the TopoJSON format.\n *\n * @api\n */\nvar TopoJSON = /** @class */ (function (_super) {\n    __extends(TopoJSON, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function TopoJSON(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.layerName_ = options.layerName;\n        /**\n         * @private\n         * @type {?Array<string>}\n         */\n        _this.layers_ = options.layers ? options.layers : null;\n        /**\n         * @inheritDoc\n         */\n        _this.dataProjection = getProjection(options.dataProjection ?\n            options.dataProjection : 'EPSG:4326');\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    TopoJSON.prototype.readFeaturesFromObject = function (object, opt_options) {\n        if (object.type == 'Topology') {\n            var topoJSONTopology = /** @type {TopoJSONTopology} */ (object);\n            var transform = void 0, scale = null, translate = null;\n            if (topoJSONTopology['transform']) {\n                transform = topoJSONTopology['transform'];\n                scale = transform['scale'];\n                translate = transform['translate'];\n            }\n            var arcs = topoJSONTopology['arcs'];\n            if (transform) {\n                transformArcs(arcs, scale, translate);\n            }\n            /** @type {Array<Feature>} */\n            var features = [];\n            var topoJSONFeatures = topoJSONTopology['objects'];\n            var property = this.layerName_;\n            var feature = void 0;\n            for (var objectName in topoJSONFeatures) {\n                if (this.layers_ && this.layers_.indexOf(objectName) == -1) {\n                    continue;\n                }\n                if (topoJSONFeatures[objectName].type === 'GeometryCollection') {\n                    feature = /** @type {TopoJSONGeometryCollection} */ (topoJSONFeatures[objectName]);\n                    features.push.apply(features, readFeaturesFromGeometryCollection(feature, arcs, scale, translate, property, objectName, opt_options));\n                }\n                else {\n                    feature = /** @type {TopoJSONGeometry} */ (topoJSONFeatures[objectName]);\n                    features.push(readFeatureFromGeometry(feature, arcs, scale, translate, property, objectName, opt_options));\n                }\n            }\n            return features;\n        }\n        else {\n            return [];\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    TopoJSON.prototype.readProjectionFromObject = function (object) {\n        return this.dataProjection;\n    };\n    return TopoJSON;\n}(JSONFeature));\n/**\n * @const\n * @type {Object<string, function(TopoJSONGeometry, Array, ...Array=): import(\"../geom/Geometry.js\").default>}\n */\nvar GEOMETRY_READERS = {\n    'Point': readPointGeometry,\n    'LineString': readLineStringGeometry,\n    'Polygon': readPolygonGeometry,\n    'MultiPoint': readMultiPointGeometry,\n    'MultiLineString': readMultiLineStringGeometry,\n    'MultiPolygon': readMultiPolygonGeometry\n};\n/**\n * Concatenate arcs into a coordinate array.\n * @param {Array<number>} indices Indices of arcs to concatenate.  Negative\n *     values indicate arcs need to be reversed.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs (already\n *     transformed).\n * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates array.\n */\nfunction concatenateArcs(indices, arcs) {\n    /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n    var coordinates = [];\n    var index, arc;\n    for (var i = 0, ii = indices.length; i < ii; ++i) {\n        index = indices[i];\n        if (i > 0) {\n            // splicing together arcs, discard last point\n            coordinates.pop();\n        }\n        if (index >= 0) {\n            // forward arc\n            arc = arcs[index];\n        }\n        else {\n            // reverse arc\n            arc = arcs[~index].slice().reverse();\n        }\n        coordinates.push.apply(coordinates, arc);\n    }\n    // provide fresh copies of coordinate arrays\n    for (var j = 0, jj = coordinates.length; j < jj; ++j) {\n        coordinates[j] = coordinates[j].slice();\n    }\n    return coordinates;\n}\n/**\n * Create a point from a TopoJSON geometry object.\n *\n * @param {TopoJSONPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {Point} Geometry.\n */\nfunction readPointGeometry(object, scale, translate) {\n    var coordinates = object['coordinates'];\n    if (scale && translate) {\n        transformVertex(coordinates, scale, translate);\n    }\n    return new Point(coordinates);\n}\n/**\n * Create a multi-point from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {MultiPoint} Geometry.\n */\nfunction readMultiPointGeometry(object, scale, translate) {\n    var coordinates = object['coordinates'];\n    if (scale && translate) {\n        for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n            transformVertex(coordinates[i], scale, translate);\n        }\n    }\n    return new MultiPoint(coordinates);\n}\n/**\n * Create a linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {LineString} Geometry.\n */\nfunction readLineStringGeometry(object, arcs) {\n    var coordinates = concatenateArcs(object['arcs'], arcs);\n    return new LineString(coordinates);\n}\n/**\n * Create a multi-linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiLineString} Geometry.\n */\nfunction readMultiLineStringGeometry(object, arcs) {\n    var coordinates = [];\n    for (var i = 0, ii = object['arcs'].length; i < ii; ++i) {\n        coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n    }\n    return new MultiLineString(coordinates);\n}\n/**\n * Create a polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {Polygon} Geometry.\n */\nfunction readPolygonGeometry(object, arcs) {\n    var coordinates = [];\n    for (var i = 0, ii = object['arcs'].length; i < ii; ++i) {\n        coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n    }\n    return new Polygon(coordinates);\n}\n/**\n * Create a multi-polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiPolygon} Geometry.\n */\nfunction readMultiPolygonGeometry(object, arcs) {\n    var coordinates = [];\n    for (var i = 0, ii = object['arcs'].length; i < ii; ++i) {\n        // for each polygon\n        var polyArray = object['arcs'][i];\n        var ringCoords = [];\n        for (var j = 0, jj = polyArray.length; j < jj; ++j) {\n            // for each ring\n            ringCoords[j] = concatenateArcs(polyArray[j], arcs);\n        }\n        coordinates[i] = ringCoords;\n    }\n    return new MultiPolygon(coordinates);\n}\n/**\n * Create features from a TopoJSON GeometryCollection object.\n *\n * @param {TopoJSONGeometryCollection} collection TopoJSON Geometry\n *     object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Array<Feature>} Array of features.\n */\nfunction readFeaturesFromGeometryCollection(collection, arcs, scale, translate, property, name, opt_options) {\n    var geometries = collection['geometries'];\n    var features = [];\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n        features[i] = readFeatureFromGeometry(geometries[i], arcs, scale, translate, property, name, opt_options);\n    }\n    return features;\n}\n/**\n * Create a feature from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON geometry object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Feature} Feature.\n */\nfunction readFeatureFromGeometry(object, arcs, scale, translate, property, name, opt_options) {\n    var geometry;\n    var type = object.type;\n    var geometryReader = GEOMETRY_READERS[type];\n    if ((type === 'Point') || (type === 'MultiPoint')) {\n        geometry = geometryReader(object, scale, translate);\n    }\n    else {\n        geometry = geometryReader(object, arcs);\n    }\n    var feature = new Feature();\n    feature.setGeometry(transformGeometryWithOptions(geometry, false, opt_options));\n    if (object.id !== undefined) {\n        feature.setId(object.id);\n    }\n    var properties = object.properties;\n    if (property) {\n        if (!properties) {\n            properties = {};\n        }\n        properties[property] = name;\n    }\n    if (properties) {\n        feature.setProperties(properties, true);\n    }\n    return feature;\n}\n/**\n * Apply a linear transform to array of arcs.  The provided array of arcs is\n * modified in place.\n *\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArcs(arcs, scale, translate) {\n    for (var i = 0, ii = arcs.length; i < ii; ++i) {\n        transformArc(arcs[i], scale, translate);\n    }\n}\n/**\n * Apply a linear transform to an arc.  The provided arc is modified in place.\n *\n * @param {Array<import(\"../coordinate.js\").Coordinate>} arc Arc.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArc(arc, scale, translate) {\n    var x = 0;\n    var y = 0;\n    for (var i = 0, ii = arc.length; i < ii; ++i) {\n        var vertex = arc[i];\n        x += vertex[0];\n        y += vertex[1];\n        vertex[0] = x;\n        vertex[1] = y;\n        transformVertex(vertex, scale, translate);\n    }\n}\n/**\n * Apply a linear transform to a vertex.  The provided vertex is modified in\n * place.\n *\n * @param {import(\"../coordinate.js\").Coordinate} vertex Vertex.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformVertex(vertex, scale, translate) {\n    vertex[0] = vertex[0] * scale[0] + translate[0];\n    vertex[1] = vertex[1] * scale[1] + translate[1];\n}\nexport default TopoJSON;\n//# sourceMappingURL=TopoJSON.js.map","/**\n * @module ol/source/WMTS\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { expandUrl, createFromTileUrlFunctions, nullTileUrlFunction } from '../tileurlfunction.js';\nimport { find, findIndex, includes } from '../array.js';\nimport { containsExtent } from '../extent.js';\nimport { assign } from '../obj.js';\nimport { get as getProjection, equivalent, transformExtent } from '../proj.js';\nimport TileImage from './TileImage.js';\nimport WMTSRequestEncoding from './WMTSRequestEncoding.js';\nimport { createFromCapabilitiesMatrixSet } from '../tilegrid/WMTS.js';\nimport { appendParams } from '../uri.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Tile cache size. The default depends on the screen size. Will increase if too small.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../tilegrid/WMTS.js\").default} tileGrid Tile grid.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./WMTSRequestEncoding.js\").default|string} [requestEncoding='KVP'] Request encoding.\n * @property {string} layer Layer name as advertised in the WMTS capabilities.\n * @property {string} style Style name as advertised in the WMTS capabilities.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass]  Class used to instantiate image tiles. Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {string} [format='image/jpeg'] Image format. Only used when `requestEncoding` is `'KVP'`.\n * @property {string} [version='1.0.0'] WMTS version.\n * @property {string} matrixSet Matrix set.\n * @property {!Object} [dimensions] Additional \"dimensions\" for tile requests.\n * This is an object with properties named like the advertised WMTS dimensions.\n * @property {string} [url]  A URL for the service.\n * For the RESTful request encoding, this is a URL\n * template.  For KVP encoding, it is normal URL. A `{?-?}` template pattern,\n * for example `subdomain{a-f}.domain.com`, may be used instead of defining\n * each one separately in the `urls` option.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {Array<string>} [urls] An array of URLs.\n * Requests will be distributed among the URLs in this array.\n * @property {boolean} [wrapX=false] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n/**\n * @classdesc\n * Layer source for tile data from WMTS servers.\n * @api\n */\nvar WMTS = /** @class */ (function (_super) {\n    __extends(WMTS, _super);\n    /**\n     * @param {Options} options WMTS options.\n     */\n    function WMTS(options) {\n        // TODO: add support for TileMatrixLimits\n        var _this = this;\n        var requestEncoding = options.requestEncoding !== undefined ?\n            /** @type {import(\"./WMTSRequestEncoding.js\").default} */ (options.requestEncoding) :\n            WMTSRequestEncoding.KVP;\n        // FIXME: should we create a default tileGrid?\n        // we could issue a getCapabilities xhr to retrieve missing configuration\n        var tileGrid = options.tileGrid;\n        var urls = options.urls;\n        if (urls === undefined && options.url !== undefined) {\n            urls = expandUrl(options.url);\n        }\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            projection: options.projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileClass: options.tileClass,\n            tileGrid: tileGrid,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            tileUrlFunction: nullTileUrlFunction,\n            urls: urls,\n            wrapX: options.wrapX !== undefined ? options.wrapX : false,\n            transition: options.transition\n        }) || this;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.version_ = options.version !== undefined ? options.version : '1.0.0';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.format_ = options.format !== undefined ? options.format : 'image/jpeg';\n        /**\n         * @private\n         * @type {!Object}\n         */\n        _this.dimensions_ = options.dimensions !== undefined ? options.dimensions : {};\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.layer_ = options.layer;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.matrixSet_ = options.matrixSet;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.style_ = options.style;\n        // FIXME: should we guess this requestEncoding from options.url(s)\n        //        structure? that would mean KVP only if a template is not provided.\n        /**\n         * @private\n         * @type {import(\"./WMTSRequestEncoding.js\").default}\n         */\n        _this.requestEncoding_ = requestEncoding;\n        _this.setKey(_this.getKeyForDimensions_());\n        if (urls && urls.length > 0) {\n            _this.tileUrlFunction = createFromTileUrlFunctions(urls.map(createFromWMTSTemplate.bind(_this)));\n        }\n        return _this;\n    }\n    /**\n     * Set the URLs to use for requests.\n     * URLs may contain OCG conform URL Template Variables: {TileMatrix}, {TileRow}, {TileCol}.\n     * @override\n     */\n    WMTS.prototype.setUrls = function (urls) {\n        this.urls = urls;\n        var key = urls.join('\\n');\n        this.setTileUrlFunction(createFromTileUrlFunctions(urls.map(createFromWMTSTemplate.bind(this))), key);\n    };\n    /**\n     * Get the dimensions, i.e. those passed to the constructor through the\n     * \"dimensions\" option, and possibly updated using the updateDimensions\n     * method.\n     * @return {!Object} Dimensions.\n     * @api\n     */\n    WMTS.prototype.getDimensions = function () {\n        return this.dimensions_;\n    };\n    /**\n     * Return the image format of the WMTS source.\n     * @return {string} Format.\n     * @api\n     */\n    WMTS.prototype.getFormat = function () {\n        return this.format_;\n    };\n    /**\n     * Return the layer of the WMTS source.\n     * @return {string} Layer.\n     * @api\n     */\n    WMTS.prototype.getLayer = function () {\n        return this.layer_;\n    };\n    /**\n     * Return the matrix set of the WMTS source.\n     * @return {string} MatrixSet.\n     * @api\n     */\n    WMTS.prototype.getMatrixSet = function () {\n        return this.matrixSet_;\n    };\n    /**\n     * Return the request encoding, either \"KVP\" or \"REST\".\n     * @return {import(\"./WMTSRequestEncoding.js\").default} Request encoding.\n     * @api\n     */\n    WMTS.prototype.getRequestEncoding = function () {\n        return this.requestEncoding_;\n    };\n    /**\n     * Return the style of the WMTS source.\n     * @return {string} Style.\n     * @api\n     */\n    WMTS.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Return the version of the WMTS source.\n     * @return {string} Version.\n     * @api\n     */\n    WMTS.prototype.getVersion = function () {\n        return this.version_;\n    };\n    /**\n     * @private\n     * @return {string} The key for the current dimensions.\n     */\n    WMTS.prototype.getKeyForDimensions_ = function () {\n        var i = 0;\n        var res = [];\n        for (var key in this.dimensions_) {\n            res[i++] = key + '-' + this.dimensions_[key];\n        }\n        return res.join('/');\n    };\n    /**\n     * Update the dimensions.\n     * @param {Object} dimensions Dimensions.\n     * @api\n     */\n    WMTS.prototype.updateDimensions = function (dimensions) {\n        assign(this.dimensions_, dimensions);\n        this.setKey(this.getKeyForDimensions_());\n    };\n    return WMTS;\n}(TileImage));\nexport default WMTS;\n/**\n * Generate source options from a capabilities object.\n * @param {Object} wmtsCap An object representing the capabilities document.\n * @param {!Object} config Configuration properties for the layer.  Defaults for\n *                  the layer will apply if not provided.\n *\n * Required config properties:\n *  - layer - {string} The layer identifier.\n *\n * Optional config properties:\n *  - matrixSet - {string} The matrix set identifier, required if there is\n *       more than one matrix set in the layer capabilities.\n *  - projection - {string} The desired CRS when no matrixSet is specified.\n *       eg: \"EPSG:3857\". If the desired projection is not available,\n *       an error is thrown.\n *  - requestEncoding - {string} url encoding format for the layer. Default is\n *       the first tile url format found in the GetCapabilities response.\n *  - style - {string} The name of the style\n *  - format - {string} Image format for the layer. Default is the first\n *       format returned in the GetCapabilities response.\n *  - crossOrigin - {string|null|undefined} Cross origin. Default is `undefined`.\n * @return {?Options} WMTS source options object or `null` if the layer was not found.\n * @api\n */\nexport function optionsFromCapabilities(wmtsCap, config) {\n    var layers = wmtsCap['Contents']['Layer'];\n    var l = find(layers, function (elt, index, array) {\n        return elt['Identifier'] == config['layer'];\n    });\n    if (l === null) {\n        return null;\n    }\n    var tileMatrixSets = wmtsCap['Contents']['TileMatrixSet'];\n    var idx;\n    if (l['TileMatrixSetLink'].length > 1) {\n        if ('projection' in config) {\n            idx = findIndex(l['TileMatrixSetLink'], function (elt, index, array) {\n                var tileMatrixSet = find(tileMatrixSets, function (el) {\n                    return el['Identifier'] == elt['TileMatrixSet'];\n                });\n                var supportedCRS = tileMatrixSet['SupportedCRS'];\n                var proj1 = getProjection(supportedCRS.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n                    getProjection(supportedCRS);\n                var proj2 = getProjection(config['projection']);\n                if (proj1 && proj2) {\n                    return equivalent(proj1, proj2);\n                }\n                else {\n                    return supportedCRS == config['projection'];\n                }\n            });\n        }\n        else {\n            idx = findIndex(l['TileMatrixSetLink'], function (elt, index, array) {\n                return elt['TileMatrixSet'] == config['matrixSet'];\n            });\n        }\n    }\n    else {\n        idx = 0;\n    }\n    if (idx < 0) {\n        idx = 0;\n    }\n    var matrixSet = /** @type {string} */ (l['TileMatrixSetLink'][idx]['TileMatrixSet']);\n    var matrixLimits = /** @type {Array<Object>} */ (l['TileMatrixSetLink'][idx]['TileMatrixSetLimits']);\n    var format = /** @type {string} */ (l['Format'][0]);\n    if ('format' in config) {\n        format = config['format'];\n    }\n    idx = findIndex(l['Style'], function (elt, index, array) {\n        if ('style' in config) {\n            return elt['Title'] == config['style'];\n        }\n        else {\n            return elt['isDefault'];\n        }\n    });\n    if (idx < 0) {\n        idx = 0;\n    }\n    var style = /** @type {string} */ (l['Style'][idx]['Identifier']);\n    var dimensions = {};\n    if ('Dimension' in l) {\n        l['Dimension'].forEach(function (elt, index, array) {\n            var key = elt['Identifier'];\n            var value = elt['Default'];\n            if (value === undefined) {\n                value = elt['Value'][0];\n            }\n            dimensions[key] = value;\n        });\n    }\n    var matrixSets = wmtsCap['Contents']['TileMatrixSet'];\n    var matrixSetObj = find(matrixSets, function (elt, index, array) {\n        return elt['Identifier'] == matrixSet;\n    });\n    var projection;\n    var code = matrixSetObj['SupportedCRS'];\n    if (code) {\n        projection = getProjection(code.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/, '$1:$3')) ||\n            getProjection(code);\n    }\n    if ('projection' in config) {\n        var projConfig = getProjection(config['projection']);\n        if (projConfig) {\n            if (!projection || equivalent(projConfig, projection)) {\n                projection = projConfig;\n            }\n        }\n    }\n    var wgs84BoundingBox = l['WGS84BoundingBox'];\n    var extent, wrapX;\n    if (wgs84BoundingBox !== undefined) {\n        var wgs84ProjectionExtent = getProjection('EPSG:4326').getExtent();\n        wrapX = (wgs84BoundingBox[0] == wgs84ProjectionExtent[0] &&\n            wgs84BoundingBox[2] == wgs84ProjectionExtent[2]);\n        extent = transformExtent(wgs84BoundingBox, 'EPSG:4326', projection);\n        var projectionExtent = projection.getExtent();\n        if (projectionExtent) {\n            // If possible, do a sanity check on the extent - it should never be\n            // bigger than the validity extent of the projection of a matrix set.\n            if (!containsExtent(projectionExtent, extent)) {\n                extent = undefined;\n            }\n        }\n    }\n    var tileGrid = createFromCapabilitiesMatrixSet(matrixSetObj, extent, matrixLimits);\n    /** @type {!Array<string>} */\n    var urls = [];\n    var requestEncoding = config['requestEncoding'];\n    requestEncoding = requestEncoding !== undefined ? requestEncoding : '';\n    if ('OperationsMetadata' in wmtsCap && 'GetTile' in wmtsCap['OperationsMetadata']) {\n        var gets = wmtsCap['OperationsMetadata']['GetTile']['DCP']['HTTP']['Get'];\n        for (var i = 0, ii = gets.length; i < ii; ++i) {\n            if (gets[i]['Constraint']) {\n                var constraint = find(gets[i]['Constraint'], function (element) {\n                    return element['name'] == 'GetEncoding';\n                });\n                var encodings = constraint['AllowedValues']['Value'];\n                if (requestEncoding === '') {\n                    // requestEncoding not provided, use the first encoding from the list\n                    requestEncoding = encodings[0];\n                }\n                if (requestEncoding === WMTSRequestEncoding.KVP) {\n                    if (includes(encodings, WMTSRequestEncoding.KVP)) {\n                        urls.push(/** @type {string} */ (gets[i]['href']));\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            else if (gets[i]['href']) {\n                requestEncoding = WMTSRequestEncoding.KVP;\n                urls.push(/** @type {string} */ (gets[i]['href']));\n            }\n        }\n    }\n    if (urls.length === 0) {\n        requestEncoding = WMTSRequestEncoding.REST;\n        l['ResourceURL'].forEach(function (element) {\n            if (element['resourceType'] === 'tile') {\n                format = element['format'];\n                urls.push(/** @type {string} */ (element['template']));\n            }\n        });\n    }\n    return {\n        urls: urls,\n        layer: config['layer'],\n        matrixSet: matrixSet,\n        format: format,\n        projection: projection,\n        requestEncoding: requestEncoding,\n        tileGrid: tileGrid,\n        style: style,\n        dimensions: dimensions,\n        wrapX: wrapX,\n        crossOrigin: config['crossOrigin']\n    };\n}\n/**\n * @param {string} template Template.\n * @return {import(\"../Tile.js\").UrlFunction} Tile URL function.\n * @this {WMTS}\n */\nfunction createFromWMTSTemplate(template) {\n    var requestEncoding = this.requestEncoding_;\n    // context property names are lower case to allow for a case insensitive\n    // replacement as some services use different naming conventions\n    var context = {\n        'layer': this.layer_,\n        'style': this.style_,\n        'tilematrixset': this.matrixSet_\n    };\n    if (requestEncoding == WMTSRequestEncoding.KVP) {\n        assign(context, {\n            'Service': 'WMTS',\n            'Request': 'GetTile',\n            'Version': this.version_,\n            'Format': this.format_\n        });\n    }\n    // TODO: we may want to create our own appendParams function so that params\n    // order conforms to wmts spec guidance, and so that we can avoid to escape\n    // special template params\n    template = (requestEncoding == WMTSRequestEncoding.KVP) ?\n        appendParams(template, context) :\n        template.replace(/\\{(\\w+?)\\}/g, function (m, p) {\n            return (p.toLowerCase() in context) ? context[p.toLowerCase()] : m;\n        });\n    var tileGrid = /** @type {import(\"../tilegrid/WMTS.js\").default} */ (this.tileGrid);\n    var dimensions = this.dimensions_;\n    return (\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n            return undefined;\n        }\n        else {\n            var localContext_1 = {\n                'TileMatrix': tileGrid.getMatrixId(tileCoord[0]),\n                'TileCol': tileCoord[1],\n                'TileRow': tileCoord[2]\n            };\n            assign(localContext_1, dimensions);\n            var url = template;\n            if (requestEncoding == WMTSRequestEncoding.KVP) {\n                url = appendParams(url, localContext_1);\n            }\n            else {\n                url = url.replace(/\\{(\\w+?)\\}/g, function (m, p) {\n                    return localContext_1[p];\n                });\n            }\n            return url;\n        }\n    });\n}\n//# sourceMappingURL=WMTS.js.map","/**\n * @module ol/source/WMTSRequestEncoding\n */\n/**\n * Request encoding. One of 'KVP', 'REST'.\n * @enum {string}\n */\nexport default {\n    KVP: 'KVP',\n    REST: 'REST' // see spec 10\n};\n//# sourceMappingURL=WMTSRequestEncoding.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/TextFeature\n */\nimport { abstract } from '../util.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @abstract\n */\nvar TextFeature = /** @class */ (function (_super) {\n    __extends(TextFeature, _super);\n    function TextFeature() {\n        return _super.call(this) || this;\n    }\n    /**\n     * @inheritDoc\n     */\n    TextFeature.prototype.getType = function () {\n        return FormatType.TEXT;\n    };\n    /**\n     * Read the feature from the source.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     * @api\n     */\n    TextFeature.prototype.readFeature = function (source, opt_options) {\n        return this.readFeatureFromText(getText(source), this.adaptOptions(opt_options));\n    };\n    /**\n     * @abstract\n     * @param {string} text Text.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @protected\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n    TextFeature.prototype.readFeatureFromText = function (text, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read the features from the source.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     * @api\n     */\n    TextFeature.prototype.readFeatures = function (source, opt_options) {\n        return this.readFeaturesFromText(getText(source), this.adaptOptions(opt_options));\n    };\n    /**\n     * @abstract\n     * @param {string} text Text.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @protected\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n    TextFeature.prototype.readFeaturesFromText = function (text, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read the geometry from the source.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     * @api\n     */\n    TextFeature.prototype.readGeometry = function (source, opt_options) {\n        return this.readGeometryFromText(getText(source), this.adaptOptions(opt_options));\n    };\n    /**\n     * @abstract\n     * @param {string} text Text.\n     * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n     * @protected\n     * @return {import(\"../geom/Geometry.js\").default} Geometry.\n     */\n    TextFeature.prototype.readGeometryFromText = function (text, opt_options) {\n        return abstract();\n    };\n    /**\n     * Read the projection from the source.\n     *\n     * @param {Document|Node|Object|string} source Source.\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     * @api\n     */\n    TextFeature.prototype.readProjection = function (source) {\n        return this.readProjectionFromText(getText(source));\n    };\n    /**\n     * @param {string} text Text.\n     * @protected\n     * @return {import(\"../proj/Projection.js\").default} Projection.\n     */\n    TextFeature.prototype.readProjectionFromText = function (text) {\n        return this.dataProjection;\n    };\n    /**\n     * Encode a feature as a string.\n     *\n     * @param {import(\"../Feature.js\").default} feature Feature.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Encoded feature.\n     * @api\n     */\n    TextFeature.prototype.writeFeature = function (feature, opt_options) {\n        return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n    };\n    /**\n     * @abstract\n     * @param {import(\"../Feature.js\").default} feature Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @protected\n     * @return {string} Text.\n     */\n    TextFeature.prototype.writeFeatureText = function (feature, opt_options) {\n        return abstract();\n    };\n    /**\n     * Encode an array of features as string.\n     *\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Encoded features.\n     * @api\n     */\n    TextFeature.prototype.writeFeatures = function (features, opt_options) {\n        return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"../Feature.js\").default>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @protected\n     * @return {string} Text.\n     */\n    TextFeature.prototype.writeFeaturesText = function (features, opt_options) {\n        return abstract();\n    };\n    /**\n     * Write a single geometry.\n     *\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @return {string} Geometry.\n     * @api\n     */\n    TextFeature.prototype.writeGeometry = function (geometry, opt_options) {\n        return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n    };\n    /**\n     * @abstract\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n     * @protected\n     * @return {string} Text.\n     */\n    TextFeature.prototype.writeGeometryText = function (geometry, opt_options) {\n        return abstract();\n    };\n    return TextFeature;\n}(FeatureFormat));\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {string} Text.\n */\nfunction getText(source) {\n    if (typeof source === 'string') {\n        return source;\n    }\n    else {\n        return '';\n    }\n}\nexport default TextFeature;\n//# sourceMappingURL=TextFeature.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/format/IGC\n */\nimport Feature from '../Feature.js';\nimport { transformGeometryWithOptions } from './Feature.js';\nimport TextFeature from './TextFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport { get as getProjection } from '../proj.js';\n/**\n * IGC altitude/z. One of 'barometric', 'gps', 'none'.\n * @enum {string}\n */\nvar IGCZ = {\n    BAROMETRIC: 'barometric',\n    GPS: 'gps',\n    NONE: 'none'\n};\n/**\n * @const\n * @type {RegExp}\n */\nvar B_RECORD_RE = /^B(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{5})([NS])(\\d{3})(\\d{5})([EW])([AV])(\\d{5})(\\d{5})/;\n/**\n * @const\n * @type {RegExp}\n */\nvar H_RECORD_RE = /^H.([A-Z]{3}).*?:(.*)/;\n/**\n * @const\n * @type {RegExp}\n */\nvar HFDTE_RECORD_RE = /^HFDTE(\\d{2})(\\d{2})(\\d{2})/;\n/**\n * A regular expression matching the newline characters `\\r\\n`, `\\r` and `\\n`.\n *\n * @const\n * @type {RegExp}\n */\nvar NEWLINE_RE = /\\r\\n|\\r|\\n/;\n/**\n * @typedef {Object} Options\n * @property {IGCZ|string} [altitudeMode='none'] Altitude mode. Possible\n * values are `'barometric'`, `'gps'`, and `'none'`.\n */\n/**\n * @classdesc\n * Feature format for `*.igc` flight recording files.\n *\n * As IGC sources contain a single feature,\n * {@link module:ol/format/IGC~IGC#readFeatures} will return the feature in an\n * array\n *\n * @api\n */\nvar IGC = /** @class */ (function (_super) {\n    __extends(IGC, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function IGC(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @inheritDoc\n         */\n        _this.dataProjection = getProjection('EPSG:4326');\n        /**\n         * @private\n         * @type {IGCZ}\n         */\n        _this.altitudeMode_ = options.altitudeMode ? options.altitudeMode : IGCZ.NONE;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    IGC.prototype.readFeatureFromText = function (text, opt_options) {\n        var altitudeMode = this.altitudeMode_;\n        var lines = text.split(NEWLINE_RE);\n        /** @type {Object<string, string>} */\n        var properties = {};\n        var flatCoordinates = [];\n        var year = 2000;\n        var month = 0;\n        var day = 1;\n        var lastDateTime = -1;\n        var i, ii;\n        for (i = 0, ii = lines.length; i < ii; ++i) {\n            var line = lines[i];\n            var m = void 0;\n            if (line.charAt(0) == 'B') {\n                m = B_RECORD_RE.exec(line);\n                if (m) {\n                    var hour = parseInt(m[1], 10);\n                    var minute = parseInt(m[2], 10);\n                    var second = parseInt(m[3], 10);\n                    var y = parseInt(m[4], 10) + parseInt(m[5], 10) / 60000;\n                    if (m[6] == 'S') {\n                        y = -y;\n                    }\n                    var x = parseInt(m[7], 10) + parseInt(m[8], 10) / 60000;\n                    if (m[9] == 'W') {\n                        x = -x;\n                    }\n                    flatCoordinates.push(x, y);\n                    if (altitudeMode != IGCZ.NONE) {\n                        var z = void 0;\n                        if (altitudeMode == IGCZ.GPS) {\n                            z = parseInt(m[11], 10);\n                        }\n                        else if (altitudeMode == IGCZ.BAROMETRIC) {\n                            z = parseInt(m[12], 10);\n                        }\n                        else {\n                            z = 0;\n                        }\n                        flatCoordinates.push(z);\n                    }\n                    var dateTime = Date.UTC(year, month, day, hour, minute, second);\n                    // Detect UTC midnight wrap around.\n                    if (dateTime < lastDateTime) {\n                        dateTime = Date.UTC(year, month, day + 1, hour, minute, second);\n                    }\n                    flatCoordinates.push(dateTime / 1000);\n                    lastDateTime = dateTime;\n                }\n            }\n            else if (line.charAt(0) == 'H') {\n                m = HFDTE_RECORD_RE.exec(line);\n                if (m) {\n                    day = parseInt(m[1], 10);\n                    month = parseInt(m[2], 10) - 1;\n                    year = 2000 + parseInt(m[3], 10);\n                }\n                else {\n                    m = H_RECORD_RE.exec(line);\n                    if (m) {\n                        properties[m[1]] = m[2].trim();\n                    }\n                }\n            }\n        }\n        if (flatCoordinates.length === 0) {\n            return null;\n        }\n        var layout = altitudeMode == IGCZ.NONE ? GeometryLayout.XYM : GeometryLayout.XYZM;\n        var lineString = new LineString(flatCoordinates, layout);\n        var feature = new Feature(transformGeometryWithOptions(lineString, false, opt_options));\n        feature.setProperties(properties, true);\n        return feature;\n    };\n    /**\n     * @inheritDoc\n     */\n    IGC.prototype.readFeaturesFromText = function (text, opt_options) {\n        var feature = this.readFeatureFromText(text, opt_options);\n        if (feature) {\n            return [feature];\n        }\n        else {\n            return [];\n        }\n    };\n    return IGC;\n}(TextFeature));\nexport default IGC;\n//# sourceMappingURL=IGC.js.map","/*!\n * PEP v0.5.3 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure !== undefined && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 1;\n    e.height = inDict.height || 1;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    e.detail = 0;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target != null && target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture', { bubbles: true });\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture', { bubbles: true });\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(s) {\n    return 'body /shadow-deep/ ' + s;\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    { selector: '[touch-action=\"none\"]', value: 'none' },\n    { selector: '[touch-action=\"auto\"]', value: 'auto' },\n    { selector: '[touch-action~=\"pan-x\"]', value: 'pan-x' },\n    { selector: '[touch-action~=\"pan-y\"]', value: 'pan-y' },\n    { selector: '[touch-action~=\"pan-up\"]', value: 'pan-up' },\n    { selector: '[touch-action~=\"pan-down\"]', value: 'pan-down' },\n    { selector: '[touch-action~=\"pan-left\"]', value: 'pan-left' },\n    { selector: '[touch-action~=\"pan-right\"]', value: 'pan-right' }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        styles += r.selector + rule(r.value) + '\\n';\n        if (hasShadowRoot) {\n          styles += shadowSelector(r.selector) + rule(r.value) + '\\n';\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'webkitmouseforcechanged',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      if ('webkitForce' in inEvent) {\n        e.pressure = inEvent.webkitForce - MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN;\n      }\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n\n    // This is called when the user force presses without moving x/y\n    webkitmouseforcechanged: function(inEvent) {\n      this.mousemove(inEvent);\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // this should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // bitmask for _scrollType\n  var UP = 1;\n  var DOWN = 2;\n  var LEFT = 4;\n  var RIGHT = 8;\n  var AUTO = UP | DOWN | LEFT | RIGHT;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchforcechange',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (typeof st === \"number\") {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n\n      // In some cases, an element is removed before a touchend.\n      // When this is the case, we should wait for the touchend before unlistening,\n      // because we still want pointer events to bubble up after removing from DOM.\n      if (pointermap$1.size > 0) {\n        var evts = this.events;\n        el.addEventListener('touchend', function() {\n          el._scrollType = undefined;\n          dispatcher.unlisten(el, evts);\n        });\n      } else {\n        el._scrollType = undefined;\n        dispatcher.unlisten(el, this.events);\n      }\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (typeof st === \"number\" && typeof oldSt === \"number\") {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (typeof oldSt === \"number\") {\n        this.elementRemoved(el);\n      } else if (typeof st === \"number\") {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      UP: function(s) {\n        return s.includes('pan-y') || s.includes('pan-up') ? UP : 0;\n      },\n      DOWN: function(s) {\n        return s.includes('pan-y') || s.includes('pan-down') ? DOWN : 0;\n      },\n      LEFT: function(s) {\n        return s.includes('pan-x') || s.includes('pan-left') ? LEFT : 0;\n      },\n      RIGHT: function(s) {\n        return s.includes('pan-x') || s.includes('pan-right') ? RIGHT : 0;\n      }\n    },\n    touchActionToScrollType: function(touchAction) {\n      if (!touchAction) {\n        return;\n      }\n\n      if (touchAction === \"auto\") {\n        return AUTO;\n      }\n\n      if (touchAction === \"none\") {\n        return 0;\n      }\n\n      var s = touchAction.split(' ');\n      var st = this.scrollTypes;\n\n      // construct a bitmask of allowed scroll directions\n      return st.UP(s) | st.DOWN(s) | st.LEFT(s) | st.RIGHT(s);\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove' || type === 'touchforcechange') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force !== undefined ?\n        inTouch.force :\n        inTouch.webkitForce !== undefined ?\n          inTouch.webkitForce : undefined;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      if (inTouch.altitudeAngle) {\n        var tan = Math.tan(inTouch.altitudeAngle);\n        var radToDeg = 180 / Math.PI;\n        e.tiltX = Math.atan(Math.cos(inTouch.azimuthAngle) / tan) * radToDeg;\n        e.tiltY = Math.atan(Math.sin(inTouch.azimuthAngle) / tan) * radToDeg;\n      } else {\n        e.tiltX = 0;\n        e.tiltY = 0;\n      }\n      if (inTouch.touchType === 'stylus') {\n        e.pointerType = 'pen';\n      } else {\n        e.pointerType = this.POINTER_TYPE;\n      }\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var st = inEvent.currentTarget._scrollType;\n        if (st === 0) {\n\n          // this element is a `touch-action: none`, should never scroll\n          ret = false;\n        } else if (st === AUTO) {\n\n          // this element is a `touch-action: auto`, should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          var dy = t.clientY - this.firstXY.Y;\n          var dya = Math.abs(dy);\n          var dx = t.clientX - this.firstXY.X;\n          var dxa = Math.abs(dx);\n\n          var up = st & UP;\n          var down = st & DOWN;\n          var left = st & LEFT;\n          var right = st & RIGHT;\n\n          if (left && right) {\n\n            // should scroll on the x axis\n            ret = dxa > dya;\n          } else if (left) {\n\n            // should scroll left\n            ret = dxa > dya && dx > 0;\n          } else if (right) {\n\n            // should scroll right\n            ret = dxa > dya && dx < 0;\n          }\n\n          if (!ret) {\n            if (up && down) {\n\n              // should scroll on the y axis\n              ret = dxa < dya;\n            } else if (up) {\n\n              // should scroll up\n              ret = dxa < dya && dy > 0;\n            } else if (down) {\n\n              // should scroll down\n              ret = dxa < dya && dy < 0;\n            }\n          }\n\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n\n    // Called when pressure or tilt changes without the x/y changing\n    touchforcechange: function(inEvent) {\n      this.touchmove(inEvent);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          if (inEvent.type !== 'touchforcechange') {\n            inEvent.preventDefault();\n          }\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('NotFoundError');\n      error.name = 'NotFoundError';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !Element.prototype.setPointerCapture) {\n      Object.defineProperties(Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));"],"sourceRoot":""}